var CanvasSpace,Circle,Color,Const,Curve,DOMSpace,Easing,Form,Grid,GridCascade,Line,Matrix,Noise,Pair,Particle,ParticleEmitter,ParticleField,ParticleSystem,Point,PointSet,QuadTree,Rectangle,SVGForm,SVGSpace,SamplePoints,Space,StripeBound,Timer,Triangle,UI,Util,Vector,extend=function(J,b){function m(){this.constructor=J}for(var g in b)hasProp.call(b,g)&&(J[g]=b[g]);return m.prototype=b.prototype,J.prototype=new m,J.__super__=b.prototype,J},hasProp={}.hasOwnProperty,slice=[].slice;
this.Const=Const=function(){function J(){}return J.xy="xy",J.yz="yz",J.xz="xz",J.xyz="xyz",J.identical=-1,J.right=3,J.bottom_right=4,J.bottom=5,J.bottom_left=6,J.left=7,J.top_left=0,J.top=1,J.top_right=2,J.sideLabels="identical;right;bottom right;bottom;bottom left;left;top left;top;top right".split(";"),J.epsilon=1E-4,J.pi=Math.PI,J.two_pi=6.283185307179586,J.half_pi=1.5707963267948966,J.quarter_pi=.7853981633974483,J.one_degree=.017453292519943295,J.rad_to_deg=57.29577951308232,J.deg_to_rad=.017453292519943295,
J.gravity=9.81,J.newton=.10197,J.gaussian=.3989422804014327,J}();
this.Matrix=Matrix=function(){function J(){}return J.rotateAnchor2D=function(b,m,g){var h,c,l;return null==g&&(g=Const.xy),h=m.get2D(g),c=Math.cos(b),l=Math.sin(b),[c,l,0,-l,c,0,h.x*(1-c)+h.y*l,h.y*(1-c)-h.x*l,1]},J.reflectAnchor2D=function(b,m){var g,h,c,l;return null==m&&(m=Const.xy),c=b.intercept(m),g=2*Math.atan(c.slope),h=Math.cos(g),l=Math.sin(g),[h,l,0,l,-h,0,-c.yi*l,c.yi+c.yi*h,1]},J.shearAnchor2D=function(b,m,g,h){var c,l,e;return null==h&&(h=Const.xy),c=g.get2D(h),l=Math.tan(b),e=Math.tan(m),
[1,l,0,e,1,0,-c.y*e,-c.x*l,1]},J.scaleAnchor2D=function(b,m,g,h){var c;return null==h&&(h=Const.xy),c=g.get2D(h),[b,0,0,0,m,0,-c.x*b+c.x,-c.y*m+c.y,1]},J.scale2D=function(b,m){return[b,0,0,0,m,0,0,0,1]},J.shear2D=function(b,m){return[1,Math.tan(b),0,Math.tan(m),1,0,0,0,1]},J.rotate2D=function(b,m){return[b,m,0,-m,b,0,0,0,1]},J.translate2D=function(b,m){return[1,0,0,0,1,0,b,m,1]},J.transform2D=function(b,m,g,h){var c,l,e;return null==g&&(g=Const.xy),null==h&&(h=!1),c=b.get2D(g),l=c.x*m[0]+c.y*m[3]+
m[6],e=c.x*m[1]+c.y*m[4]+m[7],c.x=l,c.y=e,c=c.get2D(g,!0),h?c:(b.set(c),b)},J}();
this.Util=Util=function(){function J(){}return J.toRadian=function(b){return b*Const.deg_to_rad},J.toDegree=function(b){return b*Const.rad_to_deg},J.toHexColor=function(b){var m;return m=Math.floor(b).toString(16),1===m.length?"0"+m:m},J.toRGBColor=function(b,m,g){var h,c,l;return null==m&&(m=!1),null==g&&(g=1),"#"===b[0]&&(b=b.substr(1)),3===b.length?(l=parseInt(b[0]+b[0],16),c=parseInt(b[1]+b[1],16),h=parseInt(b[2]+b[2],16)):6<=b.length?(l=parseInt(b[0]+b[1],16),c=parseInt(b[2]+b[3],16),h=parseInt(b[4]+
b[5],16)):(l=0,c=0,h=0),m?"rgba("+l+","+c+","+h+","+g+")":[l,c,h,g]},J.bound=function(b,m,g){var h,c;return null==g&&(g=!1),h=b%m,c=m/2,h>c?h-=m:-c>h&&(h+=m),g&&0>h?h+m:h},J.boundAngle=function(b,m){return J.bound(b,360,m)},J.boundRadian=function(b,m){return J.bound(b,Const.two_pi,m)},J.boundingBox=function(b,m){var g,h,c,l,e;null==m&&(m=!1);l=new Point(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);c=new Point(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);g=0;for(h=b.length;h>g;g++)e=b[g],
e.x<l.x&&(l.x=e.x),e.y<l.y&&(l.y=e.y),e.x>c.x&&(c.x=e.x),e.y>c.y&&(c.y=e.y),m&&(e.z<l.z&&(l.z=e.z),e.z>c.z&&(c.z=e.z));return(new Rectangle(l)).to(c)},J.lerp=function(b,m,g){return(1-g)*b+g*m},J.centroid=function(b){var m,g,h,c;g=new Vector;m=0;for(h=b.length;h>m;m++)c=b[m],g.add(c);return g.divide(b.length)},J.same=function(b,m,g){return null==g&&(g=Const.epsilon),Math.abs(b-m)<g},J.within=function(b,m,g){return b>=Math.min(m,g)&&b<=Math.max(m,g)},J.randomRange=function(b,m){var g;return null==m&&
(m=0),g=b>m?b-m:m-b,b+Math.random()*g},J.mixin=function(b,m){for(var g in m)m.hasOwnProperty(g)&&(b.prototype[g]=m[g]);return b},J.extend=function(b,m){return b.prototype=Object.create(m.prototype),b.prototype.constructor=b,b},J.clonePoints=function(b){var m,g,h,c;c=[];m=0;for(g=b.length;g>m;m++)h=b[m],c.push(h.clone());return c},J.contextRotateOrigin=function(b,m,g,h,c){var l;return null==h&&(h=!1),l=m.size(),h||(h=l.$multiply(.5),h.add(m)),c&&(c.size(),Form.rect(b,c),b.clip()),b.translate(h.x,h.y),
b.rotate(g),b.translate(-h.x,-h.y)},J.sinCosTable=function(){var b,m,g,h;m=[];h=[];for(g=b=0;360>=b;g=b+=1)m[g]=Math.cos(g*Math.PI/180),h[g]=Math.sin(g*Math.PI/180);return{sin:h,cos:m}},J.chance=function(b){return Math.random()<b},J.gaussian=function(b,m,g){return null==m&&(m=0),null==g&&(g=1),b=(b-m)/g,Const.gaussian*Math.exp(-.5*b*b)/g},J}();
this.Timer=Timer=function(){function J(b){null==b&&(b=1E3);this.duration=b;this._time=0;this._ease=function(b,g,h,c){return b/c};this._intervalID=-1}return J.prototype.start=function(b){var m;return m=Math.min(Date.now()-this._time,this.duration),b||m>=this.duration?this._time=Date.now():void 0},J.prototype.setEasing=function(b){return this._ease=b},J.prototype.check=function(){var b;return b=Math.min(Date.now()-this._time,this.duration),this._ease(b,0,1,this.duration)},J.prototype.track=function(b){var m;
return clearInterval(this._intervalID),this.start(!0),m=this,this._intervalID=setInterval(function(){var g;return g=m.check(),b(g),1<=g?clearInterval(m._intervalID):void 0},25),this._intervalID},J}();
this.Space=Space=function(){function J(b){null==b&&(b="space");this.id=b;this.size=new Vector;this.center=new Vector;this._timeDiff=this._timePrev=0;this._timeEnd=-1;this.items={};this._animID=-1;this._animCount=0;this._animPause=!1;this._refresh=!0}return J.prototype.refresh=function(b){return this._refresh=b,this},J.prototype.render=function(b){return this},J.prototype.resize=function(b,m){},J.prototype.clear=function(){},J.prototype.add=function(b){var m;if(null==b.animate||"function"!=typeof b.animate)throw"a player object for Space.add must define animate()";
return m=this._animCount++,this.items[m]=b,b.animateID=m,null!=b.onSpaceResize&&b.onSpaceResize(this.size.x,this.size.y),this},J.prototype.remove=function(b){return delete this.items[b.animateID],this},J.prototype.removeAll=function(){return this.items={},this},J.prototype.play=function(b){if(null==b&&(b=0),this._animID=requestAnimationFrame(function(b){return function(g){return b.play(g)}}(this)),!this._animPause){this._timeDiff=b-this._timePrev;try{this._playItems(b)}catch(m){throw cancelAnimationFrame(this._animID),
console.error(m.stack),m;}return this._timePrev=b,this}},J.prototype._playItems=function(b){var m,g,h;this._refresh&&this.clear();g=this.items;for(m in g)h=g[m],h.animate(b,this._timeDiff,this.ctx);return 0<=this._timeEnd&&b>this._timeEnd&&cancelAnimationFrame(this._animID),this},J.prototype.pause=function(b){return null==b&&(b=!1),this._animPause=b?!this._animPause:!0,this},J.prototype.resume=function(){return this._animPause=!1,this},J.prototype.stop=function(b){return null==b&&(b=0),this._timeEnd=
b,this},J.prototype.playTime=function(b){return null==b&&(b=5E3),this.play(),this.stop(b)},J}();
this.CanvasSpace=CanvasSpace=function(J){function b(m,g,h){null==m&&(m="pt_space");null==g&&(g=!1);null==h&&(h="2d");b.__super__.constructor.apply(this,arguments);this.space=document.querySelector("#"+this.id);this.appended=!0;this.space||(this.space=document.createElement("canvas"),this.space.setAttribute("id",this.id),this.appended=!1);this._mdrag=this._mdown=!1;this.bgcolor=g;this.ctx=this.space.getContext(h)}return extend(b,J),b.prototype.display=function(b,g){var h,c;if(null==b&&(b="#pt"),!this.appended){if(h=
document.querySelector(b),c=h.getBoundingClientRect(),!h)throw"Cannot add canvas to element "+b;this.resize(c.width,c.height);window.addEventListener("resize",function(b){return c=h.getBoundingClientRect(),this.resize(c.width,c.height,b)}.bind(this));this.space.parentNode!==h&&h.appendChild(this.space);this.appended=!0;setTimeout(function(){return this.space.dispatchEvent(new Event("ready")),g?g(c.width,c.height,this.space):void 0}.bind(this))}return this},b.prototype.resize=function(b,g,h){var c,
l,e;this.size.set(b,g);this.center=new Vector(b/2,g/2);this.space.setAttribute("width",Math.floor(b));this.space.setAttribute("height",Math.floor(g));e=this.items;for(c in e)l=e[c],null!=l.onSpaceResize&&l.onSpaceResize(b,g,h);return this.render(this.ctx),this},b.prototype.clear=function(b){var g;return b&&(this.bgcolor=b),g=this.ctx.fillStyle,this.bgcolor?(this.ctx.fillStyle=this.bgcolor,this.ctx.fillRect(0,0,this.size.x,this.size.y)):this.ctx.clearRect(0,0,this.size.x,this.size.y),this.ctx.fillStyle=
g,this},b.prototype.animate=function(b){var g,h,c;this.ctx.save();this._refresh&&this.clear();h=this.items;for(g in h)c=h[g],c.animate(b,this._timeDiff,this.ctx);return 0<=this._timeEnd&&b>this._timeEnd&&cancelAnimationFrame(this._animID),this.ctx.restore(),this},b.prototype.bindCanvas=function(b,g){return this.space.addEventListener(b,g)},b.prototype.bindMouse=function(b){return null==b&&(b=!0),b?(this.space.addEventListener("mousedown",this._mouseDown.bind(this)),this.space.addEventListener("mouseup",
this._mouseUp.bind(this)),this.space.addEventListener("mouseover",this._mouseOver.bind(this)),this.space.addEventListener("mouseout",this._mouseOut.bind(this)),this.space.addEventListener("mousemove",this._mouseMove.bind(this))):(this.space.removeEventListener("mousedown",this._mouseDown.bind(this)),this.space.removeEventListener("mouseup",this._mouseUp.bind(this)),this.space.removeEventListener("mouseover",this._mouseOver.bind(this)),this.space.removeEventListener("mouseout",this._mouseOut.bind(this)),
this.space.removeEventListener("mousemove",this._mouseMove.bind(this)))},b.prototype._mouseAction=function(b,g){var h,c,l,e,f,v;e=this.items;f=[];for(h in e)v=e[h],c=g.offsetX||g.layerX,l=g.offsetY||g.layerY,f.push(null!=v.onMouseAction?v.onMouseAction(b,c,l,g):void 0);return f},b.prototype._mouseDown=function(b){return this._mouseAction("down",b),this._mdown=!0},b.prototype._mouseUp=function(b){return this._mouseAction("up",b),this._mdrag&&this._mouseAction("drop",b),this._mdown=!1,this._mdrag=!1},
b.prototype._mouseMove=function(b){return this._mouseAction("move",b),this._mdown?(this._mdrag=!0,this._mouseAction("drag",b)):void 0},b.prototype._mouseOver=function(b){return this._mouseAction("over",b)},b.prototype._mouseOut=function(b){return this._mouseAction("out",b),this._mdrag&&this._mouseAction("drop",b),this._mdrag=!1},b}(Space);
this.DOMSpace=DOMSpace=function(J){function b(m,g,h){null==m&&(m="pt_space");null==g&&(g=!1);null==h&&(h="html");b.__super__.constructor.apply(this,arguments);this.space=document.querySelector("#"+this.id);this.css={width:"100%",height:"100%"};this.appended=!0;this.space||this._createSpaceElement();this._mdrag=this._mdown=!1;this.bgcolor=g;this.ctx={}}return extend(b,J),b.prototype._createSpaceElement=function(){return this.space=document.createElement("div"),this.space.setAttribute("id",this.id),
this.appended=!1},b.prototype.setCSS=function(b,g,h){return null==h&&(h=!1),this.css[b]=h?g+"px":g,this},b.prototype.updateCSS=function(){var b,g,h,c;g=this.css;h=[];for(b in g)c=g[b],h.push(this.space.style[b]=c);return h},b.prototype.display=function(b,g){var h,c;if(null==b&&(b="#pt"),!this.appended){if(h=document.querySelector(b),c=h.getBoundingClientRect(),!h)throw"Cannot add canvas to element "+b;this.resize(c.width,c.height);window.addEventListener("resize",function(b){return c=h.getBoundingClientRect(),
this.resize(c.width,c.height,b)}.bind(this));this.space.parentNode!==h&&h.appendChild(this.space);this.appended=!0;setTimeout(function(){return this.space.dispatchEvent(new Event("ready")),g?g(c.width,c.height,this.space):void 0}.bind(this))}return this},b.prototype.resize=function(b,g,h){var c,l,e;this.size.set(b,g);this.center=new Vector(b/2,g/2);e=this.items;for(c in e)l=e[c],null!=l.onSpaceResize&&l.onSpaceResize(b,g,h);return this},b.prototype.clear=function(){return this.space.innerHML=""},
b.prototype.animate=function(b){var g,h,c;h=this.items;for(g in h)c=h[g],c.animate(b,this._timeDiff,this.ctx);return 0<=this._timeEnd&&b>this._timeEnd&&cancelAnimationFrame(this._animID),this},b.prototype.bindCanvas=function(b,g){return this.space.addEventListener(b,g)},b.prototype.bindMouse=function(b){return null==b&&(b=!0),b?(this.space.addEventListener("mousedown",this._mouseDown.bind(this)),this.space.addEventListener("mouseup",this._mouseUp.bind(this)),this.space.addEventListener("mouseover",
this._mouseOver.bind(this)),this.space.addEventListener("mouseout",this._mouseOut.bind(this)),this.space.addEventListener("mousemove",this._mouseMove.bind(this))):(this.space.removeEventListener("mousedown",this._mouseDown.bind(this)),this.space.removeEventListener("mouseup",this._mouseUp.bind(this)),this.space.removeEventListener("mouseover",this._mouseOver.bind(this)),this.space.removeEventListener("mouseout",this._mouseOut.bind(this)),this.space.removeEventListener("mousemove",this._mouseMove.bind(this)))},
b.prototype._mouseAction=function(b,g){var h,c,l,e,f,v;e=this.items;f=[];for(h in e)v=e[h],c=g.offsetX||g.layerX,l=g.offsetY||g.layerY,f.push(null!=v.onMouseAction?v.onMouseAction(b,c,l,g):void 0);return f},b.prototype._mouseDown=function(b){return this._mouseAction("down",b),this._mdown=!0},b.prototype._mouseUp=function(b){return this._mouseAction("up",b),this._mdrag&&this._mouseAction("drop",b),this._mdown=!1,this._mdrag=!1},b.prototype._mouseMove=function(b){return this._mouseAction("move",b),
this._mdown?(this._mdrag=!0,this._mouseAction("drag",b)):void 0},b.prototype._mouseOver=function(b){return this._mouseAction("over",b)},b.prototype._mouseOut=function(b){return this._mouseAction("out",b),this._mdrag&&this._mouseAction("drop",b),this._mdrag=!1},b.attr=function(b,g){var h,c,l;c=[];for(h in g)l=g[h],c.push(b.setAttribute(h,l));return c},b.css=function(b){var g,h,c;h="";for(g in b)(c=b[g])&&(h+=g+": "+c+"; ");return h},b}(Space);
this.Form=Form=function(){function J(b){this.cc=b.ctx;this.cc.fillStyle="#999";this.cc.strokeStyle="#666";this.cc.lineWidth=1;this.cc.font="11px sans-serif";this.stroked=this.filled=!0;this.fontSize=11;this.fontFace="sans-serif"}return J.context=function(b){var m,g;if(g=document.getElementById(b),m=g&&g.getContext?g.getContext("2d"):!1,!m)throw"Cannot initiate canvas 2d context";return m},J.line=function(b,m){if(!m.p1)throw m.toString()+" is not a Pair";return b.beginPath(),b.moveTo(m.x,m.y),b.lineTo(m.p1.x,
m.p1.y),b.stroke()},J.lines=function(b,m){var g,h,c,l;l=[];g=0;for(h=m.length;h>g;g++)c=m[g],l.push(J.line(b,c));return l},J.rect=function(b,m,g,h){if(null==g&&(g=!0),null==h&&(h=!1),!m.p1)throw""+(m.toString()===!a(Pair));return b.beginPath(),b.moveTo(m.x,m.y),b.lineTo(m.x,m.p1.y),b.lineTo(m.p1.x,m.p1.y),b.lineTo(m.p1.x,m.y),b.closePath(),h&&b.stroke(),g?b.fill():void 0},J.circle=function(b,m,g,h){null==g&&(g=!0);null==h&&(h=!1);b.beginPath();b.arc(m.x,m.y,m.radius,0,Const.two_pi,!1);g&&b.fill();
h&&b.stroke()},J.triangle=function(b,m,g,h){null==g&&(g=!0);null==h&&(h=!1);b.beginPath();b.moveTo(m.x,m.y);b.lineTo(m.p1.x,m.p1.y);b.lineTo(m.p2.x,m.p2.y);b.closePath();g&&b.fill();h&&b.stroke()},J.point=function(b,m,g,h,c,l){var e,f,v,d;return null==g&&(g=2),null==h&&(h=!0),null==c&&(c=!1),null==l&&(l=!1),l?(b.beginPath(),b.arc(m.x,m.y,g,0,Const.two_pi,!1)):(e=m.x-g,v=m.y-g,f=m.x+g,d=m.y+g,b.beginPath(),b.moveTo(e,v),b.lineTo(e,d),b.lineTo(f,d),b.lineTo(f,v),b.closePath()),h&&b.fill(),c&&b.stroke(),
m},J.points=function(b,m,g,h,c,l){var e,f,v,d;null==g&&(g=2);null==h&&(h=!0);null==c&&(c=!1);null==l&&(l=!1);d=[];e=0;for(f=m.length;f>e;e++)v=m[e],d.push(J.point(b,v,g,h,c,l));return d},J.polygon=function(b,m,g,h,c){var l,e,f;if(null==g&&(g=!0),null==h&&(h=!0),null==c&&(c=!0),!(1>=m.length)){b.beginPath();b.moveTo(m[0].x,m[0].y);e=l=1;for(f=m.length;f>l;e=l+=1)b.lineTo(m[e].x,m[e].y);g&&b.closePath();h&&b.fill();c&&b.stroke()}},J.curve=function(b,m){return J.polygon(b,m,!1,!1,!0)},J.text=function(b,
m,g,h){return b.fillText(g,m.x,m.y,h)},J.prototype.fill=function(b){return this.cc.fillStyle=b?b:"transparent",this.filled=!!b,this},J.prototype.stroke=function(b,m,g){return this.cc.strokeStyle=b?b:"transparent",this.stroked=!!b,m&&(this.cc.lineWidth=m),g&&(this.cc.lineJoin=g),this},J.prototype.font=function(b,m){return null==m&&(m=this.fontFace),this.fontSize=b,this.cc.font=b+"px "+m,this},J.prototype.draw=function(b){return this.sketch(b)},J.prototype.sketch=function(b){return b.floor(),b instanceof
Circle?J.circle(this.cc,b,this.filled,this.stroked):b instanceof Rectangle?J.rect(this.cc,b,this.filled,this.stroked):b instanceof Triangle?J.triangle(this.cc,b,this.filled,this.stroked):b instanceof Line||b instanceof Pair?J.line(this.cc,b):b instanceof PointSet?J.polygon(this.cc,b.points):(b instanceof Vector||b instanceof Point)&&J.point(this.cc,b),this},J.prototype.point=function(b,m,g){return null==m&&(m=2),null==g&&(g=!1),J.point(this.cc,b,m,this.filled,this.stroked,g),this},J.prototype.points=
function(b,m,g){return null==m&&(m=2),null==g&&(g=!1),J.points(this.cc,b,m,this.filled,this.stroked,g),this},J.prototype.line=function(b){return J.line(this.cc,b),this},J.prototype.lines=function(b){return J.lines(this.cc,b),this},J.prototype.rect=function(b){return J.rect(this.cc,b,this.filled,this.stroked),this},J.prototype.circle=function(b){return J.circle(this.cc,b,this.filled,this.stroked),this},J.prototype.triangle=function(b){return J.triangle(this.cc,b,this.filled,this.stroked),this},J.prototype.polygon=
function(b,m){return J.polygon(this.cc,b,m,this.filled,this.stroked),this},J.prototype.curve=function(b){return J.curve(this.cc,b),this},J.prototype.text=function(b,m,g,h,c){var l;return null==g&&(g=1E3),l=new Vector(b),h&&l.add(h,0),c&&l.add(0,c),this.cc.fillText(m,l.x,l.y,g),this},J}();
this.Point=Point=function(){function J(b){this.copy(J.get(arguments))}return J.get=function(b){return 0<b.length?"object"==typeof b[0]?b[0]instanceof Array||0<b[0].length?{x:b[0][0]||0,y:b[0][1]||0,z:b[0][2]||0}:{x:b[0].x||0,y:b[0].y||0,z:b[0].z||0}:{x:b[0]||0,y:b[1]||0,z:b[2]||0}:{x:0,y:0,z:0}},J.prototype.quadrant=function(b,m){return null==m&&(m=Const.epsilon),b.near(this)?Const.identical:Math.abs(b.x-this.x)<m?b.y<this.y?Const.top:Const.bottom:Math.abs(b.y-this.y)<m?b.x<this.x?Const.left:Const.right:
b.y<this.y&&b.x>this.x?Const.top_right:b.y<this.y&&b.x<this.x?Const.top_left:b.y>this.y&&b.x<this.x?Const.bottom_left:Const.bottom_right},J.prototype.set=function(b){var m;return m=J.get(arguments),this.x=m.x,this.y=m.y,this.z=m.z,this},J.prototype.copy=function(b){return this.x=b.x,this.y=b.y,this.z=b.z,this},J.prototype.clone=function(){return new J(this)},J.prototype.toString=function(){return"Point "+this.x+", "+this.y+", "+this.z},J.prototype.toArray=function(){return[this]},J.prototype.get2D=
function(b,m){return null==m&&(m=!1),b===Const.xy?new this.__proto__.constructor(this):b===Const.xz?new this.__proto__.constructor(this.x,this.z,this.y):b===Const.yz?m?new this.__proto__.constructor(this.z,this.x,this.y):new this.__proto__.constructor(this.y,this.z,this.x):new this.__proto__.constructor(this)},J.prototype.min=function(b){var m;return m=J.get(arguments),this.x=Math.min(this.x,m.x),this.y=Math.min(this.y,m.y),this.z=Math.min(this.z,m.z),this},J.prototype.$min=function(b){var m;return m=
J.get(arguments),new this.__proto__.constructor(Math.min(this.x,m.x),Math.min(this.y,m.y),Math.min(this.z,m.z))},J.prototype.max=function(b){var m;return m=J.get(arguments),this.x=Math.max(this.x,m.x),this.y=Math.max(this.y,m.y),this.z=Math.max(this.z,m.z),this},J.prototype.$max=function(b){var m;return m=J.get(arguments),new this.__proto__.constructor(Math.max(this.x,m.x),Math.max(this.y,m.y),Math.max(this.z,m.z))},J.prototype.equal=function(b){var m;return m=J.get(arguments),m.x===this.x&&m.y===
this.y&&m.z===this.z},J.prototype.near=function(b,m){var g;return null==m&&(m=Const.epsilon),g=J.get(arguments),Math.abs(g.x-this.x)<m&&Math.abs(g.y-this.y)<m&&Math.abs(g.z-this.z)<m},J.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},J.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},J}();
this.Vector=Vector=function(J){function b(){b.__super__.constructor.apply(this,arguments)}return extend(b,J),b.prototype._getArgs=function(b){return"number"==typeof b[0]&&1<b.length?b:b[0]},b.prototype.add=function(b){var g;return"number"==typeof arguments[0]&&1===arguments.length?(this.x+=arguments[0],this.y+=arguments[0],this.z+=arguments[0]):(g=Point.get(arguments),this.x+=g.x,this.y+=g.y,this.z+=g.z),this},b.prototype.$add=function(m){var g;return g=this._getArgs(arguments),(new b(this)).add(g)},
b.prototype.subtract=function(b){var g;return"number"==typeof arguments[0]&&1===arguments.length?(this.x-=arguments[0],this.y-=arguments[0],this.z-=arguments[0]):(g=Point.get(arguments),this.x-=g.x,this.y-=g.y,this.z-=g.z),this},b.prototype.$subtract=function(m){var g;return g=this._getArgs(arguments),(new b(this)).subtract(g)},b.prototype.multiply=function(b){var g;return 1===arguments.length&&("number"==typeof arguments[0]||"object"==typeof arguments[0]&&1===arguments[0].length)?(this.x*=arguments[0],
this.y*=arguments[0],this.z*=arguments[0]):(g=Point.get(arguments),this.x*=g.x,this.y*=g.y,this.z*=g.z),this},b.prototype.$multiply=function(m){var g;return g=this._getArgs(arguments),(new b(this)).multiply(g)},b.prototype.divide=function(b){var g;return 1===arguments.length&&("number"==typeof arguments[0]||"object"==typeof arguments[0]&&1===arguments[0].length)?(this.x/=arguments[0],this.y/=arguments[0],this.z/=arguments[0]):(g=Point.get(arguments),this.x/=g.x,this.y/=g.y,this.z/=g.z),this},b.prototype.$divide=
function(m){var g;return g=this._getArgs(arguments),(new b(this)).divide(g)},b.prototype.op=function(){var b,g,h,c,l,e;c=arguments[0];g=2<=arguments.length?slice.call(arguments,1):[];e=this.toArray();b=0;for(h=e.length;h>b;b++)l=e[b],l[c].apply(l,g);return this},b.prototype.$op=function(){var b,g,h,c,l,e,f;l=arguments[0];g=2<=arguments.length?slice.call(arguments,1):[];h=this.clone();f=h.toArray();b=0;for(c=f.length;c>b;b++)e=f[b],e[l].apply(e,g);return h},b.prototype.angle=function(b){var g,h;return 0===
arguments.length?Math.atan2(this.y,this.x):("string"==typeof arguments[0]?(g=arguments[0],h=1<arguments.length?this.$subtract(arguments[1]).multiply(-1):void 0):(h=this.$subtract(arguments[0]).multiply(-1),g=!1),h&&!g?Math.atan2(h.y,h.x):g===Const.xy?h?Math.atan2(h.y,h.x):Math.atan2(this.y,this.x):g===Const.yz?h?Math.atan2(h.z,h.y):Math.atan2(this.z,this.y):g===Const.xz?h?Math.atan2(h.z,h.x):Math.atan2(this.z,this.x):void 0)},b.prototype.angleBetween=function(b,g){return null==g&&(g=Const.xy),Util.boundRadian(this.angle(g),
!0)-Util.boundRadian(b.angle(g),!0)},b.prototype.magnitude=function(b){var g,h,c,l,e,f;return c={x:this.x*this.x,y:this.y*this.y,z:this.z*this.z},f=1<=arguments.length&&!arguments[arguments.length-1],g=f?function(c){return c}:Math.sqrt,0===arguments.length?g(c.x+c.y+c.z):("string"==typeof arguments[0]?(h=arguments[0],e=1<arguments.length&&arguments[1]?this.$subtract(arguments[1]):void 0):(e=this.$subtract(arguments[0]),h=!1),l=e?{x:e.x*e.x,y:e.y*e.y,z:e.z*e.z}:c,e&&!h?g(l.x+l.y+l.z):h===Const.xy?
g(l.x+l.y):h===Const.yz?g(l.y+l.z):h===Const.xz?g(l.x+l.z):void 0)},b.prototype.distance=function(b,g){return null==g&&(g=Const.xy),this.magnitude(g,b)},b.prototype.normalize=function(){return this.set(this.$normalize()),this},b.prototype.$normalize=function(){var m;return m=this.magnitude(),0===m?new b:new b(this.x/m,this.y/m,this.z/m)},b.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this},b.prototype.dot=function(b,g){return null==g&&(g=
Const.xyz),g===Const.xyz?this.x*b.x+this.y*b.y+this.z*b.z:g===Const.xy?this.x*b.x+this.y*b.y:g===Const.yz?this.y*b.y+this.z*b.z:g===Const.xz?this.x*b.x+this.z*b.z:this.x*b.x+this.y*b.y+this.z*b.z},b.prototype.projection=function(m,g){var h,c,l,e;return null==g&&(g=Const.xyz),e=m.magnitude(),h=this.$normalize(),c=new b(m.x/e,m.y/e,m.z/e),l=h.dot(c,g),h.$multiply(e*l)},b.prototype.cross=function(m){return new b(this.y*m.z-this.z*m.y,this.z*m.x-this.x*m.z,this.x*m.y-this.y*m.x)},b.prototype.bisect=function(b,
g){return null==g&&(g=!1),g?this.$add(b).divide(2):this.$normalize().add(b.$normalize()).divide(2)},b.prototype.perpendicular=function(m){switch(null==m&&(m=Const.xy),m){case Const.xy:return[new b(-this.y,this.x,this.z),new b(this.y,-this.x,this.z)];case Const.yz:return[new b(this.x,-this.z,this.y),new b(this.x,this.z,-this.y)];case Const.xz:return[new b(-this.z,this.y,this.x),new b(this.z,-this.y,this.x)];default:return[new b(-this.y,this.x,this.z),new b(this.y,-this.x,this.z)]}},b.prototype.isPerpendicular=
function(b,g){return null==g&&(g=Const.xyz),0===this.dot(b,g)},b.prototype.surfaceNormal=function(b){return this.cross(b).normalize(!0)},b.prototype.moveTo=function(b){var g,h,c,l,e;g=Point.get(arguments);h=this.$subtract(g);e=this.toArray();g=0;for(c=e.length;c>g;g++)l=e[g],l.subtract(h);return this},b.prototype.moveBy=function(b){var g,h,c,l,e;h=Point.get(arguments);e=this.toArray();g=0;for(c=e.length;c>g;g++)l=e[g],l.add(h);return this},b.prototype.rotate2D=function(b,g,h){var c,l,e;null==h&&(h=
Const.xy);g||(g=new Point(0,0,0));c=Matrix.rotateAnchor2D(b,g,h);e=this.toArray();b=0;for(g=e.length;g>b;b++)l=e[b],Matrix.transform2D(l,c,h);return this},b.prototype.reflect2D=function(b,g){var h,c,l,e,f;null==g&&(g=Const.xy);l=Matrix.reflectAnchor2D(b,g);f=this.toArray();h=0;for(c=f.length;c>h;h++)e=f[h],Matrix.transform2D(e,l,g);return this},b.prototype.scale2D=function(b,g,h,c){var l,e;null==c&&(c=Const.xy);h||(h=new Point(0,0,0));h=Matrix.scaleAnchor2D(b,g,h,c);e=this.toArray();b=0;for(g=e.length;g>
b;b++)l=e[b],Matrix.transform2D(l,h,c);return this},b.prototype.shear2D=function(b,g,h,c){var l,e;null==c&&(c=Const.xy);h||(h=new Point(0,0,0));h=Matrix.shearAnchor2D(b,g,h,c);e=this.toArray();b=0;for(g=e.length;g>b;b++)l=e[b],Matrix.transform2D(l,h,c);return this},b.prototype.clone=function(){return new b(this)},b.prototype.toString=function(){return"Vector "+this.x+", "+this.y+", "+this.z},b}(Point);
this.Color=Color=function(J){function b(m){b.__super__.constructor.apply(this,arguments);this.alpha=4<=arguments.length?Math.min(1,Math.max(arguments[3],0)):1;this.mode=5<=arguments.length?arguments[4]:"rgb"}return extend(b,J),b.XYZ={D65:{x:95.047,y:100,z:108.883}},b.parseHex=function(m,g){var h,c;return null==g&&(g=!1),0===m.indexOf("#")&&(m=m.substr(1)),3===m.length&&(m=""+m[0]+m[0]+m[1]+m[1]+m[2]+m[2]),8===m.length&&(this.alpha=1&m.substr(6),m=m.substring(0,6)),h=parseInt(m,16),c=[h>>16,h>>8&255,
255&h],g?new b(c[0],c[1],c[2]):c},b.prototype.setMode=function(m){if(m=m.toLowerCase(),m!==this.mode){switch(this.mode){case "hsl":this.copy(Point.get(b.HSLtoRGB(this.x,this.y,this.z)));break;case "hsb":this.copy(Point.get(b.HSBtoRGB(this.x,this.y,this.z)));break;case "lab":this.copy(Point.get(b.LABtoRGB(this.x,this.y,this.z)));break;case "lch":this.copy(Point.get(b.LCHtoRGB(this.x,this.y,this.z)));break;case "xyz":this.copy(Point.get(b.XYZtoRGB(this.x,this.y,this.z)))}switch(m){case "hsl":this.copy(Point.get(b.RGBtoHSL(this.x,
this.y,this.z)));break;case "hsb":this.copy(Point.get(b.RGBtoHSB(this.x,this.y,this.z)));break;case "lab":this.copy(Point.get(b.RGBtoLAB(this.x,this.y,this.z)));break;case "lch":this.copy(Point.get(b.RGBtoLCH(this.x,this.y,this.z)));break;case "xyz":this.copy(Point.get(b.RGBtoXYZ(this.x,this.y,this.z)))}}return this.mode=m,this},b.prototype.hex=function(){var b,g,h,c;return"rgb"===this.mode&&this.floor(),g=this.values("rgb"!==this.mode),b=function(c){return c=c.toString(16),2>c.length?"0"+c:c},h=
function(){var h,e,f;f=[];h=0;for(e=g.length;e>h;h++)c=g[h],f.push(b(c));return f}(),"#"+h[0]+h[1]+h[2]},b.prototype.rgb=function(){var b;return"rgb"===this.mode&&this.floor(),b=this.values("rgb"!==this.mode),"rgb("+b[0]+", "+b[1]+", "+b[2]+")"},b.prototype.rgba=function(){var b;return"rgb"===this.mode&&this.floor(),b=this.values("rgb"!==this.mode),"rgba("+b[0]+", "+b[1]+", "+b[2]+", "+this.alpha+")"},b.prototype.values=function(m){var g;if(null==m&&(m=!1),g=[this.x,this.y,this.z],m&&"rgb"!==this.mode)switch(this.mode){case "hsl":g=
b.HSLtoRGB(this.x,this.y,this.z);break;case "hsb":g=b.HSBtoRGB(this.x,this.y,this.z);break;case "lab":g=b.LABtoRGB(this.x,this.y,this.z);break;case "lch":g=b.LCHtoRGB(this.x,this.y,this.z);break;case "xyz":g=b.XYZtoRGB(this.x,this.y,this.z)}var h,c,l;l=[];h=0;for(c=g.length;c>h;h++)m=g[h],l.push(Math.floor(m));return l},b.RGBtoHSL=function(b,g,h,c,l){var e,f,v,d;if(c||(b/=255,g/=255,h/=255),v=Math.max(b,g,h),d=Math.min(b,g,h),f=(v+d)/2,c=f,v===d)d=f=0;else switch(e=v-d,d=.5<c?e/(2-v-d):e/(v+d),v){case b:f=
(g-h)/e+(h>g?6:0);break;case g:f=(h-b)/e+2;break;case h:f=(b-g)/e+4;break;default:f=0}return l?[f/60,d,c]:[60*f,d,c]},b.HSLtoRGB=function(b,g,h,c,l){var e,f,v,d,p,t;return 0===g?l?[1,1,1]:[255,255,255]:(c||(b/=360),p=.5>=h?h*(1+g):h+g-h*g,d=2*h-p,v=function(d,c,b){return 0>b?b+=1:1<b&&--b,1>6*b?d+(c-d)*b*6:1>2*b?c:2>3*b?d+(c-d)*(2/3-b)*6:d},t=v(d,p,b+1/3),f=v(d,p,b),e=v(d,p,b-1/3),l?[t,f,e]:[255*t,255*f,255*e])},b.RGBtoHSB=function(b,g,h,c,l){var e,f,v;if(c||(b/=255,g/=255,h/=255),f=Math.max(b,g,
h),v=Math.min(b,g,h),e=f-v,c=0===f?0:e/f,f===v)b=0;else switch(f){case b:b=(g-h)/e+(h>g?6:0);break;case g:b=(h-b)/e+2;break;case h:b=(b-g)/e+4;break;default:b=0}return l?[b/60,c,f]:[60*b,c,f]},b.HSBtoRGB=function(b,g,h,c,l){var e,f,v;switch(c||(b/=360),f=Math.floor(6*b),e=6*b-f,c=h*(1-g),v=h*(1-e*g),g=h*(1-(1-e)*g),f%6){case 0:b=[h,g,c];break;case 1:b=[v,h,c];break;case 2:b=[c,h,g];break;case 3:b=[c,v,h];break;case 4:b=[g,c,h];break;case 5:b=[h,c,v];break;default:b=[0,0,0]}return l?b:[255*b[0],255*
b[1],255*b[2]]},b.RGBtoLAB=function(m,g,h,c,l){var e;return c&&(m*=255,g*=255,h*=255),e=b.RGBtoXYZ(m,g,h),b.XYZtoLAB(e[0],e[1],e[2])},b.LABtoRGB=function(m,g,h,c,l){var e,f;return c&&(m*=100,g=127*(g-.5),h=127*(h-.5)),f=b.LABtoXYZ(m,g,h),e=b.XYZtoRGB(f[0],f[1],f[2]),l?[e[0]/255,e[1]/255,e[2]/255]:e},b.RGBtoLCH=function(m,g,h,c,l){var e,f;return c&&(m*=255,g*=255,h*=255),e=b.RGBtoLAB(m,g,h),f=b.LABtoLCH(e[0],e[1],e[2]),l?[f[0]/100,f[1]/100,f[2]/360]:f},b.LCHtoRGB=function(m,g,h,c,l){var e,f,v;return c&&
(m*=100,g*=100,h*=360),e=b.LCHtoLAB(m,g,h),v=b.LABtoXYZ(e[0],e[1],e[2]),f=b.XYZtoRGB(v[0],v[1],v[2]),l?[f[0]/255,f[1]/255,f[2]/255]:f},b.XYZtoRGB=function(b,g,h,c,l){var e;c||(b/=100,g/=100,h/=100);e=[3.2404542*b+-1.5371385*g+-.4985314*h,-.969266*b+1.8760108*g+.041556*h,.0556434*b+-.2040259*g+1.0572252*h];h=b=0;for(c=e.length;c>b;h=++b)g=e[h],e[h]=0>g?0:Math.min(1,.0031308<g?1.055*Math.pow(g,1/2.4)-.055:12.92*g);return l?e:[Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])]},b.RGBtoXYZ=
function(b,g,h,c,l){return c||(b/=255,g/=255,h/=255),b=.04045<b?Math.pow((b+.055)/1.055,2.4):b/12.92,g=.04045<g?Math.pow((g+.055)/1.055,2.4):g/12.92,h=.04045<h?Math.pow((h+.055)/1.055,2.4):h/12.92,l||(b*=100,g*=100,h*=100),[.4124564*b+.3575761*g+.1804375*h,.2126729*b+.7151522*g+.072175*h,.0193339*b+.119192*g+.9503041*h]},b.XYZtoLAB=function(m,g,h){var c,l;return m/=b.XYZ.D65.x,g/=b.XYZ.D65.y,h/=b.XYZ.D65.z,c=function(c){return.008856<c?Math.pow(c,1/3):7.787*c+16/116},l=c(g),[116*l-16,500*(c(m)-l),
200*(l-c(h))]},b.LABtoXYZ=function(m,g,h){var c,l,e,f;return e=(m+16)/116,l=g/500+e,f=e-h/200,c=function(c){var d;return d=Math.pow(c,3),.008856<d?d:(c-16/116)/7.787},[Math.min(b.XYZ.D65.x,b.XYZ.D65.x*c(l)),Math.min(b.XYZ.D65.y,b.XYZ.D65.y*c(e)),Math.min(b.XYZ.D65.y,b.XYZ.D65.z*c(f))]},b.XYZtoLUV=function(m,g,h){var c,l,e,f,v;return f=4*m/(m+15*g+3*h),v=9*g/(m+15*g+3*h),g/=100,g=.008856<g?Math.pow(g,1/3):7.787*g+16/116,l=4*b.XYZ.D65.x/(b.XYZ.D65.x+15*b.XYZ.D65.y+3*b.XYZ.D65.z),e=9*b.XYZ.D65.y/(b.XYZ.D65.x+
15*b.XYZ.D65.y+3*b.XYZ.D65.z),c=116*g-16,[c,13*c*(f-l),13*c*(v-e)]},b.LUVtoXYZ=function(m,g,h){var c,l,e,f,v;return v=(m+16)/116,c=v*v*v,v=.008856<c?c:(v-16/116)/7.787,l=4*b.XYZ.D65.x/(b.XYZ.D65.x+15*b.XYZ.D65.y+3*b.XYZ.D65.z),e=9*b.XYZ.D65.y/(b.XYZ.D65.x+15*b.XYZ.D65.y+3*b.XYZ.D65.z),g=g/(13*m)+l,h=h/(13*m)+e,v*=100,f=-9*v*g/((g-4)*h-g*h),[f,v,(9*v-15*h*v-h*f)/(3*h)]},b.LABtoLCH=function(b,g,h){var c;return c=Math.atan2(h,g),c=0<c?180*c/Math.PI:360-180*Math.abs(c)/Math.PI,[b,Math.sqrt(g*g+h*h),c]},
b.LCHtoLAB=function(b,g,h){var c;return c=Math.PI*h/180,[b,Math.cos(c)*g,Math.sin(c)*g]},b.LUVtoLCH=function(b,g,h){return LABtoLCH(b,g,h)},b.LCHtoLUV=function(b,g,h){return LCHtoLAB(b,g,h)},b}(Vector);
this.Circle=Circle=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.radius=null!=arguments[3]?arguments[3]:0}return extend(b,J),b.prototype.setRadius=function(b){return this.radius=b,this},b.prototype.intersectPoint=function(b){var g,h;return h=new Vector(Point.get(arguments)),g=h.$subtract(this),g.x*g.x+g.y*g.y<this.radius*this.radius},b.prototype.intersectPath=function(b,g){var h,c,l,e,f,v,d,p,t,x,w,u,r;return null==g&&(g=!0),!b instanceof Pair?!1:(e=b.direction(),d=this.$subtract(b),
h=e.dot(e,Const.xy),c=d.dot(e,Const.xy),l=d.dot(d,Const.xy)-this.radius*this.radius,p=c/h,w=l/h,f=p*p-w,0>f?g?[]:!1:g?(v=Math.sqrt(f),u=-p+v,r=-p-v,t=new Point(b.x-e.x*u,b.y-e.y*u),x=new Point(b.x-e.x*r,b.y-e.y*r),0===f?[t]:[t,x]):!0)},b.prototype.intersectLine=function(b,g){var h,c,l,e,f,v;if(null==g&&(g=!0),v=this.intersectPath(b),v&&0<v.length){f=[];c=b.bounds();h=0;for(l=v.length;l>h;h++)if(e=v[h],Rectangle.contain(e,c,c.p1)){if(!g)return!0;f.push(e)}return g?f:0<f.length}return g?[]:!1},b.prototype.intersectLines=
function(b,g){return null==g&&(g=!0),Line.intersectLines(this,b,g)},b.prototype.intersectCircle=function(b,g){var h,c,l,e,f,v,d,p;return null==g&&(g=!0),v=b.$subtract(this),f=v.magnitude(!1),e=Math.sqrt(f),c=this.radius*this.radius,l=b.radius*b.radius,e>this.radius+b.radius?g?[]:!1:e<Math.abs(this.radius-b.radius)?g?[new Vector(this),new Vector(b)]:!0:g?(h=(c-l+f)/(2*e),d=Math.sqrt(c-h*h),p=v.$multiply(h/e).add(this),[new Vector(p.x+d*v.y/e,p.y-d*v.x/e),new Vector(p.x-d*v.y/e,p.y+d*v.x/e)]):!0},b.prototype.hasIntersect=
function(m,g){var h,c;return null==g&&(g=!1),m instanceof b?this.intersectCircle(m,g):m instanceof Rectangle||m instanceof PointSet||m instanceof Triangle?this.intersectLines(m.sides(),g):m instanceof Pair?(c=this.intersectLine(m),g?c:0<c.length):m instanceof Point?(h=m.$subtract(this),h.x*h.x+h.y*h.y<this.radius*this.radius):g?[]:!1},b}(Vector);
this.Particle=Particle=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.id=0;this.life={age:0,maxAge:0,active:!0,complete:!1};this.momentum=new Vector;this.velocity=new Vector;this.mass=2;this.friction=0;this.frame_ms=20}return extend(b,J),b.prototype.play=function(b,g){var h,c,l;l=0;for(c=[];0<g;)h=Math.min(g,this.frame_ms),this.integrate(l/1E3,h/1E3),g-=h,l+=h,c.push(this.life.age++);return c},b.prototype.integrate=function(b,g){return this.integrateRK4(b,g)},b.prototype.forces=
function(b,g){return{force:new Vector}},b.prototype.impulse=function(b){return this.momentum.add(b),this.velocity=this.momentum.$divide(this.mass)},b.prototype._evaluate=function(b,g,h){var c,l;return null==g&&(g=0),null==h&&(h=!1),l=0!==g&&h?{position:this.$add(h.velocity.$multiply(g)),momentum:this.momentum.$add(h.force.$multiply(g))}:{position:new Vector(this),momentum:new Vector(this.momentum)},l.velocity=l.momentum.$divide(this.mass),c=this.forces(l,b+g),{velocity:l.velocity,force:c.force}},
b.prototype.integrateRK4=function(b,g){var h,c,l,e,f;return h=function(b,d,c,h){return new Vector((b.x+2*(d.x+c.x)+h.x)/6,(b.y+2*(d.y+c.y)+h.y)/6,(b.z+2*(d.z+c.z)+h.z)/6)},c=this._evaluate(b,0),l=this._evaluate(b,.5*g,c),e=this._evaluate(b,.5*g,l),f=this._evaluate(b,g,e),this.add(h(c.velocity,l.velocity,e.velocity,f.velocity)),this.momentum.add(h(c.force,l.force,e.force,f.force))},b.prototype.integrateEuler=function(b,g){var h;return h=this.forces({position:new Vector(this),momentum:new Vector(this.momentum)},
b+g),this.add(this.velocity),this.momentum.add(h.force),this.velocity=this.momentum.$divide(this.mass)},b.prototype.collideLine2d=function(b,g){var h,c,l,e,f,v,d,p,t,x,w,u,r,y,k,q;if(null==g&&(g=!0),e=new Vector(this),l=Math.abs(b.getDistanceFromPoint(e)),c=Math.abs(l)<this.radius,g&&(d=this.$add(this.velocity),v=Math.abs(b.getDistanceFromPoint(d)),h=b.intersectLine((new Line(e)).to(d)),h&&(d=h.$add(this.velocity.$normalize().$multiply(-this.radius/2)),v=Math.abs(b.getDistanceFromPoint(d)),c=!0)),
c){if(r=b.getPerpendicularFromPoint(e),q=b.$subtract(b.p1),h=!1,!b.withinBounds(r,Const.xy)){if(this.intersectPoint(b)&&(h=!0,f=this.$subtract(b)),this.intersectPoint(b.p1)&&(h=!0,f=this.$subtract(b.p1)),!h)return!1;q=new Vector(-f.y,f.x)}f=q.dot(this.velocity);f=q.$multiply(f/q.dot(q));q=f.$subtract(this.velocity);this.velocity=f.$add(q);this.momentum=this.velocity.$multiply(this.mass);g&&!h&&(t=(new Line(r)).to(e),x=b.getPerpendicularFromPoint(d),p=(new Line(r)).to(x),y=p.direction(),k=(this.radius-
l)/(v-l),w=y.$multiply(k).$add(p),u=w.$add(t.direction().$normalize().$multiply(this.radius)),this.set(u.$add(this.velocity.$normalize())))}return c},b.prototype.collideWithinBounds=function(b){return this.x-this.radius<b.x||this.x+this.radius>b.p1.x?(this.x-this.radius<b.x?this.x=b.x+this.radius:this.x+this.radius>b.p1.x&&(this.x=b.p1.x-this.radius),this.velocity.x*=-1,this.momentum=this.velocity.$multiply(this.mass),!0):this.y-this.radius<b.y||this.y+this.radius>b.p1.y?(this.y-this.radius<b.y?this.y=
b.y+this.radius:this.y+this.radius>b.p1.y&&(this.y=b.p1.y-this.radius),this.velocity.y*=-1,this.momentum=this.velocity.$multiply(this.mass),!0):!1},b.prototype.collideParticle2d=function(m){return this.hasIntersect(m)?b.collideParticle2d(this,m,!0):!1},b.collideParticle2d=function(b,g,h,c){var l,e,f,v,d,p,t,x,w,u,r,y,k,q,z,E,A;return null==h&&(h=!0),null==c&&(c=!0),u=b.$subtract(g).normalize(),k=new Vector(-u.y,u.x),v=u.dot(b.velocity),d=k.dot(b.velocity),p=u.dot(g.velocity),t=k.dot(g.velocity),l=
(v*(b.mass-g.mass)+2*g.mass*p)/(b.mass+g.mass),e=(p*(g.mass-b.mass)+2*b.mass*v)/(b.mass+g.mass),q=u.$multiply(l),z=k.$multiply(d),E=u.$multiply(e),A=k.$multiply(t),r=q.$add(z),y=E.$add(A),c&&(x=b.magnitude(g),x<b.radius+g.radius&&(f=b.$subtract(g).normalize(),w=Math.abs(x-b.radius-g.radius)/1.98,b.add(f.multiply(w)),g.add(f.multiply(-w)))),h&&(b.velocity=r,g.velocity=y,b.momentum=b.velocity.$multiply(b.mass),g.momentum=g.velocity.$multiply(g.mass)),[r,y]},b.force_gravitation=function(b,g,h,c,l){var e,
f,v;return null==l&&(l=.0067),e=c.$subtract(b.position),v=e.magnitude()/30,f=0===v?0:g*l*h.mass*c.mass/(v*v),e.normalize().multiply(f),{force:e}},b.RK4=function(b,g,h,c,l){var e,f,v,d,p,t,x,w,u,r,y;return e=h(b,g,0,l),d=b+.5*g*c,x=g+.5*e*c,f=h(d,x,c/2,l),p=b+.5*x*c,w=g+.5*f*c,v=h(p,w,c/2,l),t=b+w*c,u=g+v*c,r=(b+2*(d+p)+t)/6,y=(g+2*(x+w)+u)/6,{c:b+r*c,d:g+y*c}},b}(Circle);
this.ParticleSystem=ParticleSystem=function(){function J(){this.count=0;this.particles=[];this.time=0}return J.prototype.add=function(b){return b.id=this.count++,this.particles.push(b),this},J.prototype.remove=function(b){return b&&b.life&&(b.life.complete=!0),this},J.prototype.animate=function(b,m,g){var h,c,l,e,f,v;this.time++;h=[];v=this.particles;l=c=0;for(e=v.length;e>c;l=++c)f=v[l],f.life.complete?h.push(l):f.life.active&&f.animate(b,m,g);if(0<h.length){c=[];b=0;for(g=h.length;g>b;b++)m=h[b],
c.push(this.particles.splice(m,1));return c}},J}();
this.Pair=Pair=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.p1=new Vector(this.x,this.y,this.z);4===arguments.length?(this.z=0,this.p1.set(arguments[2],arguments[3])):6===arguments.length&&this.p1.set(arguments[3],arguments[4],arguments[5])}return extend(b,J),b.prototype.to=function(){return this.p1=new Vector(Point.get(arguments)),this},b.prototype.getAt=function(b){return 1===b||"p1"===b?this.p1:this},b.prototype.$getAt=function(b){return new Vector(this.getAt(b))},
b.prototype.relative=function(){return this.p1.add(this),this},b.prototype.$relative=function(){return this.$add(this.p1)},b.prototype.bounds=function(){return(new b(this.$min(this.p1))).to(this.$max(this.p1))},b.prototype.withinBounds=function(b,g){var h,c;return g?(h=this.get2D(g),c=this.p1.get2D(g),h.x===c.x?b.y>=Math.min(h.y,c.y)&&b.y<=Math.max(h.y,c.y):h.y===c.y?b.x>=Math.min(h.x,c.x)&&b.x<=Math.max(h.x,c.x):b.x>=Math.min(h.x,c.x)&&b.y>=Math.min(h.y,c.y)&&b.x<=Math.max(h.x,c.x)&&b.y<=Math.max(h.y,
c.y)):b.x>=Math.min(this.x,this.p1.x)&&b.y>=Math.min(this.y,this.p1.y)&&b.z>=Math.min(this.z,this.p1.z)&&b.x<=Math.max(this.x,this.p1.x)&&b.y<=Math.max(this.y,this.p1.y)&&b.z<=Math.max(this.z,this.p1.z)},b.prototype.interpolate=function(b,g){var h;return null==g&&(g=!1),h=g?this.$relative():this.p1,new Vector((1-b)*this.x+b*h.x,(1-b)*this.y+b*h.y,(1-b)*this.z+b*h.z)},b.prototype.midpoint=function(){return this.interpolate(.5)},b.prototype.direction=function(b){return b?this.$subtract(this.p1):this.p1.$subtract(this)},
b.prototype.size=function(){return 0<arguments.length?(this.p1=this.$add(Point.get(arguments)),this):this.p1.$subtract(this).abs()},b.prototype.length=function(b){var g,h,c,l;return null==b&&(b=!0),l=this.z-this.p1.z,c=this.y-this.p1.y,h=this.x-this.p1.x,g=h*h+c*c+l*l,b?Math.sqrt(g):g},b.prototype.collinear=function(b){return(this.p1.x-this.x)*(b.y-this.y)-(b.x-this.x)*(this.p1.y-this.y)},b.prototype.resetBounds=function(){var b;return b=this.$min(this.p1),this.p1.set(this.$max(this.p1)),this.set(b),
this},b.prototype.equal=function(m){return null==m&&(m=!1),arguments[0]instanceof b?b.__super__.equal.call(this,arguments[0])&&this.p1.equal(arguments[0].p1):b.__super__.equal.apply(this,arguments)},b.prototype.clone=function(){var m;return m=new b(this),m.to(this.p1.clone()),m},b.prototype.floor=function(){return b.__super__.floor.apply(this,arguments),this.p1.floor()},b.prototype.toString=function(){return"Pair of vectors from ("+this.x+", "+this.y+", "+this.z+") to ("+this.p1.x+", "+this.p1.y+
", "+this.p1.z+")"},b.prototype.toArray=function(){return[this,this.p1]},b}(Vector);
this.Line=Line=function(J){function b(){b.__super__.constructor.apply(this,arguments)}return extend(b,J),b.slope=function(b,g,h){var c,l;return null==h&&(h=Const.xy),c=b.get2D(h),l=g.get2D(h),0===l.x-c.x?!1:(l.y-c.y)/(l.x-c.x)},b.intercept=function(b,g,h){var c,l,e,f;return null==h&&(h=Const.xy),e=b.get2D(h),f=g.get2D(h),0===f.x-e.x?!1:(l=(f.y-e.y)/(f.x-e.x),c=e.y-l*e.x,{slope:l,yi:c,xi:0===l?!1:-c/l})},b.isPerpendicularLine=function(m,g,h){var c,l;return null==h&&(h=Const.xy),c=b.slope(m,m.p1,h),
l=b.slope(g,g.p1,h),!1===c?0===l:!1===l?0===c:-1===c*l},b.prototype.slope=function(m){return null==m&&(m=Const.xy),b.slope(this,this.p1,m)},b.prototype.intercept=function(m){return null==m&&(m=Const.xy),b.intercept(this,this.p1,m)},b.prototype.getPerpendicular=function(m,g,h,c){var l,e,f;return null==g&&(g=10),null==h&&(h=!1),null==c&&(c=Const.xy),e=this.direction().normalize().perpendicular(c),f=h?e[1]:e[0],l=new b(this.interpolate(m)),l.to(f.multiply(g).add(l)),l},b.prototype.getDistanceFromPoint=
function(b){var g,h;return h=this.$subtract(this.p1),g=(new Vector(-h.y,h.x)).normalize(),this.$subtract(b).dot(g)},b.prototype.getPerpendicularFromPoint=function(b,g){var h;return null==g&&(g=!0),h=this.p1.$subtract(this).projection(b.$subtract(this)),g?h.add(this):h},b.prototype.intersectPath=function(b,g){var h,c,l,e,f,v,d;return null==g&&(g=Const.xy),h=this.intercept(g),c=b.intercept(g),e=this.get2D(g),l=b.get2D(g),!1===h?!1===c?!1:(d=-c.slope*(l.x-e.x)+l.y,g===Const.xy?new Vector(e.x,d):(new Vector(e.x,
d)).get2D(g,!0)):!1===c?(d=-h.slope*(e.x-l.x)+e.y,new Vector(l.x,d)):c.slope!==h.slope?(f=(h.slope*e.x-c.slope*l.x+l.y-e.y)/(h.slope-c.slope),v=h.slope*(f-e.x)+e.y,g===Const.xy?new Vector(f,v):(new Vector(f,v)).get2D(g,!0)):h.yi===c.yi?null:!1},b.prototype.intersectLine=function(b,g){var h;return null==g&&(g=Const.xy),h=this.intersectPath(b,g),h&&this.withinBounds(h,g)&&b.withinBounds(h,g)?h:null===h?null:!1},b.intersectLines=function(b,g,h){var c,l,e,f,v,d,p;if(null==h&&(h=!0),!b.intersectLine)throw"No intersectLine function found in "+
b.toString();p=[];for(l in g)if(v=g[l],e=b.intersectLine(v,h)){if(!h)return!0;if(0<e.length)for(c=0,f=e.length;f>c;c++)d=e[c],p.push(d)}return h?p:!1},b.prototype.intersectGridLine=function(b,g,h){var c,l,e;if(null==g&&(g=!1),null==h&&(h=Const.xy),c=this.get2D(h),l=this.p1.get2D(h),e=b.get2D(h),b=b.p1.get2D(h),0===l.x-c.x){if(0===b.y-e.y&&Util.within(c.x,e.x,b.x)&&(g||Util.within(e.y,c.y,l.y)))return new Vector(c.x,e.y)}else{if(0!==l.y-c.y)return!1;if(0===b.x-e.x&&Util.within(c.y,e.y,b.y)&&(g||Util.within(e.x,
c.x,l.x)))return new Vector(e.x,c.y)}},b.prototype.subpoints=function(b){var g,h,c;h=[];for(c=g=0;0<=b?b>=g:g>=b;c=0<=b?++g:--g)h.push(this.interpolate(c/b));return h},b.prototype.clone=function(m){return(new b(this)).to(this.p1)},b}(Pair);
this.Rectangle=Rectangle=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.center=new Vector}return extend(b,J),b.contain=function(b,g,h){return b.x>=g.x&&b.x<=h.x&&b.y>=g.y&&b.y<=h.y&&b.z>=g.z&&b.z<=h.z},b.prototype.toString=function(){var b;return b=this.size(),"Rectangle x1 "+this.x+", y1 "+this.y+", z1 "+this.z+", x2 "+this.p1.x+", y2 "+this.p1.y+", z2 "+this.p1.z+", width "+b.x+", height "+b.y},b.prototype.toPointSet=function(){var b;return b=this.corners(),(new PointSet(this)).to([b.topRight,
b.bottomRight,b.bottomLeft,b.topLeft])},b.prototype.to=function(b){return this.p1=new Vector(Point.get(arguments)),this.resetBounds(),this.center=this.midpoint(),this},b.prototype.setCenter=function(b){var g;return 0===arguments.length?void(this.center=this.midpoint()):(g=this.size().$divide(2),this.center.set(Point.get(arguments)),this.set(this.center.$subtract(g)),this.p1.set(this.center.$add(g)),this)},b.prototype.resizeTo=function(){return this.p1=new Vector(Point.get(arguments)),this.relative(),
this.center=this.midpoint(),this},b.prototype.resizeCenterTo=function(){var b;return b=(new Vector(Point.get(arguments))).divide(2),this.set(this.center.$subtract(b)),this.p1.set(this.center.$add(b)),this},b.prototype.enclose=function(b){return this.set(this.$min(b)),this.p1.set(this.p1.$max(b.p1)),this.center=this.midpoint(),this},b.prototype.$enclose=function(b){return this.clone().enclose(b)},b.prototype.isEnclosed=function(b){var g,h;return g=this.$subtract(b).multiply(this.p1.$subtract(b.p1)),
h=this.size().subtract(b.size()),0>=g.x&&0>=g.y&&0>=g.z&&0<=h.x*h.y},b.prototype.isLarger=function(b){var g,h;return g=this.size(),h=b.size(),g.x*g.y>h.x*h.y},b.prototype.intersectPoint=function(){var b;return b=Point.get(arguments),b.x>=this.x&&b.x<=this.p1.x&&b.y>=this.y&&b.y<=this.p1.y&&b.z>=this.z&&b.z<=this.p1.z},b.prototype.intersectPath=function(b,g){var h,c,l,e,f,v;null==g&&(g=!0);v=this.sides();e=[];h=0;for(c=v.length;c>h;h++)if(f=v[h],l=f.intersectPath(b),l&&this.intersectPoint(l)){if(!g)return!0;
e.push(l)}return g?e:!1},b.prototype.intersectLine=function(b,g){var h,c,l,e,f,v;if(null==g&&(g=!0),h=this.intersectPoint(b),c=this.intersectPoint(b.p1),h&&c&&g)return[];if(!h&&!c&&(l=b.bounds(),!this.intersectRectangle(l,!1)))return g?[]:!1;v=this.sides();e=[];h=0;for(c=v.length;c>h;h++)if(f=v[h],l=b.intersectLine(f)){if(!g)return!0;e.push(l)}return g?e:!1},b.prototype.intersectLines=function(b,g){return null==g&&(g=!0),Line.intersectLines(this,b,g)},b.prototype.intersectRectangle=function(b,g){var h,
c,l,e,f,v,d,p,t;if(null==g&&(g=!0),c=this.p1.x>=b.x&&this.x<=b.p1.x,l=this.p1.y>=b.y&&this.y<=b.p1.y,e=this.p1.z>=b.z&&this.z<=b.p1.z,h=c&&l&&e,!g)return h;if(this.isEnclosed(b))return g?[]:!0;if(!h)return[];p=this.sides();t=b.sides();v=[];h=0;for(l=p.length;l>h;h++)for(d=p[h],c=0,e=t.length;e>c;c++)f=t[c],(f=d.intersectGridLine(f))&&v.push(f);return v},b.prototype.hasIntersect=function(m,g){return null==g&&(g=!1),m instanceof Circle?m.intersectLines(this.sides(),g):m instanceof b?this.intersectRectangle(m,
g):m instanceof PointSet||m instanceof Triangle?this.intersectLines(m.sides(),g):m instanceof Pair?this.intersectLine(m,g):m instanceof Point?b.contain(m,this,this.p1):g?[]:!1},b.prototype.corners=function(){return{topLeft:new Vector(Math.min(this.x,this.p1.x),Math.min(this.y,this.p1.y),Math.max(this.z,this.p1.z)),topRight:new Vector(Math.max(this.x,this.p1.x),Math.min(this.y,this.p1.y),Math.min(this.z,this.p1.z)),bottomLeft:new Vector(Math.min(this.x,this.p1.x),Math.max(this.y,this.p1.y),Math.max(this.z,
this.p1.z)),bottomRight:new Vector(Math.max(this.x,this.p1.x),Math.max(this.y,this.p1.y),Math.min(this.z,this.p1.z))}},b.prototype.sides=function(){var b;return b=this.corners(),[(new Line(b.topLeft)).to(b.topRight),(new Line(b.topRight)).to(b.bottomRight),(new Line(b.bottomRight)).to(b.bottomLeft),(new Line(b.bottomLeft)).to(b.topLeft)]},b.prototype.quadrants=function(){var b;return b=this.corners(),{topLeft:(new this.__proto__.constructor(b.topLeft)).to(this.center),topRight:(new this.__proto__.constructor(b.topRight)).to(this.center),
bottomLeft:(new this.__proto__.constructor(b.bottomLeft)).to(this.center),bottomRight:(new this.__proto__.constructor(b.bottomRight)).to(this.center)}},b.prototype.clone=function(){var m;return m=(new b(this)).to(this.p1),m.to(this.p1.clone()),m},b}(Pair);
this.Grid=Grid=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.cell={type:"fix-fix",size:new Vector};this.columns=this.rows=0;this.layout=[];this.cellCallback=null}return extend(b,J),b.prototype.toString=function(){var b;return b=this.size(),"Grid width "+b.x+", height "+b.y+", columns "+this.columns+", rows "+this.rows+", "+("cell ("+this.cell.size.x+", "+this.cell.size.y+"), type "+this.cell.type)},b.prototype.init=function(b,g,h,c){var l;return null==h&&(h="fix"),null==
c&&(c="fix"),l=this.size(),this.cell.type=h+"-"+c,this.rows=g,this.columns=b,"stretch"===h?(this.cell.size.x=l.x/b,this.columns=b):"flex"===h?(this.columns=Math.round(l.x/b),this.cell.size.x=l.x/this.columns):(this.cell.size.x=b,this.columns=Math.floor(l.x/this.cell.size.x)),"stretch"===c?(this.cell.size.y=l.y/g,this.rows=g):"flex"===c?(this.rows=Math.round(l.y/g),this.cell.size.y=l.y/this.rows):(this.cell.size.y=g,this.rows=Math.floor(l.y/this.cell.size.y)),this},b.prototype.generate=function(b){return"function"==
typeof b&&(this.cellCallback=b),this},b.prototype.create=function(){var b,g,h,c,l,e,f,v,d;if(!this.cellCallback)return this;h=b=0;for(v=this.columns;0<=v?v>b:b>v;h=0<=v?++b:--b)for(f=g=0,d=this.rows;0<=d?d>g:g>d;f=0<=d?++g:--g)c=this.cell.size.clone(),e=this.$add(c.$multiply(h,f)),l=0<this.layout.length&&0<this.layout[0].length?1===this.layout[f][h]:!1,this.cellCallback(c,e,f,h,this.cell.type,l);return this},b.prototype.getCellSize=function(){return this.cell.size.clone()},b.prototype.cellToRectangle=
function(b,g,h){return null==h&&(h=!1),h||0<=b&&b<this.columns&&0<=g&&g<this.rows?(new Rectangle(this.$add(this.cell.size.$multiply(b,g)))).resizeTo(this.cell.size):!1},b.prototype.positionToCell=function(b){var g,h;return h=new Vector(this._getArgs(arguments)),g=h.$subtract(this).$divide(this.cell.size).floor(),g.max(0,0).min(this.columns-1,this.rows-1),g},b.prototype.resetLayout=function(b){var g,h,c,l,e,f;this.layout=[];l=g=0;for(e=this.rows;0<=e?e>g:g>e;l=0<=e?++g:--g)for(this.layout[l]=[],c=
h=0,f=this.columns;0<=f?f>h:h>f;c=0<=f?++h:--h)this.layout[l][c]=0,b&&b(this,l,c);return this},b.prototype.occupy=function(b,g,h,c,l){var e,f,v,d,p;if(null==l&&(l=!0),0>=this.rows||0>=this.columns)return this;1>this.layout.length&&this.resetLayout();for(v=e=0;0<=h?h>e:e>h;v=0<=h?++e:--e)for(d=f=0,p=c;0<=p?p>f:f>p;d=0<=p?++f:--f)this.layout[Math.min(this.layout.length-1,g+d)][b+v]=l?1:0;return this},b.prototype.canFit=function(b,g,h,c){var l,e,f,v,d,p,t;v=l=g;for(d=Math.min(this.rows,g+c);d>=g?d>l:
l>d;v=d>=g?++l:--l)for(f=c=p=b,t=Math.min(this.columns,b+h);t>=p?t>c:c>t;f=t>=p?++c:--c)if(e=this.layout[v][f],null!=e&&0<e)return!1;return!0},b.prototype.fit=function(b,g){var h,c,l,e,f,v,d,p,t,x,w;v=Math.min(b,this.columns);p=h=0;for(x=this.rows;0<=x?x>h:h>x;p=0<=x?++h:--h)for(f=v,d=c=t=0,w=this.columns;0<=w?w>c:c>w;d=0<=w?++c:--c)if(e=this.layout[p][d],null!=e&&0<e)t++,f=v;else if(f--,0>=f)return this.occupy(t,p,v,g),l=new Rectangle(this.$add(this.cell.size.$multiply(t,p))),l.resizeTo(this.cell.size.$multiply(v,
g)),{row:p,column:t,columnSize:v,rowSize:g,bound:l};return!1},b.prototype.neighbors=function(b,g){var h,c,l,e,f;f=[[b-1,g-1],[b,g-1],[b+1,g-1],[b+1,g],[b+1,g+1],[b,g+1],[b-1,g+1],[b-1,g]];e=[];h=0;for(c=f.length;c>h;h++)l=f[h],e.push(0<=l[0]&&l[0]<this.columns&&0<=l[1]&&l[1]<this.rows?new Vector(l[0],l[1],this.layout[l[1]][l[0]]):!1);return e},b}(Rectangle);
this.PointSet=PointSet=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.points=[]}return extend(b,J),b.prototype.toString=function(){var b,g,h,c,l;l="PointSet [ ";c=this.points;b=0;for(g=c.length;g>b;b++)h=c[b],l+=h.x+","+h.y+","+h.z+", ";return l+" ]"},b.prototype.toArray=function(){return this.points.slice()},b.prototype.to=function(b){var g,h,c,l;if(0<arguments.length)if(Array.isArray(arguments[0])&&0<arguments[0].length&&"object"==typeof arguments[0][0])for(l=arguments[0],
g=0,h=l.length;h>g;g++)c=l[g],this.points.push(new Vector(c));else this.points.push(new Vector(Point.get(arguments)));return this},b.prototype.getAt=function(b){return this.points[Math.min(this.points.length-1,Math.max(0,b))]},b.prototype.$getAt=function(b){return new Vector(this.getAt(b))},b.prototype.setAt=function(b,g){return this.points[b]=g,this},b.prototype.count=function(){return this.points.length},b.prototype.connectFromAnchor=function(b){var g,h,c,l;if(0<arguments.length)if(Array.isArray(arguments[0])&&
0<arguments[0].length)for(l=arguments[0],g=0,h=l.length;h>g;g++)c=l[g],this.points.push(this.$add(c));else this.points.push(this.$add(Point.get(arguments)));return this},b.prototype.disconnect=function(b){return null==b&&(b=-1),this.points=0>b?this.points.slice(0,this.points.length+b):this.points.slice(b+1),this},b.prototype.sides=function(b){var g,h,c,l,e,f;null==b&&(b=!0);h=null;f=[];e=this.points;g=0;for(c=e.length;c>g;g++)l=e[g],h&&f.push((new Line(h)).to(l)),h=l;return 1<this.points.length&&
b&&f.push((new Line(h)).to(this.points[0])),f},b.prototype.angles=function(b){var g,h,c,l,e;g=[];h=b=1;for(c=this.points.length-1;c>b;h=b+=1)l=this.points[h-1].$subtract(this.points[h]),e=this.points[h+1].$subtract(this.points[h]),g.push({p0:this.points[h-1],p1:this.points[h],p2:this.points[h+1],angle:l.angleBetween(e)});return g},b.prototype.bounds=function(){return Util.boundingBox(this.points)},b.prototype.centroid=function(){return Util.centroid(this.points)},b.prototype.convexHull=function(b){var g,
h,c,l;if(null==b&&(b=!0),3>this.points.length)return[];b?(l=this.points.slice(),l.sort(function(b,c){return b.x-c.x})):l=this.points;h=function(b,c,h){return 0<(c.x-b.x)*(h.y-b.y)-(h.x-b.x)*(c.y-b.y)};b=[];h(l[0],l[1],l[2])?(b.push(l[0]),b.push(l[1])):(b.push(l[1]),b.push(l[0]));b.unshift(l[2]);b.push(l[2]);for(g=3;g<l.length;){if(c=l[g],!h(c,b[0],b[1])||!h(b[b.length-2],b[b.length-1],c)){for(;!h(b[b.length-2],b[b.length-1],c);)b.pop();for(b.push(c);!h(b[0],b[1],c);)b.shift();b.unshift(c)}g++}return b},
b.prototype.clone=function(){return(new b(this)).to(Util.clonePoints(this.points))},b}(Vector);
this.Curve=Curve=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.is3D=!1}return extend(b,J),b.prototype._getSteps=function(b){var g,h,c;c=[];for(h=g=0;b>=g;h=g+=1)h/=b,c.push([h,h*h,h*h*h]);return c},b.prototype.controlPoints=function(b,g){var h,c,l,e,f;return null==b&&(b=0),null==g&&(g=!1),h=function(b){return function(c){return c<b.points.length-1?c:b.points.length-1}}(this),c=this.points[b],null==c.x?!1:(b=g?b:b+1,l=this.points[h(b++)],e=this.points[h(b++)],f=this.points[h(b++)],
{p0:c,p1:l,p2:e,p3:f})},b.prototype.catmullRom=function(b){var g,h,c,l,e,f,v;if(null==b&&(b=10),2>this.points.length)return[];e=[];v=this._getSteps(b);h=this.controlPoints(0,!0);c=g=0;for(l=b;l>=g;c=g+=1)e.push(this.catmullRomPoint(v[c],h));for(l=0;l<this.points.length-2;)if(h=this.controlPoints(l)){c=g=0;for(f=b;f>=g;c=g+=1)e.push(this.catmullRomPoint(v[c],h));l++}return e},b.prototype.catmullRomPoint=function(b,g){var h,c,l,e,f,v,d,p,t,x;return f=b[0],v=b[1],d=b[2],h=-.5*d+v-.5*f,c=1.5*d-2.5*v+
1,l=-1.5*d+2*v+.5*f,e=.5*d-.5*v,p=h*g.p0.x+c*g.p1.x+l*g.p2.x+e*g.p3.x,t=h*g.p0.y+c*g.p1.y+l*g.p2.y+e*g.p3.y,x=this.is3D?h*g.p0.z+c*g.p1.z+l*g.p2.z+e*g.p3.z:0,new Point(p,t,x)},b.prototype.cardinal=function(b,g){var h,c,l,e,f,v,d;if(null==b&&(b=10),null==g&&(g=.5),2>this.points.length)return[];f=[];d=this._getSteps(b);c=this.controlPoints(0,!0);l=h=0;for(e=b;e>=h;l=h+=1)f.push(this.cardinalPoint(d[l],c,g));for(e=0;e<this.points.length-2;)if(c=this.controlPoints(e)){l=h=0;for(v=b;v>=h;l=h+=1)f.push(this.cardinalPoint(d[l],
c,g));e++}return f},b.prototype.cardinalPoint=function(b,g,h){var c,l,e,f,v,d,p,t,x,w,u,r;return null==h&&(h=.5),p=b[0],t=b[1],x=b[2],c=h*(-1*x+2*t-p),l=h*(-1*x+t),e=2*x-3*t+1,f=h*(x-2*t+p),v=-2*x+3*t,d=h*(x-t),w=g.p0.x*c+g.p1.x*l+e*g.p1.x+g.p2.x*f+v*g.p2.x+g.p3.x*d,u=g.p0.y*c+g.p1.y*l+e*g.p1.y+g.p2.y*f+v*g.p2.y+g.p3.y*d,r=this.is3D?g.p0.z*c+g.p1.z*l+e*g.p1.z+g.p2.z*f+v*g.p2.z+g.p3.z*d:0,new Point(w,u,r)},b.prototype.bezier=function(b){var g,h,c,l,e,f,v;if(null==b&&(b=10),4>this.points.length)return[];
e=[];v=this._getSteps(b);for(l=0;l<=this.points.length-3;)if(h=this.controlPoints(l)){c=g=0;for(f=b;f>=g;c=g+=1)e.push(this.bezierPoint(v[c],h));l+=3}return e},b.prototype.bezierPoint=function(b,g){var h,c,l,e,f,v,d,p,t;return e=b[0],f=b[1],v=b[2],h=-1*v+3*f-3*e+1,c=3*v-6*f+3*e,l=-3*v+3*f,d=h*g.p0.x+c*g.p1.x+l*g.p2.x+v*g.p3.x,p=h*g.p0.y+c*g.p1.y+l*g.p2.y+v*g.p3.y,t=this.is3D?h*g.p0.z+c*g.p1.z+l*g.p2.z+v*g.p3.z:0,new Point(d,p,t)},b.prototype.bspline=function(b,g){var h,c,l,e,f,v,d;if(null==b&&(b=
10),null==g&&(g=!1),2>this.points.length)return[];f=[];d=this._getSteps(b);for(e=0;e<this.points.length-2;)if(c=this.controlPoints(e)){if(g)for(l=h=0,v=b;v>=h;l=h+=1)f.push(this.bsplineTensionPoint(d[l],c,g));else for(l=h=0,v=b;v>=h;l=h+=1)f.push(this.bsplinePoint(d[l],c));e++}return f},b.prototype.bsplinePoint=function(b,g){var h,c,l,e,f,v,d,p,t,x;return f=b[0],v=b[1],d=b[2],h=-.16666666666*d+.5*v-.5*f+.16666666666,c=.5*d-v+.66666666666,l=-.5*d+.5*v+.5*f+.16666666666,e=.16666666666*d,p=h*g.p0.x+
c*g.p1.x+l*g.p2.x+e*g.p3.x,t=h*g.p0.y+c*g.p1.y+l*g.p2.y+e*g.p3.y,x=this.is3D?h*g.p0.z+c*g.p1.z+l*g.p2.z+e*g.p3.z:0,new Point(p,t,x)},b.prototype.bsplineTensionPoint=function(b,g,h){var c,l,e,f,v,d,p,t,x,w,u,r;return null==h&&(h=1),p=b[0],t=b[1],x=b[2],c=h*(-.16666666666*x+.5*t-.5*p+.16666666666),l=h*(-1.5*x+2*t-.33333333333),e=2*x-3*t+1,f=h*(1.5*x-2.5*t+.5*p+.16666666666),v=-2*x+3*t,d=.16666666666*h*x,w=c*g.p0.x+l*g.p1.x+e*g.p1.x+f*g.p2.x+v*g.p2.x+d*g.p3.x,u=c*g.p0.y+l*g.p1.y+e*g.p1.y+f*g.p2.y+v*
g.p2.y+d*g.p3.y,r=this.is3D?c*g.p0.z+l*g.p1.z+e*g.p1.y+f*g.p2.z+v*g.p2.z+d*g.p3.z:0,new Point(w,u,r)},b}(PointSet);
this.Triangle=Triangle=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.p1=new Vector(this.x-1,this.y-1,this.z);this.p2=new Vector(this.x+1,this.y+1,this.z)}return extend(b,J),b.prototype.to=function(b){return 0<arguments.length&&("object"==typeof arguments[0]&&2===arguments.length?(this.p1.set(arguments[0]),this.p2.set(arguments[1])):6>arguments.length?(this.p1.set([arguments[0],arguments[1]]),this.p2.set([arguments[2],arguments[3]])):(this.p1.set([arguments[0],arguments[1],
arguments[2]]),this.p2.set([arguments[3],arguments[4],arguments[5]]))),this},b.prototype.toArray=function(){return[this,this.p1,this.p2]},b.prototype.toString=function(){return"Triangle ("+this.x+", "+this.y+", "+this.z+"), ("+this.p1.x+", "+this.p1.y+", "+this.p1.z+"), ("+this.p2.x+", "+this.p2.y+", "+this.p2.z+")"},b.prototype.getAt=function(b){return 1===b||"p1"===b?this.p1:2===b||"p2"===b?this.p2:this},b.prototype.$getAt=function(b){return new Vector(this.getAt(b))},b.prototype.toPointSet=function(){var b;
return b=new Vector(this),(new PointSet(b)).to([b,this.p1,this.p2])},b.prototype.sides=function(){return[(new Line(this)).to(this.p1),(new Line(this.p1)).to(this.p2),(new Line(this.p2)).to(this)]},b.prototype.angles=function(b){var g;return null==b&&(b=Const.xy),g=[this.p2.$subtract(this).angleBetween(this.p1.$subtract(this),b),this.$subtract(this.p1).angleBetween(this.p2.$subtract(this.p1),b)],g.push(Math.PI-g[0]-g[1]),g},b.prototype.medial=function(){var m,g;g=this.sides();var h,c,l;l=[];h=0;for(c=
g.length;c>h;h++)m=g[h],l.push(m.midpoint());return(new b(l[0])).to(l[1],l[2])},b.prototype.perimeter=function(){var b,g;return g=this.sides(),b=[g[0].length(),g[1].length(),g[2].length()],{sides:g,value:b[0]+b[1]+b[2],lengths:b}},b.prototype.area=function(){var b,g;return g=this.perimeter(),b=g.value/2,{value:Math.sqrt(b*(b-g.lengths[0])*(b-g.lengths[1])*(b-g.lengths[2])),perimeter:g}},b.prototype.oppositeSide=function(b){return"p1"===b?(new Line(this)).to(this.p2):"p2"===b?(new Line(this)).to(this.p1):
(new Line(this.p1)).to(this.p2)},b.prototype.adjacentSides=function(b){return"p1"===b?[(new Line(this.p1)).to(this),(new Line(this.p1)).to(this.p2)]:"p2"===b?[(new Line(this.p2)).to(this),(new Line(this.p2)).to(this.p1)]:[(new Line(this)).to(this.p1),(new Line(this)).to(this.p2)]},b.prototype.bisector=function(b,g,h){var c,l,e;return null==g&&(g=!1),null==h&&(h=100),c=this.adjacentSides(b),e=new Vector(c[0]),c[0].moveTo(0,0),c[1].moveTo(0,0),l=c[0].p1.bisect(c[1].p1),g?(new Line(e)).to(l.multiply(h).add(e)):
l},b.prototype.altitude=function(b){return"p1"===b||"p2"===b?(new Line(this[b])).to(this.oppositeSide(b).getPerpendicularFromPoint(this[b])):(new Line(this)).to(this.oppositeSide().getPerpendicularFromPoint(this))},b.prototype.centroid=function(){var b,g,h;return b=this.$divide(3),g=this.p1.$divide(3),h=this.p2.$divide(3),new Vector(b.x+g.x+h.x,b.y+g.y+h.y,b.z+g.z+h.z)},b.prototype.orthocenter=function(){var b,g;return b=this.altitude(),g=this.altitude("p1"),b.intersectPath(g,Const.xyz)},b.prototype.incenter=
function(){var b,g;return b=this.bisector("p0",!0),g=this.bisector("p1",!0),b.intersectPath(g,Const.xyz)},b.prototype.incircle=function(){var b,g,h;return g=this.incenter(),b=this.area(),h=2*b.value/b.perimeter.value,(new Circle(g)).setRadius(h)},b.prototype.circumcenter=function(){var b,g;return b=this.medial(),g=[(new Line(b)).to(this.$subtract(b).perpendicular()[0].$add(b)),(new Line(b.p1)).to(this.p1.$subtract(b.p1).perpendicular()[0].$add(b.p1)),(new Line(b.p2)).to(this.p2.$subtract(b.p2).perpendicular()[0].$add(b.p2))],
{center:g[0].intersectPath(g[1],Const.xyz),bisectors:g}},b.prototype.circumcircle=function(){var b,g;return b=this.circumcenter(),g=this.magnitude(b.center),(new Circle(b.center)).setRadius(g)},b.prototype.intersectPoint=function(b){var g,h;h=this.sides();var c,l,e;e=[];c=0;for(l=h.length;l>c;c++)g=h[c],e.push(0<g.collinear(b));return e[0]===e[1]&&e[1]===e[2]},b.prototype.intersectPath=function(b,g,h){var c,l,e,f,v,d;null==g&&(g=!0);null==h&&(h=Const.xy);d=this.sides();f=[];c=0;for(l=d.length;l>c;c++)if(v=
d[c],e=v.intersectPath(b),e&&v.withinBounds(e,h)){if(!g)return!0;f.push(e)}return g?f:!1},b.prototype.intersectLine=function(b,g,h){var c,l,e,f;null==g&&(g=!0);null==h&&(h=Const.xy);c=this.intersectPath(b,!0,h);f=[];h=0;for(l=c.length;l>h;h++)if(e=c[h],b.withinBounds(e)){if(!g)return!0;f.push(e)}return g?f:!1},b.prototype.intersectLines=function(b,g){return null==g&&(g=!0),Line.intersectLines(this,b,g)},b.prototype.intersectPath3D=function(b,g){var h,c,l,e,f,v,d,p,t,x,w;return l=this.p1.$subtract(this),
e=this.p2.$subtract(this),c=b.direction().normalize(),v=c.cross(e),h=l.dot(v),h>-Const.epsilon&&h<Const.epsilon?!1:(f=1/h,t=b.$subtract(this),x=t.dot(v)*f,0>x||1<x?!1:(d=t.cross(l),w=c.dot(d)*f,0>w||1<w?!1:(p=e.dot(d)*f,p>Const.epsilon?g?[x,w,p]:!0:!1)))},b.prototype.intersectRectangle=function(b,g){return null==g&&(g=!0),b.intersectLines(this.sides(),g)},b.prototype.intersectCircle=function(b,g){return null==g&&(g=!0),b.intersectLines(this.sides(),g)},b.prototype.intersectTriangle=function(b,g){return null==
g&&(g=!0),b.intersectLines(this.sides(),g)},b.prototype.clone=function(){return(new b(this)).to(this.p1,this.p2)},b}(Vector);
this.SVGForm=SVGForm=function(){function J(b){this.cc=b.ctx||{};this.cc.group=this.cc.group||null;this.cc.groupID="ptx";this.cc.groupCount=0;this.cc.currentID="ptx0";this.cc.style={fill:"#999",stroke:"#666","stroke-width":1,"stroke-linejoin":!1,"stroke-linecap":!1};this.cc.font="11px sans-serif";this.cc.fontSize=11;this.cc.fontFace="sans-serif"}return J._domId=0,J.prototype.fill=function(b){return this.cc.style.fill=b?b:!1,this},J.prototype.stroke=function(b,m,g,h){return this.cc.style.stroke=b?b:
!1,m&&(this.cc.style["stroke-width"]=m),g&&(this.cc.style["stroke-linejoin"]=g),h&&(this.cc.style["stroke-linecap"]=g),this},J.prototype.scope=function(b,m){return null==m&&(m=!1),m&&(this.cc.group=m),this.cc.groupID=b,this.cc.groupCount=0,this.nextID(),this.cc},J.prototype.getScope=function(b){if(!b||null===b.animateID)throw"getScope()'s item must be added to a Space, and has an animateID property. Otherwise, use scope() instead.";return this.scope(J._scopeID(b))},J.prototype.nextID=function(){return this.cc.groupCount++,
this.cc.currentID=this.cc.groupID+"-"+this.cc.groupCount,this.cc.currentID},J.id=function(b){return b.currentID||"p-"+J._domId++},J._scopeID=function(b){return"item"+b.animateID},J.style=function(b,m){var g,h,c;h={};for(g in m)(c=m[g])?h[g]=c:("fill"===g||"stroke"===g)&&(h[g]="none");return DOMSpace.attr(b,h)},J.point=function(b,m,g,h,c,l){var e;return null==g&&(g=2),null==l&&(l=!1),(e=SVGSpace.svgElement(b.group,l?"circle":"rect",J.id(b)))?(l?DOMSpace.attr(e,{cx:m.x,cy:m.y,r:g}):DOMSpace.attr(e,
{x:m.x-g,y:m.y-g,width:g+g,height:g+g}),J.style(e,b.style),e):void 0},J.prototype.point=function(b,m,g){return null==m&&(m=2),null==g&&(g=!1),this.nextID(),J.point(this.cc,b,m,!0,!0,g),this},J.points=function(b,m,g,h,c,l){var e;null==g&&(g=2);null==h&&(h=!0);null==c&&(c=!0);null==l&&(l=!1);var f,v,d;d=[];f=0;for(v=m.length;v>f;f++)e=m[f],d.push(J.point(b,e,g,h,c,l));return d},J.prototype.points=function(b,m,g){var h,c,l;null==m&&(m=2);null==g&&(g=!1);h=0;for(c=b.length;c>h;h++)l=b[h],this.point(l,
m,g);return this},J.line=function(b,m){var g;if(!m.p1)throw m.toString()+" is not a Pair";return g=SVGSpace.svgElement(b.group,"line",J.id(b)),DOMSpace.attr(g,{x1:m.x,y1:m.y,x2:m.p1.x,y2:m.p1.y}),J.style(g,b.style),g},J.prototype.line=function(b){return this.nextID(),J.line(this.cc,b),this},J.lines=function(b,m){var g,h,c,l;l=[];h=0;for(c=m.length;c>h;h++)g=m[h],l.push(J.line(b,g));return l},J.prototype.lines=function(b){var m,g,h;m=0;for(g=b.length;g>m;m++)h=b[m],this.line(h);return this},J.rect=
function(b,m,g,h){var c,l;if(!m.p1)throw""+(m.toString()===!a(Pair));return c=SVGSpace.svgElement(b.group,"rect",J.id(b)),l=m.size(),DOMSpace.attr(c,{x:m.x,y:m.y,width:l.x,height:l.y}),J.style(c,b.style),c},J.prototype.rect=function(b,m){var g;return null==m&&(m=!0),this.nextID(),g=m?b.bounds():b,J.rect(this.cc,g),this},J.circle=function(b,m,g,h){var c;return(c=SVGSpace.svgElement(b.group,"circle",J.id(b)))?(DOMSpace.attr(c,{cx:m.x,cy:m.y,r:m.radius}),J.style(c,b.style),c):void 0},J.prototype.circle=
function(b){return this.nextID(),J.circle(this.cc,b),this},J.polygon=function(b,m,g,h,c){null==g&&(g=!0);g=SVGSpace.svgElement(b.group,g?"polygon":"polyline",J.id(b));if(!g||1>=m.length)b=void 0;else{var l,e;e=[];h=c=0;for(l=m.length;l>c;h=c+=1)e.push(m[h].x+","+m[h].y);b=(DOMSpace.attr(g,{points:e.join(" ")}),J.style(g,b.style),g)}return b},J.prototype.polygon=function(b,m){return this.nextID(),J.polygon(this.cc,b,m),this},J.triangle=function(b,m,g,h){return J.polygon(b,m.toArray())},J.prototype.triangle=
function(b){return this.nextID(),J.triangle(this.cc,b),this},J.curve=function(b,m,g){return null==g&&(g=!1),J.polygon(b,m,g)},J.prototype.curve=function(b,m){return null==m&&(m=!1),this.nextID(),J.curve(this.cc,b,m),this},J.text=function(b,m,g,h,c,l){var e;return(e=SVGSpace.svgElement(b.group,"text",J.id(b)))?(DOMSpace.attr(e,{"pointer-events":"none",x:m.x,y:m.y,dx:0,dy:0}),e.textContent=g,J.style(e,{fill:b.style.fill,stroke:b.style.stroke,"font-family":b.fontFace||!1,"font-size":b.fontSize||!1}),
e):void 0},J.prototype.text=function(b,m,g,h,c){return null==g&&(g=1E3),this.nextID(),J.text(this.cc,b,m,g,h,c),this},J.prototype.font=function(b,m){return null==m&&(m=!1),this.cc.fontFace=m,this.cc.fontSize=b,this.cc.font=b+"px "+m,this},J.prototype.draw=function(b){return this.sketch(b)},J.prototype.sketch=function(b){return b.floor(),b instanceof Circle?J.circle(this.cc,b,this.filled,this.stroked):b instanceof Rectangle?J.rect(this.cc,b,this.filled,this.stroked):b instanceof Triangle?J.triangle(this.cc,
b,this.filled,this.stroked):b instanceof Line||b instanceof Pair?J.line(this.cc,b):b instanceof PointSet?J.polygon(this.cc,b.points):(b instanceof Vector||b instanceof Point)&&J.point(this.cc,b),this},J}();
this.SVGSpace=SVGSpace=function(J){function b(m,g,h){null==m&&(m="pt_space");null==g&&(g=!1);null==h&&(h="svg");b.__super__.constructor.apply(this,arguments);this.bg=document.createElementNS("http://www.w3.org/2000/svg","rect");this.bg.setAttribute("id",m+"_bg");this.bg.setAttribute("fill",g);this.space.appendChild(this.bg)}return extend(b,J),b.prototype._createSpaceElement=function(){return this.space=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.space.setAttribute("id",this.id),
this.appended=!1},b.svgElement=function(b,g,h){var c;if(!b||!b.appendChild)throw"parent parameter needs to be a DOM node";return c=document.querySelector("#"+h),c||(c=document.createElementNS("http://www.w3.org/2000/svg",g),c.setAttribute("id",h),c.setAttribute("class",h.substring(0,h.indexOf("-"))),b.appendChild(c)),c},b.prototype.resize=function(b,g,h){var c,l,e;this.size.set(b,g);this.center=new Vector(b/2,g/2);this.space.setAttribute("width",b);this.space.setAttribute("height",g);this.bg.setAttribute("width",
b);this.bg.setAttribute("height",g);e=this.items;for(c in e)l=e[c],null!=l.onSpaceResize&&l.onSpaceResize(b,g,h);return this},b.prototype.remove=function(b){var g,h,c,l;l=this.space.querySelectorAll("."+SVGForm._scopeID(b));g=0;for(h=l.length;h>g;g++)c=l[g],c.parentNode.removeChild(c);return delete this.items[b.animateID],this},b.prototype.removeAll=function(){for(;this.space.firstChild;)return this.space.removeChild(this.space.firstChild),this},b}(DOMSpace);
this.Easing=Easing=function(){function J(){}return J.linear=function(b,m,g,h){return b/h*g+m},J._linear=function(b){return J.linear(b,0,1,1)},J.quadIn=function(b,m,g,h){return g*(b/=h)*b+m},J._quadIn=function(b){return J.quadIn(b,0,1,1)},J.quadOut=function(b,m,g,h){return-g*(b/=h)*(b-2)+m},J._quadOut=function(b){return J.quadOut(b,0,1,1)},J.cubicIn=function(b,m,g,h){return b/=h,g*b*b*b+m},J._cubicIn=function(b){return J.cubicIn(b,0,1,1)},J.cubicOut=function(b,m,g,h){return b/=h,g*((b-1)*b*b+1)+m},
J._cubicOut=function(b){return J.cubicOut(b,0,1,1)},J.elastic=function(b,m,g,h,c){var l,e,f;return null==c&&(c=.3),e=h*c,l=g,0===b?m:(b/=h,1===b?m+g:(l<Math.abs(g)?(l=g,f=e/4):f=0!==l?e/Const.two_pi*Math.asin(g/l):0,l*Math.pow(2,-10*b)*Math.sin((b*h-f)*Const.two_pi/e)+g+m))},J._elastic=function(b){return J.elastic(b,0,1,1)},J.bounce=function(b,m,g,h){return(b/=h)<1/2.75?7.5625*g*b*b+m:2/2.75>b?g*(7.5625*(b-=1.5/2.75)*b+.75)+m:2.5/2.75>b?g*(7.5625*(b-=2.25/2.75)*b+.9375)+m:g*(7.5625*(b-=2.625/2.75)*
b+.984375)+m},J._bounce=function(b){return J.bounce(b,0,1,1)},J}();
this.GridCascade=GridCascade=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.startRow=0}return extend(b,J),b.prototype.resetLayout=function(){return this.layout=[],this.startRow=0},b.prototype.occupy=function(b,g,h,c){var l,e,f,v,d,p;e=l=b;for(v=h+b;v>=b?v>l:l>v;e=v>=b?++l:--l)for(f=h=d=g,p=c+g;p>=d?p>h:h>p;f=p>=d?++h:--h)null==this.layout[f]&&(this.layout[f]=[]),this.layout[f][e]=1;return this},b.prototype.findStartRow=function(){var b,g,h,c,l,e,f,v;l=b=e=c=this.startRow;
for(f=this.rows;f>=e?f>b:b>f;l=f>=e?++b:--b)for(c=l,h=g=0,v=this.columns;0<=v?v>g:g>v;h=0<=v?++g:--g)if(null!=this.layout[l]&&(null==this.layout[l][h]||0>=this.layout[l][h]))return c;return c},b.prototype.fit=function(b,g){var h,c,l,e,f,v,d,p,t,x,w,u,r,y,k,q;p=Math.min(b,this.columns);t=h=u=this.startRow;for(r=this.rows;r>=u?r>h:h>r;t=r>=u?++h:--h)for(d=p,x=0,t+g>=this.rows&&(this.rows+=g),null==this.layout[t]&&(this.layout[t]=[]),l=c=0,y=this.columns;0<=y?y>c:c>y;l=0<=y?++c:--c)if(v=this.layout[t][l],
null!=v&&0<v)x=l+1,d=p;else if(d--,0===d){if(e=!0,1<g)for(w=l=k=t,q=t+g;q>=k?q>l:l>q;w=q>=k?++l:--l)if(w<=this.rows&&null!=this.layout[w]&&0<this.layout[w][x]){e=!1;break}if(e)return this.occupy(x,t,p,g),t>this.startRow&&(this.startRow=this.findStartRow()),f=new Rectangle(this.$add(this.cell.size.$multiply(x,t))),f.resizeTo(this.cell.size.$multiply(p,g)),{row:t,column:x,columnSize:p,rowSize:g,bound:f}}return console.error("cannot fit "+t+" "+x+" "+b+" "+g),!1},b}(Grid);
this.ParticleEmitter=ParticleEmitter=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.system=null;this.period=this.lastTime=0;this.animateID=-1}return extend(b,J),b.prototype.init=function(b){return this.system=b},b.prototype.frequency=function(b){return this.period=1E3/b,this},b.prototype.emit=function(){},b.prototype.animate=function(b,g,h){return b-this.lastTime>this.period?(this.emit(),this.lastTime=b):void 0},b}(Vector);
this.ParticleField=ParticleField=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.system=void 0}return extend(b,J),b.prototype.check=function(b,g){var h,c,l,e;null==g&&(g=!1);e=[];h=0;for(c=b.length;c>h;h++)l=b[h],this.hasIntersect(l)?this.work(l):e.push(l);return g?e:b},b.prototype.work=function(b){},b}(Rectangle);
this.QuadTree=QuadTree=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.quads=!1;this.items=[];this.depth=0;this.max_depth=6;this.max_items=2}return extend(b,J),b.prototype.getQuads=function(b,g){var h,c,l;if(null==g&&(g=[]),this.intersectPoint(b)&&(g.push(this),this.quads))for(h in l=this.quads,l)c=l[h],c.intersectPoint(b)&&c.getQuads(b,g);return g},b.prototype.getItems=function(b){var g,h,c;if(this.intersectPoint(b)){if(!this.quads)return this.items;if(this.quads)for(g in c=
this.quads,c)if(h=c[g],h.intersectPoint(b))return h.getItems(b)}return[]},b.prototype.addToQuad=function(b){var g,h,c,l;if(!b)return-1;if(this.quads){l=this.quads;for(h in l)if(c=l[h],g=c.addToQuad(b),0<g)return g;return-1}return!this.quads&&this.intersectPoint(b)?this.items.length>=this.max_items?this.depth<this.max_depth?(this.splitQuad(),this.addToQuad(b)):-1:(this.items.push(b),this.depth):-1},b.prototype.splitQuad=function(){var b,g,h,c,l;c=this.quads=this.quadrants();for(g in c)h=c[g],h.depth=
this.depth+1;l=this.items;h=g=0;for(c=l.length;c>g;h=++g)b=l[h],b=this.addToQuad(b),b>this.depth&&(this.items[h]=null);c=this.items;l=[];g=0;for(h=c.length;h>g;g++)b=c[g],l.push(b?void 0:this.items.splice(b,1));return l},b.prototype.resetQuad=function(){var b,g,h;if(this.items=[],this.quads){h=this.quads;for(b in h)g=h[b],g.resetQuad();return this.quads=!1}},b}(Rectangle);
this.SamplePoints=SamplePoints=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.boundsize=this.bound=this.poisson=this.bestcandidate=null}return extend(b,J),b.prototype.setBounds=function(b,g){return null==g&&(g=!1),g&&this.set(b),this.bound=(new Rectangle(this)).size(b.size()),this},b.prototype.bestCandidateSampler=function(){return this.points=[],this.bound||(this.bound=(new Rectangle).size(500,500)),this.boundsize=this.bound.size(),this.bestcandidate={halfsize:this.boundsize.$divide(2),
quartersize:this.boundsize.$divide(4),maxDist:this.boundsize.x*this.boundsize.x+this.boundsize.y*this.boundsize.y},this},b.prototype.poissonSampler=function(b){var g;return this.points=[],this.bound||(this.bound=(new Rectangle).size(500,500)),this.boundsize=this.bound.size(),g=b*Math.SQRT1_2,this.poisson={grid:[],gridWidth:Math.ceil(this.boundsize.x/g),gridHeight:Math.ceil(this.boundsize.y/g),cellSize:g,radius:b,radius2:b*b,R:3*b*b,queue:[],queueSize:0,sampleSize:0,sincos:Util.sinCosTable()},this},
b.prototype.sample=function(b,g){var h,c,l,e,f,v,d,p;if(null==b&&(b=10),null==g&&(g=!1),this.poisson&&"poisson"===g){if(0<this.poisson.sampleSize&&0===this.poisson.queueSize)return!1;if(!this.poisson.sampleSize)return this._poissonSample(this.bound.x+this.boundsize.x/2,this.bound.y+this.boundsize.y/2);for(;this.poisson.queueSize;){l=Math.floor(Math.random()*this.poisson.queueSize);v=this.poisson.queue[l];c=0;for(f=b;f>c;c+=1)if(h=Math.floor(360*Math.random()),e=Math.sqrt(Math.random()*this.poisson.R+
this.poisson.radius2),d=v.x+e*this.poisson.sincos.cos[h],p=v.y+e*this.poisson.sincos.sin[h],d>=this.bound.x&&d<this.boundsize.x&&p>=this.bound.y&&p<this.boundsize.y&&this._poissonCheck(d,p))return this._poissonSample(d,p);this.poisson.queue[l]=this.poisson.queue[--this.poisson.queueSize];this.poisson.queue.length=this.poisson.queueSize}return!0}if(this.bestcandidate){c=null;l=-1;h=0;for(v=b;v>h;h+=1){if(f=new Vector(this.bound.x+this.boundsize.x*Math.random(),this.bound.y+this.boundsize.y*Math.random()),
0===this.points.length){c=f;break}e=this._bestCandidateCheck(f);e>l&&(c=f,l=e)}return c&&this.points.push(c),c}},b.prototype._bestCandidateCheck=function(b){var g,h,c,l,e;g=this.bestcandidate.maxDist;h=(new Rectangle(b.x-this.bestcandidate.quartersize.x,b.y-this.bestcandidate.quartersize.y)).size(this.bestcandidate.halfsize.x,this.bestcandidate.halfsize.y);var f,v;f=this.points;v=[];c=0;for(l=f.length;l>c;c++)e=f[c],h.intersectPoint(e)&&v.push(e);h=0;for(e=v.length;e>h;h++)l=v[h],c=l.x-b.x,l=l.y-
b.y,c=c*c+l*l,g>c&&(g=c);return g},b.prototype._poissonSample=function(b,g){var h;return h=new Point(b,g),this.poisson.queue.push(h),this.poisson.grid[this.poisson.gridWidth*(g/this.poisson.cellSize|0)+(b/this.poisson.cellSize|0)]=h,this.poisson.sampleSize++,this.poisson.queueSize++,h},b.prototype._poissonCheck=function(b,g){var h,c,l,e,f,v,d,p,t,x,w;f=Math.floor(b/this.poisson.cellSize);c=Math.floor(g/this.poisson.cellSize);v=Math.max(f-2,0);h=Math.max(c-2,0);d=Math.min(f+3,this.poisson.gridWidth);
p=Math.min(c+3,this.poisson.gridHeight);for(c=h;p>h;c=h+=1)for(t=c*this.poisson.gridWidth,f=c=v,x=d;x>c;f=c+=1)if(w=this.poisson.grid[t+f],w&&(l=w.x-b,e=w.y-g,l*l+e*e<this.poisson.radius2))return!1;return!0},b.bestCandidate=function(b,g,h){var c,l,e,f,v,d,p,t,x,w;null==h&&(h=10);w=b.size();v=w.$divide(2);t=w.$divide(4);d=w.x*w.x+w.y*w.y;c=function(b){var c,h,k,q,w;c=d;h=(new Rectangle(b.x-t.x,b.y-t.y)).size(v.x,v.y);var e;e=[];k=0;for(q=g.length;q>k;k++)w=g[k],h.intersetPoint(w)&&e.push(w);h=0;for(w=
e.length;w>h;h++)q=e[h],k=q.x-b.x,q=q.y-b.y,k=k*k+q*q,c>k&&(c=k);return c};e=null;f=-1;l=0;for(x=h;0<=x?x>l:l>x;0<=x?++l:--l){if(p=new Vector(b.x+w.x*Math.random(),b.y+w.y*Math.random()),0===g.length)return p;h=c(p);h>f&&(e=p,f=h)}return e},b}(PointSet);
this.StripeBound=StripeBound=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.frequency=new Point;this.stripes=new Point;this.method="frequency";this.mask=null}return extend(b,J),b.prototype.setFrequency=function(b,g){return this.frequency=new Vector(b,g),this.method="frequency"},b.prototype.setStripes=function(b,g){return this.stripes=new Point(b,g),this.method="stripes"},b.prototype.getStripes=function(){var b,g,h,c,l,e,f;f=this.size();e={columns:[],rows:[]};c="frequency"===
this.method?this.frequency.clone():f.$divide(this.stripes).floor();h=f.$divide(c);g=b=0;for(l=c.y-1;0<=l?l>=b:b>=l;g=0<=l?++b:--b)g*=h.y,g=(new Pair(0,g)).to(f.x,g+h.y).add(this),g.p1.add(this),e.rows.push(g);g=b=0;for(c=c.x-1;0<=c?c>=b:b>=c;g=0<=c?++b:--b)g*=h.x,g=(new Pair(g,0)).to(g+h.x+.5,f.y).add(this),g.p1.add(this),e.columns.push(g);return e},b.prototype.getStripeLines=function(){var b,g,h,c,l,e,f;f=this.size();e={columns:[],rows:[]};c="frequency"===this.method?this.frequency.clone():f.$divide(this.stripes).floor();
h=f.$divide(c);g=b=0;for(l=c.y;0<=l?l>=b:b>=l;g=0<=l?++b:--b)g*=h.y,g=(new Pair(0,g)).to(f.x,g).add(this),g.p1.add(this),e.rows.push(g);g=b=0;for(c=c.x;0<=c?c>=b:b>=c;g=0<=c?++b:--b)g*=h.x,g=(new Pair(g,0)).to(g,f.y).add(this),g.p1.add(this),e.columns.push(g);return e},b.prototype.setMask=function(b,g,h){var c,l;return null==h&&(h=!1),this.mask=new Rectangle(this.x,this.y),l=this.size(),h?h=this.$add(h):(c=l.$subtract(b,g).divide(2),h=new Point(this.x+c.x,this.y+c.y)),this.mask.set(h.x,h.y).size(b,
g)},b.prototype.anchorMask=function(){var b;return b=this.$subtract(this.mask),this.moveBy(b),this.mask.moveBy(b)},b}(Rectangle);
this.UI=UI=function(J){function b(){b.__super__.constructor.apply(this,arguments);this.dragging=!1}return extend(b,J),b.dragTarget=null,b.prototype.animate=function(b,g,h){return h.fillStyle="#f00",Form.rect(h,this)},b.prototype.onMouseAction=function(m,g,h,c){return this.intersectPoint(g,h)&&("drag"!==m||b.dragTarget||(this.dragging=!0,b.dragTarget=this)),this.dragging&&"move"===m&&this.moveTo(g,h).moveBy(this.size().multiply(-.5)),"drop"===m?(this.dragging=!1,b.dragTarget=null):void 0},b}(Rectangle);
Noise=function(J){function b(){var m;b.__super__.constructor.apply(this,arguments);this.p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,
159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,9,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];
var g,h;h=[];for(m=g=0;512>g;m=++g)h.push(this.p[255&m]);this.perm=h}return extend(b,J),b.prototype.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],b.prototype.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,
0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]],b.prototype.seed=function(b){var g,h,c,l;0<b&&1>b&&(b*=65536);b=Math.floor(b);256>b&&(b|=b<<8);c=[];for(h=g=0;255>=g;h=++g)l=
1&h?this.p[h]^255&b:this.p[h]^b>>8&255,c.push(this.perm[h]=this.perm[h+256]=l);return c},b.prototype._dot=function(b,g,h){return b[0]*g+b[1]*h},b.prototype.perlin2d=function(b,g){var h,c,l,e,f,v,d,p,t,x;return null==b&&(b=this.x),null==g&&(g=this.y),h=function(b){return b*b*b*(b*(6*b-15)+10)},c=Math.floor(b)%255,l=Math.floor(g)%255,t=b-c,x=g-l,e=this._dot(this.grad3[(c+this.perm[l])%12],t,x),f=this._dot(this.grad3[(c+this.perm[l+1])%12],t,x-1),v=this._dot(this.grad3[(c+1+this.perm[l])%12],t-1,x),
d=this._dot(this.grad3[(c+1+this.perm[l+1])%12],t-1,x-1),p=h(t),Util.lerp(Util.lerp(e,v,p),Util.lerp(f,d,p),h(x))},b.prototype.simplex2d=function(b,g){var h,c,l,e,f,v,d,p,t,x,w,u,r,y,k,q,z,E,A,C,B,G,F,I,D,H,K;return null==b&&(b=this.x),null==g&&(g=this.y),h=.5*(Math.sqrt(3)-1),z=(b+g)*h,p=Math.floor(b+z),w=Math.floor(g+z),c=(3-Math.sqrt(3))/6,E=(p+w)*c,l=p-E,e=w-E,G=b-l,D=g-e,G>D?(t=1,u=0):(t=0,u=1),F=G-t+c,H=D-u+c,I=G-1+2*c,K=D-1+2*c,x=255&p,r=255&w,f=this.perm[x+this.perm[r]]%12,v=this.perm[x+t+
this.perm[r+u]]%12,d=this.perm[x+1+this.perm[r+1]]%12,A=.5-G*G-D*D,0>A?y=0:(A*=A,y=A*A*this._dot(this.grad3[f],G,D)),C=.5-F*F-H*H,0>C?k=0:(C*=C,k=C*C*this._dot(this.grad3[v],F,H)),B=.5-I*I-K*K,0>B?q=0:(B*=B,q=B*B*this._dot(this.grad3[d],I,K)),70*(y+k+q)},b}(Vector);
!function(J){"object"==typeof exports&&"undefined"!=typeof module?module.exports=J():"function"==typeof define&&define.amd?define([],J):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=J()}(function(){return function b(m,g,h){function c(e,v){if(!g[e]){if(!m[e]){var d="function"==typeof require&&require;if(!v&&d)return d(e,!0);if(l)return l(e,!0);d=Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d;}d=g[e]={exports:{}};
m[e][0].call(d.exports,function(b){var d=m[e][1][b];return c(d?d:b)},d,d.exports,b,m,g,h)}return g[e].exports}for(var l="function"==typeof require&&require,e=0;e<h.length;e++)c(h[e]);return c}({1:[function(b,m,g){b=b("../src/plotly");m={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;",
"X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);",
"X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;",
"X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var h in m)g=h.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),b.Lib.addStyleRule(g,m[h])},{"../src/plotly":348}],2:[function(b,m,g){m.exports={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",
ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
ascent:850,descent:-150},zoombox:{width:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1E3,
path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
ascent:850,descent:-150},"z-axis":{width:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
ascent:850,descent:-150},"3d_rotate":{width:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
ascent:850,descent:-150},camera:{width:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
ascent:850,descent:-150},movie:{width:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,
descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150}}},{}],3:[function(b,m,g){function h(b,
c,h){return Math.min(c,Math.max(b,h))}function c(b,c,h){this.dimension=b.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var e=0;e<this.dimension;++e)this.bounds[0][e]=-(1/0),this.bounds[1][e]=1/0;this._state=b.slice().reverse();this._velocity=c.slice().reverse();this._time=[h];this._scratch=[b.slice(),b.slice(),b.slice(),b.slice(),b.slice()]}function l(b){for(var c=Array(b),h=0;b>h;++h)c[h]=0;return c}m.exports=function(b,d,h){switch(arguments.length){case 0:return new c([0],
[0],0);case 1:if("number"==typeof b){var e=l(b);return new c(e,e,0)}return new c(b,l(b.length),0);case 2:if("number"==typeof d)return e=l(b.length),new c(b,e,+d);h=0;case 3:if(b.length!==d.length)throw Error("state and velocity lengths must match");return new c(b,d,h)}};var e=b("cubic-hermite"),f=b("binary-search-bounds");b=c.prototype;b.flush=function(b){b=f.gt(this._time,b)-1;0>=b||(this._time.splice(0,b),this._state.splice(0,b*this.dimension),this._velocity.splice(0,b*this.dimension))};b.curve=
function(b){var c=this._time,p=c.length,t=f.le(c,b),x=this._scratch[0],w=this._state,u=this._velocity,r=this.dimension,l=this.bounds;if(0>t)for(var k=r-1,c=0;r>c;++c,--k)x[c]=w[k];else if(t>=p-1)for(k=w.length-1,b-=c[p-1],c=0;r>c;++c,--k)x[c]=w[k]+b*u[k];else{for(var k=r*(t+1)-1,p=c[t],t=c[t+1]-p||1,q=this._scratch[1],z=this._scratch[2],g=this._scratch[3],A=this._scratch[4],C=!0,c=0;r>c;++c,--k)q[c]=w[k],g[c]=u[k]*t,z[c]=w[k+r],A[c]=u[k+r]*t,C=C&&q[c]===z[c]&&g[c]===A[c]&&0===g[c];if(C)for(c=0;r>
c;++c)x[c]=q[c];else e(q,g,z,A,(b-p)/t,x)}w=l[0];l=l[1];for(c=0;r>c;++c)x[c]=h(w[c],l[c],x[c]);return x};b.dcurve=function(b){var c=this._time,h=c.length,t=f.le(c,b),x=this._scratch[0],w=this._state,u=this._velocity,r=this.dimension;if(t>=h-1)for(var l=w.length-1,c=(b-c[h-1],0);r>c;++c,--l)x[c]=u[l];else{for(var l=r*(t+1)-1,h=c[t],t=c[t+1]-h||1,k=this._scratch[1],q=this._scratch[2],z=this._scratch[3],g=this._scratch[4],A=!0,c=0;r>c;++c,--l)k[c]=w[l],z[c]=u[l]*t,q[c]=w[l+r],g[c]=u[l+r]*t,A=A&&k[c]===
q[c]&&z[c]===g[c]&&0===z[c];if(A)for(c=0;r>c;++c)x[c]=0;else for(e.derivative(k,z,q,g,(b-h)/t,x),c=0;r>c;++c)x[c]/=t}return x};b.lastT=function(){var b=this._time;return b[b.length-1]};b.stable=function(){for(var b=this._velocity,c=b.length,h=this.dimension-1;0<=h;--h)if(b[--c])return!1;return!0};b.jump=function(b){var c=this.lastT(),e=this.dimension;if(!(c>b||arguments.length!==e+1)){var l=this._state,x=this._velocity,w=l.length-this.dimension,u=this.bounds,r=u[0],u=u[1];this._time.push(c,b);for(c=
0;2>c;++c)for(var f=0;e>f;++f)l.push(l[w++]),x.push(0);this._time.push(b);for(f=e;0<f;--f)l.push(h(r[f-1],u[f-1],arguments[f])),x.push(0)}};b.push=function(b){var c=this.lastT(),e=this.dimension;if(!(c>b||arguments.length!==e+1)){var l=this._state,x=this._velocity,w=l.length-this.dimension,u=b-c,r=this.bounds,c=r[0],r=r[1],u=1E-6<u?1/u:0;for(this._time.push(b);0<e;--e){var f=h(c[e-1],r[e-1],arguments[e]);l.push(f);x.push((f-l[w++])*u)}}};b.set=function(b){var c=this.dimension;if(!(b<this.lastT()||
arguments.length!==c+1)){var e=this._state,l=this._velocity,x=this.bounds,w=x[0],x=x[1];for(this._time.push(b);0<c;--c)e.push(h(w[c-1],x[c-1],arguments[c])),l.push(0)}};b.move=function(b){var c=this.lastT(),e=this.dimension;if(!(c>=b||arguments.length!==e+1)){var l=this._state,x=this._velocity,w=l.length-this.dimension,u=this.bounds,r=u[0],u=u[1],c=b-c,c=1E-6<c?1/c:0;for(this._time.push(b);0<e;--e){var f=arguments[e];l.push(h(r[e-1],u[e-1],l[w++]+f));x.push(f*c)}}};b.idle=function(b){var c=this.lastT();
if(!(c>b)){var e=this.dimension,l=this._state,x=this._velocity,w=l.length-e,u=this.bounds,r=u[0],u=u[1],c=b-c;this._time.push(b);for(b=e-1;0<=b;--b)l.push(h(r[b],u[b],l[w]+c*x[w])),x.push(0),w+=1}}},{"binary-search-bounds":4,"cubic-hermite":5}],4:[function(b,m,g){function h(b,c,h,v,d,p){b=["function ",b,"(a,l,h,",v.join(","),"){",p?"":"var i=",h?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",d?".get(m)":"[m]"];return p?0>c.indexOf("c")?b.push(";if(x===y){return m}else if(x<=y){"):b.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
b.push(";if(",c,"){i=m;"),h?b.push("l=m+1}else{h=m-1}"):b.push("h=m-1}else{l=m+1}"),b.push("}"),p?b.push("return -1};"):b.push("return i};"),b.join("")}function c(b,c,f,v){return(new Function([h("A","x"+b+"y",c,["y"],!1,v),h("B","x"+b+"y",c,["y"],!0,v),h("P","c(x,y)"+b+"0",c,["y","c"],!1,v),h("Q","c(x,y)"+b+"0",c,["y","c"],!0,v),"function dispatchBsearch",f,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
f].join("")))()}m.exports={ge:c(">=",!1,"GE"),gt:c(">",!1,"GT"),lt:c("<",!0,"LT"),le:c("<=",!0,"LE"),eq:c("-",!0,"EQ",!0)}},{}],5:[function(b,m,g){m.exports=function(b,c,l,e,f,v){var d=f-1,p=f*f,t=d*d,x=(1+2*f)*t,t=f*t;f=p*(3-2*f);d*=p;if(b.length){v||(v=Array(b.length));for(p=b.length-1;0<=p;--p)v[p]=x*b[p]+t*c[p]+f*l[p]+d*e[p];return v}return x*b+t*c+f*l+d*e};m.exports.derivative=function(b,c,l,e,f,v){var d=6*f*f-6*f,p=3*f*f-4*f+1,t=-6*f*f+6*f;f=3*f*f-2*f;if(b.length){v||(v=Array(b.length));for(var x=
b.length-1;0<=x;--x)v[x]=d*b[x]+p*c[x]+t*l[x]+f*e[x];return v}return d*b+p*c+t*l[x]+f*e}},{}],6:[function(b,m,g){m.exports=function(b,c,l){var e=c[0],f=c[1];c=c[2];var v=l[0],d=l[1];l=l[2];return b[0]=f*l-c*d,b[1]=c*v-e*l,b[2]=e*d-f*v,b}},{}],7:[function(b,m,g){m.exports=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]}},{}],8:[function(b,m,g){m.exports=function(b){var c=b[0],l=b[1];b=b[2];return Math.sqrt(c*c+l*l+b*b)}},{}],9:[function(b,m,g){m.exports=function(b,c,l,e){var f=c[0],v=c[1];c=c[2];
return b[0]=f+e*(l[0]-f),b[1]=v+e*(l[1]-v),b[2]=c+e*(l[2]-c),b}},{}],10:[function(b,m,g){m.exports=function(b,c){var l=c[0],e=c[1],f=c[2],l=l*l+e*e+f*f;return 0<l&&(l=1/Math.sqrt(l),b[0]=c[0]*l,b[1]=c[1]*l,b[2]=c[2]*l),b}},{}],11:[function(b,m,g){function h(b){this._components=b.slice();this._time=[0];this.prevMatrix=b.slice();this.nextMatrix=b.slice();this.computedMatrix=b.slice();this.computedInverse=b.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=
[0];this._limits=[-(1/0),1/0]}var c=b("binary-search-bounds"),l=b("mat4-interpolate"),e=b("gl-mat4/invert"),f=b("gl-mat4/rotateX"),v=b("gl-mat4/rotateY"),d=b("gl-mat4/rotateZ"),p=b("gl-mat4/lookAt"),t=b("gl-mat4/translate"),x=(b("gl-mat4/scale"),b("gl-vec3/normalize")),w=[0,0,0];m.exports=function(b){b=b||{};return new h(b.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};b=h.prototype;b.recalcMatrix=function(b){var d=this._time,k=c.le(d,b),u=this.computedMatrix;if(!(0>k)){var h=this._components;if(k===
d.length-1)for(var w=16*k,f=0;16>f;++f)u[f]=h[w++];else{for(var t=d[k+1]-d[k],w=16*k,p=this.prevMatrix,v=!0,f=0;16>f;++f)p[f]=h[w++];for(var g=this.nextMatrix,f=0;16>f;++f)g[f]=h[w++],v=v&&p[f]===g[f];if(1E-6>t||v)for(f=0;16>f;++f)u[f]=p[f];else l(u,p,g,(b-d[k])/t)}f=this.computedUp;f[0]=u[1];f[1]=u[5];f[2]=u[6];x(f,f);f=this.computedInverse;e(f,u);b=this.computedEye;d=f[15];b[0]=f[12]/d;b[1]=f[13]/d;b[2]=f[14]/d;d=this.computedCenter;k=Math.exp(this.computedRadius[0]);for(f=0;3>f;++f)d[f]=b[f]-u[2+
4*f]*k}};b.idle=function(b){if(!(b<this.lastT())){for(var c=this._components,d=c.length-16,u=0;16>u;++u)c.push(c[d++]);this._time.push(b)}};b.flush=function(b){b=c.gt(this._time,b)-2;0>b||(this._time.slice(0,b),this._components.slice(0,16*b))};b.lastT=function(){return this._time[this._time.length-1]};b.lookAt=function(b,c,d,u){this.recalcMatrix(b);c=c||this.computedEye;d=d||w;u=u||this.computedUp;this.setMatrix(b,p(this.computedMatrix,c,d,u));for(u=b=0;3>u;++u)b+=Math.pow(d[u]-c[u],2);b=Math.log(Math.sqrt(b));
this.computedRadius[0]=b};b.rotate=function(b,c,u,q){this.recalcMatrix(b);var h=this.computedInverse;c&&v(h,h,c);u&&f(h,h,u);q&&d(h,h,q);this.setMatrix(b,e(this.computedMatrix,h))};var u=[0,0,0];b.pan=function(b,c,d,q){u[0]=-(c||0);u[1]=-(d||0);u[2]=-(q||0);this.recalcMatrix(b);c=this.computedInverse;t(c,c,u);this.setMatrix(b,e(c,c))};b.translate=function(b,c,d,q){u[0]=c||0;u[1]=d||0;u[2]=q||0;this.recalcMatrix(b);c=this.computedMatrix;t(c,c,u);this.setMatrix(b,c)};b.setMatrix=function(b,c){if(!(b<
this.lastT())){this._time.push(b);for(var d=0;16>d;++d)this._components.push(c[d])}};b.setDistance=function(b,c){this.computedRadius[0]=c};b.setDistanceLimits=function(b,c){var d=this._limits;d[0]=b;d[1]=c};b.getDistanceLimits=function(b){var c=this._limits;return b?(b[0]=c[0],b[1]=c[1],b):c}},{"binary-search-bounds":12,"gl-mat4/invert":78,"gl-mat4/lookAt":79,"gl-mat4/rotateX":83,"gl-mat4/rotateY":84,"gl-mat4/rotateZ":85,"gl-mat4/scale":86,"gl-mat4/translate":87,"gl-vec3/normalize":10,"mat4-interpolate":13}],
12:[function(b,m,g){arguments[4][4][0].apply(g,arguments)},{dup:4}],13:[function(b,m,g){function h(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,0,0,1]}}var c=b("gl-vec3/lerp"),l=b("mat4-recompose"),e=b("mat4-decompose"),f=b("gl-mat4/determinant"),v=b("quat-slerp"),d=h(),p=h(),t=h();m.exports=function(b,h,u,r){if(0===f(h)||0===f(u))return!1;h=e(h,d.translate,d.scale,d.skew,d.perspective,d.quaternion);u=e(u,p.translate,p.scale,p.skew,p.perspective,p.quaternion);
return h&&u?(c(t.translate,d.translate,p.translate,r),c(t.skew,d.skew,p.skew,r),c(t.scale,d.scale,p.scale,r),c(t.perspective,d.perspective,p.perspective,r),v(t.quaternion,d.quaternion,p.quaternion,r),l(b,t.translate,t.scale,t.skew,t.perspective,t.quaternion),!0):!1}},{"gl-mat4/determinant":74,"gl-vec3/lerp":9,"mat4-decompose":14,"mat4-recompose":16,"quat-slerp":17}],14:[function(b,m,g){function h(b,c,d,u,h){b[0]=c[0]*u+d[0]*h;b[1]=c[1]*u+d[1]*h;b[2]=c[2]*u+d[2]*h}var c=b("./normalize");g=b("gl-mat4/create");
var l=b("gl-mat4/clone"),e=b("gl-mat4/determinant"),f=b("gl-mat4/invert"),v=b("gl-mat4/transpose"),d={length:b("gl-vec3/length"),normalize:b("gl-vec3/normalize"),dot:b("gl-vec3/dot"),cross:b("gl-vec3/cross")},p=g(),t=g(),x=[0,0,0,0],w=[[0,0,0],[0,0,0],[0,0,0]],u=[0,0,0];m.exports=function(b,y,k,q,z,g){if((y||(y=[0,0,0]),k||(k=[0,0,0]),q||(q=[0,0,0]),z||(z=[0,0,0,1]),g||(g=[0,0,0,1]),!c(p,b))||(l(t,p),t[3]=0,t[7]=0,t[11]=0,t[15]=1,Math.abs(1E-8>e(t))))return!1;var A=p[3],C=p[7],B=p[11];b=p[12];var G=
p[13],F=p[14],m=p[15];if(0!==A||0!==C||0!==B){x[0]=A;x[1]=C;x[2]=B;x[3]=m;if(!f(t,t))return!1;v(t,t);A=x[0];C=x[1];B=x[2];m=x[3];z[0]=t[0]*A+t[4]*C+t[8]*B+t[12]*m;z[1]=t[1]*A+t[5]*C+t[9]*B+t[13]*m;z[2]=t[2]*A+t[6]*C+t[10]*B+t[14]*m;z[3]=t[3]*A+t[7]*C+t[11]*B+t[15]*m}else z[0]=z[1]=z[2]=0,z[3]=1;y[0]=b;y[1]=G;y[2]=F;w[0][0]=p[0];w[0][1]=p[1];w[0][2]=p[2];w[1][0]=p[4];w[1][1]=p[5];w[1][2]=p[6];w[2][0]=p[8];w[2][1]=p[9];w[2][2]=p[10];if(k[0]=d.length(w[0]),d.normalize(w[0],w[0]),q[0]=d.dot(w[0],w[1]),
h(w[1],w[1],w[0],1,-q[0]),k[1]=d.length(w[1]),d.normalize(w[1],w[1]),q[0]/=k[1],q[1]=d.dot(w[0],w[2]),h(w[2],w[2],w[0],1,-q[1]),q[2]=d.dot(w[1],w[2]),h(w[2],w[2],w[1],1,-q[2]),k[2]=d.length(w[2]),d.normalize(w[2],w[2]),q[1]/=k[2],q[2]/=k[2],d.cross(u,w[1],w[2]),0>d.dot(w[0],u))for(y=0;3>y;y++)k[y]*=-1,w[y][0]*=-1,w[y][1]*=-1,w[y][2]*=-1;return g[0]=.5*Math.sqrt(Math.max(1+w[0][0]-w[1][1]-w[2][2],0)),g[1]=.5*Math.sqrt(Math.max(1-w[0][0]+w[1][1]-w[2][2],0)),g[2]=.5*Math.sqrt(Math.max(1-w[0][0]-w[1][1]+
w[2][2],0)),g[3]=.5*Math.sqrt(Math.max(1+w[0][0]+w[1][1]+w[2][2],0)),w[2][1]>w[1][2]&&(g[0]=-g[0]),w[0][2]>w[2][0]&&(g[1]=-g[1]),w[1][0]>w[0][1]&&(g[2]=-g[2]),!0}},{"./normalize":15,"gl-mat4/clone":72,"gl-mat4/create":73,"gl-mat4/determinant":74,"gl-mat4/invert":78,"gl-mat4/transpose":88,"gl-vec3/cross":6,"gl-vec3/dot":7,"gl-vec3/length":8,"gl-vec3/normalize":10}],15:[function(b,m,g){m.exports=function(b,c){var l=c[15];if(0===l)return!1;for(var l=1/l,e=0;16>e;e++)b[e]=c[e]*l;return!0}},{}],16:[function(b,
m,g){var h={identity:b("gl-mat4/identity"),translate:b("gl-mat4/translate"),multiply:b("gl-mat4/multiply"),create:b("gl-mat4/create"),scale:b("gl-mat4/scale"),fromRotationTranslation:b("gl-mat4/fromRotationTranslation")},c=(h.create(),h.create());m.exports=function(b,e,f,v,d,p){return h.identity(b),h.fromRotationTranslation(b,p,e),b[3]=d[0],b[7]=d[1],b[11]=d[2],b[15]=d[3],h.identity(c),0!==v[2]&&(c[9]=v[2],h.multiply(b,b,c)),0!==v[1]&&(c[9]=0,c[8]=v[1],h.multiply(b,b,c)),0!==v[0]&&(c[8]=0,c[4]=v[0],
h.multiply(b,b,c)),h.scale(b,b,f),b}},{"gl-mat4/create":73,"gl-mat4/fromRotationTranslation":76,"gl-mat4/identity":77,"gl-mat4/multiply":80,"gl-mat4/scale":86,"gl-mat4/translate":87}],17:[function(b,m,g){m.exports=b("gl-quat/slerp")},{"gl-quat/slerp":18}],18:[function(b,m,g){m.exports=function(b,c,l,e){var f,v,d,p,t,x=c[0],w=c[1],u=c[2];c=c[3];var r=l[0],y=l[1],k=l[2];l=l[3];return v=x*r+w*y+u*k+c*l,0>v&&(v=-v,r=-r,y=-y,k=-k,l=-l),1E-6<1-v?(f=Math.acos(v),d=Math.sin(f),p=Math.sin((1-e)*f)/d,t=Math.sin(e*
f)/d):(p=1-e,t=e),b[0]=p*x+t*r,b[1]=p*w+t*y,b[2]=p*u+t*k,b[3]=p*c+t*l,b}},{}],19:[function(b,m,g){m.exports=function(b,c,l,e,f,v,d,p,t,x){var w=c+v+x;if(0<u){var u=Math.sqrt(w+1);b[0]=.5*(d-t)/u;b[1]=.5*(p-e)/u;b[2]=.5*(l-v)/u;b[3]=.5*u}else x=Math.max(c,v,x),u=Math.sqrt(2*x-w+1),c>=x?(b[0]=.5*u,b[1]=.5*(f+l)/u,b[2]=.5*(p+e)/u,b[3]=.5*(d-t)/u):v>=x?(b[0]=.5*(l+f)/u,b[1]=.5*u,b[2]=.5*(t+d)/u,b[3]=.5*(p-e)/u):(b[0]=.5*(e+p)/u,b[1]=.5*(d+t)/u,b[2]=.5*u,b[3]=.5*(l-f)/u);return b}},{}],20:[function(b,
m,g){function h(b,c,d){return Math.sqrt(Math.pow(b,2)+Math.pow(c,2)+Math.pow(d,2))}function c(b,c,d,r){return Math.sqrt(Math.pow(b,2)+Math.pow(c,2)+Math.pow(d,2)+Math.pow(r,2))}function l(b,d){var u=d[0],r=d[1],e=d[2],k=d[3],q=c(u,r,e,k);1E-6<q?(b[0]=u/q,b[1]=r/q,b[2]=e/q,b[3]=k/q):(b[0]=b[1]=b[2]=0,b[3]=1)}function e(b,c,d){this.radius=f([d]);this.center=f(c);this.rotation=f(b);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);
this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}m.exports=function(b){b=b||{};var c=b.center||[0,0,0],d=b.rotation||[0,0,0,1],r=b.radius||1,c=[].slice.call(c,0,3),d=[].slice.call(d,0,4);l(d,d);c=new e(d,c,Math.log(r));return c.setDistanceLimits(b.zoomMin,b.zoomMax),("eye"in b||"up"in b)&&c.lookAt(0,b.eye,b.center,b.up),c};var f=b("filtered-vector"),v=b("gl-mat4/lookAt"),d=b("gl-mat4/fromQuat"),p=b("gl-mat4/invert"),t=b("./lib/quatFromFrame");
b=e.prototype;b.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};b.recalcMatrix=function(b){this.radius.curve(b);this.center.curve(b);this.rotation.curve(b);var c=this.computedRotation;l(c,c);b=this.computedMatrix;d(b,c);var u=this.computedCenter,c=this.computedEye,r=this.computedUp,e=Math.exp(this.computedRadius[0]);c[0]=u[0]+e*b[2];c[1]=u[1]+e*b[6];c[2]=u[2]+e*b[10];r[0]=b[1];r[1]=b[5];r[2]=b[9];for(u=0;3>u;++u){for(e=r=0;3>e;++e)r+=b[u+4*e]*c[e];
b[12+u]=-r}};b.getMatrix=function(b,c){this.recalcMatrix(b);var d=this.computedMatrix;if(c){for(var r=0;16>r;++r)c[r]=d[r];return c}return d};b.idle=function(b){this.center.idle(b);this.radius.idle(b);this.rotation.idle(b)};b.flush=function(b){this.center.flush(b);this.radius.flush(b);this.rotation.flush(b)};b.pan=function(b,c,d,r){c=c||0;d=d||0;r=r||0;this.recalcMatrix(b);var e=this.computedMatrix,k=e[1],q=e[5],f=e[9],l=h(k,q,f),k=k/l,q=q/l,f=f/l,l=e[0],t=e[4],p=e[8],v=l*k+t*q+p*f,l=l-k*v,t=t-q*
v,p=p-f*v,v=h(l,t,p),l=l/v,t=t/v,p=p/v,v=e[2],g=e[6],e=e[10],F=v*k+g*q+e*f,m=v*l+g*t+e*p;h(v-(F*k+m*l),g-(F*q+m*t),e-(F*f+m*p));this.center.move(b,l*c+k*d,t*c+q*d,p*c+f*d);c=Math.exp(this.computedRadius[0]);c=Math.max(1E-4,c+r);this.radius.set(b,Math.log(c))};b.rotate=function(b,d,u,r){this.recalcMatrix(b);d=d||0;u=u||0;var e=this.computedMatrix,k=e[2],q=e[6],f=e[10],l=d*e[0]+u*e[1],t=d*e[4]+u*e[5],e=d*e[8]+u*e[9];u=-(q*e-f*t);var e=-(f*l-k*e),l=-(k*t-q*l),t=Math.sqrt(Math.max(0,1-Math.pow(u,2)-Math.pow(e,
2)-Math.pow(l,2))),p=c(u,e,l,t);1E-6<p?(u/=p,e/=p,l/=p,t/=p):(u=e=l=0,t=1);var p=this.computedRotation,v=p[0],g=p[1],F=p[2],m=p[3],p=v*t+m*u+g*l-F*e,D=g*t+m*e+F*u-v*l,H=F*t+m*l+v*e-g*u,v=m*t-v*u-g*e-F*l;r&&(u=k,e=q,l=f,r=Math.sin(r)/h(u,e,l),u*=r,e*=r,l*=r,t=Math.cos(d),p=p*t+v*u+D*l-H*e,D=D*t+v*e+H*u-p*l,H=H*t+v*l+p*e-D*u,v=v*t-p*u-D*e-H*l);d=c(p,D,H,v);1E-6<d?(p/=d,D/=d,H/=d,v/=d):(p=D=H=0,v=1);this.rotation.set(b,p,D,H,v)};b.lookAt=function(b,c,d,r){this.recalcMatrix(b);d=d||this.computedCenter;
c=c||this.computedEye;r=r||this.computedUp;var e=this.computedMatrix;v(e,c,d,r);r=this.computedRotation;t(r,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]);l(r,r);this.rotation.set(b,r[0],r[1],r[2],r[3]);for(r=e=0;3>r;++r)e+=Math.pow(d[r]-c[r],2);this.radius.set(b,.5*Math.log(Math.max(e,1E-6)));this.center.set(b,d[0],d[1],d[2])};b.translate=function(b,c,d,e){this.center.move(b,c||0,d||0,e||0)};b.setMatrix=function(b,c){var d=this.computedRotation;t(d,c[0],c[1],c[2],c[4],c[5],c[6],c[8],c[9],c[10]);
l(d,d);this.rotation.set(b,d[0],d[1],d[2],d[3]);d=this.computedMatrix;p(d,c);var e=d[15];if(1E-6<Math.abs(e)){var f=d[12]/e,k=d[13]/e,e=d[14]/e;this.recalcMatrix(b);var q=Math.exp(this.computedRadius[0]);this.center.set(b,f-d[2]*q,k-d[6]*q,e-d[10]*q)}else this.center.idle(b);this.radius.idle(b)};b.setDistance=function(b,c){0<c&&this.radius.set(b,Math.log(c))};b.setDistanceLimits=function(b,c){b=0<b?Math.log(b):-(1/0);c=0<c?Math.log(c):1/0;c=Math.max(c,b);this.radius.bounds[0][0]=b;this.radius.bounds[1][0]=
c};b.getDistanceLimits=function(b){var c=this.radius.bounds;return b?(b[0]=Math.exp(c[0][0]),b[1]=Math.exp(c[1][0]),b):[Math.exp(c[0][0]),Math.exp(c[1][0])]};b.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};b.fromJSON=function(b){var c=this.lastT(),d=b.center;d&&this.center.set(c,d[0],d[1],d[2]);(d=b.rotation)&&
this.rotation.set(c,d[0],d[1],d[2],d[3]);(d=b.distance)&&0<d&&this.radius.set(c,Math.log(d));this.setDistanceLimits(b.zoomMin,b.zoomMax)}},{"./lib/quatFromFrame":19,"filtered-vector":3,"gl-mat4/fromQuat":75,"gl-mat4/invert":78,"gl-mat4/lookAt":79}],21:[function(b,m,g){function h(b,c,d){return Math.sqrt(Math.pow(b,2)+Math.pow(c,2)+Math.pow(d,2))}function c(b){var c=Math.abs(b[0]),d=Math.abs(b[1]),e=Math.abs(b[2]),k=[0,0,0];c>Math.max(d,e)?k[2]=1:d>Math.max(c,e)?k[0]=1:k[1]=1;for(e=d=c=0;3>e;++e)c+=
b[e]*b[e],d+=k[e]*b[e];for(e=0;3>e;++e)k[e]-=d/c*b[e];return p(k,k),k}function l(b,c,d,f,k,q,h,l){this.center=e(d);this.up=e(f);this.right=e(k);this.radius=e([q]);this.angle=e([h,l]);this.angle.bounds=[[-(1/0),-Math.PI/2],[1/0,Math.PI/2]];this.setDistanceLimits(b,c);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=
[0,0,0];this.computedMatrix=Array(16);for(b=0;16>b;++b)this.computedMatrix[b]=.5;this.recalcMatrix(0)}m.exports=function(b){b=b||{};var e=b.center||[0,0,0],r=b.up||[0,1,0],f=b.right||c(r),k=b.radius||1,q=b.theta||0,x=b.phi||0;if(e=[].slice.call(e,0,3),r=[].slice.call(r,0,3),p(r,r),f=[].slice.call(f,0,3),p(f,f),"eye"in b)k=b.eye,q=[k[0]-e[0],k[1]-e[1],k[2]-e[2]],d(f,q,r),1E-6>h(f[0],f[1],f[2])?f=c(r):p(f,f),k=h(q[0],q[1],q[2]),x=t(r,q)/k,q=t(f,q)/k,x=Math.acos(x),q=Math.acos(q);return k=Math.log(k),
new l(b.zoomMin,b.zoomMax,e,r,f,k,q,x)};var e=b("filtered-vector"),f=b("gl-mat4/invert"),v=b("gl-mat4/rotate"),d=b("gl-vec3/cross"),p=b("gl-vec3/normalize"),t=b("gl-vec3/dot");b=l.prototype;b.setDistanceLimits=function(b,c){b=0<b?Math.log(b):-(1/0);c=0<c?Math.log(c):1/0;c=Math.max(c,b);this.radius.bounds[0][0]=b;this.radius.bounds[1][0]=c};b.getDistanceLimits=function(b){var c=this.radius.bounds[0];return b?(b[0]=Math.exp(c[0][0]),b[1]=Math.exp(c[1][0]),b):[Math.exp(c[0][0]),Math.exp(c[1][0])]};b.recalcMatrix=
function(b){this.center.curve(b);this.up.curve(b);this.right.curve(b);this.radius.curve(b);this.angle.curve(b);for(var c=this.computedUp,e=this.computedRight,f=0,k=0,q=0;3>q;++q)k+=c[q]*e[q],f+=c[q]*c[q];for(var l=Math.sqrt(f),q=b=0;3>q;++q)e[q]-=c[q]*k/f,b+=e[q]*e[q],c[q]/=l;b=Math.sqrt(b);for(q=0;3>q;++q)e[q]/=b;var t=this.computedToward;d(t,c,e);p(t,t);b=Math.exp(this.computedRadius[0]);for(var l=this.computedAngle[0],f=this.computedAngle[1],k=Math.cos(l),l=Math.sin(l),x=Math.cos(f),v=Math.sin(f),
f=this.computedCenter,g=k*x,G=l*x,F=-k*v,m=-l*v,k=this.computedEye,l=this.computedMatrix,q=0;3>q;++q){var D=g*e[q]+G*t[q]+v*c[q];l[4*q+1]=F*e[q]+m*t[q]+x*c[q];l[4*q+2]=D;l[4*q+3]=0}e=l[1];q=l[5];v=l[9];t=l[2];x=l[6];g=l[10];c=q*g-v*x;v=v*t-e*g;e=e*x-q*t;q=h(c,v,e);l[0]=c/q;l[4]=v/q;l[8]=e/q;for(q=0;3>q;++q)k[q]=f[q]+l[2+4*q]*b;for(q=0;3>q;++q){for(f=b=0;3>f;++f)b+=l[q+4*f]*k[f];l[12+q]=-b}l[15]=1};b.getMatrix=function(b,c){this.recalcMatrix(b);var d=this.computedMatrix;if(c){for(var e=0;16>e;++e)c[e]=
d[e];return c}return d};var x=[0,0,0];b.rotate=function(b,c,d,e){if(this.angle.move(b,c,d),e){this.recalcMatrix(b);c=this.computedMatrix;x[0]=c[2];x[1]=c[6];x[2]=c[10];d=this.computedUp;for(var k=this.computedRight,q=this.computedToward,f=0;3>f;++f)c[4*f]=d[f],c[4*f+1]=k[f],c[4*f+2]=q[f];v(c,c,e,x);for(f=0;3>f;++f)d[f]=c[4*f],k[f]=c[4*f+1];this.up.set(b,d[0],d[1],d[2]);this.right.set(b,k[0],k[1],k[2])}};b.pan=function(b,c,d,e){c=c||0;d=d||0;e=e||0;this.recalcMatrix(b);var k=this.computedMatrix,f=
(Math.exp(this.computedRadius[0]),k[1]),l=k[5],t=k[9],p=h(f,l,t),f=f/p,l=l/p,t=t/p,p=k[0],x=k[4],k=k[8],v=p*f+x*l+k*t,p=p-f*v,x=x-l*v,k=k-t*v,v=h(p,x,k);this.center.move(b,p/v*c+f*d,x/v*c+l*d,k/v*c+t*d);c=Math.exp(this.computedRadius[0]);c=Math.max(1E-4,c+e);this.radius.set(b,Math.log(c))};b.translate=function(b,c,d,e){this.center.move(b,c||0,d||0,e||0)};b.setMatrix=function(b,c,d,e){var k=1;"number"==typeof d&&(k=0|d);(0>k||3<k)&&(k=1);var q=(k+2)%3;c||(this.recalcMatrix(b),c=this.computedMatrix);
d=c[k];var l=c[k+4],t=c[k+8];if(e){e=Math.abs(d);var p=Math.abs(t),x=Math.max(e,Math.abs(l),p);e===x?(d=0>d?-1:1,l=t=0):p===x?(t=0>t?-1:1,d=l=0):(l=0>l?-1:1,d=t=0)}else e=h(d,l,t),d/=e,l/=e,t/=e;e=c[q];p=c[q+4];q=c[q+8];x=e*d+p*l+q*t;e-=d*x;p-=l*x;q-=t*x;x=h(e,p,q);e/=x;var p=p/x,q=q/x,x=l*q-t*p,v=t*e-d*q,g=d*p-l*e,F=h(x,v,g),x=x/F,v=v/F,g=g/F;this.center.jump(b,K,m,D);this.radius.idle(b);this.up.jump(b,d,l,t);this.right.jump(b,e,p,q);if(2===k)m=c[1],D=c[5],d=c[9],K=0>H?-Math.PI/2:Math.PI/2,m=Math.atan2(m*
x+D*v+d*g,m*e+D*p+d*q);else var m=c[2],D=c[6],H=c[10],H,K=Math.asin(Math.min(1,Math.max(-1,m*d+D*l+H*t))),m=Math.atan2(m*x+D*v+H*g,m*e+D*p+H*q);this.angle.jump(b,m,K);this.recalcMatrix(b);H=c[2];d=c[6];l=c[10];D=this.computedMatrix;f(D,c);c=D[15];var K=D[12]/c,m=D[13]/c,D=D[14]/c;c=Math.exp(this.computedRadius[0]);this.center.jump(b,K-H*c,m-d*c,D-l*c)};b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};b.idle=function(b){this.center.idle(b);
this.up.idle(b);this.right.idle(b);this.radius.idle(b);this.angle.idle(b)};b.flush=function(b){this.center.flush(b);this.up.flush(b);this.right.flush(b);this.radius.flush(b);this.angle.flush(b)};b.setDistance=function(b,c){0<c&&this.radius.set(b,Math.log(c))};b.lookAt=function(b,c,d,e){this.recalcMatrix(b);c=c||this.computedEye;d=d||this.computedCenter;e=e||this.computedUp;var k=e[0],f=e[1];e=e[2];var l=h(k,f,e);if(!(1E-6>l)){k/=l;f/=l;e/=l;var l=c[0]-d[0],t=c[1]-d[1];c=c[2]-d[2];var p=h(l,t,c);if(!(1E-6>
p)){l/=p;t/=p;c/=p;var x=this.computedRight,v=x[0],g=x[1],x=x[2],F=k*v+f*g+e*x,v=v-F*k,g=g-F*f,x=x-F*e,F=h(v,g,x);if(!(.01>F&&(v=f*c-e*t,g=e*l-k*c,x=k*t-f*l,F=h(v,g,x),1E-6>F))){v/=F;g/=F;x/=F;this.up.set(b,k,f,e);this.right.set(b,v,g,x);this.center.set(b,d[0],d[1],d[2]);this.radius.set(b,Math.log(p));d=f*x-e*g;var p=e*v-k*x,F=k*g-f*v,m=h(d,p,F),k=Math.asin(Math.min(1,Math.max(-1,k*l+f*t+e*c))),f=Math.atan2(d/m*l+p/m*t+F/m*c,v*l+g*t+x*c),l=this.angle._state;e=l[l.length-1];l=l[l.length-2];e%=2*Math.PI;
t=Math.abs(e-f);c=Math.abs(e-2*Math.PI-f);t>Math.abs(e+2*Math.PI-f)&&(e+=2*Math.PI);t>c&&(e-=2*Math.PI);this.angle.jump(this.angle.lastT(),e,l);this.angle.set(b,f,k)}}}}},{"filtered-vector":3,"gl-mat4/invert":78,"gl-mat4/rotate":82,"gl-vec3/cross":6,"gl-vec3/dot":7,"gl-vec3/normalize":10}],22:[function(b,m,g){function h(b,c){this._controllerNames=Object.keys(b);this._controllerList=this._controllerNames.map(function(c){return b[c]});this._mode=c;(this._active=b[c])||(this._mode="turntable",this._active=
b.turntable);this.modes=this._controllerNames;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}m.exports=function(b){b=b||{};var d=b.eye||[0,0,1],f=b.center||[0,0,0],t=b.up||[0,1,0],x=b.distanceLimits||[0,1/0];b=b.mode||"turntable";var w=c(),u=l(),r=e();return w.setDistanceLimits(x[0],x[1]),w.lookAt(0,d,f,t),u.setDistanceLimits(x[0],
x[1]),u.lookAt(0,d,f,t),r.setDistanceLimits(x[0],x[1]),r.lookAt(0,d,f,t),new h({turntable:w,orbit:u,matrix:r},b)};var c=b("turntable-camera-controller"),l=b("orbit-camera-controller"),e=b("matrix-camera-controller"),f=h.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(b){for(var c=b[0],e=[],l=0;l<b[1];++l)e.push("a"+l);b="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+
b[0]+"("+e.join()+")}";f[c]=Function.apply(null,e.concat(b))});f.recalcMatrix=function(b){this._active.recalcMatrix(b)};f.getDistance=function(b){return this._active.getDistance(b)};f.getDistanceLimits=function(b){return this._active.getDistanceLimits(b)};f.lastT=function(){return this._active.lastT()};f.setMode=function(b){if(b!==this._mode){var c=this._controllerNames.indexOf(b);if(!(0>c)){var e=this._active,c=this._controllerList[c],f=Math.max(e.lastT(),c.lastT());e.recalcMatrix(f);c.setMatrix(f,
e.computedMatrix);this._active=c;this._mode=b;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};f.getMode=function(){return this._mode}},{"matrix-camera-controller":11,"orbit-camera-controller":20,"turntable-camera-controller":21}],23:[function(b,m,g){m.exports=function(b,e){return c(h(b,e))};var h=b("alpha-complex"),c=b("simplicial-complex-boundary")},
{"alpha-complex":24,"simplicial-complex-boundary":27}],24:[function(b,m,g){m.exports=function(b,e){return h(e).filter(function(f){for(var h=Array(f.length),d=0;d<f.length;++d)h[d]=e[f[d]];return 1>c(h)*b})};var h=b("delaunay-triangulate"),c=b("circumradius")},{circumradius:25,"delaunay-triangulate":54}],25:[function(b,m,g){m.exports=function(b){for(var l=h(b),e=0,f=0;f<b.length;++f)for(var v=b[f],d=0;d<l.length;++d)e+=Math.pow(v[d]-l[d],2);return Math.sqrt(e/b.length)};var h=b("circumcenter")},{circumcenter:26}],
26:[function(b,m,g){function h(b,c){for(var e=0,f=b.length,l=0;f>l;++l)e+=b[l]*c[l];return e}function c(b){var c=b.length;if(0===c)return[];for(var l=(b[0].length,e([b.length+1,b.length+1],1)),t=e([b.length+1],1),x=l[c][c]=0;c>x;++x){for(var w=0;x>=w;++w)l[w][x]=l[x][w]=2*h(b[x],b[w]);t[x]=h(b[x],b[x])}b=f(l,t);l=0;t=b[c+1];for(x=0;x<t.length;++x)l+=t[x];for(var u=Array(c),x=0;c>x;++x){for(var t=b[x],r=0,w=0;w<t.length;++w)r+=t[w];u[x]=r/l}return u}function l(b){if(0===b.length)return[];for(var d=
b[0].length,f=e([d]),l=c(b),h=0;h<b.length;++h)for(var w=0;d>w;++w)f[w]+=b[h][w]*l[h];return f}var e=b("dup"),f=b("robust-linear-solve");l.barycenetric=c;m.exports=l},{dup:55,"robust-linear-solve":192}],27:[function(b,m,g){m.exports=function(b){return c(h(b))};var h=b("boundary-cells"),c=b("reduce-simplicial-complex")},{"boundary-cells":28,"reduce-simplicial-complex":31}],28:[function(b,m,g){m.exports=function(b){for(var c=b.length,l=0,e=0;c>e;++e)l+=b[e].length;for(var l=Array(l),f=0,e=0;c>e;++e)for(var v=
b[e],d=v.length,p=0;d>p;++p)for(var t=l[f++]=Array(d-1),x=1;d>x;++x)t[x-1]=v[(p+x)%d];return l}},{}],29:[function(b,m,g){m.exports=function(b){for(var c=1,l=1;l<b.length;++l)for(var e=0;l>e;++e)if(b[l]<b[e])c=-c;else if(b[e]===b[l])return 0;return c}},{}],30:[function(b,m,g){var h=b("compare-cell"),c=b("cell-orientation");m.exports=function(b,e){return h(b,e)||c(b)-c(e)}},{"cell-orientation":29,"compare-cell":41}],31:[function(b,m,g){var h=b("compare-cell"),c=b("compare-oriented-cell"),l=b("cell-orientation");
m.exports=function(b){b.sort(c);for(var f=b.length,v=0,d=0;f>d;++d){var p=b[d],t=l(p);if(0!==t){if(0<v){var x=b[v-1];if(0===h(p,x)&&l(x)!==t){--v;continue}}b[v++]=p}}return b.length=v,b}},{"cell-orientation":29,"compare-cell":41,"compare-oriented-cell":30}],32:[function(b,m,g){m.exports=function(){var b={},c=/^rgba?\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*(,.*)?\)$/,l=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?\s*(.*)?\)$/;return b.isPlainObject=function(b){return!Array.isArray(b)&&
null!==b&&"object"==typeof b},b.linspace=function(b,c,l){c=(c-b)/(l-1);for(var d=[],h=0;l>h;h++)d.push(b+h*c);return d},b.zip3=function(b,c,l){for(var d=Math.min.apply(null,[b.length,c.length,l.length]),h=[],t=0;d>t;t++)h.push([b[t],c[t],l[t]]);return h},b.sum=function(b){function c(b){for(var e=0;e<b.length;e++)Array.isArray(b[e])?c(b[e],l):l+=b[e]}var l=0;return c(b,l),l},b.zip=function(){for(var b=[].slice.call(arguments),c=b.map(function(b){return b.length}),c=Math.min.apply(null,c),l=[],d=0;c>
d;d++){l[d]=[];for(var h=0;h<b.length;++h)l[d][h]=b[h][d]}return l},b.isEqual=function(b,c){if(b.length!==c.length)return!1;for(var l=b.length;l--;)if(b[l]!==c[l])return!1;return!0},b.copy2D=function(b){for(var c=[],l=0;l<b.length;++l){c[l]=[];for(var d=0;d<b[l].length;++d)c[l][d]=b[l][d]}return c},b.copy1D=function(b){for(var c=[],l=0;l<b.length;++l)c[l]=b[l];return c},b.str2RgbArray=function(b,f){var h,d;if("string"!=typeof b)return b;if(h=[],"#"===b[0]?(b=b.substr(1),3===b.length&&(b+=b),d=parseInt(b,
16),h[0]=d>>16&255,h[1]=d>>8&255,h[2]=255&d):c.test(b)&&(d=b.match(l),h[0]=parseInt(d[1]),h[1]=parseInt(d[2]),h[2]=parseInt(d[3])),!f)for(d=0;3>d;++d)h[d]/=255;return h},b.str2RgbaArray=function(b,f){var h,d;if("string"!=typeof b)return b;if(h=[],"#"===b[0]?(b=b.substr(1),3===b.length&&(b+=b),d=parseInt(b,16),h[0]=d>>16&255,h[1]=d>>8&255,h[2]=255&d):c.test(b)&&(d=b.match(l),h[0]=parseInt(d[1]),h[1]=parseInt(d[2]),h[2]=parseInt(d[3]),d[4]?h[3]=parseFloat(d[4]):h[3]=1),!f)for(d=0;3>d;++d)h[d]/=255;
return h},b}()},{}],33:[function(b,m,g){function h(b){var c=32;return b&=-b,b&&c--,65535&b&&(c-=16),16711935&b&&(c-=8),252645135&b&&(c-=4),858993459&b&&(c-=2),1431655765&b&&--c,c}"use restrict";g.INT_BITS=32;g.INT_MAX=2147483647;g.INT_MIN=-2147483648;g.sign=function(b){return(0<b)-(0>b)};g.abs=function(b){var c=b>>31;return(b^c)-c};g.min=function(b,c){return c^(b^c)&-(c>b)};g.max=function(b,c){return b^(b^c)&-(c>b)};g.isPow2=function(b){return!(b&b-1||!b)};g.log2=function(b){var c,f;return c=(65535<
b)<<4,b>>>=c,f=(255<b)<<3,b>>>=f,c|=f,f=(15<b)<<2,b>>>=f,c|=f,f=(3<b)<<1,b>>>=f,c|=f,c|b>>1};g.log10=function(b){return 1E9<=b?9:1E8<=b?8:1E7<=b?7:1E6<=b?6:1E5<=b?5:1E4<=b?4:1E3<=b?3:100<=b?2:10<=b?1:0};g.popCount=function(b){return b-=b>>>1&1431655765,b=(858993459&b)+(b>>>2&858993459),16843009*(b+(b>>>4)&252645135)>>>24};g.countTrailingZeros=h;g.nextPow2=function(b){return b+=0===b,--b,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,b+1};g.prevPow2=function(b){return b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=
b>>>8,b|=b>>>16,b-(b>>>1)};g.parity=function(b){return b^=b>>>16,b^=b>>>8,b^=b>>>4,b&=15,27030>>>b&1};var c=Array(256);!function(b){for(var c=0;256>c;++c){for(var f=c,h=c,d=7,f=f>>>1;f;f>>>=1)h<<=1,h|=1&f,--d;b[c]=h<<d&255}}(c);g.reverse=function(b){return c[255&b]<<24|c[b>>>8&255]<<16|c[b>>>16&255]<<8|c[b>>>24&255]};g.interleave2=function(b,c){return b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),c&=65535,c=16711935&(c|c<<8),c=252645135&(c|c<<4),c=858993459&
(c|c<<2),c=1431655765&(c|c<<1),b|c<<1};g.deinterleave2=function(b,c){return b=b>>>c&1431655765,b=858993459&(b|b>>>1),b=252645135&(b|b>>>2),b=16711935&(b|b>>>4),b=65535&(b|b>>>16),b<<16>>16};g.interleave3=function(b,c,f){return b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),b|=c<<1,f&=1023,f=4278190335&(f|f<<16),f=251719695&(f|f<<8),f=3272356035&(f|f<<4),
f=1227133513&(f|f<<2),b|f<<2};g.deinterleave3=function(b,c){return b=b>>>c&1227133513,b=3272356035&(b|b>>>2),b=251719695&(b|b>>>4),b=4278190335&(b|b>>>8),b=1023&(b|b>>>16),b<<22>>22};g.nextCombination=function(b){var c=b|b-1;return c+1|(~c&-~c)-1>>>h(b)+1}},{}],34:[function(b,m,g){(function(h){function c(){function b(){}try{var c=new Uint8Array(1);return c.foo=function(){return 42},c.constructor=b,42===c.foo()&&c.constructor===b&&"function"==typeof c.subarray&&0===c.subarray(1,1).byteLength}catch(d){return!1}}
function l(b){var c;if(this instanceof l)if(this.length=0,this.parent=void 0,"number"==typeof b){if(c=this,c=v(c,0>b?0:0|d(b)),!l.TYPED_ARRAY_SUPPORT)for(var k=0;b>k;k++)c[k]=0}else{if("string"==typeof b){c=this;k=1<arguments.length?arguments[1]:"utf8";"string"==typeof k&&""!==k||(k="utf8");var f=0|t(b,k),k=(c=v(c,f),c.write(b,k),c)}else k=e(this,b);c=k}else c=1<arguments.length?new l(b,arguments[1]):new l(b);return c}function e(b,c){if(l.isBuffer(c)){var k=b,e=0|d(c.length);return k=v(k,e),c.copy(k,
0,0,e),k}if(D(c)){for(var k=b,e=0|d(c.length),k=v(k,e),h=0;e>h;h+=1)k[h]=255&c[h];return k}if(null==c)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(c.buffer instanceof ArrayBuffer)return f(b,c);if(c instanceof ArrayBuffer)return k=b,l.TYPED_ARRAY_SUPPORT?(c.byteLength,k=l._augment(new Uint8Array(c))):k=f(k,new Uint8Array(c)),k}if(c.length)for(k=b,e=0|d(c.length),k=v(k,e),h=0;e>h;h+=1)k[h]=255&c[h];else{k=b;h=0;"Buffer"===c.type&&D(c.data)&&
(e=c.data,h=0|d(e.length));for(var k=v(k,h),q=0;h>q;q+=1)k[q]=255&e[q]}return k}function f(b,c){var k=0|d(c.length);b=v(b,k);for(var e=0;k>e;e+=1)b[e]=255&c[e];return b}function v(b,c){l.TYPED_ARRAY_SUPPORT?(b=l._augment(new Uint8Array(c)),b.__proto__=l.prototype):(b.length=c,b._isBuffer=!0);return 0!==c&&c<=l.poolSize>>>1&&(b.parent=H),b}function d(b){if(b>=(l.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(l.TYPED_ARRAY_SUPPORT?
2147483647:1073741823).toString(16)+" bytes");return 0|b}function p(b,c){if(!(this instanceof p))return new p(b,c);var d=new l(b,c);return delete d.parent,d}function t(b,c){"string"!=typeof b&&(b=""+b);var d=b.length;if(0===d)return 0;for(var k=!1;;)switch(c){case "ascii":case "binary":case "raw":case "raws":return d;case "utf8":case "utf-8":return C(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*d;case "hex":return d>>>1;case "base64":return F.toByteArray(A(b)).length;
default:if(k)return C(b).length;c=(""+c).toLowerCase();k=!0}}function x(b,c,d){var k=!1;if(c|=0,d=void 0===d||d===1/0?this.length:0|d,b||(b="utf8"),0>c&&(c=0),d>this.length&&(d=this.length),c>=d)return"";for(;;)switch(b){case "hex":b=c;c=d;d=this.length;(!b||0>b)&&(b=0);(!c||0>c||c>d)&&(c=d);k="";for(d=b;c>d;d++)b=k,k=this[d],k=16>k?"0"+k.toString(16):k.toString(16),k=b+k;return k;case "utf8":case "utf-8":return w(this,c,d);case "ascii":b="";for(d=Math.min(this.length,d);d>c;c++)b+=String.fromCharCode(127&
this[c]);return b;case "binary":b="";for(d=Math.min(this.length,d);d>c;c++)b+=String.fromCharCode(this[c]);return b;case "base64":return 0===c&&d===this.length?F.fromByteArray(this):F.fromByteArray(this.slice(c,d));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,d);d="";for(b=0;b<c.length;b+=2)d+=String.fromCharCode(c[b]+256*c[b+1]);return d;default:if(k)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();k=!0}}function w(b,c,d){d=Math.min(b.length,d);for(var k=
[];d>c;){var e=b[c],f=null,h=239<e?4:223<e?3:191<e?2:1;if(d>=c+h){var q,t,r,p;switch(h){case 1:128>e&&(f=e);break;case 2:q=b[c+1];128===(192&q)&&(p=(31&e)<<6|63&q,127<p&&(f=p));break;case 3:q=b[c+1];t=b[c+2];128===(192&q)&&128===(192&t)&&(p=(15&e)<<12|(63&q)<<6|63&t,2047<p&&(55296>p||57343<p)&&(f=p));break;case 4:q=b[c+1],t=b[c+2],r=b[c+3],128===(192&q)&&128===(192&t)&&128===(192&r)&&(p=(15&e)<<18|(63&q)<<12|(63&t)<<6|63&r,65535<p&&1114112>p&&(f=p))}}null===f?(f=65533,h=1):65535<f&&(f-=65536,k.push(f>>>
10&1023|55296),f=56320|1023&f);k.push(f);c+=h}b=k.length;if(K>=b)k=String.fromCharCode.apply(String,k);else{d="";for(p=0;b>p;)d+=String.fromCharCode.apply(String,k.slice(p,p+=K));k=d}return k}function u(b,c,d){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+c>d)throw new RangeError("Trying to access beyond buffer length");}function r(b,c,d,k,e,f){if(!l.isBuffer(b))throw new TypeError("buffer must be a Buffer instance");if(c>e||f>c)throw new RangeError("value is out of bounds");if(d+
k>b.length)throw new RangeError("index out of range");}function y(b,c,d,k){0>c&&(c=65535+c+1);for(var e=0,f=Math.min(b.length-d,2);f>e;e++)b[d+e]=(c&255<<8*(k?e:1-e))>>>8*(k?e:1-e)}function k(b,c,d,k){0>c&&(c=4294967295+c+1);for(var e=0,f=Math.min(b.length-d,4);f>e;e++)b[d+e]=c>>>8*(k?e:3-e)&255}function q(b,c,d,k,e,f){if(c>e||f>c)throw new RangeError("value is out of bounds");if(d+k>b.length)throw new RangeError("index out of range");if(0>d)throw new RangeError("index out of range");}function z(b,
c,d,k,e){return e||q(b,c,d,4,3.4028234663852886E38,-3.4028234663852886E38),m.write(b,c,d,k,23,4),d+4}function E(b,c,d,k,e){return e||q(b,c,d,8,1.7976931348623157E308,-1.7976931348623157E308),m.write(b,c,d,k,52,8),d+8}function A(b){var c=b;if(b=(c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")).replace(L,""),2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function C(b,c){c=c||1/0;for(var d,k=b.length,e=null,f=[],h=0;k>h;h++){if(d=b.charCodeAt(h),55295<d&&57344>d){if(!e){if(56319<d){-1<(c-=3)&&f.push(239,
191,189);continue}if(h+1===k){-1<(c-=3)&&f.push(239,191,189);continue}e=d;continue}if(56320>d){-1<(c-=3)&&f.push(239,191,189);e=d;continue}d=e-55296<<10|d-56320|65536}else e&&-1<(c-=3)&&f.push(239,191,189);if(e=null,128>d){if(0>--c)break;f.push(d)}else if(2048>d){if(0>(c-=2))break;f.push(d>>6|192,63&d|128)}else if(65536>d){if(0>(c-=3))break;f.push(d>>12|224,d>>6&63|128,63&d|128)}else{if(!(1114112>d))throw Error("Invalid code point");if(0>(c-=4))break;f.push(d>>18|240,d>>12&63|128,d>>6&63|128,63&d|
128)}}return f}function B(b){for(var c=[],d=0;d<b.length;d++)c.push(255&b.charCodeAt(d));return c}function G(b,c,d,k){for(var e=0;k>e&&!(e+d>=c.length||e>=b.length);e++)c[e+d]=b[e];return e}var F=b("base64-js"),m=b("ieee754"),D=b("is-array");g.Buffer=l;g.SlowBuffer=p;g.INSPECT_MAX_BYTES=50;l.poolSize=8192;var H={};l.TYPED_ARRAY_SUPPORT=void 0!==h.TYPED_ARRAY_SUPPORT?h.TYPED_ARRAY_SUPPORT:c();l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array);l.isBuffer=function(b){return!(null==
b||!b._isBuffer)};l.compare=function(b,c){if(!l.isBuffer(b)||!l.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var d=b.length,k=c.length,e=0,f=Math.min(d,k);f>e&&b[e]===c[e];)++e;return e!==f&&(d=b[e],k=c[e]),k>d?-1:d>k?1:0};l.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};l.concat=function(b,
c){if(!D(b))throw new TypeError("list argument must be an Array of Buffers.");if(0===b.length)return new l(0);var d;if(void 0===c)for(d=c=0;d<b.length;d++)c+=b[d].length;var k=new l(c),e=0;for(d=0;d<b.length;d++){var f=b[d];f.copy(k,e);e+=f.length}return k};l.byteLength=t;l.prototype.length=void 0;l.prototype.parent=void 0;l.prototype.toString=function(){var b=0|this.length;return 0===b?"":0===arguments.length?w(this,0,b):x.apply(this,arguments)};l.prototype.equals=function(b){if(!l.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return this===b?!0:0===l.compare(this,b)};l.prototype.inspect=function(){var b="",c=g.INSPECT_MAX_BYTES;return 0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... ")),"<Buffer "+b+">"};l.prototype.compare=function(b){if(!l.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?0:l.compare(this,b)};l.prototype.indexOf=function(b,c){function d(b,c,k){for(var e=-1,f=0;k+f<b.length;f++)if(b[k+f]===c[-1===e?0:f-e]){if(-1===e&&(e=f),f-e+1===
c.length)return k+e}else e=-1;return-1}if((2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648),c>>=0,0===this.length)||c>=this.length)return-1;if(0>c&&(c=Math.max(this.length+c,0)),"string"==typeof b)return 0===b.length?-1:String.prototype.indexOf.call(this,b,c);if(l.isBuffer(b))return d(this,b,c);if("number"==typeof b)return l.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,b,c):d(this,[b],c);throw new TypeError("val must be string, number or Buffer");
};l.prototype.get=function(b){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(b)};l.prototype.set=function(b,c){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(b,c)};l.prototype.write=function(b,c,d,k){if(void 0===c)k="utf8",d=this.length,c=0;else if(void 0===d&&"string"==typeof c)k=c,d=this.length,c=0;else if(isFinite(c))c|=0,isFinite(d)?(d|=0,void 0===k&&(k="utf8")):(k=d,d=void 0);else{var e=k;k=c;c=0|
d;d=e}e=this.length-c;if((void 0===d||d>e)&&(d=e),0<b.length&&(0>d||0>c)||c>this.length)throw new RangeError("attempt to write outside buffer bounds");k||(k="utf8");for(e=!1;;)switch(k){case "hex":c=Number(c)||0;k=this.length-c;d?(d=Number(d),d>k&&(d=k)):d=k;k=b.length;if(0!==k%2)throw Error("Invalid hex string");d>k/2&&(d=k/2);for(k=0;d>k;k++){e=parseInt(b.substr(2*k,2),16);if(isNaN(e))throw Error("Invalid hex string");this[c+k]=e}return k;case "utf8":case "utf-8":return G(C(b,this.length-c),this,
c,d);case "ascii":return G(B(b),this,c,d);case "binary":return G(B(b),this,c,d);case "base64":return G(F.toByteArray(A(b)),this,c,d);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":k=this.length-c;for(var f=void 0,f=e=void 0,h=[],q=0;q<b.length&&!(0>(k-=2));q++)f=b.charCodeAt(q),e=f>>8,f%=256,h.push(f),h.push(e);return G(h,this,c,d);default:if(e)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase();e=!0}};l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||
this,0)}};var K=4096;l.prototype.slice=function(b,c){var d=this.length;b=~~b;c=void 0===c?d:~~c;0>b?(b+=d,0>b&&(b=0)):b>d&&(b=d);0>c?(c+=d,0>c&&(c=0)):c>d&&(c=d);b>c&&(c=b);if(l.TYPED_ARRAY_SUPPORT)d=l._augment(this.subarray(b,c));else for(var k=c-b,d=new l(k,void 0),e=0;k>e;e++)d[e]=this[e+b];return d.length&&(d.parent=this.parent||this),d};l.prototype.readUIntLE=function(b,c,d){b|=0;c|=0;d||u(b,c,this.length);d=this[b];for(var k=1,e=0;++e<c&&(k*=256);)d+=this[b+e]*k;return d};l.prototype.readUIntBE=
function(b,c,d){b|=0;c|=0;d||u(b,c,this.length);d=this[b+--c];for(var k=1;0<c&&(k*=256);)d+=this[b+--c]*k;return d};l.prototype.readUInt8=function(b,c){return c||u(b,1,this.length),this[b]};l.prototype.readUInt16LE=function(b,c){return c||u(b,2,this.length),this[b]|this[b+1]<<8};l.prototype.readUInt16BE=function(b,c){return c||u(b,2,this.length),this[b]<<8|this[b+1]};l.prototype.readUInt32LE=function(b,c){return c||u(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};l.prototype.readUInt32BE=
function(b,c){return c||u(b,4,this.length),16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};l.prototype.readIntLE=function(b,c,d){b|=0;c|=0;d||u(b,c,this.length);d=this[b];for(var k=1,e=0;++e<c&&(k*=256);)d+=this[b+e]*k;return k*=128,d>=k&&(d-=Math.pow(2,8*c)),d};l.prototype.readIntBE=function(b,c,d){b|=0;c|=0;d||u(b,c,this.length);d=c;for(var k=1,e=this[b+--d];0<d&&(k*=256);)e+=this[b+--d]*k;return k*=128,e>=k&&(e-=Math.pow(2,8*c)),e};l.prototype.readInt8=function(b,c){return c||u(b,1,this.length),
128&this[b]?-1*(255-this[b]+1):this[b]};l.prototype.readInt16LE=function(b,c){c||u(b,2,this.length);var d=this[b]|this[b+1]<<8;return 32768&d?4294901760|d:d};l.prototype.readInt16BE=function(b,c){c||u(b,2,this.length);var d=this[b+1]|this[b]<<8;return 32768&d?4294901760|d:d};l.prototype.readInt32LE=function(b,c){return c||u(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};l.prototype.readInt32BE=function(b,c){return c||u(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+
3]};l.prototype.readFloatLE=function(b,c){return c||u(b,4,this.length),m.read(this,b,!0,23,4)};l.prototype.readFloatBE=function(b,c){return c||u(b,4,this.length),m.read(this,b,!1,23,4)};l.prototype.readDoubleLE=function(b,c){return c||u(b,8,this.length),m.read(this,b,!0,52,8)};l.prototype.readDoubleBE=function(b,c){return c||u(b,8,this.length),m.read(this,b,!1,52,8)};l.prototype.writeUIntLE=function(b,c,d,k){b=+b;c|=0;d|=0;k||r(this,b,c,d,Math.pow(2,8*d),0);k=1;var e=0;for(this[c]=255&b;++e<d&&(k*=
256);)this[c+e]=b/k&255;return c+d};l.prototype.writeUIntBE=function(b,c,d,k){b=+b;c|=0;d|=0;k||r(this,b,c,d,Math.pow(2,8*d),0);k=d-1;var e=1;for(this[c+k]=255&b;0<=--k&&(e*=256);)this[c+k]=b/e&255;return c+d};l.prototype.writeUInt8=function(b,c,d){return b=+b,c|=0,d||r(this,b,c,1,255,0),l.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),this[c]=255&b,c+1};l.prototype.writeUInt16LE=function(b,c,d){return b=+b,c|=0,d||r(this,b,c,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8):y(this,b,c,!0),
c+2};l.prototype.writeUInt16BE=function(b,c,d){return b=+b,c|=0,d||r(this,b,c,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=255&b):y(this,b,c,!1),c+2};l.prototype.writeUInt32LE=function(b,c,d){return b=+b,c|=0,d||r(this,b,c,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=255&b):k(this,b,c,!0),c+4};l.prototype.writeUInt32BE=function(b,c,d){return b=+b,c|=0,d||r(this,b,c,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>
16,this[c+2]=b>>>8,this[c+3]=255&b):k(this,b,c,!1),c+4};l.prototype.writeIntLE=function(b,c,d,k){(b=+b,c|=0,k)||(k=Math.pow(2,8*d-1),r(this,b,c,d,k-1,-k));k=0;var e=1,f=0>b?1:0;for(this[c]=255&b;++k<d&&(e*=256);)this[c+k]=(b/e>>0)-f&255;return c+d};l.prototype.writeIntBE=function(b,c,d,k){(b=+b,c|=0,k)||(k=Math.pow(2,8*d-1),r(this,b,c,d,k-1,-k));k=d-1;var e=1,f=0>b?1:0;for(this[c+k]=255&b;0<=--k&&(e*=256);)this[c+k]=(b/e>>0)-f&255;return c+d};l.prototype.writeInt8=function(b,c,d){return b=+b,c|=0,
d||r(this,b,c,1,127,-128),l.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),0>b&&(b=255+b+1),this[c]=255&b,c+1};l.prototype.writeInt16LE=function(b,c,d){return b=+b,c|=0,d||r(this,b,c,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8):y(this,b,c,!0),c+2};l.prototype.writeInt16BE=function(b,c,d){return b=+b,c|=0,d||r(this,b,c,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=255&b):y(this,b,c,!1),c+2};l.prototype.writeInt32LE=function(b,c,d){return b=+b,c|=0,d||r(this,b,c,4,
2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):k(this,b,c,!0),c+4};l.prototype.writeInt32BE=function(b,c,d){return b=+b,c|=0,d||r(this,b,c,4,2147483647,-2147483648),0>b&&(b=4294967295+b+1),l.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b):k(this,b,c,!1),c+4};l.prototype.writeFloatLE=function(b,c,d){return z(this,b,c,!0,d)};l.prototype.writeFloatBE=function(b,c,d){return z(this,b,c,!1,d)};l.prototype.writeDoubleLE=
function(b,c,d){return E(this,b,c,!0,d)};l.prototype.writeDoubleBE=function(b,c,d){return E(this,b,c,!1,d)};l.prototype.copy=function(b,c,d,k){if((d||(d=0),k||0===k||(k=this.length),c>=b.length&&(c=b.length),c||(c=0),0<k&&d>k&&(k=d),k===d)||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("sourceStart out of bounds");if(0>k)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length);b.length-
c<k-d&&(k=b.length-c+d);var e=k-d;if(this===b&&c>d&&k>c)for(k=e-1;0<=k;k--)b[k+c]=this[k+d];else if(1E3>e||!l.TYPED_ARRAY_SUPPORT)for(k=0;e>k;k++)b[k+c]=this[k+d];else b._set(this.subarray(d,d+e),c);return e};l.prototype.fill=function(b,c,d){if(b||(b=0),c||(c=0),d||(d=this.length),c>d)throw new RangeError("end < start");if(d!==c&&0!==this.length){if(0>c||c>=this.length)throw new RangeError("start out of bounds");if(0>d||d>this.length)throw new RangeError("end out of bounds");if("number"==typeof b)for(;d>
c;c++)this[c]=b;else{b=C(b.toString());for(var k=b.length;d>c;c++)this[c]=b[c%k]}return this}};l.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(l.TYPED_ARRAY_SUPPORT)return(new l(this)).buffer;for(var b=new Uint8Array(this.length),c=0,d=b.length;d>c;c+=1)b[c]=this[c];return b.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser");};var O=l.prototype;l._augment=function(b){return b.constructor=l,b._isBuffer=!0,b._set=b.set,b.get=O.get,b.set=O.set,
b.write=O.write,b.toString=O.toString,b.toLocaleString=O.toString,b.toJSON=O.toJSON,b.equals=O.equals,b.compare=O.compare,b.indexOf=O.indexOf,b.copy=O.copy,b.slice=O.slice,b.readUIntLE=O.readUIntLE,b.readUIntBE=O.readUIntBE,b.readUInt8=O.readUInt8,b.readUInt16LE=O.readUInt16LE,b.readUInt16BE=O.readUInt16BE,b.readUInt32LE=O.readUInt32LE,b.readUInt32BE=O.readUInt32BE,b.readIntLE=O.readIntLE,b.readIntBE=O.readIntBE,b.readInt8=O.readInt8,b.readInt16LE=O.readInt16LE,b.readInt16BE=O.readInt16BE,b.readInt32LE=
O.readInt32LE,b.readInt32BE=O.readInt32BE,b.readFloatLE=O.readFloatLE,b.readFloatBE=O.readFloatBE,b.readDoubleLE=O.readDoubleLE,b.readDoubleBE=O.readDoubleBE,b.writeUInt8=O.writeUInt8,b.writeUIntLE=O.writeUIntLE,b.writeUIntBE=O.writeUIntBE,b.writeUInt16LE=O.writeUInt16LE,b.writeUInt16BE=O.writeUInt16BE,b.writeUInt32LE=O.writeUInt32LE,b.writeUInt32BE=O.writeUInt32BE,b.writeIntLE=O.writeIntLE,b.writeIntBE=O.writeIntBE,b.writeInt8=O.writeInt8,b.writeInt16LE=O.writeInt16LE,b.writeInt16BE=O.writeInt16BE,
b.writeInt32LE=O.writeInt32LE,b.writeInt32BE=O.writeInt32BE,b.writeFloatLE=O.writeFloatLE,b.writeFloatBE=O.writeFloatBE,b.writeDoubleLE=O.writeDoubleLE,b.writeDoubleBE=O.writeDoubleBE,b.fill=O.fill,b.inspect=O.inspect,b.toArrayBuffer=O.toArrayBuffer,b};var L=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":35,ieee754:36,"is-array":37}],35:[function(b,m,g){!function(b){function c(b){b=b.charCodeAt(0);
return b===e||b===t?62:b===f||b===x?63:v>b?-1:v+10>b?b-v+52:p+26>b?b-p:d+26>b?b-d+26:void 0}var l="undefined"!=typeof Uint8Array?Uint8Array:Array,e=43,f=47,v=48,d=97,p=65,t=45,x=95;b.toByteArray=function(b){function d(b){t[p++]=b}var e,f,k,h,t;if(0<b.length%4)throw Error("Invalid string. Length must be a multiple of 4");e=b.length;h="="===b.charAt(e-2)?2:"="===b.charAt(e-1)?1:0;t=new l(3*b.length/4-h);f=0<h?b.length-4:b.length;var p=0;for(e=0;f>e;e+=4)k=c(b.charAt(e))<<18|c(b.charAt(e+1))<<12|c(b.charAt(e+
2))<<6|c(b.charAt(e+3)),d((16711680&k)>>16),d((65280&k)>>8),d(255&k);return 2===h?(k=c(b.charAt(e))<<2|c(b.charAt(e+1))>>4,d(255&k)):1===h&&(k=c(b.charAt(e))<<10|c(b.charAt(e+1))<<4|c(b.charAt(e+2))>>2,d(k>>8&255),d(255&k)),t};b.fromByteArray=function(b){var c,d,e,k=b.length%3,f="";c=0;for(e=b.length-k;e>c;c+=3)d=(b[c]<<16)+(b[c+1]<<8)+b[c+2],d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>
12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&d),f+=d;switch(k){case 1:d=b[b.length-1];f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>2);f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<4&63);f+="==";break;case 2:d=(b[b.length-2]<<8)+b[b.length-1],f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>
10),f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>4&63),f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<2&63),f+="="}return f}}("undefined"==typeof g?this.base64js={}:g)},{}],36:[function(b,m,g){g.read=function(b,c,l,e,f){var v;v=8*f-e-1;var d=(1<<v)-1,p=d>>1,t=-7;f=l?f-1:0;var x=l?-1:1,w=b[c+f];f+=x;l=w&(1<<-t)-1;w>>=-t;for(t+=v;0<t;l=256*l+b[c+f],f+=x,t-=8);v=l&(1<<-t)-1;l>>=-t;for(t+=e;0<t;v=256*v+b[c+f],f+=x,t-=8);if(0===l)l=1-
p;else{if(l===d)return v?NaN:1/0*(w?-1:1);v+=Math.pow(2,e);l-=p}return(w?-1:1)*v*Math.pow(2,l-e)};g.write=function(b,c,l,e,f,v){var d,p,t,x=8*v-f-1,w=(1<<x)-1,u=w>>1,r=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;v=e?0:v-1;e=e?1:-1;var y=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);for(isNaN(c)||c===1/0?(p=isNaN(c)?1:0,d=w):(d=Math.floor(Math.log(c)/Math.LN2),1>c*(t=Math.pow(2,-d))&&(d--,t*=2),c+=1<=d+u?r/t:r*Math.pow(2,1-u),2<=c*t&&(d++,t/=2),d+u>=w?(p=0,d=w):1<=d+u?(p=(c*t-1)*Math.pow(2,f),d+=u):(p=c*Math.pow(2,
u-1)*Math.pow(2,f),d=0));8<=f;b[l+v]=255&p,v+=e,p/=256,f-=8);d=d<<f|p;for(x+=f;0<x;b[l+v]=255&d,v+=e,d/=256,x-=8);b[l+v-e]|=128*y}},{}],37:[function(b,m,g){var h=Object.prototype.toString;m.exports=Array.isArray||function(b){return!!b&&"[object Array]"==h.call(b)}},{}],38:[function(b,m,g){function h(){d=!1;f.length?v=f.concat(v):p=-1;v.length&&c()}function c(){if(!d){var b=setTimeout(h);d=!0;for(var c=v.length;c;){f=v;for(v=[];++p<c;)f&&f[p].run();p=-1;c=v.length}f=null;d=!1;clearTimeout(b)}}function l(b,
c){this.fun=b;this.array=c}function e(){}var f;b=m.exports={};var v=[],d=!1,p=-1;b.nextTick=function(b){var e=Array(arguments.length-1);if(1<arguments.length)for(var f=1;f<arguments.length;f++)e[f-1]=arguments[f];v.push(new l(b,e));1!==v.length||d||setTimeout(c,0)};l.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=e;b.addListener=e;b.once=e;b.off=e;b.removeListener=e;b.removeAllListeners=e;b.emit=e;b.binding=
function(b){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(b){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},{}],39:[function(b,m,g){m.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},
{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,
rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,
182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,
78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},
{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,
rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,
rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:0,rgb:[255,255,255,1]}]}},{}],40:[function(b,m,g){function h(b){for(var c,d="#",e=0;3>e;++e)c=b[e],c=c.toString(16),d+=("00"+c).substr(c.length);return d}function c(b){return"rgba("+b.join(",")+")"}var l=b("arraytools"),e=b("./colorScales.json");m.exports=function(b){var v,d,p,t,x,w,u,r,y=[],k=[],q=[],z=[];if(l.isPlainObject(b)||(b={}),b.colormap||(v="jet"),Array.isArray(b.alpha)?2!==
b.alpha.length&&(b.alpha=[1,1]):"number"==typeof b.alpha?b.alpha=[b.alpha,b.alpha]:b.alpha=[1,1],"string"==typeof b.colormap){if(v=b.colormap.toLowerCase(),!(v in e))throw Error(v+" not a supported colorscale");x=e[v]}else Array.isArray(b.colormap)&&(x=b.colormap);if(u=b.nshades||72,w=b.format||"hex",p=b.alpha,x.length>u)throw Error(v+" map requires nshades to be at least size "+x.length);v=x.map(function(b){return Math.round(b.index*u)});0>p[0]&&(p[0]=0);0>p[1]&&(p[0]=0);1<p[0]&&(p[0]=1);1<p[1]&&
(p[0]=1);for(b=0;b<v.length;++b)t=x[b].index,d=x[b].rgb,4===d.length&&0<=d[3]&&1>=d[3]||(d[3]=p[0]+(p[1]-p[0])*t);for(b=0;b<v.length-1;++b)t=v[b+1]-v[b],p=x[b].rgb,d=x[b+1].rgb,y=y.concat(l.linspace(p[0],d[0],t)),k=k.concat(l.linspace(p[1],d[1],t)),q=q.concat(l.linspace(p[2],d[2],t)),z=z.concat(l.linspace(p[3],d[3],t));return y=y.map(Math.round),k=k.map(Math.round),q=q.map(Math.round),r=l.zip(y,k,q,z),"hex"===w&&(r=r.map(h)),"rgbaString"===w&&(r=r.map(c)),r}},{"./colorScales.json":39,arraytools:32}],
41:[function(b,m,g){function h(b,c){return b-c}m.exports=function(b,e){var f=b.length,v=b.length-e.length;if(v)return v;switch(f){case 0:return 0;case 1:return b[0]-e[0];case 2:return b[0]+b[1]-e[0]-e[1]||c(b[0],b[1])-c(e[0],e[1]);case 3:var f=b[0]+b[1],d=e[0]+e[1];if(v=f+b[2]-(d+e[2]))return v;var v=c(b[0],b[1]),p=c(e[0],e[1]);return c(v,b[2])-c(p,e[2])||c(v+b[2],f)-c(p+e[2],d);case 4:var v=b[0],f=b[1],d=b[2],p=b[3],t=e[0],x=e[1],w=e[2],u=e[3];return v+f+d+p-(t+x+w+u)||c(v,f,d,p)-c(t,x,w,u,t)||c(v+
f,v+d,v+p,f+d,f+p,d+p)-c(t+x,t+w,t+u,x+w,x+u,w+u)||c(v+f+d,v+f+p,v+d+p,f+d+p)-c(t+x+w,t+x+u,t+w+u,x+w+u);default:d=b.slice().sort(h);p=e.slice().sort(h);for(t=0;f>t;++t)if(v=d[t]-p[t])return v;return 0}};var c=Math.min},{}],42:[function(b,m,g){var h=b("./lib/ch1d"),c=b("./lib/ch2d"),l=b("./lib/chnd");m.exports=function(b){var f=b.length;if(0===f)return[];if(1===f)return[[0]];f=b[0].length;return 0===f?[]:1===f?h(b):2===f?c(b):l(b,f)}},{"./lib/ch1d":43,"./lib/ch2d":44,"./lib/chnd":45}],43:[function(b,
m,g){m.exports=function(b){for(var c=0,l=0,e=1;e<b.length;++e)b[e][0]<b[c][0]&&(c=e),b[e][0]>b[l][0]&&(l=e);return l>c?[[c],[l]]:c>l?[[l],[c]]:[[c]]}},{}],44:[function(b,m,g){m.exports=function(b){b=h(b);var l=b.length;if(2>=l)return[];for(var e=Array(l),f=b[l-1],v=0;l>v;++v){var d=b[v];e[v]=[f,d];f=d}return e};var h=b("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":47}],45:[function(b,m,g){m.exports=function(b,e){try{return h(b,!0)}catch(y){var f=c(b);if(f.length<=e)return[];for(var v=b.length,
d=Array(v),p=0;p<f.length;++p)d[p]=b[f[p]];for(var t=f.length,p=0;v>p;++p)0>f.indexOf(p)&&(d[t++]=b[p]);v=h(d,!0);d=v.length;p=f.length;for(t=0;d>t;++t)for(var x=v[t],w=0;w<x.length;++w){var u=x[w];if(p>u)x[w]=f[u];else{for(var u=u-p,r=0;p>r;++r)u>=f[r]&&(u+=1);x[w]=u}}return v}};var h=b("incremental-convex-hull"),c=b("affine-hull")},{"affine-hull":46,"incremental-convex-hull":168}],46:[function(b,m,g){m.exports=function(b){var l=b.length;if(0===l)return[];if(1===l)return[0];for(var e=b[0].length,
f=[b[0]],v=[0],d=1;l>d;++d){f.push(b[d]);var p;a:{p=f;for(var t=e,x=Array(t+1),w=0;w<p.length;++w)x[w]=p[w];for(w=0;w<=p.length;++w){for(var u=p.length;t>=u;++u){for(var r=Array(t),y=0;t>y;++y)r[y]=Math.pow(u+1-w,y);x[u]=r}if(h.apply(void 0,x)){p=!0;break a}}p=!1}if(p){if(v.push(d),v.length===e+1)break}else f.pop()}return v};var h=b("robust-orientation")},{"robust-orientation":195}],47:[function(b,m,g){m.exports=function(b){var l=b.length;if(3>l){for(var e=Array(l),f=0;l>f;++f)e[f]=f;return 2===l&&
b[0][0]===b[1][0]&&b[0][1]===b[1][1]?[0]:e}e=Array(l);for(f=0;l>f;++f)e[f]=f;e.sort(function(d,e){var f=b[d][0]-b[e][0];return f?f:b[d][1]-b[e][1]});for(var v=[e[0],e[1]],d=[e[0],e[1]],f=2;l>f;++f){for(var p=e[f],t=b[p],x=v.length;1<x&&0>=h(b[v[x-2]],b[v[x-1]],t);)--x,v.pop();v.push(p);for(x=d.length;1<x&&0<=h(b[d[x-2]],b[d[x-1]],t);)--x,d.pop();d.push(p)}e=Array(d.length+v.length-2);f=l=0;for(p=v.length;p>f;++f)e[l++]=v[f];for(f=d.length-2;0<f;--f)e[l++]=d[f];return e};var h=b("robust-orientation")[3]},
{"robust-orientation":195}],48:[function(b,m,g){m.exports=b("cwise-compiler")},{"cwise-compiler":49}],49:[function(b,m,g){function h(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var c=b("./lib/thunk.js");m.exports=function(b){var e=new h;e.pre=b.pre;e.body=b.body;e.post=b.post;var f=b.args.slice(0);e.argTypes=
f;for(var v=0;v<f.length;++v){var d=f[v];if("array"===d||"object"==typeof d&&d.blockIndices){if(e.argTypes[v]="array",e.arrayArgs.push(v),e.arrayBlockIndices.push(d.blockIndices?d.blockIndices:0),e.shimArgs.push("array"+v),v<e.pre.args.length&&0<e.pre.args[v].count)throw Error("cwise: pre() block may not reference array args");if(v<e.post.args.length&&0<e.post.args[v].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===d)e.scalarArgs.push(v),e.shimArgs.push("scalar"+
v);else if("index"===d){if(e.indexArgs.push(v),v<e.pre.args.length&&0<e.pre.args[v].count)throw Error("cwise: pre() block may not reference array index");if(v<e.body.args.length&&e.body.args[v].lvalue)throw Error("cwise: body() block may not write to array index");if(v<e.post.args.length&&0<e.post.args[v].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===d){if(e.shapeArgs.push(v),v<e.pre.args.length&&e.pre.args[v].lvalue)throw Error("cwise: pre() block may not write to array shape");
if(v<e.body.args.length&&e.body.args[v].lvalue)throw Error("cwise: body() block may not write to array shape");if(v<e.post.args.length&&e.post.args[v].lvalue)throw Error("cwise: post() block may not write to array shape");}else{if("object"!=typeof d||!d.offset)throw Error("cwise: Unknown argument type "+f[v]);e.argTypes[v]="offset";e.offsetArgs.push({array:d.array,offset:d.offset});e.offsetArgIndex.push(v)}}if(0>=e.arrayArgs.length)throw Error("cwise: No array arguments specified");if(e.pre.args.length>
f.length)throw Error("cwise: Too many arguments in pre() block");if(e.body.args.length>f.length)throw Error("cwise: Too many arguments in body() block");if(e.post.args.length>f.length)throw Error("cwise: Too many arguments in post() block");return e.debug=!!b.printCode||!!b.debug,e.funcName=b.funcName||"cwise",e.blockSize=b.blockSize||64,c(e)}},{"./lib/thunk.js":51}],50:[function(b,m,g){function h(b,c,e){var f,h=b.length,l=c.arrayArgs.length,u=0<c.indexArgs.length,r=[],y=[],k=0,q=0;for(c=0;h>c;++c)y.push(["i",
c,"=0"].join(""));for(f=0;l>f;++f)for(c=0;h>c;++c)q=k,k=b[c],0===c?y.push(["d",f,"s",c,"=t",f,"p",k].join("")):y.push(["d",f,"s",c,"=(t",f,"p",k,"-s",q,"*t",f,"p",q,")"].join(""));r.push("var "+y.join(","));for(c=h-1;0<=c;--c)k=b[c],r.push(["for(i",c,"=0;i",c,"<s",k,";++i",c,"){"].join(""));r.push(e);for(c=0;h>c;++c){q=k;k=b[c];for(f=0;l>f;++f)r.push(["p",f,"+=d",f,"s",c].join(""));u&&(0<c&&r.push(["index[",q,"]-=s",q].join("")),r.push(["++index[",k,"]"].join("")));r.push("}")}return r.join("\n")}
function c(b,c,e,f){for(var x=c.length,l=e.arrayArgs.length,u=e.blockSize,r=0<e.indexArgs.length,y=[],k=0;l>k;++k)y.push(["var offset",k,"=p",k].join(""));for(k=b;x>k;++k)y.push(["for(var j"+k+"=SS[",c[k],"]|0;j",k,">0;){"].join("")),y.push(["if(j",k,"<",u,"){"].join("")),y.push(["s",c[k],"=j",k].join("")),y.push(["j",k,"=0"].join("")),y.push(["}else{s",c[k],"=",u].join("")),y.push(["j",k,"-=",u,"}"].join("")),r&&y.push(["index[",c[k],"]=j",k].join(""));for(k=0;l>k;++k){u=["offset"+k];for(r=b;x>r;++r)u.push(["j",
r,"*t",k,"p",c[r]].join(""));y.push(["p",k,"=(",u.join("+"),")"].join(""))}y.push(h(c,e,f));for(k=b;x>k;++k)y.push("}");return y.join("\n")}function l(b,c,e){for(var f=b.body,h=[],l=[],u=0;u<b.args.length;++u){var r=b.args[u];if(!(0>=r.count)){var y=new RegExp(r.name,"g"),k="",q=c.arrayArgs.indexOf(u);switch(c.argTypes[u]){case "offset":var z=c.offsetArgIndex.indexOf(u),q=c.offsetArgs[z].array,k="+q"+z;case "array":var k="p"+q+k,g="l"+u,z="a"+q;if(0===c.arrayBlockIndices[q])1===r.count?"generic"===
e[q]?r.lvalue?(h.push(["var ",g,"=",z,".get(",k,")"].join("")),f=f.replace(y,g),l.push([z,".set(",k,",",g,")"].join(""))):f=f.replace(y,[z,".get(",k,")"].join("")):f=f.replace(y,[z,"[",k,"]"].join("")):"generic"===e[q]?(h.push(["var ",g,"=",z,".get(",k,")"].join("")),f=f.replace(y,g),r.lvalue&&l.push([z,".set(",k,",",g,")"].join(""))):(h.push(["var ",g,"=",z,"[",k,"]"].join("")),f=f.replace(y,g),r.lvalue&&l.push([z,"[",k,"]=",g].join("")));else{y=[r.name];r=[k];for(k=0;k<Math.abs(c.arrayBlockIndices[q]);k++)y.push("\\s*\\[([^\\]]+)\\]"),
r.push("$"+(k+1)+"*t"+q+"b"+k);if(y=new RegExp(y.join(""),"g"),k=r.join("+"),"generic"===e[q])throw Error("cwise: Generic arrays not supported in combination with blocks!");f=f.replace(y,[z,"[",k,"]"].join(""))}break;case "scalar":f=f.replace(y,"Y"+c.scalarArgs.indexOf(u));break;case "index":f=f.replace(y,"index");break;case "shape":f=f.replace(y,"shape")}}}return[h.join("\n"),f,l.join("\n")].join("\n").trim()}function e(b){for(var c=Array(b.length),e=!0,f=0;f<b.length;++f){var h=b[f],l=h.match(/\d+/),
l=l?l[0]:"";0===h.charAt(0)?c[f]="u"+h.charAt(1)+l:c[f]=h.charAt(0)+l;0<f&&(e=e&&c[f]===c[f-1])}return e?c[0]:c.join("")}var f=b("uniq");m.exports=function(b,d){for(var p=d[1].length-Math.abs(b.arrayBlockIndices[0])|0,t=Array(b.arrayArgs.length),x=Array(b.arrayArgs.length),w=0;w<b.arrayArgs.length;++w)x[w]=d[2*w],t[w]=d[2*w+1];for(var u=[],r=[],y=[],k=[],q=[],w=0;w<b.arrayArgs.length;++w){0>b.arrayBlockIndices[w]?(y.push(0),k.push(p),u.push(p),r.push(p+b.arrayBlockIndices[w])):(y.push(b.arrayBlockIndices[w]),
k.push(b.arrayBlockIndices[w]+p),u.push(0),r.push(b.arrayBlockIndices[w]));for(var z=[],g=0;g<t[w].length;g++)y[w]<=t[w][g]&&t[w][g]<k[w]&&z.push(t[w][g]-y[w]);q.push(z)}r=["SS"];k=["'use strict'"];z=[];for(g=0;p>g;++g)z.push(["s",g,"=SS[",g,"]"].join(""));for(w=0;w<b.arrayArgs.length;++w){r.push("a"+w);r.push("t"+w);r.push("p"+w);for(g=0;p>g;++g)z.push(["t",w,"p",g,"=t",w,"[",y[w]+g,"]"].join(""));for(g=0;g<Math.abs(b.arrayBlockIndices[w]);++g)z.push(["t",w,"b",g,"=t",w,"[",u[w]+g,"]"].join(""))}for(w=
0;w<b.scalarArgs.length;++w)r.push("Y"+w);if(0<b.shapeArgs.length&&z.push("shape=SS.slice(0)"),0<b.indexArgs.length){g=Array(p);for(w=0;p>w;++w)g[w]="0";z.push(["index=[",g.join(","),"]"].join(""))}for(w=0;w<b.offsetArgs.length;++w){u=b.offsetArgs[w];y=[];for(g=0;g<u.offset.length;++g)0!==u.offset[g]&&(1===u.offset[g]?y.push(["t",u.array,"p",g].join("")):y.push([u.offset[g],"*t",u.array,"p",g].join("")));0===y.length?z.push("q"+w+"=0"):z.push(["q",w,"=",y.join("+")].join(""))}w=f([].concat(b.pre.thisVars).concat(b.body.thisVars).concat(b.post.thisVars));
z=z.concat(w);k.push("var "+z.join(","));for(w=0;w<b.arrayArgs.length;++w)k.push("p"+w+"|=0");3<b.pre.body.length&&k.push(l(b.pre,b,x));w=l(b.body,b,x);a:for(g=0,z=q[0].length;z>g;){for(u=1;u<q.length;++u)if(q[u][g]!==q[0][g])break a;++g}p>g?k.push(c(g,q[0],b,w)):k.push(h(q[0],b,w));3<b.post.body.length&&k.push(l(b.post,b,x));b.debug&&console.log("-----Generated cwise routine for ",d,":\n"+k.join("\n")+"\n----------");p=[b.funcName||"unnamed","_cwise_loop_",t[0].join("s"),"m",g,e(x)].join("");return(new Function(["function ",
p,"(",r.join(","),"){",k.join("\n"),"} return ",p].join("")))()}},{uniq:52}],51:[function(b,m,g){var h=b("./compile.js");m.exports=function(b){var l=["'use strict'","var CACHED={}"],e=[];l.push(["return function ",b.funcName+"_cwise_thunk","(",b.shimArgs.join(","),"){"].join(""));for(var f=[],v=[],d=[["array",b.arrayArgs[0],".shape.slice(",Math.max(0,b.arrayBlockIndices[0]),0>b.arrayBlockIndices[0]?","+b.arrayBlockIndices[0]+")":")"].join("")],p=[],t=[],x=0;x<b.arrayArgs.length;++x){var w=b.arrayArgs[x];
e.push(["t",w,"=array",w,".dtype,r",w,"=array",w,".order"].join(""));f.push("t"+w);f.push("r"+w);v.push("t"+w);v.push("r"+w+".join()");d.push("array"+w+".data");d.push("array"+w+".stride");d.push("array"+w+".offset|0");0<x&&(p.push("array"+b.arrayArgs[0]+".shape.length===array"+w+".shape.length+"+(Math.abs(b.arrayBlockIndices[0])-Math.abs(b.arrayBlockIndices[x]))),t.push("array"+b.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[0])+"]===array"+w+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[x])+
"]"))}1<b.arrayArgs.length&&(l.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),l.push("for(var shapeIndex=array"+b.arrayArgs[0]+".shape.length-"+Math.abs(b.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),l.push("if (!("+t.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),l.push("}"));for(x=0;x<b.scalarArgs.length;++x)d.push("scalar"+b.scalarArgs[x]);e.push(["type=[",v.join(","),"].join()"].join(""));e.push("proc=CACHED[type]");
l.push("var "+e.join(","));l.push(["if(!proc){CACHED[type]=proc=compile([",f.join(","),"])}return proc(",d.join(","),")}"].join(""));b.debug&&console.log("-----Generated thunk:\n"+l.join("\n")+"\n----------");return(new Function("compile",l.join("\n")))(h.bind(void 0,b))}},{"./compile.js":50}],52:[function(b,m,g){m.exports=function(b,c,l){if(0!==b.length)if(c){l||b.sort(c);l=1;for(var e=b.length,f=b[0],v=b[0],d=1;e>d;++d)if(v=f,f=b[d],c(f,v))d===l?l++:b[l++]=f;b=(b.length=l,b)}else{l||b.sort();c=
1;l=b.length;e=b[0];f=b[0];for(v=1;l>v;++v,f=e)if(f=e,e=b[v],e!==f)v===c?c++:b[c++]=e;b=(b.length=c,b)}return b}},{}],53:[function(b,m,g){!function(){function b(c){return c&&(c.ownerDocument&&c.ownerDocument.defaultView||c.document&&c||c.defaultView)}function c(b,c){return c>b?-1:b>c?1:b>=c?0:NaN}function l(b){return null===b?NaN:+b}function e(b){return!isNaN(b)}function f(b){return{left:function(c,d,k,e){3>arguments.length&&(k=0);for(4>arguments.length&&(e=c.length);e>k;){var f=k+e>>>1;0>b(c[f],
d)?k=f+1:e=f}return k},right:function(c,d,k,e){3>arguments.length&&(k=0);for(4>arguments.length&&(e=c.length);e>k;){var f=k+e>>>1;0<b(c[f],d)?e=f:k=f+1}return k}}}function v(b){return b.length}function d(b,c){for(var d in c)Object.defineProperty(b.prototype,d,{value:c[d],enumerable:!1})}function p(){this._=Object.create(null)}function t(b){return(b+="")===Pg||b[0]===ee?ee+b:b}function x(b){return(b+="")[0]===ee?b.slice(1):b}function w(b){return t(b)in this._}function u(b){return(b=t(b))in this._&&
delete this._[b]}function r(){var b=[],c;for(c in this._)b.push(x(c));return b}function y(){var b=0,c;for(c in this._)++b;return b}function k(){for(var b in this._)return!1;return!0}function q(){this._=Object.create(null)}function z(b){return b}function g(b,c,d){return function(){var k=d.apply(c,arguments);return k===c?b:k}}function A(b,c){if(c in b)return c;c=c.charAt(0).toUpperCase()+c.slice(1);for(var d=0,k=ff.length;k>d;++d){var e=ff[d]+c;if(e in b)return e}}function C(){}function B(){}function G(b){function c(){for(var k,
e=d,f=-1,h=e.length;++f<h;)(k=e[f].on)&&k.apply(this,arguments);return b}var d=[],k=new p;return c.on=function(c,e){var f,h=k.get(c);return 2>arguments.length?h&&h.on:(h&&(h.on=null,d=d.slice(0,f=d.indexOf(h)).concat(d.slice(f+1)),k.remove(c)),e&&d.push(k.set(c,{on:e})),b)},c}function F(){N.event.preventDefault()}function I(){for(var b,c=N.event;b=c.sourceEvent;)c=b;return c}function D(b){for(var c=new B,d=0,k=arguments.length;++d<k;)c[arguments[d]]=G(c);return c.of=function(d,k){return function(e){try{var f=
e.sourceEvent=N.event;e.target=b;N.event=e;c[e.type].apply(d,k)}finally{N.event=f}}},c}function H(b){return Yc(b,xa),b}function K(b){return"function"==typeof b?b:function(){return fe(b,this)}}function O(b){return"function"==typeof b?b:function(){return ge(b,this)}}function L(b,c){function d(){this.removeAttribute(b)}function k(){this.removeAttributeNS(b.space,b.local)}function e(){this.setAttribute(b,c)}function f(){this.setAttributeNS(b.space,b.local,c)}function h(){var d=c.apply(this,arguments);
null==d?this.removeAttribute(b):this.setAttribute(b,d)}function q(){var d=c.apply(this,arguments);null==d?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,d)}return b=N.ns.qualify(b),null==c?b.local?k:d:"function"==typeof c?b.local?q:h:b.local?f:e}function P(b){return b.trim().replace(/\s+/g," ")}function M(b){return new RegExp("(?:^|\\s+)"+N.requote(b)+"(?:\\s+|$)","g")}function Q(b,c){function d(){for(var k=-1;++k<e;)b[k](this,c)}function k(){for(var d=-1,f=c.apply(this,
arguments);++d<e;)b[d](this,f)}b=(b+"").trim().split(/^|\s+/).map(T);var e=b.length;return"function"==typeof c?k:d}function T(b){var c=M(b);return function(d,k){if(e=d.classList)return k?e.add(b):e.remove(b);var e=d.getAttribute("class")||"";k?(c.lastIndex=0,c.test(e)||d.setAttribute("class",P(e+" "+b))):d.setAttribute("class",P(e.replace(c," ")))}}function R(b,c,d){function k(){this.style.removeProperty(b)}function e(){this.style.setProperty(b,c,d)}function f(){var k=c.apply(this,arguments);null==
k?this.style.removeProperty(b):this.style.setProperty(b,k,d)}return null==c?k:"function"==typeof c?f:e}function S(b,c){function d(){delete this[b]}function k(){this[b]=c}function e(){var d=c.apply(this,arguments);null==d?delete this[b]:this[b]=d}return null==c?d:"function"==typeof c?e:k}function X(b){function c(){var d=this.ownerDocument,k=this.namespaceURI;return k?d.createElementNS(k,b):d.createElement(b)}function d(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"==
typeof b?b:(b=N.ns.qualify(b)).local?d:c}function V(){var b=this.parentNode;b&&b.removeChild(this)}function Y(b){return function(){return he(this,b)}}function W(b){return arguments.length||(b=c),function(c,d){return c&&d?b(c.__data__,d.__data__):!c-!d}}function Z(b,c){for(var d=0,k=b.length;k>d;d++)for(var e,f=b[d],h=0,q=f.length;q>h;h++)(e=f[h])&&c(e,h,d);return b}function U(b){return Yc(b,Jb),b}function ea(b){var c,d;return function(k,e,f){k=b[f].update;var h=k.length;f!=d&&(d=f,c=0);for(e>=c&&
(c=e+1);!(e=k[c])&&++c<h;);return e}}function ga(b,c,d){function k(){var c=this[h];c&&(this.removeEventListener(b,c,c.$),delete this[h])}function e(){var f=t(c,Tb(arguments));k.call(this);this.addEventListener(b,this[h]=f,f.$=d);f._=c}function f(){var c,d=new RegExp("^__on([^.]+)"+N.requote(b)+"$"),k;for(k in this)if(c=k.match(d)){var e=this[k];this.removeEventListener(c[1],e,e.$);delete this[k]}}var h="__on"+b,q=b.indexOf("."),t=ia;0<q&&(b=b.slice(0,q));var r=ie.get(b);return r&&(b=r,t=ha),q?c?e:
k:c?C:f}function ia(b,c){return function(d){var k=N.event;N.event=d;c[0]=this.__data__;try{b.apply(this,c)}finally{N.event=k}}}function ha(b,c){var d=ia(b,c);return function(b){var c=b.relatedTarget;c&&(c===this||8&c.compareDocumentPosition(this))||d.call(this,b)}}function na(c){var d=".dragsuppress-"+ ++Qg,k="click"+d,e=N.select(b(c)).on("touchmove"+d,F).on("dragstart"+d,F).on("selectstart"+d,F);if(null==dc&&(dc="onselectstart"in c?!1:A(c.style,"userSelect")),dc){var f=(c&&(c.ownerDocument||c.document||
c).documentElement).style,q=f[dc];f[dc]="none"}return function(b){if(e.on(d,null),dc&&(f[dc]=q),b){var c=function(){e.on(k,null)};e.on(k,function(){F();c()},!0);setTimeout(c,0)}}}function sa(c,d){d.changedTouches&&(d=d.changedTouches[0]);var k=c.ownerSVGElement||c;if(k.createSVGPoint){var e=k.createSVGPoint();if(0>je&&(k=b(c),k.scrollX||k.scrollY)){var k=N.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),f=k[0][0].getScreenCTM();je=
!(f.f||f.e);k.remove()}return je?(e.x=d.pageX,e.y=d.pageY):(e.x=d.clientX,e.y=d.clientY),e=e.matrixTransform(c.getScreenCTM().inverse()),[e.x,e.y]}e=c.getBoundingClientRect();return[d.clientX-e.left-c.clientLeft,d.clientY-e.top-c.clientTop]}function ra(){return N.event.changedTouches[0].identifier}function ya(b,c,d){return(c[0]-b[0])*(d[1]-b[1])-(c[1]-b[1])*(d[0]-b[0])}function fa(b){return 1<b?0:-1>b?la:Math.acos(b)}function ta(b){return 1<b?Ka:-1>b?-Ka:Math.asin(b)}function ka(b){return((b=Math.exp(b))+
1/b)/2}function Sa(b){return(b=Math.sin(b/2))*b}function Da(){}function ca(b,c,d){return this instanceof ca?(this.h=+b,this.s=+c,void(this.l=+d)):2>arguments.length?b instanceof ca?new ca(b.h,b.s,b.l):va(""+b,Ca,ca):new ca(b,c,d)}function nb(b,c,d){function k(b){return 360<b?b-=360:0>b&&(b+=360),60>b?e+(f-e)*b/60:180>b?f:240>b?e+(f-e)*(240-b)/60:e}var e,f;return b=isNaN(b)?0:0>(b%=360)?b+360:b,c=isNaN(c)?0:0>c?0:1<c?1:c,d=0>d?0:1<d?1:d,f=.5>=d?d*(1+c):d+c-d*c,e=2*d-f,new za(Math.round(255*k(b+120)),
Math.round(255*k(b)),Math.round(255*k(b-120)))}function Aa(b,c,d){return this instanceof Aa?(this.h=+b,this.c=+c,void(this.l=+d)):2>arguments.length?b instanceof Aa?new Aa(b.h,b.c,b.l):b instanceof oa?Ma(b.l,b.a,b.b):Ma((b=Ea((b=N.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new Aa(b,c,d)}function ja(b,c,d){return isNaN(b)&&(b=0),isNaN(c)&&(c=0),new oa(d,Math.cos(b*=ma)*c,Math.sin(b)*c)}function oa(b,c,d){return this instanceof oa?(this.l=+b,this.a=+c,void(this.b=+d)):2>arguments.length?b instanceof oa?new oa(b.l,
b.a,b.b):b instanceof Aa?ja(b.h,b.c,b.l):Ea((b=za(b)).r,b.g,b.b):new oa(b,c,d)}function Ya(b,c,d){b=(b+16)/116;c=b+c/500;d=b-d/200;return c=ua(c)*gf,b=ua(b)*hf,d=ua(d)*jf,new za(Fa(3.2404542*c-1.5371385*b-.4985314*d),Fa(-.969266*c+1.8760108*b+.041556*d),Fa(.0556434*c-.2040259*b+1.0572252*d))}function Ma(b,c,d){return 0<b?new Aa(Math.atan2(d,c)*Ga,Math.sqrt(c*c+d*d),b):new Aa(NaN,NaN,b)}function ua(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Oa(b){return.008856<b?Math.pow(b,1/3):7.787037*
b+4/29}function Fa(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function za(b,c,d){return this instanceof za?(this.r=~~b,this.g=~~c,void(this.b=~~d)):2>arguments.length?b instanceof za?new za(b.r,b.g,b.b):va(""+b,za,nb):new za(b,c,d)}function Ta(b){return new za(b>>16,b>>8&255,255&b)+""}function eb(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function va(b,c,d){b=b.toLowerCase();var k,e,f,h=0,q=0,t=0;if(k=/([a-z]+)\((.*)\)/.exec(b))switch(e=
k[2].split(","),k[1]){case "hsl":return d(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return c(Ha(e[0]),Ha(e[1]),Ha(e[2]))}return(f=$c.get(b))?c(f.r,f.g,f.b):(null==b||"#"!==b.charAt(0)||isNaN(f=parseInt(b.slice(1),16))||(4===b.length?(h=(3840&f)>>4,h|=h>>4,q=240&f,q|=q>>4,t=15&f,t|=t<<4):7===b.length&&(h=(16711680&f)>>16,q=(65280&f)>>8,t=255&f)),c(h,q,t))}function Ca(b,c,d){var k,e,f=Math.min(b/=255,c/=255,d/=255),h=Math.max(b,c,d),q=h-f,t=(h+f)/2;return q?(e=.5>t?q/(h+
f):q/(2-h-f),k=b==h?(c-d)/q+(d>c?6:0):c==h?(d-b)/q+2:(b-c)/q+4,k*=60):(k=NaN,e=0<t&&1>t?0:k),new ca(k,e,t)}function Ea(b,c,d){b=Na(b);c=Na(c);d=Na(d);var k=Oa((.4124564*b+.3575761*c+.1804375*d)/gf),e=Oa((.2126729*b+.7151522*c+.072175*d)/hf);b=Oa((.0193339*b+.119192*c+.9503041*d)/jf);return oa(116*e-16,500*(k-e),200*(e-b))}function Na(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Ha(b){var c=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*c):c}function qa(b){return"function"==
typeof b?b:function(){return b}}function Ia(b){return function(c,d,k){return 2===arguments.length&&"function"==typeof d&&(k=d,d=null),fb(c,d,b,k)}}function fb(b,c,d,k){function e(){var b,c=t.status,k;if(k=!c)k=(k=t.responseType)&&"text"!==k?t.response:t.responseText;if(k||200<=c&&300>c||304===c){try{b=d.call(f,t)}catch(q){return void h.error.call(f,q)}h.load.call(f,b)}else h.error.call(f,t)}var f={},h=N.dispatch("beforesend","progress","load","error"),q={},t=new XMLHttpRequest,r=null;return!this.XDomainRequest||
"withCredentials"in t||!/^(http(s)?:)?\/\//.test(b)||(t=new XDomainRequest),"onload"in t?t.onload=t.onerror=e:t.onreadystatechange=function(){3<t.readyState&&e()},t.onprogress=function(b){var c=N.event;N.event=b;try{h.progress.call(f,t)}finally{N.event=c}},f.header=function(b,c){return b=(b+"").toLowerCase(),2>arguments.length?q[b]:(null==c?delete q[b]:q[b]=c+"",f)},f.mimeType=function(b){return arguments.length?(c=null==b?null:b+"",f):c},f.responseType=function(b){return arguments.length?(r=b,f):
r},f.response=function(b){return d=b,f},["get","post"].forEach(function(b){f[b]=function(){return f.send.apply(f,[b].concat(Tb(arguments)))}}),f.send=function(d,k,e){if(2===arguments.length&&"function"==typeof k&&(e=k,k=null),t.open(d,b,!0),null==c||"accept"in q||(q.accept=c+",*/*"),t.setRequestHeader)for(var p in q)t.setRequestHeader(p,q[p]);return null!=c&&t.overrideMimeType&&t.overrideMimeType(c),null!=r&&(t.responseType=r),null!=e&&f.on("error",e).on("load",function(b){e(null,b)}),h.beforesend.call(f,
t),t.send(null==k?null:k),f},f.abort=function(){return t.abort(),f},N.rebind(f,h,"on"),null==k?f:f.get(vb(k))}function vb(b){return 1===b.length?function(c,d){b(null==c?d:null)}:b}function Pa(){var b=ab(),b=ob()-b;24<b?(isFinite(b)&&(clearTimeout(ad),ad=setTimeout(Pa,b)),bd=0):(bd=1,kf(Pa))}function ab(){var b=Date.now();for(Kb=cd;Kb;)b>=Kb.t&&(Kb.f=Kb.c(b-Kb.t)),Kb=Kb.n;return b}function ob(){for(var b,c=cd,d=1/0;c;)c.f?c=b?b.n=c.n:cd=c.n:(c.t<d&&(d=c.t),c=(b=c).n);return dd=b,d}function hb(b,c){return c-
(b?Math.ceil(Math.log(b)/Math.LN10):1)}function Va(b){var c=b.decimal,d=b.thousands,k=b.grouping,e=b.currency,f=k&&d?function(b,c){for(var e=b.length,f=[],h=0,q=k[0],t=0;0<e&&0<q&&(t+q+1>c&&(q=Math.max(1,c-t)),f.push(b.substring(e-=q,e+q)),!((t+=q+1)>c));)q=k[h=(h+1)%k.length];return f.reverse().join(d)}:z;return function(b){b=lf.exec(b);var d=b[1]||" ",k=b[2]||">",h=b[3]||"-",q=b[4]||"",t=b[5],r=+b[6],p=b[7],u=b[8],l=b[9],x=1,w="",v="",y=!1,A=!0;switch(u&&(u=+u.substring(1)),(t||"0"===d&&"="===k)&&
(t=d="0",k="="),l){case "n":p=!0;l="g";break;case "%":x=100;v="%";l="f";break;case "p":x=100;v="%";l="r";break;case "b":case "o":case "x":case "X":"#"===q&&(w="0"+l.toLowerCase());case "c":A=!1;case "d":y=!0;u=0;break;case "s":x=-1,l="r"}"$"===q&&(w=e[0],v=e[1]);"r"!=l||u||(l="g");null!=u&&("g"==l?u=Math.max(1,Math.min(21,u)):("e"==l||"f"==l)&&(u=Math.max(0,Math.min(20,u))));var l=Rg.get(l)||ib,z=t&&p;return function(b){var e=v;if(y&&b%1)return"";var q=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===h?"":h;0>
x?(e=N.formatPrefix(b,u),b=e.scale(b),e=e.symbol+v):b*=x;b=l(b,u);var g,Xa,C=b.lastIndexOf(".");0>C?(C=A?b.lastIndexOf("e"):-1,0>C?(g=b,Xa=""):(g=b.substring(0,C),Xa=b.substring(C))):(g=b.substring(0,C),Xa=c+b.substring(C+1));!t&&p&&(g=f(g,1/0));var C=w.length+g.length+Xa.length+(z?0:q.length),E=r>C?Array(C=r-C+1).join(d):"";return z&&(g=f(E+g,E.length?r-Xa.length:1/0)),q+=w,b=g+Xa,("<"===k?q+b+E:">"===k?E+q+b:"^"===k?E.substring(0,C>>=1)+q+b+E.substring(C):q+(z?b:E+b))+e}}}function ib(b){return b+
""}function Wa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function wb(b,c,d){function k(c){var d=b(c),e=f(d,1);return e-c>c-d?d:e}function e(d){return c(d=b(new Za(d-1)),1),d}function f(b,d){return c(b=new Za(+b),d),b}function h(b,k,f){b=e(b);var q=[];if(1<f)for(;k>b;)d(b)%f||q.push(new Date(+b)),c(b,1);else for(;k>b;)q.push(new Date(+b)),c(b,1);return q}b.floor=b;b.round=k;b.ceil=e;b.offset=f;b.range=h;var q=b.utc=Lb(b);return q.floor=q,q.round=Lb(k),q.ceil=
Lb(e),q.offset=Lb(f),q.range=function(b,c,d){try{Za=Wa;var k=new Wa;return k._=b,h(k,c,d)}finally{Za=Date}},b}function Lb(b){return function(c,d){try{Za=Wa;var k=new Wa;return k._=c,b(k,d)._}finally{Za=Date}}}function ed(b){function c(b){function k(c){for(var d,f,h,q=[],t=-1,r=0;++t<e;)37===b.charCodeAt(t)&&(q.push(b.slice(r,t)),null!=(f=mf[d=b.charAt(++t)])&&(d=b.charAt(++t)),(h=C[d])&&(d=h(c,null==f?"e"===d?" ":"0":f)),q.push(d),r=t+1);return q.push(b.slice(r,t)),q.join("")}var e=b.length;return k.parse=
function(c){var k={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d(k,b,c,0)!=c.length)return null;"p"in k&&(k.H=k.H%12+12*k.p);c=null!=k.Z&&Za!==Wa;var e=new (c?Wa:Za);return"j"in k?e.setFullYear(k.y,0,k.j):"w"in k&&("W"in k||"U"in k)?(e.setFullYear(k.y,0,1),e.setFullYear(k.y,0,"W"in k?(k.w+6)%7+7*k.W-(e.getDay()+5)%7:k.w+7*k.U-(e.getDay()+6)%7)):e.setFullYear(k.y,k.m,k.d),e.setHours(k.H+(k.Z/100|0),k.M+k.Z%100,k.S,k.L),c?e._:e},k.toString=function(){return b},k}function d(b,c,k,e){for(var f,h,q,t=0,
r=c.length,p=k.length;r>t;){if(e>=p)return-1;if(f=c.charCodeAt(t++),37===f){if(q=c.charAt(t++),h=E[q in mf?c.charAt(t++):q],!h||0>(e=h(b,k,e)))return-1}else if(f!=k.charCodeAt(e++))return-1}return e}var k=b.dateTime,e=b.date,f=b.time,h=b.periods,q=b.days,t=b.shortDays,r=b.months,p=b.shortMonths;c.utc=function(b){function d(b){try{Za=Wa;var c=new Za;return c._=b,k(c)}finally{Za=Date}}var k=c(b);return d.parse=function(b){try{Za=Wa;var c=k.parse(b);return c&&c._}finally{Za=Date}},d.toString=k.toString,
d};c.multi=c.utc.multi=ke;var u=N.map(),l=Ub(q),x=Vb(q),w=Ub(t),v=Vb(t),y=Ub(r),A=Vb(r),z=Ub(p),g=Vb(p);h.forEach(function(b,c){u.set(b.toLowerCase(),c)});var C={a:function(b){return t[b.getDay()]},A:function(b){return q[b.getDay()]},b:function(b){return p[b.getMonth()]},B:function(b){return r[b.getMonth()]},c:c(k),d:function(b,c){return Ua(b.getDate(),c,2)},e:function(b,c){return Ua(b.getDate(),c,2)},H:function(b,c){return Ua(b.getHours(),c,2)},I:function(b,c){return Ua(b.getHours()%12||12,c,2)},
j:function(b,c){return Ua(1+da.dayOfYear(b),c,3)},L:function(b,c){return Ua(b.getMilliseconds(),c,3)},m:function(b,c){return Ua(b.getMonth()+1,c,2)},M:function(b,c){return Ua(b.getMinutes(),c,2)},p:function(b){return h[+(12<=b.getHours())]},S:function(b,c){return Ua(b.getSeconds(),c,2)},U:function(b,c){return Ua(da.sundayOfYear(b),c,2)},w:function(b){return b.getDay()},W:function(b,c){return Ua(da.mondayOfYear(b),c,2)},x:c(e),X:c(f),y:function(b,c){return Ua(b.getFullYear()%100,c,2)},Y:function(b,
c){return Ua(b.getFullYear()%1E4,c,4)},Z:Hc,"%":function(){return"%"}},E={a:function(b,c,d){w.lastIndex=0;return(c=w.exec(c.slice(d)))?(b.w=v.get(c[0].toLowerCase()),d+c[0].length):-1},A:function(b,c,d){l.lastIndex=0;return(c=l.exec(c.slice(d)))?(b.w=x.get(c[0].toLowerCase()),d+c[0].length):-1},b:function(b,c,d){z.lastIndex=0;return(c=z.exec(c.slice(d)))?(b.m=g.get(c[0].toLowerCase()),d+c[0].length):-1},B:function(b,c,d){y.lastIndex=0;return(c=y.exec(c.slice(d)))?(b.m=A.get(c[0].toLowerCase()),d+
c[0].length):-1},c:function(b,c,k){return d(b,C.c.toString(),c,k)},d:cb,e:cb,H:pc,I:pc,j:fd,L:qc,m:gd,M:rc,p:function(b,c,d){c=u.get(c.slice(d,d+=2).toLowerCase());return null==c?-1:(b.p=c,d)},S:Ja,U:ec,w:Mb,W:hd,x:function(b,c,k){return d(b,C.x.toString(),c,k)},X:function(b,c,k){return d(b,C.X.toString(),c,k)},y:Ic,Y:sc,Z:Wb,"%":tc};return c}function Ua(b,c,d){var k=0>b?"-":"";b=(k?-b:b)+"";var e=b.length;return k+(d>e?Array(d-e+1).join(c)+b:b)}function Ub(b){return new RegExp("^(?:"+b.map(N.requote).join("|")+
")","i")}function Vb(b){for(var c=new p,d=-1,k=b.length;++d<k;)c.set(b[d].toLowerCase(),d);return c}function Mb(b,c,d){La.lastIndex=0;return(c=La.exec(c.slice(d,d+1)))?(b.w=+c[0],d+c[0].length):-1}function ec(b,c,d){La.lastIndex=0;return(c=La.exec(c.slice(d)))?(b.U=+c[0],d+c[0].length):-1}function hd(b,c,d){La.lastIndex=0;return(c=La.exec(c.slice(d)))?(b.W=+c[0],d+c[0].length):-1}function sc(b,c,d){La.lastIndex=0;return(c=La.exec(c.slice(d,d+4)))?(b.y=+c[0],d+c[0].length):-1}function Ic(b,c,d){La.lastIndex=
0;if(c=La.exec(c.slice(d,d+2))){var k=+c[0];b=(b.y=k+(68<k?1900:2E3),d+c[0].length)}else b=-1;return b}function Wb(b,c,d){return/^[+-]\d{4}$/.test(c=c.slice(d,d+5))?(b.Z=-c,d+5):-1}function gd(b,c,d){La.lastIndex=0;return(c=La.exec(c.slice(d,d+2)))?(b.m=c[0]-1,d+c[0].length):-1}function cb(b,c,d){La.lastIndex=0;return(c=La.exec(c.slice(d,d+2)))?(b.d=+c[0],d+c[0].length):-1}function fd(b,c,d){La.lastIndex=0;return(c=La.exec(c.slice(d,d+3)))?(b.j=+c[0],d+c[0].length):-1}function pc(b,c,d){La.lastIndex=
0;return(c=La.exec(c.slice(d,d+2)))?(b.H=+c[0],d+c[0].length):-1}function rc(b,c,d){La.lastIndex=0;return(c=La.exec(c.slice(d,d+2)))?(b.M=+c[0],d+c[0].length):-1}function Ja(b,c,d){La.lastIndex=0;return(c=La.exec(c.slice(d,d+2)))?(b.S=+c[0],d+c[0].length):-1}function qc(b,c,d){La.lastIndex=0;return(c=La.exec(c.slice(d,d+3)))?(b.L=+c[0],d+c[0].length):-1}function Hc(b){var c=b.getTimezoneOffset();b=0<c?"-":"+";var d=pa(c)/60|0,c=pa(c)%60;return b+Ua(d,"0",2)+Ua(c,"0",2)}function tc(b,c,d){nf.lastIndex=
0;return(b=nf.exec(c.slice(d,d+1)))?d+b[0].length:-1}function ke(b){for(var c=b.length,d=-1;++d<c;)b[d][0]=this(b[d][0]);return function(c){for(var d=0,k=b[d];!k[1](c);)k=b[++d];return k[0](c)}}function Xb(){}function fc(b,c,d){var k=d.s=b+c,e=k-b;d.t=b-(k-e)+(c-e)}function Db(b,c){b&&of.hasOwnProperty(b.type)&&of[b.type](b,c)}function gc(b,c,d){var k=-1,e=b.length-d;for(c.lineStart();++k<e;)d=b[k],c.point(d[0],d[1],d[2]);c.lineEnd()}function uc(b,c){var d=-1,k=b.length;for(c.polygonStart();++d<k;)gc(b[d],
c,1);c.polygonEnd()}function pb(){function b(c,d){c*=ma;d=d*ma/2+la/4;var h=c-k,q=0<=h?1:-1,h=q*h,t=Math.cos(d),r=Math.sin(d),p=f*r;hc.add(Math.atan2(p*q*Math.sin(h),e*t+p*Math.cos(h)));k=c;e=t;f=r}var c,d,k,e,f;jb.point=function(h,q){jb.point=b;k=(c=h)*ma;e=Math.cos(q=(d=q)*ma/2+la/4);f=Math.sin(q)};jb.lineEnd=function(){b(c,d)}}function $a(b){var c=b[0];b=b[1];var d=Math.cos(b);return[d*Math.cos(c),d*Math.sin(c),Math.sin(b)]}function db(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]}function Qa(b,c){return[b[1]*
c[2]-b[2]*c[1],b[2]*c[0]-b[0]*c[2],b[0]*c[1]-b[1]*c[0]]}function xb(b,c){b[0]+=c[0];b[1]+=c[1];b[2]+=c[2]}function qb(b,c){return[b[0]*c,b[1]*c,b[2]*c]}function rb(b){var c=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=c;b[1]/=c;b[2]/=c}function ic(b){return[Math.atan2(b[1],b[0]),ta(b[2])]}function vc(b,c){return pa(b[0]-c[0])<aa&&pa(b[1]-c[1])<aa}function jc(b,c){b*=ma;var d=Math.cos(c*=ma);Nb(d*Math.cos(b),d*Math.sin(b),Math.sin(c))}function Nb(b,c,d){++Jc;Ob+=(b-Ob)/Jc;Pb+=(c-Pb)/Jc;Eb+=(d-Eb)/
Jc}function id(){function b(e,f){e*=ma;var h=Math.cos(f*=ma),q=h*Math.cos(e),h=h*Math.sin(e),t=Math.sin(f),r=Math.atan2(Math.sqrt((r=d*t-k*h)*r+(r=k*q-c*t)*r+(r=c*h-d*q)*r),c*q+d*h+k*t);wc+=r;sb+=r*(c+(c=q));tb+=r*(d+(d=h));gb+=r*(k+(k=t));Nb(c,d,k)}var c,d,k;yb.point=function(e,f){e*=ma;var h=Math.cos(f*=ma);c=h*Math.cos(e);d=h*Math.sin(e);k=Math.sin(f);yb.point=b;Nb(c,d,k)}}function Kc(){yb.point=jc}function le(){function b(c,d){c*=ma;var h=Math.cos(d*=ma),q=h*Math.cos(c),h=h*Math.sin(c),t=Math.sin(d),
r=e*t-f*h,p=f*q-k*t,u=k*h-e*q,l=Math.sqrt(r*r+p*p+u*u),x=k*q+e*h+f*t,w=l&&-fa(x)/l,l=Math.atan2(l,x);Yb+=w*r;Zb+=w*p;Fb+=w*u;wc+=l;sb+=l*(k+(k=q));tb+=l*(e+(e=h));gb+=l*(f+(f=t));Nb(k,e,f)}var c,d,k,e,f;yb.point=function(h,q){c=h;d=q;yb.point=b;h*=ma;var t=Math.cos(q*=ma);k=t*Math.cos(h);e=t*Math.sin(h);f=Math.sin(q);Nb(k,e,f)};yb.lineEnd=function(){b(c,d);yb.lineEnd=Kc;yb.point=jc}}function jd(b,c){function d(k,e){return k=b(k,e),c(k[0],k[1])}return b.invert&&c.invert&&(d.invert=function(d,k){return d=
c.invert(d,k),d&&b.invert(d[0],d[1])}),d}function $b(){return!0}function kd(b,c,d,k,e){var f=[],h=[];if(b.forEach(function(b){if(!(0>=(c=b.length-1))){var c,d=b[0],k=b[c];if(vc(d,k)){e.lineStart();for(k=0;c>k;++k)e.point((d=b[k])[0],d[1]);return void e.lineEnd()}c=new xc(d,b,null,!0);d=new xc(d,null,c,!1);c.o=d;f.push(c);h.push(d);c=new xc(k,b,null,!1);d=new xc(k,null,c,!0);c.o=d;f.push(c);h.push(d)}}),h.sort(c),ld(f),ld(h),f.length){b=0;c=d;for(d=h.length;d>b;++b)h[b].e=c=!c;for(var q,t=f[0];;){for(var r=
t,p=!0;r.v;)if((r=r.n)===t)return;c=r.z;e.lineStart();do{if(r.v=r.o.v=!0,r.e){if(p)for(b=0,d=c.length;d>b;++b)e.point((q=c[b])[0],q[1]);else k(r.x,r.n.x,1,e);r=r.n}else{if(p)for(c=r.p.z,b=c.length-1;0<=b;--b)e.point((q=c[b])[0],q[1]);else k(r.x,r.p.x,-1,e);r=r.p}r=r.o;c=r.z;p=!p}while(!r.v);e.lineEnd()}}}function ld(b){if(c=b.length){for(var c,d,k=0,e=b[0];++k<c;)e.n=d=b[k],d.p=e,e=d;e.n=d=b[0];d.p=e}}function xc(b,c,d,k){this.x=b;this.z=c;this.o=d;this.e=k;this.v=!1;this.n=this.p=null}function md(b,
c,d,k){return function(e,f){function h(c,d){var k=e(c,d);b(c=k[0],d=k[1])&&f.point(c,d)}function q(b,c){var d=e(b,c);y.point(d[0],d[1])}function t(){z.point=q;y.lineStart()}function r(){z.point=h;y.lineEnd()}function p(b,c){v.push([b,c]);var d=e(b,c);C.point(d[0],d[1])}function u(){C.lineStart();v=[]}function l(){p(v[0][0],v[0][1]);C.lineEnd();var b;b=C.clean();var c=g.buffer(),d=c.length;if(v.pop(),w.push(v),v=null,d)if(1&b){b=c[0];var k,d=b.length-1,c=-1;if(0<d){E||(f.polygonStart(),E=!0);for(f.lineStart();++c<
d;)f.point((k=b[c])[0],k[1]);f.lineEnd()}}else 1<d&&2&b&&c.push(c.pop().concat(c.shift())),x.push(c.filter(nd))}var x,w,v,y=c(f),A=e.invert(k[0],k[1]),z={point:h,lineStart:t,lineEnd:r,polygonStart:function(){z.point=p;z.lineStart=u;z.lineEnd=l;x=[];w=[]},polygonEnd:function(){z.point=h;z.lineStart=t;z.lineEnd=r;x=N.merge(x);var b,c=A;b=w;var k=c[0],e=c[1],q=[Math.sin(k),-Math.cos(k),0],p=0,u=0;hc.reset();for(var l=0,v=b.length;v>l;++l){var y=b[l],g=y.length;if(g)for(var C=y[0],Xa=C[0],c=C[1]/2+la/
4,G=Math.sin(c),B=Math.cos(c),F=1;;){F===g&&(F=0);var c=y[F],m=c[0],D=c[1]/2+la/4,Cb=Math.sin(D),D=Math.cos(D),I=m-Xa,V=0<=I?1:-1,Q=V*I,Y=Q>la,G=G*Cb;if(hc.add(Math.atan2(G*V*Math.sin(Q),B*D+G*Math.cos(Q))),p+=Y?I+V*kb:I,Y^Xa>=k^m>=k)C=Qa($a(C),$a(c)),rb(C),Xa=Qa(q,C),rb(Xa),Xa=(Y^0<=I?-1:1)*ta(Xa[2]),(e>Xa||e===Xa&&(C[0]||C[1]))&&(u+=Y^0<=I?1:-1);if(!F++)break;Xa=m;G=Cb;B=D;C=c}}b=(-aa>p||aa>p&&0>hc)^1&u;x.length?(E||(f.polygonStart(),E=!0),kd(x,me,b,d,f)):b&&(E||(f.polygonStart(),E=!0),f.lineStart(),
d(null,null,1,f),f.lineEnd());E&&(f.polygonEnd(),E=!1);x=w=null},sphere:function(){f.polygonStart();f.lineStart();d(null,null,1,f);f.lineEnd();f.polygonEnd()}},g=Lc(),C=c(g),E=!1;return z}}function nd(b){return 1<b.length}function Lc(){var b,c=[];return{lineStart:function(){c.push(b=[])},point:function(c,d){b.push([c,d])},lineEnd:C,buffer:function(){var d=c;return c=[],b=null,d},rejoin:function(){1<c.length&&c.push(c.pop().concat(c.shift()))}}}function me(b,c){return(0>(b=b.x)[0]?b[1]-Ka-aa:Ka-b[1])-
(0>(c=c.x)[0]?c[1]-Ka-aa:Ka-c[1])}function ne(b){function c(b,d){return Math.cos(b)*Math.cos(d)>e}function d(b,c,k){var f=$a(b),h=$a(c),q=[1,0,0],h=Qa(f,h),t=db(h,h),f=h[0],r=t-f*f;if(!r)return!k&&b;t=e*t/r;r=-e*f/r;f=Qa(q,h);q=qb(q,t);h=qb(h,r);xb(q,h);h=db(q,f);t=db(f,f);r=h*h-t*(db(q,q)-1);if(!(0>r)){var p=Math.sqrt(r),r=qb(f,(-h-p)/t);if(xb(r,q),r=ic(r),!k)return r;var u;k=b[0];var l=c[0];b=b[1];c=c[1];k>l&&(u=k,k=l,l=u);var x=l-k,w=pa(x-la)<aa,v=w||aa>x;if(!w&&b>c&&(u=b,b=c,c=u),v?w?0<b+c^r[1]<
(pa(r[0]-k)<aa?b:c):b<=r[1]&&r[1]<=c:x>la^(k<=r[0]&&r[0]<=l))return u=qb(f,(-h+p)/t),xb(u,q),[r,ic(u)]}}function k(c,d){var e=f?b:la-b,h=0;return-e>c?h|=1:c>e&&(h|=2),-e>d?h|=4:d>e&&(h|=8),h}var e=Math.cos(b),f=0<e,h=pa(e)>aa,q=oe(b,6*ma);return md(c,function(b){var e,q,t,r,p;return{lineStart:function(){r=t=!1;p=1},point:function(u,l){var x,w=[u,l],v=c(u,l),y=f?v?0:k(u,l):v?k(u+(0>u?la:-la),l):0;if(!e&&(r=t=v)&&b.lineStart(),v!==t&&(x=d(e,w),(vc(e,x)||vc(w,x))&&(w[0]+=aa,w[1]+=aa,v=c(w[0],w[1]))),
v!==t)p=0,v?(b.lineStart(),x=d(w,e),b.point(x[0],x[1])):(x=d(e,w),b.point(x[0],x[1]),b.lineEnd()),e=x;else if(h&&e&&f^v){var z;y&q||!(z=d(w,e,!0))||(p=0,f?(b.lineStart(),b.point(z[0][0],z[0][1]),b.point(z[1][0],z[1][1]),b.lineEnd()):(b.point(z[1][0],z[1][1]),b.lineEnd(),b.lineStart(),b.point(z[0][0],z[0][1])))}!v||e&&vc(e,w)||b.point(w[0],w[1]);e=w;t=v;q=y},lineEnd:function(){t&&b.lineEnd();e=null},clean:function(){return p|(r&&t)<<1}}},q,f?[0,-b]:[-la,b-la])}function od(b,c,d,k){return function(e){var f,
h=e.a,q=e.b,t=h.x,h=h.y,r=0,p=1,u=q.x-t,q=q.y-h;if(f=b-t,u||!(0<f)){if(f/=u,0>u){if(r>f)return;p>f&&(p=f)}else if(0<u){if(f>p)return;f>r&&(r=f)}if(f=d-t,u||!(0>f)){if(f/=u,0>u){if(f>p)return;f>r&&(r=f)}else if(0<u){if(r>f)return;p>f&&(p=f)}if(f=c-h,q||!(0<f)){if(f/=q,0>q){if(r>f)return;p>f&&(p=f)}else if(0<q){if(f>p)return;f>r&&(r=f)}if(f=k-h,q||!(0>f)){if(f/=q,0>q){if(f>p)return;f>r&&(r=f)}else if(0<q){if(r>f)return;p>f&&(p=f)}return 0<r&&(e.a={x:t+r*u,y:h+r*q}),1>p&&(e.b={x:t+p*u,y:h+p*q}),e}}}}}}
function lb(b,c,d,k){function e(k,f){return pa(k[0]-b)<aa?0<f?0:3:pa(k[0]-d)<aa?0<f?2:1:pa(k[1]-c)<aa?0<f?1:0:0<f?3:2}function f(b,c){return h(b.x,c.x)}function h(b,c){var d=e(b,1),k=e(c,1);return d!==k?d-k:0===d?c[1]-b[1]:1===d?b[0]-c[0]:2===d?b[1]-c[1]:c[0]-b[0]}return function(q){function t(f,q,r,p){var u=0,l=0;if(null==f||(u=e(f,r))!==(l=e(q,r))||0>h(f,q)^0<r){do p.point(0===u||3===u?b:d,1<u?k:c);while((u=(u+r+4)%4)!==l)}else p.point(q[0],q[1])}function r(e,f){e>=b&&d>=e&&f>=c&&k>=f&&q.point(e,
f)}function p(e,f){e=Math.max(-pd,Math.min(pd,e));f=Math.max(-pd,Math.min(pd,f));var h=e>=b&&d>=e&&f>=c&&k>=f;if(l&&x.push([e,f]),C)w=e,v=f,y=h,C=!1,h&&(q.lineStart(),q.point(e,f));else if(h&&g)q.point(e,f);else{var t={a:{x:z,y:A},b:{x:e,y:f}};F(t)?(g||(q.lineStart(),q.point(t.a.x,t.a.y)),q.point(t.b.x,t.b.y),h||q.lineEnd(),E=!1):h&&(q.lineStart(),q.point(e,f),E=!1)}z=e;A=f;g=h}var u,l,x,w,v,y,z,A,g,C,E,G=q,B=Lc(),F=od(b,c,d,k),m={point:r,lineStart:function(){m.point=p;l&&l.push(x=[]);C=!0;g=!1;z=
A=NaN},lineEnd:function(){u&&(p(w,v),y&&g&&B.rejoin(),u.push(B.buffer()));m.point=r;g&&q.lineEnd()},polygonStart:function(){q=B;u=[];l=[];E=!0},polygonEnd:function(){q=G;u=N.merge(u);var c;c=[b,k];for(var d=0,e=l.length,h=c[1],r=0;e>r;++r)for(var p,w=1,v=l[r],y=v.length,z=v[0];y>w;++w)p=v[w],z[1]<=h?p[1]>h&&0<ya(z,p,c)&&++d:p[1]<=h&&0>ya(z,p,c)&&--d,z=p;c=0!==d;d=E&&c;e=u.length;(d||e)&&(q.polygonStart(),d&&(q.lineStart(),t(null,null,1,q),q.lineEnd()),e&&kd(u,f,c,t,q),q.polygonEnd());u=l=x=null}};
return m}}function Mc(b){var c=0,d=la/3,k=Nc(b);b=k(c,d);return b.parallels=function(b){return arguments.length?k(c=b[0]*la/180,d=b[1]*la/180):[c/la*180,d/la*180]},b}function ba(b,c){function d(b,c){var k=Math.sqrt(f-2*e*Math.sin(c))/e;return[k*Math.sin(b*=e),h-k*Math.cos(b)]}var k=Math.sin(b),e=(k+Math.sin(c))/2,f=1+k*(2*e-k),h=Math.sqrt(f)/e;return d.invert=function(b,c){var d=h-c;return[Math.atan2(b,d)/e,ta((f-(b*b+d*d)*e*e)/(2*e))]},d}function wa(){function b(c,d){qd+=e*c-k*d;k=c;e=d}var c,d,
k,e;ac.point=function(f,h){ac.point=b;c=k=f;d=e=h};ac.lineEnd=function(){b(c,d)}}function zb(){function b(c,d){h.push("M",c,",",d,f)}function c(b,k){h.push("M",b,",",k);q.point=d}function d(b,c){h.push("L",b,",",c)}function k(){q.point=b}function e(){h.push("Z")}var f=rd(4.5),h=[],q={point:b,lineStart:function(){q.point=c},lineEnd:k,polygonStart:function(){q.lineEnd=e},polygonEnd:function(){q.lineEnd=k;q.point=b},pointRadius:function(b){return f=rd(b),q},result:function(){if(h.length){var b=h.join("");
return h=[],b}}};return q}function rd(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function Qb(b,c){Ob+=b;Pb+=c;++Eb}function sd(){function b(k,e){var f=k-c,h=e-d,f=Math.sqrt(f*f+h*h);sb+=f*(c+k)/2;tb+=f*(d+e)/2;gb+=f;Qb(c=k,d=e)}var c,d;Ab.point=function(k,e){Ab.point=b;Qb(c=k,d=e)}}function td(){Ab.point=Qb}function pe(){function b(c,d){var f=c-k,h=d-e,f=Math.sqrt(f*f+h*h);sb+=f*(k+c)/2;tb+=f*(e+d)/2;gb+=f;f=e*c-k*d;Yb+=f*(k+c);Zb+=f*(e+d);Fb+=3*f;Qb(k=c,e=d)}var c,
d,k,e;Ab.point=function(f,h){Ab.point=b;Qb(c=k=f,d=e=h)};Ab.lineEnd=function(){b(c,d)}}function qe(b){function c(d,k){b.moveTo(d+h,k);b.arc(d,k,h,0,kb)}function d(c,e){b.moveTo(c,e);q.point=k}function k(c,d){b.lineTo(c,d)}function e(){q.point=c}function f(){b.closePath()}var h=4.5,q={point:c,lineStart:function(){q.point=d},lineEnd:e,polygonStart:function(){q.lineEnd=f},polygonEnd:function(){q.lineEnd=e;q.point=c},pointRadius:function(b){return h=b,q},result:C};return q}function ud(b){function c(b){return(q?
k:d)(b)}function d(c){return vd(c,function(d,k){d=b(d,k);c.point(d[0],d[1])})}function k(c){function d(k,e){k=b(k,e);c.point(k[0],k[1])}function f(){g=NaN;F.point=h;c.lineStart()}function h(d,k){var f=$a([d,k]),t=b(d,k);e(g,C,A,E,G,B,g=t[0],C=t[1],A=d,E=f[0],G=f[1],B=f[2],q,c);c.point(g,C)}function t(){F.point=d;c.lineEnd()}function r(){f();F.point=p;F.lineEnd=u}function p(b,c){h(l=b,c);x=g;w=C;v=E;y=G;z=B;F.point=h}function u(){e(g,C,A,E,G,B,x,w,l,v,y,z,q,c);F.lineEnd=t;t()}var l,x,w,v,y,z,A,g,C,
E,G,B,F={point:d,lineStart:f,lineEnd:t,polygonStart:function(){c.polygonStart();F.lineStart=r},polygonEnd:function(){c.polygonEnd();F.lineStart=f}};return F}function e(c,d,k,q,t,r,p,u,l,x,w,v,y,z){var A=p-c,g=u-d,C=A*A+g*g;if(C>4*f&&y--){var E=q+x,G=t+w,B=r+v,F=Math.sqrt(E*E+G*G+B*B),m=Math.asin(B/=F),D=pa(pa(B)-1)<aa||pa(k-l)<aa?(k+l)/2:Math.atan2(G,E),Cb=b(D,m),m=Cb[0],Cb=Cb[1],I=m-c,V=Cb-d,ef=g*I-A*V;(ef*ef/C>f||.3<pa((A*I+g*V)/C-.5)||h>q*x+t*w+r*v)&&(e(c,d,k,q,t,r,m,Cb,D,E/=F,G/=F,B,y,z),z.point(m,
Cb),e(m,Cb,D,E,G,B,p,u,l,x,w,v,y,z))}}var f=.5,h=Math.cos(30*ma),q=16;return c.precision=function(b){return arguments.length?(q=0<(f=b*b)&&16,c):Math.sqrt(f)},c}function re(b){var c=ud(function(c,d){return b([c*Ga,d*Ga])});return function(b){return wd(c(b))}}function xd(b){this.stream=b}function vd(b,c){return{point:c,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function Gb(b){return Nc(function(){return b})()}
function Nc(b){function c(b){return b=q(b[0]*ma,b[1]*ma),[b[0]*l+t,r-b[1]*l]}function d(b){return b=q.invert((b[0]-t)/l,(r-b[1])/l),b&&[b[0]*Ga,b[1]*Ga]}function k(){q=jd(h=Hb(A,g,C),f);var b=f(v,y);return t=x-b[0]*l,r=w+b[1]*l,e()}function e(){return p&&(p.valid=!1,p=null),c}var f,h,q,t,r,p,u=ud(function(b,c){return b=f(b,c),[b[0]*l+t,r-b[1]*l]}),l=150,x=480,w=250,v=0,y=0,A=0,g=0,C=0,E=pf,G=z,B=null,F=null;return c.stream=function(b){return p&&(p.valid=!1),p=wd(E(h,u(G(b)))),p.valid=!0,p},c.clipAngle=
function(b){return arguments.length?(E=null==b?(B=b,pf):ne((B=+b)*ma),e()):B},c.clipExtent=function(b){return arguments.length?(F=b,G=b?lb(b[0][0],b[0][1],b[1][0],b[1][1]):z,e()):F},c.scale=function(b){return arguments.length?(l=+b,k()):l},c.translate=function(b){return arguments.length?(x=+b[0],w=+b[1],k()):[x,w]},c.center=function(b){return arguments.length?(v=b[0]%360*ma,y=b[1]%360*ma,k()):[v*Ga,y*Ga]},c.rotate=function(b){return arguments.length?(A=b[0]%360*ma,g=b[1]%360*ma,C=2<b.length?b[2]%
360*ma:0,k()):[A*Ga,g*Ga,C*Ga]},N.rebind(c,u,"precision"),function(){return f=b.apply(this,arguments),c.invert=f.invert&&d,k()}}function wd(b){return vd(b,function(c,d){b.point(c*ma,d*ma)})}function kc(b,c){return[b,c]}function yd(b,c){return[b>la?b-kb:-la>b?b+kb:b,c]}function Hb(b,c,d){return b?c||d?jd(yc(b),Ba(c,d)):yc(b):c||d?Ba(c,d):yd}function Bb(b){return function(c,d){return c+=b,[c>la?c-kb:-la>c?c+kb:c,d]}}function yc(b){var c=Bb(b);return c.invert=Bb(-b),c}function Ba(b,c){function d(b,c){var q=
Math.cos(c),t=Math.cos(b)*q,q=Math.sin(b)*q,r=Math.sin(c),p=r*k+t*e;return[Math.atan2(q*f-p*h,t*k-r*e),ta(p*f+q*h)]}var k=Math.cos(b),e=Math.sin(b),f=Math.cos(c),h=Math.sin(c);return d.invert=function(b,c){var d=Math.cos(c),q=Math.cos(b)*d,d=Math.sin(b)*d,t=Math.sin(c),r=t*f-d*h;return[Math.atan2(d*f+t*h,q*k+r*e),ta(r*k-q*e)]},d}function oe(b,c){var d=Math.cos(b),k=Math.sin(b);return function(e,f,h,q){var t=h*c;null!=e?(e=qf(d,e),f=qf(d,f),(0<h?f>e:e>f)&&(e+=h*kb)):(e=b+h*kb,f=b-.5*t);for(var r;0<
h?e>f:f>e;e-=t)q.point((r=ic([d,-k*Math.cos(e),-k*Math.sin(e)]))[0],r[1])}}function qf(b,c){var d=$a(c);d[0]-=b;rb(d);var k=fa(-d[1]);return((0>-d[2]?-k:k)+2*Math.PI-aa)%(2*Math.PI)}function rf(b,c,d){var k=N.range(b,c-aa,d).concat(c);return function(b){return k.map(function(c){return[b,c]})}}function sf(b,c,d){var k=N.range(b,c-aa,d).concat(c);return function(b){return k.map(function(c){return[c,b]})}}function se(b){return b.source}function te(b){return b.target}function Sg(b,c,d,k){var e=Math.cos(c),
f=Math.sin(c),h=Math.cos(k),q=Math.sin(k),t=e*Math.cos(b),r=e*Math.sin(b),p=h*Math.cos(d),u=h*Math.sin(d),l=2*Math.asin(Math.sqrt(Sa(k-c)+e*h*Sa(d-b))),x=1/Math.sin(l);d=l?function(b){var c=Math.sin(b*=l)*x;b=Math.sin(l-b)*x;var d=b*t+c*p,k=b*r+c*u;return[Math.atan2(k,d)*Ga,Math.atan2(b*f+c*q,Math.sqrt(d*d+k*k))*Ga]}:function(){return[b*Ga,c*Ga]};return d.distance=l,d}function Oc(b,c){function d(c,k){var e=Math.cos(k),f=b(Math.cos(c)*e);return[f*e*Math.sin(c),f*Math.sin(k)]}return d.invert=function(b,
d){var k=Math.sqrt(b*b+d*d),e=c(k),f=Math.sin(e);return[Math.atan2(b*f,k*Math.cos(e)),Math.asin(k&&d*f/k)]},d}function tf(b,c){function d(b,c){0<f?-Ka+aa>c&&(c=-Ka+aa):c>Ka-aa&&(c=Ka-aa);var k=f/Math.pow(Math.tan(la/4+c/2),e);return[k*Math.sin(e*b),f-k*Math.cos(e*b)]}var k=Math.cos(b),e=b===c?Math.sin(b):Math.log(k/Math.cos(c))/Math.log(Math.tan(la/4+c/2)/Math.tan(la/4+b/2)),f=k*Math.pow(Math.tan(la/4+b/2),e)/e;return e?(d.invert=function(b,c){var d=f-c;return[Math.atan2(b,d)/e,2*Math.atan(Math.pow(f/
((0<e?1:0>e?-1:0)*Math.sqrt(b*b+d*d)),1/e))-Ka]},d):zd}function uf(b,c){function d(b,c){var k=f-c;return[k*Math.sin(e*b),f-k*Math.cos(e*b)]}var k=Math.cos(b),e=b===c?Math.sin(b):(k-Math.cos(c))/(c-b),f=k/e+b;return pa(e)<aa?kc:(d.invert=function(b,c){var d=f-c;return[Math.atan2(b,d)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(b*b+d*d)]},d)}function zd(b,c){return[b,Math.log(Math.tan(la/4+c/2))]}function vf(b){var c,d=Gb(b),k=d.scale,e=d.translate,f=d.clipExtent;return d.scale=function(){var b=k.apply(d,arguments);
return b===d?c?d.clipExtent(null):d:b},d.translate=function(){var b=e.apply(d,arguments);return b===d?c?d.clipExtent(null):d:b},d.clipExtent=function(b){var h=f.apply(d,arguments);if(h===d){if(c=null==b){var q=la*k(),t=e();f([[t[0]-q,t[1]-q],[t[0]+q,t[1]+q]])}}else c&&(h=null);return h},d.clipExtent(null)}function ue(b,c){return[Math.log(Math.tan(la/4+c/2)),-b]}function zc(b){return b[0]}function Pc(b){return b[1]}function wf(b){for(var c=b.length,d=[0,1],k=2,e=2;c>e;e++){for(;1<k&&0>=ya(b[d[k-2]],
b[d[k-1]],b[e]);)--k;d[k++]=e}return d.slice(0,k)}function Tg(b,c){return b[0]-c[0]||b[1]-c[1]}function ve(b,c,d){return(d[0]-c[0])*(b[1]-c[1])<(d[1]-c[1])*(b[0]-c[0])}function we(b,c,d,k){var e=b[0],f=d[0],h=c[0]-e,q=k[0]-f;b=b[1];d=d[1];c=c[1]-b;k=k[1]-d;f=(q*(b-d)-k*(e-f))/(k*h-q*c);return[e+f*h,b+f*c]}function xf(b){var c=b[0];b=b[b.length-1];return!(c[0]-b[0]||c[1]-b[1])}function Ug(){Ad(this);this.edge=this.site=this.circle=null}function yf(b){var c=zf.pop()||new Ug;return c.site=b,c}function xe(b){Ac(b);
Bc.remove(b);zf.push(b);Ad(b)}function Af(b,c){var d=b.site,k=d.x,e=d.y,f=e-c;if(!f)return k;var h=b.P;if(!h)return-(1/0);var d=h.site,h=d.x,d=d.y,q=d-c;if(!q)return h;var t=h-k,r=1/f-1/q,p=t/q;return r?(-p+Math.sqrt(p*p-2*r*(t*t/(-2*q)-d+q/2+e-f/2)))/r+k:(k+h)/2}function Bf(b){this.site=b;this.edges=[]}function Cf(b,c){return c.angle-b.angle}function Vg(){Ad(this);this.x=this.y=this.arc=this.site=this.cy=null}function Cc(b){var c=b.P,d=b.N;if(c&&d){var k=c.site,c=b.site,e=d.site;if(k!==e){var d=
c.x,f=c.y,h=k.x-d,q=k.y-f,k=e.x-d,e=e.y-f,t=2*(h*e-q*k);if(!(t>=-ye)){var r=h*h+q*q,p=k*k+e*e,q=(e*r-q*p)/t,h=(h*p-k*r)/t,e=h+f,f=Df.pop()||new Vg;f.arc=b;f.site=c;f.x=q+d;f.y=e+Math.sqrt(q*q+h*h);f.cy=e;b.circle=f;b=null;for(c=Qc._;c;)if(f.y<c.y||f.y===c.y&&f.x<=c.x){if(!c.L){b=c.P;break}c=c.L}else{if(!c.R){b=c;break}c=c.R}Qc.insert(b,f);b||(ze=f)}}}}function Ac(b){var c=b.circle;c&&(c.P||(ze=c.N),Qc.remove(c),Df.push(c),Ad(c),b.circle=null)}function Wg(b,c){var d=b.b;if(d)return!0;var k,e,f=b.a,
d=c[0][0],h=c[1][0],q=c[0][1],t=c[1][1],r=b.l,p=b.r,u=r.x,r=r.y,l=p.x,p=p.y;e=(u+l)/2;if(p===r){if(d>e||e>=h)return;if(u>l){if(f){if(f.y>=t)return}else f={x:e,y:q};d={x:e,y:t}}else{if(f){if(f.y<q)return}else f={x:e,y:t};d={x:e,y:q}}}else if(k=(u-l)/(p-r),e=(r+p)/2-k*e,-1>k||1<k)if(u>l){if(f){if(f.y>=t)return}else f={x:(q-e)/k,y:q};d={x:(t-e)/k,y:t}}else{if(f){if(f.y<q)return}else f={x:(t-e)/k,y:t};d={x:(q-e)/k,y:q}}else if(p>r){if(f){if(f.x>=h)return}else f={x:d,y:k*d+e};d={x:h,y:k*h+e}}else{if(f){if(f.x<
d)return}else f={x:h,y:k*h+e};d={x:d,y:k*d+e}}return b.a=f,b.b=d,!0}function Ef(b,c){this.l=b;this.r=c;this.a=this.b=null}function Rc(b,c,d,k){var e=new Ef(b,c);return Dc.push(e),d&&Bd(e,b,c,d),k&&Bd(e,c,b,k),lc[b.i].edges.push(new Cd(e,b,c)),lc[c.i].edges.push(new Cd(e,c,b)),e}function Xg(b,c,d){b=new Ef(b,null);return b.a=c,b.b=d,Dc.push(b),b}function Bd(b,c,d,k){b.a||b.b?b.l===d?b.b=k:b.a=k:(b.a=k,b.l=c,b.r=d)}function Cd(b,c,d){var k=b.a,e=b.b;this.edge=b;this.site=c;this.angle=d?Math.atan2(d.y-
c.y,d.x-c.x):b.l===c?Math.atan2(e.x-k.x,k.y-e.y):Math.atan2(k.x-e.x,e.y-k.y)}function Ae(){this._=null}function Ad(b){b.U=b.C=b.L=b.R=b.P=b.N=null}function Sc(b,c){var d=c.R,k=c.U;k?k.L===c?k.L=d:k.R=d:b._=d;d.U=k;c.U=d;c.R=d.L;c.R&&(c.R.U=c);d.L=c}function Tc(b,c){var d=c.L,k=c.U;k?k.L===c?k.L=d:k.R=d:b._=d;d.U=k;c.U=d;c.L=d.R;c.L&&(c.L.U=c);d.R=c}function Ff(b){for(;b.L;)b=b.L;return b}function Be(b,c){var d,k,e,f=b.sort(Yg).pop();Dc=[];lc=Array(b.length);Bc=new Ae;for(Qc=new Ae;;)if(e=ze,f&&(!e||
f.y<e.y||f.y===e.y&&f.x<e.x)){if(f.x!==d||f.y!==k){lc[f.i]=new Bf(f);d=f;for(var h=k=void 0,q=void 0,t=void 0,r=d.x,p=d.y,u=Bc._;u;)if(q=Af(u,p)-r,q>aa)u=u.L;else{var l;var x=u;l=p;var w=x.N;w?l=Af(w,l):(x=x.site,l=x.y===l?x.x:1/0);if(t=r-l,!(t>aa)){q>-aa?(k=u.P,h=u):t>-aa?(k=u,h=u.N):k=h=u;break}if(!u.R){k=u;break}u=u.R}q=yf(d);if(Bc.insert(k,q),k||h)if(k===h)Ac(k),h=yf(k.site),Bc.insert(q,h),q.edge=h.edge=Rc(k.site,q.site),Cc(k),Cc(h);else if(h){Ac(k);Ac(h);t=k.site;p=t.x;u=t.y;l=d.x-p;var x=d.y-
u,r=h.site,w=r.x-p,v=r.y-u,y=2*(l*v-x*w),z=l*l+x*x,A=w*w+v*v,p={x:(v*z-x*A)/y+p,y:(l*A-w*z)/y+u};Bd(h.edge,t,r,p);q.edge=Rc(t,d,null,p);h.edge=Rc(d,r,null,p);Cc(k);Cc(h)}else q.edge=Rc(k.site,q.site);d=f.x;k=f.y}f=b.pop()}else{if(!e)break;r=e.arc;h=r.circle;t=h.x;p=h.cy;h={x:t,y:p};l=r.P;u=r.N;q=[r];xe(r);for(r=l;r.circle&&pa(t-r.circle.x)<aa&&pa(p-r.circle.cy)<aa;)l=r.P,q.unshift(r),xe(r),r=l;q.unshift(r);Ac(r);for(l=u;l.circle&&pa(t-l.circle.x)<aa&&pa(p-l.circle.cy)<aa;)u=l.N,q.push(l),xe(l),l=
u;q.push(l);Ac(l);t=void 0;p=q.length;for(t=1;p>t;++t)l=q[t],r=q[t-1],Bd(l.edge,r.site,l.site,h);r=q[0];l=q[p-1];l.edge=Rc(r.site,l.site,null,h);Cc(r);Cc(l)}if(c){f=Dc;d=od(c[0][0],c[0][1],c[1][0],c[1][1]);for(k=f.length;k--;)e=f[k],(!Wg(e,c)||!d(e)||pa(e.a.x-e.b.x)<aa&&pa(e.a.y-e.b.y)<aa)&&(e.a=e.b=null,f.splice(k,1));var g,r=c[0][0],p=c[1][0],u=c[0][1];l=c[1][1];x=lc;for(w=x.length;w--;)if(g=x[w],g&&g.prepare())for(h=g.edges,q=h.length,k=0;q>k;)t=h[k].end(),f=t.x,d=t.y,v=h[++k%q].start(),e=v.x,
v=v.y,(pa(f-e)>aa||pa(d-v)>aa)&&(h.splice(k,0,new Cd(Xg(g.site,t,pa(f-r)<aa&&l-d>aa?{x:r,y:pa(e-r)<aa?v:l}:pa(d-l)<aa&&p-f>aa?{x:pa(v-l)<aa?e:p,y:l}:pa(f-p)<aa&&d-u>aa?{x:p,y:pa(e-p)<aa?v:u}:pa(d-u)<aa&&f-r>aa?{x:pa(v-u)<aa?e:r,y:u}:null),g.site,null)),++q)}g={cells:lc,edges:Dc};return Bc=Qc=Dc=lc=null,g}function Yg(b,c){return c.y-b.y||c.x-b.x}function Zg(b){return b.x}function $g(b){return b.y}function Gf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Uc(b,c,d,k,e,f){if(!b(c,d,k,e,
f)){var h=.5*(d+e),q=.5*(k+f);c=c.nodes;c[0]&&Uc(b,c[0],d,k,h,q);c[1]&&Uc(b,c[1],h,k,e,q);c[2]&&Uc(b,c[2],d,q,h,f);c[3]&&Uc(b,c[3],h,q,e,f)}}function ah(b,c,d,k,e,f,h){var q,t=1/0;return function Zc(b,r,p,u,l){if(!(r>f||p>h||k>u||e>l)){if(x=b.point){var x,w=c-b.x,v=d-b.y,w=w*w+v*v;t>w&&(w=Math.sqrt(t=w),k=c-w,e=d-w,f=c+w,h=d+w,q=x)}x=b.nodes;for(var w=.5*(r+u),v=.5*(p+l),y=(d>=v)<<1|c>=w,z=y+4;z>y;++y)if(b=x[3&y])switch(3&y){case 0:Zc(b,r,p,w,v);break;case 1:Zc(b,w,p,u,v);break;case 2:Zc(b,r,v,w,
l);break;case 3:Zc(b,w,v,u,l)}}}(b,k,e,f,h),q}function Ce(b,c){b=N.rgb(b);c=N.rgb(c);var d=b.r,k=b.g,e=b.b,f=c.r-d,h=c.g-k,q=c.b-e;return function(b){return"#"+eb(Math.round(d+f*b))+eb(Math.round(k+h*b))+eb(Math.round(e+q*b))}}function Hf(b,c){var d,k={},e={};for(d in b)d in c?k[d]=mc(b[d],c[d]):e[d]=b[d];for(d in c)d in b||(e[d]=c[d]);return function(b){for(d in k)e[d]=k[d](b);return e}}function Rb(b,c){return b=+b,c=+c,function(d){return b*(1-d)+c*d}}function If(b,c){var d,k,e,f=De.lastIndex=Ee.lastIndex=
0,h=-1,q=[],t=[];b+="";for(c+="";(d=De.exec(b))&&(k=Ee.exec(c));)(e=k.index)>f&&(e=c.slice(f,e),q[h]?q[h]+=e:q[++h]=e),(d=d[0])===(k=k[0])?q[h]?q[h]+=k:q[++h]=k:(q[++h]=null,t.push({i:h,x:Rb(d,k)})),f=Ee.lastIndex;return f<c.length&&(e=c.slice(f),q[h]?q[h]+=e:q[++h]=e),2>q.length?t[0]?(c=t[0].x,function(b){return c(b)+""}):function(){return c}:(c=t.length,function(b){for(var d,k=0;c>k;++k)q[(d=t[k]).i]=d.x(b);return q.join("")})}function mc(b,c){for(var d,k=N.interpolators.length;0<=--k&&!(d=N.interpolators[k](b,
c)););return d}function Dd(b,c){var d,k=[],e=[],f=b.length,h=c.length,q=Math.min(b.length,c.length);for(d=0;q>d;++d)k.push(mc(b[d],c[d]));for(;f>d;++d)e[d]=b[d];for(;h>d;++d)e[d]=c[d];return function(b){for(d=0;q>d;++d)e[d]=k[d](b);return e}}function bh(b){return function(c){return 0>=c?0:1<=c?1:b(c)}}function Jf(b){return function(c){return 1-b(1-c)}}function Kf(b){return function(c){return.5*(.5>c?b(2*c):2-b(2-2*c))}}function ch(b){return b*b}function dh(b){return b*b*b}function eh(b){if(0>=b)return 0;
if(1<=b)return 1;var c=b*b,d=c*b;return 4*(.5>b?d:3*(b-c)+d-.75)}function fh(b){return 1-Math.cos(b*Ka)}function gh(b){return Math.pow(2,10*(b-1))}function hh(b){return 1-Math.sqrt(1-b*b)}function ih(b){return 1/2.75>b?7.5625*b*b:2/2.75>b?7.5625*(b-=1.5/2.75)*b+.75:2.5/2.75>b?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function Lf(b,c){return c-=b,function(d){return Math.round(b+c*d)}}function Mf(b){var c=[b.a,b.b],d=[b.c,b.d],k=Nf(c),e=c[0]*d[0]+c[1]*d[1],f;f=-e;f=(d[0]+=f*c[0],
d[1]+=f*c[1],d);f=Nf(f)||0;c[0]*d[1]<d[0]*c[1]&&(c[0]*=-1,c[1]*=-1,k*=-1,e*=-1);this.rotate=(k?Math.atan2(c[1],c[0]):Math.atan2(-d[0],d[1]))*Ga;this.translate=[b.e,b.f];this.scale=[k,f];this.skew=f?Math.atan2(e,f)*Ga:0}function Nf(b){var c=Math.sqrt(b[0]*b[0]+b[1]*b[1]);return c&&(b[0]/=c,b[1]/=c),c}function Of(b,c){var d,k=[],e=[],f=N.transform(b),h=N.transform(c),q=f.translate,t=h.translate,r=f.rotate,p=h.rotate,u=f.skew,l=h.skew,f=f.scale,h=h.scale;return q[0]!=t[0]||q[1]!=t[1]?(k.push("translate(",
null,",",null,")"),e.push({i:1,x:Rb(q[0],t[0])},{i:3,x:Rb(q[1],t[1])})):t[0]||t[1]?k.push("translate("+t+")"):k.push(""),r!=p?(180<r-p?p+=360:180<p-r&&(r+=360),e.push({i:k.push(k.pop()+"rotate(",null,")")-2,x:Rb(r,p)})):p&&k.push(k.pop()+"rotate("+p+")"),u!=l?e.push({i:k.push(k.pop()+"skewX(",null,")")-2,x:Rb(u,l)}):l&&k.push(k.pop()+"skewX("+l+")"),f[0]!=h[0]||f[1]!=h[1]?(d=k.push(k.pop()+"scale(",null,",",null,")"),e.push({i:d-4,x:Rb(f[0],h[0])},{i:d-2,x:Rb(f[1],h[1])})):(1!=h[0]||1!=h[1])&&k.push(k.pop()+
"scale("+h+")"),d=e.length,function(b){for(var c,f=-1;++f<d;)k[(c=e[f]).i]=c.x(b);return k.join("")}}function jh(b,c){return c=(c-=b=+b)||1/c,function(d){return(d-b)/c}}function kh(b,c){return c=(c-=b=+b)||1/c,function(d){return Math.max(0,Math.min(1,(d-b)/c))}}function lh(b){var c=b.source;b=b.target;var d;var k=b;if(c===k)d=c;else{d=Pf(c);for(var k=Pf(k),e=d.pop(),f=k.pop(),h=null;e===f;)h=e,e=d.pop(),f=k.pop();d=h}for(k=[c];c!==d;)c=c.parent,k.push(c);for(c=k.length;b!==d;)k.splice(c,0,b),b=b.parent;
return k}function Pf(b){for(var c=[],d=b.parent;null!=d;)c.push(b),b=d,d=d.parent;return c.push(b),c}function mh(b){b.fixed|=2}function nh(b){b.fixed&=-7}function oh(b){b.fixed|=4;b.px=b.x;b.py=b.y}function ph(b){b.fixed&=-5}function Qf(b,c,d){var k=0,e=0;if(b.charge=0,!b.leaf)for(var f,h=b.nodes,q=h.length,t=-1;++t<q;)f=h[t],null!=f&&(Qf(f,c,d),b.charge+=f.charge,k+=f.charge*f.cx,e+=f.charge*f.cy);b.point&&(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),c*=d[b.point.index],b.charge+=
b.pointCharge=c,k+=c*b.point.x,e+=c*b.point.y);b.cx=k/b.charge;b.cy=e/b.charge}function Vc(b,c){return N.rebind(b,c,"sort","children","value"),b.nodes=b,b.links=qh,b}function Wc(b,c){for(var d=[b];null!=(b=d.pop());)if(c(b),(e=b.children)&&(k=e.length))for(var k,e;0<=--k;)d.push(e[k])}function Ib(b,c){for(var d=[b],k=[];null!=(b=d.pop());)if(k.push(b),(f=b.children)&&(e=f.length))for(var e,f,h=-1;++h<e;)d.push(f[h]);for(;null!=(b=k.pop());)c(b)}function rh(b){return b.children}function sh(b){return b.value}
function th(b,c){return c.value-b.value}function qh(b){return N.merge(b.map(function(b){return(b.children||[]).map(function(c){return{source:b,target:c}})}))}function uh(b){return b.x}function vh(b){return b.y}function wh(b,c,d){b.y0=c;b.y=d}function Fe(b){return N.range(b.length)}function Ge(b){var c=-1;b=b[0].length;for(var d=[];++c<b;)d[c]=0;return d}function xh(b){for(var c,d=1,k=0,e=b[0][1],f=b.length;f>d;++d)(c=b[d][1])>e&&(k=d,e=c);return k}function yh(b){return b.reduce(zh,0)}function zh(b,
c){return b+c[1]}function Ah(b,c){return Rf(b,Math.ceil(Math.log(c.length)/Math.LN2+1))}function Rf(b,c){for(var d=-1,k=+b[0],e=(b[1]-k)/c,f=[];++d<=c;)f[d]=e*d+k;return f}function Bh(b){return[N.min(b),N.max(b)]}function Ch(b,c){return b.value-c.value}function He(b,c){var d=b._pack_next;b._pack_next=c;c._pack_prev=b;c._pack_next=d;d._pack_prev=c}function Sf(b,c){b._pack_next=c;c._pack_prev=b}function Tf(b,c){var d=c.x-b.x,k=c.y-b.y,e=b.r+c.r;return.999*e*e>d*d+k*k}function Uf(b){function c(b){p=
Math.min(b.x-b.r,p);u=Math.max(b.x+b.r,u);l=Math.min(b.y-b.r,l);x=Math.max(b.y+b.r,x)}if((d=b.children)&&(r=d.length)){var d,k,e,f,h,q,t,r,p=1/0,u=-(1/0),l=1/0,x=-(1/0);if(d.forEach(Dh),k=d[0],k.x=-k.r,k.y=0,c(k),1<r&&(e=d[1],e.x=e.r,e.y=0,c(e),2<r))for(f=d[2],Vf(k,e,f),c(f),He(k,f),k._pack_prev=f,He(f,e),e=k._pack_next,h=3;r>h;h++){Vf(k,e,f=d[h]);var w=0,v=1,y=1;for(q=e._pack_next;q!==e;q=q._pack_next,v++)if(Tf(q,f)){w=1;break}if(1==w)for(t=k._pack_prev;t!==q._pack_prev&&!Tf(t,f);t=t._pack_prev,
y++);w?(y>v||v==y&&e.r<k.r?Sf(k,e=q):Sf(k=t,e),h--):(He(k,f),e=f,c(f))}k=(p+u)/2;e=(l+x)/2;for(h=q=0;r>h;h++)f=d[h],f.x-=k,f.y-=e,q=Math.max(q,f.r+Math.sqrt(f.x*f.x+f.y*f.y));b.r=q;d.forEach(Eh)}}function Dh(b){b._pack_next=b._pack_prev=b}function Eh(b){delete b._pack_next;delete b._pack_prev}function Wf(b,c,d,k){var e=b.children;if(b.x=c+=k*b.x,b.y=d+=k*b.y,b.r*=k,e){b=-1;for(var f=e.length;++b<f;)Wf(e[b],c,d,k)}}function Vf(b,c,d){var k=b.r+d.r,e=c.x-b.x,f=c.y-b.y;if(k&&(e||f)){var h=c.r+d.r,q=
e*e+f*f,h=h*h,k=k*k;c=.5+(k-h)/(2*q);h=Math.sqrt(Math.max(0,2*h*(k+q)-(k-=q)*k-h*h))/(2*q);d.x=b.x+c*e+h*f;d.y=b.y+c*f-h*e}else d.x=b.x+k,d.y=b.y}function Xf(b,c){return b.parent==c.parent?1:2}function Ie(b){var c=b.children;return c.length?c[0]:b.t}function Je(b){var c,d=b.children;return(c=d.length)?d[c-1]:b.t}function Fh(b){return 1+N.max(b,function(b){return b.y})}function Gh(b){return b.reduce(function(b,c){return b+c.x},0)/b.length}function Yf(b){var c=b.children;return c&&c.length?Yf(c[0]):
b}function Zf(b){var c,d=b.children;return d&&(c=d.length)?Zf(d[c-1]):b}function Ke(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function $f(b,c){var d=b.x+c[3],k=b.y+c[0],e=b.dx-c[1]-c[3],f=b.dy-c[0]-c[2];return 0>e&&(d+=e/2,e=0),0>f&&(k+=f/2,f=0),{x:d,y:k,dx:e,dy:f}}function Ec(b){var c=b[0];b=b[b.length-1];return b>c?[c,b]:[b,c]}function Ed(b){return b.rangeExtent?b.rangeExtent():Ec(b.range())}function Hh(b,c,d,k){var e=d(b[0],b[1]),f=k(c[0],c[1]);return function(b){return f(e(b))}}function Fd(b,c){var d,
k=0,e=b.length-1,f=b[k],h=b[e];return f>h&&(d=k,k=e,e=d,d=f,f=h,h=d),b[k]=c.floor(f),b[e]=c.ceil(h),b}function ag(b){return b?{floor:function(c){return Math.floor(c/b)*b},ceil:function(c){return Math.ceil(c/b)*b}}:Ih}function Jh(b,c,d,k){var e=[],f=[],h=0,q=Math.min(b.length,c.length)-1;for(b[q]<b[0]&&(b=b.slice().reverse(),c=c.slice().reverse());++h<=q;)e.push(d(b[h-1],b[h])),f.push(k(c[h-1],c[h]));return function(c){var d=N.bisect(b,c,1,q)-1;return f[d](e[d](c))}}function bg(b,c,d,k){function e(){var t=
2<Math.min(b.length,c.length)?Jh:Hh,r=k?kh:jh;return h=t(b,c,r,d),q=t(c,b,r,mc),f}function f(b){return h(b)}var h,q;return f.invert=function(b){return q(b)},f.domain=function(c){return arguments.length?(b=c.map(Number),e()):b},f.range=function(b){return arguments.length?(c=b,e()):c},f.rangeRound=function(b){return f.range(b).interpolate(Lf)},f.clamp=function(b){return arguments.length?(k=b,e()):k},f.interpolate=function(b){return arguments.length?(d=b,e()):d},f.ticks=function(c){return N.range.apply(N,
bc(b,c))},f.tickFormat=function(c,d){return Le(b,c,d)},f.nice=function(c){return Fd(b,ag(bc(b,c)[2])),e()},f.copy=function(){return bg(b,c,d,k)},e()}function Me(b,c){return N.rebind(b,c,"range","rangeRound","interpolate","clamp")}function bc(b,c){null==c&&(c=10);var d=Ec(b),k=d[1]-d[0],e=Math.pow(10,Math.floor(Math.log(k/c)/Math.LN10)),k=c/k*e;return.15>=k?e*=10:.35>=k?e*=5:.75>=k&&(e*=2),d[0]=Math.ceil(d[0]/e)*e,d[1]=Math.floor(d[1]/e)*e+.5*e,d[2]=e,d}function Le(b,c,d){b=bc(b,c);if(d){c=lf.exec(d);
if(c.shift(),"s"===c[8]){var k=N.formatPrefix(Math.max(pa(b[0]),pa(b[1])));return c[7]||(c[7]="."+Gd(k.scale(b[2]))),c[8]="f",d=N.format(c.join("")),function(b){return d(k.scale(b))+k.symbol}}c[7]||(c[7]="."+Kh(c[8],b));d=c.join("")}else d=",."+Gd(b[2])+"f";return N.format(d)}function Gd(b){return-Math.floor(Math.log(b)/Math.LN10+.01)}function Kh(b,c){var d=Gd(c[2]);return b in Lh?Math.abs(d-Gd(Math.max(pa(c[0]),pa(c[1]))))+ +("e"!==b):d-2*("%"===b)}function cg(b,c,d,k){function e(b){return(d?Math.log(0>
b?0:b):-Math.log(0<b?0:-b))/Math.log(c)}function f(b){return d?Math.pow(c,b):-Math.pow(c,-b)}function h(c){return b(e(c))}return h.invert=function(c){return f(b.invert(c))},h.domain=function(c){return arguments.length?(d=0<=c[0],b.domain((k=c.map(Number)).map(e)),h):k},h.base=function(d){return arguments.length?(c=+d,b.domain(k.map(e)),h):c},h.nice=function(){var c=Fd(k.map(e),d?Math:Mh);return b.domain(c),k=c.map(f),h},h.ticks=function(){var b=Ec(k),h=[],q=b[0],b=b[1],t=Math.floor(e(q)),r=Math.ceil(e(b)),
p=c%1?2:c;if(isFinite(r-t)){if(d){for(;r>t;t++)for(var u=1;p>u;u++)h.push(f(t)*u);h.push(f(t))}else for(h.push(f(t));t++<r;)for(u=p-1;0<u;u--)h.push(f(t)*u);for(t=0;h[t]<q;t++);for(r=h.length;h[r-1]>b;r--);h=h.slice(t,r)}return h},h.tickFormat=function(b,c){if(!arguments.length)return dg;2>arguments.length?c=dg:"function"!=typeof c&&(c=N.format(c));var k,q=Math.max(.1,b/h.ticks().length),t=d?(k=1E-12,Math.ceil):(k=-1E-12,Math.floor);return function(b){return b/f(t(e(b)+k))<=q?c(b):""}},h.copy=function(){return cg(b.copy(),
c,d,k)},Me(h,b)}function eg(b,c,d){function k(c){return b(e(c))}var e=Hd(c),f=Hd(1/c);return k.invert=function(c){return f(b.invert(c))},k.domain=function(c){return arguments.length?(b.domain((d=c.map(Number)).map(e)),k):d},k.ticks=function(b){return N.range.apply(N,bc(d,b))},k.tickFormat=function(b,c){return Le(d,b,c)},k.nice=function(b){return k.domain(Fd(d,ag(bc(d,b)[2])))},k.exponent=function(h){return arguments.length?(e=Hd(c=h),f=Hd(1/c),b.domain(d.map(e)),k):c},k.copy=function(){return eg(b.copy(),
c,d)},Me(k,b)}function Hd(b){return function(c){return 0>c?-Math.pow(-c,b):Math.pow(c,b)}}function fg(b,c){function d(k){return f[((e.get(k)||("range"===c.t?e.set(k,b.push(k)):NaN))-1)%f.length]}function k(c,d){return N.range(b.length).map(function(b){return c+d*b})}var e,f,h;return d.domain=function(k){if(!arguments.length)return b;b=[];e=new p;for(var f,h=-1,q=k.length;++h<q;)e.has(f=k[h])||e.set(f,b.push(f));return d[c.t].apply(d,c.a)},d.range=function(b){return arguments.length?(f=b,h=0,c={t:"range",
a:arguments},d):f},d.rangePoints=function(e,q){2>arguments.length&&(q=0);var t=e[0],r=e[1],r=2>b.length?(t=(t+r)/2,0):(r-t)/(b.length-1+q);return f=k(t+r*q/2,r),h=0,c={t:"rangePoints",a:arguments},d},d.rangeRoundPoints=function(e,q){2>arguments.length&&(q=0);var t=e[0],r=e[1],p=2>b.length?(t=r=Math.round((t+r)/2),0):(r-t)/(b.length-1+q)|0;return f=k(t+Math.round(p*q/2+(r-t-(b.length-1+q)*p)/2),p),h=0,c={t:"rangeRoundPoints",a:arguments},d},d.rangeBands=function(e,q,t){2>arguments.length&&(q=0);3>
arguments.length&&(t=q);var r=e[1]<e[0],p=e[r-0],u=(e[1-r]-p)/(b.length-q+2*t);return f=k(p+u*t,u),r&&f.reverse(),h=u*(1-q),c={t:"rangeBands",a:arguments},d},d.rangeRoundBands=function(e,q,t){2>arguments.length&&(q=0);3>arguments.length&&(t=q);var r=e[1]<e[0],p=e[r-0],u=e[1-r],l=Math.floor((u-p)/(b.length-q+2*t));return f=k(p+Math.round((u-p-(b.length-q)*l)/2),l),r&&f.reverse(),h=Math.round(l*(1-q)),c={t:"rangeRoundBands",a:arguments},d},d.rangeBand=function(){return h},d.rangeExtent=function(){return Ec(c.a[0])},
d.copy=function(){return fg(b,c)},d.domain(b)}function gg(b,d){function k(){var c=0,e=d.length;for(h=[];++c<e;)h[c-1]=N.quantile(b,c/e);return f}function f(b){return isNaN(b=+b)?void 0:d[N.bisect(h,b)]}var h;return f.domain=function(d){return arguments.length?(b=d.map(l).filter(e).sort(c),k()):b},f.range=function(b){return arguments.length?(d=b,k()):d},f.quantiles=function(){return h},f.invertExtent=function(c){return c=d.indexOf(c),0>c?[NaN,NaN]:[0<c?h[c-1]:b[0],c<h.length?h[c]:b[b.length-1]]},f.copy=
function(){return gg(b,d)},k()}function hg(b,c,d){function k(c){return d[Math.max(0,Math.min(h,Math.floor(f*(c-b))))]}function e(){return f=d.length/(c-b),h=d.length-1,k}var f,h;return k.domain=function(d){return arguments.length?(b=+d[0],c=+d[d.length-1],e()):[b,c]},k.range=function(b){return arguments.length?(d=b,e()):d},k.invertExtent=function(c){return c=d.indexOf(c),c=0>c?NaN:c/f+b,[c,c+1/f]},k.copy=function(){return hg(b,c,d)},e()}function ig(b,c){function d(k){return k>=k?c[N.bisect(b,k)]:
void 0}return d.domain=function(c){return arguments.length?(b=c,d):b},d.range=function(b){return arguments.length?(c=b,d):c},d.invertExtent=function(d){return d=c.indexOf(d),[b[d-1],b[d]]},d.copy=function(){return ig(b,c)},d}function jg(b){function c(b){return+b}return c.invert=c,c.domain=c.range=function(d){return arguments.length?(b=d.map(c),c):b},c.ticks=function(c){return N.range.apply(N,bc(b,c))},c.tickFormat=function(c,d){return Le(b,c,d)},c.copy=function(){return jg(b)},c}function Nh(){return 0}
function Oh(b){return b.innerRadius}function Ph(b){return b.outerRadius}function kg(b){return b.startAngle}function lg(b){return b.endAngle}function Qh(b){return b&&b.padAngle}function Id(b,c,d,k){return 0<(b-d)*c-(c-k)*b?0:1}function Jd(b,c,d,k,e){var f=b[0]-c[0],h=b[1]-c[1];e=(e?k:-k)/Math.sqrt(f*f+h*h);var h=e*h,f=-e*f,q=b[0]+h,t=b[1]+f,r=c[0]+h,p=c[1]+f;b=(q+r)/2;c=(t+p)/2;e=r-q;var u=p-t,l=e*e+u*u;k=d-k;var p=q*p-r*t,x=(0>u?-1:1)*Math.sqrt(k*k*l-p*p),q=(p*u-e*x)/l,t=(-p*e-u*x)/l,r=(p*u+e*x)/
l;e=(-p*e+u*x)/l;u=q-b;l=t-c;b=r-b;c=e-c;return u*u+l*l>b*b+c*c&&(q=r,t=e),[[q-h,t-f],[q*d/k,t*d/k]]}function mg(b){function c(h){function t(){p.push("M",f(b(u),q))}for(var r,p=[],u=[],l=-1,x=h.length,w=qa(d),v=qa(k);++l<x;)e.call(this,r=h[l],l)?u.push([+w.call(this,r,l),+v.call(this,r,l)]):u.length&&(t(),u=[]);return u.length&&t(),p.length?p.join(""):null}var d=zc,k=Pc,e=$b,f=mb,h=f.key,q=.7;return c.x=function(b){return arguments.length?(d=b,c):d},c.y=function(b){return arguments.length?(k=b,c):
k},c.defined=function(b){return arguments.length?(e=b,c):e},c.interpolate=function(b){return arguments.length?(h="function"==typeof b?f=b:(f=Ne.get(b)||mb).key,c):h},c.tension=function(b){return arguments.length?(q=b,c):q},c}function mb(b){return b.join("L")}function Oe(b){for(var c=0,d=b.length,k=b[0],e=[k[0],",",k[1]];++c<d;)e.push("V",(k=b[c])[1],"H",k[0]);return e.join("")}function Pe(b){for(var c=0,d=b.length,k=b[0],e=[k[0],",",k[1]];++c<d;)e.push("H",(k=b[c])[0],"V",k[1]);return e.join("")}
function Kd(b,c){if(1>c.length||b.length!=c.length&&b.length!=c.length+2)return mb(b);var d=b.length!=c.length,k="",e=b[0],f=b[1],h=c[0],q=h,t=1;if(d&&(k+="Q"+(f[0]-2*h[0]/3)+","+(f[1]-2*h[1]/3)+","+f[0]+","+f[1],e=b[1],t=2),1<c.length)for(q=c[1],f=b[t],t++,k+="C"+(e[0]+h[0])+","+(e[1]+h[1])+","+(f[0]-q[0])+","+(f[1]-q[1])+","+f[0]+","+f[1],e=2;e<c.length;e++,t++)f=b[t],q=c[e],k+="S"+(f[0]-q[0])+","+(f[1]-q[1])+","+f[0]+","+f[1];d&&(d=b[t],k+="Q"+(f[0]+2*q[0]/3)+","+(f[1]+2*q[1]/3)+","+d[0]+","+d[1]);
return k}function Qe(b,c){for(var d,k=[],e=(1-c)/2,f=b[0],h=b[1],q=1,t=b.length;++q<t;)d=f,f=h,h=b[q],k.push([e*(h[0]-d[0]),e*(h[1]-d[1])]);return k}function ng(b){if(3>b.length)return mb(b);var c=1,d=b.length,k=b[0],e=k[0],f=k[1],h=[e,e,e,(k=b[1])[0]],q=[f,f,f,k[1]],e=[e,",",f,"L",ub(cc,h),",",ub(cc,q)];for(b.push(b[d-1]);++c<=d;)k=b[c],h.shift(),h.push(k[0]),q.shift(),q.push(k[1]),Re(e,h,q);return b.pop(),e.push("L",k),e.join("")}function ub(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3]}function Re(b,
c,d){b.push("C",ub(og,c),",",ub(og,d),",",ub(pg,c),",",ub(pg,d),",",ub(cc,c),",",ub(cc,d))}function Se(b,c){return(c[1]-b[1])/(c[0]-b[0])}function qg(b){for(var c,d,k,e=-1,f=b.length;++e<f;)c=b[e],d=c[0],k=c[1]-Ka,c[0]=d*Math.cos(k),c[1]=d*Math.sin(k);return b}function rg(b){function c(t){function l(){y.push("M",q(b(A),u),p,r(b(z.reverse()),u),"Z")}for(var x,w,v,y=[],z=[],A=[],g=-1,C=t.length,E=qa(d),G=qa(e),B=d===k?function(){return w}:qa(k),F=e===f?function(){return v}:qa(f);++g<C;)h.call(this,
x=t[g],g)?(z.push([w=+E.call(this,x,g),v=+G.call(this,x,g)]),A.push([+B.call(this,x,g),+F.call(this,x,g)])):z.length&&(l(),z=[],A=[]);return z.length&&l(),y.length?y.join(""):null}var d=zc,k=zc,e=0,f=Pc,h=$b,q=mb,t=q.key,r=q,p="L",u=.7;return c.x=function(b){return arguments.length?(d=k=b,c):k},c.x0=function(b){return arguments.length?(d=b,c):d},c.x1=function(b){return arguments.length?(k=b,c):k},c.y=function(b){return arguments.length?(e=f=b,c):f},c.y0=function(b){return arguments.length?(e=b,c):
e},c.y1=function(b){return arguments.length?(f=b,c):f},c.defined=function(b){return arguments.length?(h=b,c):h},c.interpolate=function(b){return arguments.length?(t="function"==typeof b?q=b:(q=Ne.get(b)||mb).key,r=q.reverse||q,p=q.closed?"M":"L",c):t},c.tension=function(b){return arguments.length?(u=b,c):u},c}function Rh(b){return b.radius}function sg(b){return[b.x,b.y]}function Sh(b){return function(){var c=b.apply(this,arguments),d=c[0],c=c[1]-Ka;return[d*Math.cos(c),d*Math.sin(c)]}}function Th(){return 64}
function Uh(){return"circle"}function tg(b){b=Math.sqrt(b/la);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function ug(b){return function(){var c,d;(c=this[b])&&(d=c[c.active])&&(--c.count?delete c[c.active]:delete this[b],c.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Xc(b,c,d){return Yc(b,Ra),b.namespace=c,b.id=d,b}function Te(b,c,d,k){var e=b.id,f=b.namespace;return Z(b,"function"==typeof d?function(b,h,q){b[f][e].tween.set(c,k(d.call(b,
b.__data__,h,q)))}:(d=k(d),function(b){b[f][e].tween.set(c,d)}))}function Vh(b){return null==b&&(b=""),function(){this.textContent=b}}function Ue(b){return null==b?"__transition__":"__transition_"+b+"__"}function Ld(b,c,d,k,e){var f=b[d]||(b[d]={active:0,count:0}),h=f[k];if(!h){var q=e.time,h=f[k]={tween:new p,time:q,delay:e.delay,duration:e.duration,ease:e.ease,index:c};e=null;++f.count;N.timer(function(e){function t(d){if(f.active>k)return p();var e=f[f.active];e&&(--f.count,delete f[f.active],
e.event&&e.event.interrupt.call(b,b.__data__,e.index));f.active=k;h.event&&h.event.start.call(b,b.__data__,c);h.tween.forEach(function(d,k){(k=k.call(b,b.__data__,c))&&v.push(k)});l=h.ease;u=h.duration;N.timer(function(){return w.c=r(d||1)?$b:r,1},0,q)}function r(d){if(f.active!==k)return 1;d/=u;for(var e=l(d),q=v.length;0<q;)v[--q].call(b,e);return 1<=d?(h.event&&h.event.end.call(b,b.__data__,c),p()):void 0}function p(){return--f.count?delete f[k]:delete b[d],1}var u,l,x=h.delay,w=Kb,v=[];return w.t=
x+q,e>=x?t(e-x):void(w.c=t)},0,q)}}function Wh(b,c,d){b.attr("transform",function(b){var k=c(b);return"translate("+(isFinite(k)?k:d(b))+",0)"})}function Xh(b,c,d){b.attr("transform",function(b){var k=c(b);return"translate(0,"+(isFinite(k)?k:d(b))+")"})}function Ve(b){return b.toISOString()}function We(b,c,d){function k(c){return b(c)}function e(b,d){var k=(b[1]-b[0])/d,f=N.bisect(Md,k);return f==Md.length?[c.year,bc(b.map(function(b){return b/31536E6}),d)[2]]:f?c[k/Md[f-1]<Md[f]/k?f-1:f]:[Yh,bc(b,
d)[2]]}return k.invert=function(c){return nc(b.invert(c))},k.domain=function(c){return arguments.length?(b.domain(c),k):b.domain().map(nc)},k.nice=function(b,c){function d(k){return!isNaN(k)&&!b.range(k,nc(+k+1),c).length}var f=k.domain(),h=Ec(f),h=null==b?e(h,10):"number"==typeof b&&e(h,b);return h&&(b=h[0],c=h[1]),k.domain(Fd(f,1<c?{floor:function(c){for(;d(c=b.floor(c));)c=nc(c-1);return c},ceil:function(c){for(;d(c=b.ceil(c));)c=nc(+c+1);return c}}:b))},k.ticks=function(b,c){var d=Ec(k.domain()),
f=null==b?e(d,10):"number"==typeof b?e(d,b):!b.range&&[{range:b},c];return f&&(b=f[0],c=f[1]),b.range(d[0],nc(+d[1]+1),1>c?1:c)},k.tickFormat=function(){return d},k.copy=function(){return We(b.copy(),c,d)},Me(k,b)}function nc(b){return new Date(b)}function Zh(b){return JSON.parse(b.responseText)}function $h(b){var c=bb.createRange();return c.selectNode(bb.body),c.createContextualFragment(b.responseText)}var N={version:"3.5.6"},vg=[].slice,Tb=function(b){return vg.call(b)},bb=this.document;if(bb)try{Tb(bb.documentElement.childNodes)[0].nodeType}catch(Xa){Tb=
function(b){for(var c=b.length,d=Array(c);c--;)d[c]=b[c];return d}}if(Date.now||(Date.now=function(){return+new Date}),bb)try{bb.createElement("DIV").style.setProperty("opacity",0,"")}catch(Xa){var Nd=this.Element.prototype,ai=Nd.setAttribute,bi=Nd.setAttributeNS,wg=this.CSSStyleDeclaration.prototype,ci=wg.setProperty;Nd.setAttribute=function(b,c){ai.call(this,b,c+"")};Nd.setAttributeNS=function(b,c,d){bi.call(this,b,c,d+"")};wg.setProperty=function(b,c,d){ci.call(this,b,c+"",d)}}N.ascending=c;N.descending=
function(b,c){return b>c?-1:c>b?1:c>=b?0:NaN};N.min=function(b,c){var d,k,e=-1,f=b.length;if(1===arguments.length){for(;++e<f;)if(null!=(k=b[e])&&k>=k){d=k;break}for(;++e<f;)null!=(k=b[e])&&d>k&&(d=k)}else{for(;++e<f;)if(null!=(k=c.call(b,b[e],e))&&k>=k){d=k;break}for(;++e<f;)null!=(k=c.call(b,b[e],e))&&d>k&&(d=k)}return d};N.max=function(b,c){var d,k,e=-1,f=b.length;if(1===arguments.length){for(;++e<f;)if(null!=(k=b[e])&&k>=k){d=k;break}for(;++e<f;)null!=(k=b[e])&&k>d&&(d=k)}else{for(;++e<f;)if(null!=
(k=c.call(b,b[e],e))&&k>=k){d=k;break}for(;++e<f;)null!=(k=c.call(b,b[e],e))&&k>d&&(d=k)}return d};N.extent=function(b,c){var d,k,e,f=-1,h=b.length;if(1===arguments.length){for(;++f<h;)if(null!=(k=b[f])&&k>=k){d=e=k;break}for(;++f<h;)null!=(k=b[f])&&(d>k&&(d=k),k>e&&(e=k))}else{for(;++f<h;)if(null!=(k=c.call(b,b[f],f))&&k>=k){d=e=k;break}for(;++f<h;)null!=(k=c.call(b,b[f],f))&&(d>k&&(d=k),k>e&&(e=k))}return[d,e]};N.sum=function(b,c){var d,k=0,f=b.length,h=-1;if(1===arguments.length)for(;++h<f;)e(d=
+b[h])&&(k+=d);else for(;++h<f;)e(d=+c.call(b,b[h],h))&&(k+=d);return k};N.mean=function(b,c){var d,k=0,f=b.length,h=-1,q=f;if(1===arguments.length)for(;++h<f;)e(d=l(b[h]))?k+=d:--q;else for(;++h<f;)e(d=l(c.call(b,b[h],h)))?k+=d:--q;return q?k/q:void 0};N.quantile=function(b,c){var d=(b.length-1)*c+1,k=Math.floor(d),e=+b[k-1];return(d-=k)?e+d*(b[k]-e):e};N.median=function(b,d){var k,f=[],h=b.length,q=-1;if(1===arguments.length)for(;++q<h;)e(k=l(b[q]))&&f.push(k);else for(;++q<h;)e(k=l(d.call(b,b[q],
q)))&&f.push(k);return f.length?N.quantile(f.sort(c),.5):void 0};N.variance=function(b,c){var d,k,f=b.length,h=0,q=0,t=-1,r=0;if(1===arguments.length)for(;++t<f;)e(d=l(b[t]))&&(k=d-h,h+=k/++r,q+=k*(d-h));else for(;++t<f;)e(d=l(c.call(b,b[t],t)))&&(k=d-h,h+=k/++r,q+=k*(d-h));return 1<r?q/(r-1):void 0};N.deviation=function(){var b=N.variance.apply(this,arguments);return b?Math.sqrt(b):b};var xg=f(c);N.bisectLeft=xg.left;N.bisect=N.bisectRight=xg.right;N.bisector=function(b){return f(1===b.length?function(d,
k){return c(b(d),k)}:b)};N.shuffle=function(b,c,d){3>(f=arguments.length)&&(d=b.length,2>f&&(c=0));for(var k,e,f=d-c;f;)e=Math.random()*f--|0,k=b[f+c],b[f+c]=b[e+c],b[e+c]=k;return b};N.permute=function(b,c){for(var d=c.length,k=Array(d);d--;)k[d]=b[c[d]];return k};N.pairs=function(b){for(var c=0,d=b.length-1,k=b[0],e=Array(0>d?0:d);d>c;)e[c]=[k,k=b[++c]];return e};N.zip=function(){if(!(k=arguments.length))return[];for(var b=-1,c=N.min(arguments,v),d=Array(c);++b<c;)for(var k,e=-1,f=d[b]=Array(k);++e<
k;)f[e]=arguments[e][b];return d};N.transpose=function(b){return N.zip.apply(N,b)};N.keys=function(b){var c=[],d;for(d in b)c.push(d);return c};N.values=function(b){var c=[],d;for(d in b)c.push(b[d]);return c};N.entries=function(b){var c=[],d;for(d in b)c.push({key:d,value:b[d]});return c};N.merge=function(b){var c,d,k,e=b.length;c=-1;for(var f=0;++c<e;)f+=b[c].length;for(d=Array(f);0<=--e;)for(k=b[e],c=k.length;0<=--c;)d[--f]=k[c];return d};var pa=Math.abs;N.range=function(b,c,d){if(3>arguments.length&&
(d=1,2>arguments.length&&(c=b,b=0)),(c-b)/d===1/0)throw Error("infinite range");var k,e=[],f;k=pa(d);for(f=1;k*f%1;)f*=10;var h=-1;if(b*=f,c*=f,d*=f,0>d)for(;(k=b+d*++h)>c;)e.push(k/f);else for(;(k=b+d*++h)<c;)e.push(k/f);return e};N.map=function(b,c){var d=new p;if(b instanceof p)b.forEach(function(b,c){d.set(b,c)});else if(Array.isArray(b)){var k,e=-1,f=b.length;if(1===arguments.length)for(;++e<f;)d.set(e,b[e]);else for(;++e<f;)d.set(c.call(b,k=b[e],e),k)}else for(e in b)d.set(e,b[e]);return d};
var Pg="__proto__",ee="\x00";d(p,{has:w,get:function(b){return this._[t(b)]},set:function(b,c){return this._[t(b)]=c},remove:u,keys:r,values:function(){var b=[],c;for(c in this._)b.push(this._[c]);return b},entries:function(){var b=[],c;for(c in this._)b.push({key:x(c),value:this._[c]});return b},size:y,empty:k,forEach:function(b){for(var c in this._)b.call(this,x(c),this._[c])}});N.nest=function(){function b(c,h,q){if(q>=f.length)return k?k.call(e,h):d?h.sort(d):h;for(var t,r,u,l,x=-1,w=h.length,
v=f[q++],y=new p;++x<w;)(l=y.get(t=v(r=h[x])))?l.push(r):y.set(t,[r]);return c?(r=c(),u=function(d,k){r.set(d,b(c,k,q))}):(r={},u=function(d,k){r[d]=b(c,k,q)}),y.forEach(u),r}function c(b,d){if(d>=f.length)return b;var k=[],e=h[d++];return b.forEach(function(b,e){k.push({key:b,values:c(e,d)})}),e?k.sort(function(b,c){return e(b.key,c.key)}):k}var d,k,e={},f=[],h=[];return e.map=function(c,d){return b(d,c,0)},e.entries=function(d){return c(b(N.map,d,0),0)},e.key=function(b){return f.push(b),e},e.sortKeys=
function(b){return h[f.length-1]=b,e},e.sortValues=function(b){return d=b,e},e.rollup=function(b){return k=b,e},e};N.set=function(b){var c=new q;if(b)for(var d=0,k=b.length;k>d;++d)c.add(b[d]);return c};d(q,{has:w,add:function(b){return this._[t(b+="")]=!0,b},remove:u,values:r,size:y,empty:k,forEach:function(b){for(var c in this._)b.call(this,x(c))}});N.behavior={};N.rebind=function(b,c){for(var d,k=1,e=arguments.length;++k<e;)b[d=arguments[k]]=g(b,c,c[d]);return b};var ff="webkit ms moz Moz o O".split(" ");
N.dispatch=function(){for(var b=new B,c=-1,d=arguments.length;++c<d;)b[arguments[c]]=G(b);return b};B.prototype.on=function(b,c){var d=b.indexOf("."),k="";if(0<=d&&(k=b.slice(d+1),b=b.slice(0,d)),b)return 2>arguments.length?this[b].on(k):this[b].on(k,c);if(2===arguments.length){if(null==c)for(b in this)this.hasOwnProperty(b)&&this[b].on(k,null);return this}};N.event=null;N.requote=function(b){return b.replace(di,"\\$&")};var di=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Yc={}.__proto__?function(b,c){b.__proto__=
c}:function(b,c){for(var d in c)b[d]=c[d]},fe=function(b,c){return c.querySelector(b)},ge=function(b,c){return c.querySelectorAll(b)},he=function(b,c){var d=b.matches||b[A(b,"matchesSelector")];return(he=function(b,c){return d.call(b,c)})(b,c)};"function"==typeof Sizzle&&(fe=function(b,c){return Sizzle(b,c)[0]||null},ge=Sizzle,he=Sizzle.matchesSelector);N.selection=function(){return N.select(bb.documentElement)};var xa=N.selection.prototype=[];xa.select=function(b){var c,d,k,e,f=[];b=K(b);for(var h=
-1,q=this.length;++h<q;){f.push(c=[]);c.parentNode=(k=this[h]).parentNode;for(var t=-1,r=k.length;++t<r;)(e=k[t])?(c.push(d=b.call(e,e.__data__,t,h)),d&&"__data__"in e&&(d.__data__=e.__data__)):c.push(null)}return H(f)};xa.selectAll=function(b){var c,d,k=[];b=O(b);for(var e=-1,f=this.length;++e<f;)for(var h=this[e],q=-1,t=h.length;++q<t;)(d=h[q])&&(k.push(c=Tb(b.call(d,d.__data__,q,e))),c.parentNode=d);return H(k)};var Xe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",
xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};N.ns={prefix:Xe,qualify:function(b){var c=b.indexOf(":"),d=b;return 0<=c&&(d=b.slice(0,c),b=b.slice(c+1)),Xe.hasOwnProperty(d)?{space:Xe[d],local:b}:b}};xa.attr=function(b,c){if(2>arguments.length){if("string"==typeof b){var d=this.node();return b=N.ns.qualify(b),b.local?d.getAttributeNS(b.space,b.local):d.getAttribute(b)}for(c in b)this.each(L(c,b[c]));return this}return this.each(L(b,c))};xa.classed=function(b,c){if(2>
arguments.length){if("string"==typeof b){var d=this.node(),k=(b=(b+"").trim().split(/^|\s+/)).length,e=-1;if(c=d.classList)for(;++e<k;){if(!c.contains(b[e]))return!1}else for(c=d.getAttribute("class");++e<k;)if(!M(b[e]).test(c))return!1;return!0}for(c in b)this.each(Q(c,b[c]));return this}return this.each(Q(b,c))};xa.style=function(c,d,k){var e=arguments.length;if(3>e){if("string"!=typeof c){2>e&&(d="");for(k in c)this.each(R(k,c[k],d));return this}if(2>e)return e=this.node(),b(e).getComputedStyle(e,
null).getPropertyValue(c);k=""}return this.each(R(c,d,k))};xa.property=function(b,c){if(2>arguments.length){if("string"==typeof b)return this.node()[b];for(c in b)this.each(S(c,b[c]));return this}return this.each(S(b,c))};xa.text=function(b){return arguments.length?this.each("function"==typeof b?function(){var c=b.apply(this,arguments);this.textContent=null==c?"":c}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};xa.html=function(b){return arguments.length?
this.each("function"==typeof b?function(){var c=b.apply(this,arguments);this.innerHTML=null==c?"":c}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};xa.append=function(b){return b=X(b),this.select(function(){return this.appendChild(b.apply(this,arguments))})};xa.insert=function(b,c){return b=X(b),c=K(c),this.select(function(){return this.insertBefore(b.apply(this,arguments),c.apply(this,arguments)||null)})};xa.remove=function(){return this.each(V)};xa.data=
function(b,c){function d(b,k){var e,f,h,u=b.length,l=k.length,x=Math.min(u,l),w=Array(l),v=Array(l),y=Array(u);if(c){var z,x=new p,A=Array(u);for(e=-1;++e<u;)x.has(z=c.call(f=b[e],f.__data__,e))?y[e]=f:x.set(z,f),A[e]=z;for(e=-1;++e<l;)(f=x.get(z=c.call(k,h=k[e],e)))?!0!==f&&(w[e]=f,f.__data__=h):v[e]={__data__:h},x.set(z,!0);for(e=-1;++e<u;)!0!==x.get(A[e])&&(y[e]=b[e])}else{for(e=-1;++e<x;)f=b[e],h=k[e],f?(f.__data__=h,w[e]=f):v[e]={__data__:h};for(;l>e;++e)v[e]={__data__:k[e]};for(;u>e;++e)y[e]=
b[e]}v.update=w;v.parentNode=w.parentNode=y.parentNode=b.parentNode;q.push(v);t.push(w);r.push(y)}var k,e,f=-1,h=this.length;if(!arguments.length){for(b=Array(h=(k=this[0]).length);++f<h;)(e=k[f])&&(b[f]=e.__data__);return b}var q=U([]),t=H([]),r=H([]);if("function"==typeof b)for(;++f<h;)d(k=this[f],b.call(k,k.parentNode.__data__,f));else for(;++f<h;)d(k=this[f],b);return t.enter=function(){return q},t.exit=function(){return r},t};xa.datum=function(b){return arguments.length?this.property("__data__",
b):this.property("__data__")};xa.filter=function(b){var c,d,k,e=[];"function"!=typeof b&&(b=Y(b));for(var f=0,h=this.length;h>f;f++){e.push(c=[]);c.parentNode=(d=this[f]).parentNode;for(var q=0,t=d.length;t>q;q++)(k=d[q])&&b.call(k,k.__data__,q,f)&&c.push(k)}return H(e)};xa.order=function(){for(var b=-1,c=this.length;++b<c;)for(var d,k=this[b],e=k.length-1,f=k[e];0<=--e;)(d=k[e])&&(f&&f!==d.nextSibling&&f.parentNode.insertBefore(d,f),f=d);return this};xa.sort=function(b){b=W.apply(this,arguments);
for(var c=-1,d=this.length;++c<d;)this[c].sort(b);return this.order()};xa.each=function(b){return Z(this,function(c,d,k){b.call(c,c.__data__,d,k)})};xa.call=function(b){var c=Tb(arguments);return b.apply(c[0]=this,c),this};xa.empty=function(){return!this.node()};xa.node=function(){for(var b=0,c=this.length;c>b;b++)for(var d=this[b],k=0,e=d.length;e>k;k++){var f=d[k];if(f)return f}return null};xa.size=function(){var b=0;return Z(this,function(){++b}),b};var Jb=[];N.selection.enter=U;N.selection.enter.prototype=
Jb;Jb.append=xa.append;Jb.empty=xa.empty;Jb.node=xa.node;Jb.call=xa.call;Jb.size=xa.size;Jb.select=function(b){for(var c,d,k,e,f,h=[],q=-1,t=this.length;++q<t;){k=(e=this[q]).update;h.push(c=[]);c.parentNode=e.parentNode;for(var r=-1,p=e.length;++r<p;)(f=e[r])?(c.push(k[r]=d=b.call(e.parentNode,f.__data__,r,q)),d.__data__=f.__data__):c.push(null)}return H(h)};Jb.insert=function(b,c){return 2>arguments.length&&(c=ea(this)),xa.insert.call(this,b,c)};N.select=function(b){var c;return"string"==typeof b?
(c=[fe(b,bb)],c.parentNode=bb.documentElement):(c=[b],c.parentNode=b&&(b.ownerDocument||b.document||b).documentElement),H([c])};N.selectAll=function(b){var c;return"string"==typeof b?(c=Tb(ge(b,bb)),c.parentNode=bb.documentElement):(c=b,c.parentNode=null),H([c])};xa.on=function(b,c,d){var k=arguments.length;if(3>k){if("string"!=typeof b){2>k&&(c=!1);for(d in b)this.each(ga(d,b[d],c));return this}if(2>k)return(k=this.node()["__on"+b])&&k._;d=!1}return this.each(ga(b,c,d))};var ie=N.map({mouseenter:"mouseover",
mouseleave:"mouseout"});bb&&ie.forEach(function(b){"on"+b in bb&&ie.remove(b)});var dc,Qg=0;N.mouse=function(b){return sa(b,I())};var je=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;N.touch=function(b,c,d){if(3>arguments.length&&(d=c,c=I().changedTouches),c)for(var k,e=0,f=c.length;f>e;++e)if((k=c[e]).identifier===d)return sa(b,k)};N.behavior.drag=function(){function c(){this.on("mousedown.drag",f).on("touchstart.drag",q)}function d(b,c,f,h,q){return function(){var d,t=N.event.target,
r=this.parentNode,p=k.of(this,arguments),u=0,l=b(),x=".drag"+(null==l?"":"-"+l),w=N.select(f(t)).on(h+x,function(){var b,k,e=c(r,l);e&&(b=e[0]-y[0],k=e[1]-y[1],u=u|b|k,y=e,p({type:"drag",x:e[0]+d[0],y:e[1]+d[1],dx:b,dy:k}))}).on(q+x,function(){c(r,l)&&(w.on(h+x,null).on(q+x,null),v(u&&N.event.target===t),p({type:"dragend"}))}),v=na(t),y=c(r,l);e?(d=e.apply(this,arguments),d=[d.x-y[0],d.y-y[1]]):d=[0,0];p({type:"dragstart"})}}var k=D(c,"drag","dragstart","dragend"),e=null,f=d(C,N.mouse,b,"mousemove",
"mouseup"),q=d(ra,N.touch,z,"touchmove","touchend");return c.origin=function(b){return arguments.length?(e=b,c):e},N.rebind(c,k,"on")};N.touches=function(b,c){return 2>arguments.length&&(c=I().touches),c?Tb(c).map(function(c){var d=sa(b,c);return d.identifier=c.identifier,d}):[]};var aa=1E-6,ye=aa*aa,la=Math.PI,kb=2*la,ei=kb-aa,Ka=la/2,ma=la/180,Ga=180/la,Od=Math.SQRT2;N.interpolateZoom=function(b,c){function d(b){var c=b*w;if(x){b=ka(l);var h=f/(2*p),r,u=Od*c+l;r=((u=Math.exp(2*u))-1)/(u+1);var v=
l,u=((v=Math.exp(v))-1/v)/2,h=h*(b*r-u);return[k+h*q,e+h*t,f*b/ka(Od*c+l)]}return[k+b*q,e+b*t,f*Math.exp(Od*c)]}var k=b[0],e=b[1],f=b[2],h=c[2],q=c[0]-k,t=c[1]-e,r=q*q+t*t,p=Math.sqrt(r),u=(h*h-f*f+4*r)/(4*f*p),r=(h*h-f*f-4*r)/(4*h*p),l=Math.log(Math.sqrt(u*u+1)-u),x=Math.log(Math.sqrt(r*r+1)-r)-l,w=(x||Math.log(h/f))/Od;return d.duration=1E3*w,d};N.behavior.zoom=function(){function c(b){b.on(H,u).on(Ye+".zoom",x).on("dblclick.zoom",w).on(T,l)}function d(b){return[(b[0]-m.x)/m.k,(b[1]-m.y)/m.k]}function k(b){m.k=
Math.max(V[0],Math.min(V[1],b))}function e(b,c){c=[c[0]*m.k+m.x,c[1]*m.k+m.y];m.x+=b[0]-c[0];m.y+=b[1]-c[1]}function f(b,d,h,q){b.__chart__={x:m.x,y:m.y,k:m.k};k(Math.pow(2,q));e(y=d,h);b=N.select(b);0<Q&&(b=b.transition().duration(Q));b.call(c.event)}function q(){E&&E.domain(C.range().map(function(b){return(b-m.x)/m.k}).map(C.invert));B&&B.domain(G.range().map(function(b){return(b-m.y)/m.k}).map(G.invert))}function t(b){Y++||b({type:"zoomstart"})}function r(b){q();b({type:"zoom",scale:m.k,translate:[m.x,
m.y]})}function p(b){--Y||(b({type:"zoomend"}),y=null)}function u(){var c=this,k=N.event.target,f=S.of(c,arguments),q=0,l=N.select(b(c)).on(W,function(){q=1;e(N.mouse(c),x);r(f)}).on(K,function(){l.on(W,null).on(K,null);w(q&&N.event.target===k);p(f)}),x=d(N.mouse(c)),w=na(c);Pd.call(c);t(f)}function l(){function b(){var c=N.touches(w);return x=m.k,c.forEach(function(b){b.identifier in y&&(y[b.identifier]=d(b))}),c}function c(){var d=N.event.target;N.select(d).on(C,h).on(E,q);G.push(d);for(var d=N.event.changedTouches,
k=0,e=d.length;e>k;++k)y[d[k].identifier]=null;k=b();e=Date.now();1===k.length?(500>e-g&&(d=k[0],f(w,d,y[d.identifier],Math.floor(Math.log(m.k)/Math.LN2)+1),F()),g=e):1<k.length&&(d=k[0],e=k[1],k=d[0]-e[0],d=d[1]-e[1],z=k*k+d*d)}function h(){var b,c,d,f,q=N.touches(w);Pd.call(w);for(var t=0,p=q.length;p>t;++t,f=null)if(d=q[t],f=y[d.identifier]){if(c)break;b=d;c=f}if(f){var u=(u=d[0]-b[0])*u+(u=d[1]-b[1])*u,q=z&&Math.sqrt(u/z);b=[(b[0]+d[0])/2,(b[1]+d[1])/2];c=[(c[0]+f[0])/2,(c[1]+f[1])/2];k(q*x)}g=
null;e(b,c);r(v)}function q(){if(N.event.touches.length){for(var c=N.event.changedTouches,d=0,k=c.length;k>d;++d)delete y[c[d].identifier];for(var e in y)return void b()}N.selectAll(G).on(A,null);B.on(H,u).on(T,l);D();p(v)}var x,w=this,v=S.of(w,arguments),y={},z=0,A=".zoom-"+N.event.changedTouches[0].identifier,C="touchmove"+A,E="touchend"+A,G=[],B=N.select(w),D=na(w);c();t(v);B.on(H,null).on(T,c)}function x(){var b=S.of(this,arguments);A?clearTimeout(A):(Pd.call(this),v=d(y=z||N.mouse(this)),t(b));
A=setTimeout(function(){A=null;p(b)},50);F();k(Math.pow(2,.002*Qd())*m.k);e(y,v);r(b)}function w(){var b=N.mouse(this),c=Math.log(m.k)/Math.LN2;f(this,b,d(b),N.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var v,y,z,A,g,C,E,G,B,m={x:0,y:0,k:1},I=[960,500],V=yg,Q=250,Y=0,H="mousedown.zoom",W="mousemove.zoom",K="mouseup.zoom",T="touchstart.zoom",S=D(c,"zoomstart","zoom","zoomend");return Ye||(Ye="onwheel"in bb?(Qd=function(){return-N.event.deltaY*(N.event.deltaMode?120:1)},"wheel"):"onmousewheel"in
bb?(Qd=function(){return N.event.wheelDelta},"mousewheel"):(Qd=function(){return-N.event.detail},"MozMousePixelScroll")),c.event=function(b){b.each(function(){var b=S.of(this,arguments),c=m;oc?N.select(this).transition().each("start.zoom",function(){m=this.__chart__||{x:0,y:0,k:1};t(b)}).tween("zoom:zoom",function(){var d=I[0],k=I[1],e=y?y[0]:d/2,f=y?y[1]:k/2,h=N.interpolateZoom([(e-m.x)/m.k,(f-m.y)/m.k,d/m.k],[(e-c.x)/c.k,(f-c.y)/c.k,d/c.k]);return function(c){c=h(c);var k=d/c[2];this.__chart__=
m={x:e-c[0]*k,y:f-c[1]*k,k:k};r(b)}}).each("interrupt.zoom",function(){p(b)}).each("end.zoom",function(){p(b)}):(this.__chart__=m,t(b),r(b),p(b))})},c.translate=function(b){return arguments.length?(m={x:+b[0],y:+b[1],k:m.k},q(),c):[m.x,m.y]},c.scale=function(b){return arguments.length?(m={x:m.x,y:m.y,k:+b},q(),c):m.k},c.scaleExtent=function(b){return arguments.length?(V=null==b?yg:[+b[0],+b[1]],c):V},c.center=function(b){return arguments.length?(z=b&&[+b[0],+b[1]],c):z},c.size=function(b){return arguments.length?
(I=b&&[+b[0],+b[1]],c):I},c.duration=function(b){return arguments.length?(Q=+b,c):Q},c.x=function(b){return arguments.length?(E=b,C=b.copy(),m={x:0,y:0,k:1},c):E},c.y=function(b){return arguments.length?(B=b,G=b.copy(),m={x:0,y:0,k:1},c):B},N.rebind(c,S,"on")};var Qd,Ye,yg=[0,1/0];N.color=Da;Da.prototype.toString=function(){return this.rgb()+""};N.hsl=ca;var Ze=ca.prototype=new Da;Ze.brighter=function(b){return b=Math.pow(.7,arguments.length?b:1),new ca(this.h,this.s,this.l/b)};Ze.darker=function(b){return b=
Math.pow(.7,arguments.length?b:1),new ca(this.h,this.s,b*this.l)};Ze.rgb=function(){return nb(this.h,this.s,this.l)};N.hcl=Aa;var $e=Aa.prototype=new Da;$e.brighter=function(b){return new Aa(this.h,this.c,Math.min(100,this.l+Rd*(arguments.length?b:1)))};$e.darker=function(b){return new Aa(this.h,this.c,Math.max(0,this.l-Rd*(arguments.length?b:1)))};$e.rgb=function(){return ja(this.h,this.c,this.l).rgb()};N.lab=oa;var Rd=18,gf=.95047,hf=1,jf=1.08883,af=oa.prototype=new Da;af.brighter=function(b){return new oa(Math.min(100,
this.l+Rd*(arguments.length?b:1)),this.a,this.b)};af.darker=function(b){return new oa(Math.max(0,this.l-Rd*(arguments.length?b:1)),this.a,this.b)};af.rgb=function(){return Ya(this.l,this.a,this.b)};N.rgb=za;var Sd=za.prototype=new Da;Sd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);var c=this.r,d=this.g,k=this.b;return c||d||k?(c&&30>c&&(c=30),d&&30>d&&(d=30),k&&30>k&&(k=30),new za(Math.min(255,c/b),Math.min(255,d/b),Math.min(255,k/b))):new za(30,30,30)};Sd.darker=function(b){return b=
Math.pow(.7,arguments.length?b:1),new za(b*this.r,b*this.g,b*this.b)};Sd.hsl=function(){return Ca(this.r,this.g,this.b)};Sd.toString=function(){return"#"+eb(this.r)+eb(this.g)+eb(this.b)};var $c=N.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,
cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$c.forEach(function(b,c){$c.set(b,new za(c>>16,c>>8&255,255&c))});N.functor=qa;N.xhr=Ia(z);N.dsv=function(b,c){function d(b,f,h){3>arguments.length&&(h=f,f=null);var q=fb(b,
c,null==f?k:e(f),h);return q.row=function(b){return arguments.length?q.response(null==(f=b)?k:e(b)):f},q}function k(b){return d.parse(b.responseText)}function e(b){return function(c){return d.parse(c.responseText,b)}}function f(c){return c.map(h).join(b)}function h(b){return t.test(b)?'"'+b.replace(/\"/g,'""')+'"':b}var t=new RegExp('["'+b+"\n]"),r=b.charCodeAt(0);return d.parse=function(b,c){var k;return d.parseRows(b,function(b,d){if(k)return k(b,d-1);var e=new Function("d","return {"+b.map(function(b,
c){return JSON.stringify(b)+": d["+c+"]"}).join(",")+"}");k=c?function(b,d){return c(e(b),d)}:e})},d.parseRows=function(b,c){function d(){if(p>=t)return h;if(e)return e=!1,f;var c=p;if(34===b.charCodeAt(c)){for(var k=c;k++<t;)if(34===b.charCodeAt(k)){if(34!==b.charCodeAt(k+1))break;++k}p=k+2;var q=b.charCodeAt(k+1);return 13===q?(e=!0,10===b.charCodeAt(k+2)&&++p):10===q&&(e=!0),b.slice(c+1,k).replace(/""/g,'"')}for(;t>p;){q=b.charCodeAt(p++);k=1;if(10===q)e=!0;else if(13===q)e=!0,10===b.charCodeAt(p)&&
(++p,++k);else if(q!==r)continue;return b.slice(c,p-k)}return b.slice(c)}for(var k,e,f={},h={},q=[],t=b.length,p=0,u=0;(k=d())!==h;){for(var l=[];k!==f&&k!==h;)l.push(k),k=d();c&&null==(l=c(l,u++))||q.push(l)}return q},d.format=function(c){if(Array.isArray(c[0]))return d.formatRows(c);var k=new q,e=[];return c.forEach(function(b){for(var c in b)k.has(c)||e.push(k.add(c))}),[e.map(h).join(b)].concat(c.map(function(c){return e.map(function(b){return h(c[b])}).join(b)})).join("\n")},d.formatRows=function(b){return b.map(f).join("\n")},
d};N.csv=N.dsv(",","text/csv");N.tsv=N.dsv(" ","text/tab-separated-values");var cd,dd,bd,ad,Kb,kf=this[A(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};N.timer=function(b,c,d){var k=arguments.length;2>k&&(c=0);3>k&&(d=Date.now());k={c:b,t:d+c,f:!1,n:null};dd?dd.n=k:cd=k;dd=k;bd||(ad=clearTimeout(ad),bd=1,kf(Pa))};N.timer.flush=function(){ab();ob()};N.round=function(b,c){return c?Math.round(b*(c=Math.pow(10,c)))/c:Math.round(b)};var fi="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,
c){var d=Math.pow(10,3*pa(8-c));return{scale:8<c?function(b){return b/d}:function(b){return b*d},symbol:b}});N.formatPrefix=function(b,c){var d=0;return b&&(0>b&&(b*=-1),c&&(b=N.round(b,hb(b,c))),d=1+Math.floor(1E-12+Math.log(b)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((d-1)/3)))),fi[8+d/3]};var lf=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Rg=N.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},
x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,c){return b.toPrecision(c)},e:function(b,c){return b.toExponential(c)},f:function(b,c){return b.toFixed(c)},r:function(b,c){return(b=N.round(b,hb(b,c))).toFixed(Math.max(0,Math.min(20,hb(b*(1+1E-15),c))))}}),da=N.time={},Za=Date;Wa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},
getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Sb.setUTCDate.apply(this._,arguments)},setDay:function(){Sb.setUTCDay.apply(this._,arguments)},setFullYear:function(){Sb.setUTCFullYear.apply(this._,
arguments)},setHours:function(){Sb.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Sb.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Sb.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Sb.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Sb.setUTCSeconds.apply(this._,arguments)},setTime:function(){Sb.setTime.apply(this._,arguments)}};var Sb=Date.prototype;da.year=wb(function(b){return b=da.day(b),b.setMonth(0,1),b},function(b,c){b.setFullYear(b.getFullYear()+
c)},function(b){return b.getFullYear()});da.years=da.year.range;da.years.utc=da.year.utc.range;da.day=wb(function(b){var c=new Za(2E3,0);return c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c},function(b,c){b.setDate(b.getDate()+c)},function(b){return b.getDate()-1});da.days=da.day.range;da.days.utc=da.day.utc.range;da.dayOfYear=function(b){var c=da.year(b);return Math.floor((b-c-6E4*(b.getTimezoneOffset()-c.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,
c){c=7-c;var d=da[b]=wb(function(b){return(b=da.day(b)).setDate(b.getDate()-(b.getDay()+c)%7),b},function(b,c){b.setDate(b.getDate()+7*Math.floor(c))},function(b){var d=da.year(b).getDay();return Math.floor((da.dayOfYear(b)+(d+c)%7)/7)-(d!==c)});da[b+"s"]=d.range;da[b+"s"].utc=d.utc.range;da[b+"OfYear"]=function(b){var d=da.year(b).getDay();return Math.floor((da.dayOfYear(b)+(d+c)%7)/7)}});da.week=da.sunday;da.weeks=da.sunday.range;da.weeks.utc=da.sunday.utc.range;da.weekOfYear=da.sundayOfYear;var mf=
{"-":"",_:" ",0:"0"},La=/^\s*\d+/,nf=/^%/;N.locale=function(b){return{numberFormat:Va(b),timeFormat:ed(b)}};var zg=N.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
N.format=zg.numberFormat;N.geo={};Xb.prototype={s:0,t:0,add:function(b){fc(b,this.t,Td);fc(Td.s,this.s,this);this.s?this.t+=Td.t:this.s=Td.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Td=new Xb;N.geo.stream=function(b,c){b&&Ag.hasOwnProperty(b.type)?Ag[b.type](b,c):Db(b,c)};var Ag={Feature:function(b,c){Db(b.geometry,c)},FeatureCollection:function(b,c){for(var d=b.features,k=-1,e=d.length;++k<e;)Db(d[k].geometry,c)}},of={Sphere:function(b,c){c.sphere()},Point:function(b,
c){b=b.coordinates;c.point(b[0],b[1],b[2])},MultiPoint:function(b,c){for(var d=b.coordinates,k=-1,e=d.length;++k<e;)b=d[k],c.point(b[0],b[1],b[2])},LineString:function(b,c){gc(b.coordinates,c,0)},MultiLineString:function(b,c){for(var d=b.coordinates,k=-1,e=d.length;++k<e;)gc(d[k],c,0)},Polygon:function(b,c){uc(b.coordinates,c)},MultiPolygon:function(b,c){for(var d=b.coordinates,k=-1,e=d.length;++k<e;)uc(d[k],c)},GeometryCollection:function(b,c){for(var d=b.geometries,k=-1,e=d.length;++k<e;)Db(d[k],
c)}};N.geo.area=function(b){return Fc=0,N.geo.stream(b,jb),Fc};var Fc,hc=new Xb,jb={sphere:function(){Fc+=4*la},point:C,lineStart:C,lineEnd:C,polygonStart:function(){hc.reset();jb.lineStart=pb},polygonEnd:function(){var b=2*hc;Fc+=0>b?4*la+b:b;jb.lineStart=jb.lineEnd=jb.point=C}};N.geo.bounds=function(){function b(c,d){g.push(C=[p=c,l=c]);u>d&&(u=d);d>x&&(x=d)}function c(d,k){var e=$a([d*ma,k*ma]);if(z){var f=Qa(z,e),f=Qa([f[1],-f[0],0],f);rb(f);var f=ic(f),h=d-w,t=0<h?1:-1,r=f[0]*Ga*t,h=180<pa(h);
h^(r>t*w&&t*d>r)?(f=f[1]*Ga,f>x&&(x=f)):(r=(r+360)%360-180,h^(r>t*w&&t*d>r))?(f=-f[1]*Ga,u>f&&(u=f)):(u>k&&(u=k),k>x&&(x=k));h?w>d?q(p,d)>q(p,l)&&(l=d):q(d,l)>q(p,l)&&(p=d):l>=p?(p>d&&(p=d),d>l&&(l=d)):d>w?q(p,d)>q(p,l)&&(l=d):q(d,l)>q(p,l)&&(p=d)}else b(d,k);z=e;w=d}function d(){E.point=c}function k(){C[0]=p;C[1]=l;E.point=b;z=null}function e(b,d){if(z){var k=b-w;A+=180<pa(k)?k+(0<k?360:-360):k}else v=b,y=d;jb.point(b,d);c(b,d)}function f(){jb.lineStart()}function h(){e(v,y);jb.lineEnd();pa(A)>aa&&
(p=-(l=180));C[0]=p;C[1]=l;z=null}function q(b,c){return 0>(c-=b)?c+360:c}function t(b,c){return b[0]-c[0]}function r(b,c){return c[0]<=c[1]?c[0]<=b&&b<=c[1]:b<c[0]||c[1]<b}var p,u,l,x,w,v,y,z,A,g,C,E={point:b,lineStart:d,lineEnd:k,polygonStart:function(){E.point=e;E.lineStart=f;E.lineEnd=h;A=0;jb.polygonStart()},polygonEnd:function(){jb.polygonEnd();E.point=b;E.lineStart=d;E.lineEnd=k;0>hc?(p=-(l=180),u=-(x=90)):A>aa?x=90:-aa>A&&(u=-90);C[0]=p;C[1]=l}};return function(b){x=l=-(p=u=1/0);g=[];N.geo.stream(b,
E);if(b=g.length){g.sort(t);for(var c,d=1,k=g[0],e=[k];b>d;++d)c=g[d],r(c[0],k)||r(c[1],k)?(q(k[0],c[1])>q(k[0],k[1])&&(k[1]=c[1]),q(c[0],k[1])>q(k[0],k[1])&&(k[0]=c[0])):e.push(k=c);var f,h=-(1/0);b=e.length-1;d=0;for(k=e[b];b>=d;k=c,++d)c=e[d],(f=q(k[1],c[0]))>h&&(h=f,p=c[0],l=k[1])}return g=C=null,p===1/0||u===1/0?[[NaN,NaN],[NaN,NaN]]:[[p,u],[l,x]]}}();N.geo.centroid=function(b){Jc=wc=Ob=Pb=Eb=sb=tb=gb=Yb=Zb=Fb=0;N.geo.stream(b,yb);b=Yb;var c=Zb,d=Fb,k=b*b+c*c+d*d;return ye>k&&(b=sb,c=tb,d=gb,
aa>wc&&(b=Ob,c=Pb,d=Eb),k=b*b+c*c+d*d,ye>k)?[NaN,NaN]:[Math.atan2(c,b)*Ga,ta(d/Math.sqrt(k))*Ga]};var Jc,wc,Ob,Pb,Eb,sb,tb,gb,Yb,Zb,Fb,yb={sphere:C,point:jc,lineStart:id,lineEnd:Kc,polygonStart:function(){yb.lineStart=le},polygonEnd:function(){yb.lineStart=id}},pf=md($b,function(b){var c,d=NaN,k=NaN,e=NaN;return{lineStart:function(){b.lineStart();c=1},point:function(f,h){var q=0<f?la:-la,t=pa(f-d);if(pa(t-la)<aa)b.point(d,k=0<(k+h)/2?Ka:-Ka),b.point(e,k),b.lineEnd(),b.lineStart(),b.point(q,k),b.point(f,
k),c=0;else if(e!==q&&t>=la){pa(d-e)<aa&&(d-=e*aa);pa(f-q)<aa&&(f-=q*aa);var t=d,r=k,p=f,u,l,x=Math.sin(t-p);k=pa(x)>aa?Math.atan((Math.sin(r)*(l=Math.cos(h))*Math.sin(p)-Math.sin(h)*(u=Math.cos(r))*Math.sin(t))/(u*l*x)):(r+h)/2;b.point(e,k);b.lineEnd();b.lineStart();b.point(q,k);c=0}b.point(d=f,k=h);e=q},lineEnd:function(){b.lineEnd();d=k=NaN},clean:function(){return 2-c}}},function(b,c,d,k){null==b?(d*=Ka,k.point(-la,d),k.point(0,d),k.point(la,d),k.point(la,0),k.point(la,-d),k.point(0,-d),k.point(-la,
-d),k.point(-la,0),k.point(-la,d)):pa(b[0]-c[0])>aa?(b=b[0]<c[0]?la:-la,d=d*b/2,k.point(-b,d),k.point(0,d),k.point(b,d)):k.point(c[0],c[1])},[-la,-la/2]),pd=1E9;N.geo.clipExtent=function(){var b,c,d,k,e,f,h={stream:function(b){return e&&(e.valid=!1),e=f(b),e.valid=!0,e},extent:function(q){return arguments.length?(f=lb(b=+q[0][0],c=+q[0][1],d=+q[1][0],k=+q[1][1]),e&&(e.valid=!1,e=null),h):[[b,c],[d,k]]}};return h.extent([[0,0],[960,500]])};(N.geo.conicEqualArea=function(){return Mc(ba)}).raw=ba;N.geo.albers=
function(){return N.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};N.geo.albersUsa=function(){function b(f){var h=f[0];f=f[1];return c=null,d(h,f),c||(k(h,f),c)||e(h,f),c}var c,d,k,e,f=N.geo.albers(),h=N.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),q=N.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),t={point:function(b,d){c=[b,d]}};return b.invert=function(b){var c=f.scale(),d=f.translate(),k=(b[0]-d[0])/
c,c=(b[1]-d[1])/c;return(.12<=c&&.234>c&&-.425<=k&&-.214>k?h:.166<=c&&.234>c&&-.214<=k&&-.115>k?q:f).invert(b)},b.stream=function(b){var c=f.stream(b),d=h.stream(b),k=q.stream(b);return{point:function(b,e){c.point(b,e);d.point(b,e);k.point(b,e)},sphere:function(){c.sphere();d.sphere();k.sphere()},lineStart:function(){c.lineStart();d.lineStart();k.lineStart()},lineEnd:function(){c.lineEnd();d.lineEnd();k.lineEnd()},polygonStart:function(){c.polygonStart();d.polygonStart();k.polygonStart()},polygonEnd:function(){c.polygonEnd();
d.polygonEnd();k.polygonEnd()}}},b.precision=function(c){return arguments.length?(f.precision(c),h.precision(c),q.precision(c),b):f.precision()},b.scale=function(c){return arguments.length?(f.scale(c),h.scale(.35*c),q.scale(c),b.translate(f.translate())):f.scale()},b.translate=function(c){if(!arguments.length)return f.translate();var r=f.scale(),p=+c[0],u=+c[1];return d=f.translate(c).clipExtent([[p-.455*r,u-.238*r],[p+.455*r,u+.238*r]]).stream(t).point,k=h.translate([p-.307*r,u+.201*r]).clipExtent([[p-
.425*r+aa,u+.12*r+aa],[p-.214*r-aa,u+.234*r-aa]]).stream(t).point,e=q.translate([p-.205*r,u+.212*r]).clipExtent([[p-.214*r+aa,u+.166*r+aa],[p-.115*r-aa,u+.234*r-aa]]).stream(t).point,b},b.scale(1070)};var Ud,qd,Vd,Wd,Xd,Yd,ac={point:C,lineStart:C,lineEnd:C,polygonStart:function(){qd=0;ac.lineStart=wa},polygonEnd:function(){ac.lineStart=ac.lineEnd=ac.point=C;Ud+=pa(qd/2)}},gi={point:function(b,c){Vd>b&&(Vd=b);b>Xd&&(Xd=b);Wd>c&&(Wd=c);c>Yd&&(Yd=c)},lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C},
Ab={point:Qb,lineStart:sd,lineEnd:td,polygonStart:function(){Ab.lineStart=pe},polygonEnd:function(){Ab.point=Qb;Ab.lineStart=sd;Ab.lineEnd=td}};N.geo.path=function(){function b(c){return c&&("function"==typeof h&&e.pointRadius(+h.apply(this,arguments)),f&&f.valid||(f=k(e)),N.geo.stream(c,f)),e.result()}var c,d,k,e,f,h=4.5;return b.area=function(b){return Ud=0,N.geo.stream(b,k(ac)),Ud},b.centroid=function(b){return Ob=Pb=Eb=sb=tb=gb=Yb=Zb=Fb=0,N.geo.stream(b,k(Ab)),Fb?[Yb/Fb,Zb/Fb]:gb?[sb/gb,tb/gb]:
Eb?[Ob/Eb,Pb/Eb]:[NaN,NaN]},b.bounds=function(b){return Xd=Yd=-(Vd=Wd=1/0),N.geo.stream(b,k(gi)),[[Vd,Wd],[Xd,Yd]]},b.projection=function(d){return arguments.length?(k=(c=d)?d.stream||re(d):z,f=null,b):c},b.context=function(c){return arguments.length?(e=null==(d=c)?new zb:new qe(c),"function"!=typeof h&&e.pointRadius(h),f=null,b):d},b.pointRadius=function(c){return arguments.length?(h="function"==typeof c?c:(e.pointRadius(+c),+c),b):h},b.projection(N.geo.albersUsa()).context(null)};N.geo.transform=
function(b){return{stream:function(c){c=new xd(c);for(var d in b)c[d]=b[d];return c}}};xd.prototype={point:function(b,c){this.stream.point(b,c)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};N.geo.projection=Gb;N.geo.projectionMutator=Nc;(N.geo.equirectangular=function(){return Gb(kc)}).raw=kc.invert=kc;N.geo.rotation=
function(b){function c(d){return d=b(d[0]*ma,d[1]*ma),d[0]*=Ga,d[1]*=Ga,d}return b=Hb(b[0]%360*ma,b[1]*ma,2<b.length?b[2]*ma:0),c.invert=function(c){return c=b.invert(c[0]*ma,c[1]*ma),c[0]*=Ga,c[1]*=Ga,c},c};yd.invert=kc;N.geo.circle=function(){function b(){var c="function"==typeof k?k.apply(this,arguments):k,e=Hb(-c[0]*ma,-c[1]*ma,0).invert,f=[];return d(null,null,1,{point:function(b,c){f.push(b=e(b,c));b[0]*=Ga;b[1]*=Ga}}),{type:"Polygon",coordinates:[f]}}var c,d,k=[0,0],e=6;return b.origin=function(c){return arguments.length?
(k=c,b):k},b.angle=function(k){return arguments.length?(d=oe((c=+k)*ma,e*ma),b):c},b.precision=function(k){return arguments.length?(d=oe(c*ma,(e=+k)*ma),b):e},b.angle(90)};N.geo.distance=function(b,c){var d,k=(c[0]-b[0])*ma,e=b[1]*ma,f=c[1]*ma,h=Math.cos(k),q=Math.sin(e),e=Math.cos(e),t=Math.sin(f),f=Math.cos(f);return Math.atan2(Math.sqrt((d=f*Math.sin(k))*d+(d=e*t-q*f*h)*d),q*t+e*f*h)};N.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:c()}}function c(){return N.range(Math.ceil(f/
y)*y,e,y).map(l).concat(N.range(Math.ceil(r/z)*z,t,z).map(x)).concat(N.range(Math.ceil(k/w)*w,d,w).filter(function(b){return pa(b%y)>aa}).map(p)).concat(N.range(Math.ceil(q/v)*v,h,v).filter(function(b){return pa(b%z)>aa}).map(u))}var d,k,e,f,h,q,t,r,p,u,l,x,w=10,v=w,y=90,z=360,A=2.5;return b.lines=function(){return c().map(function(b){return{type:"LineString",coordinates:b}})},b.outline=function(){return{type:"Polygon",coordinates:[l(f).concat(x(t).slice(1),l(e).reverse().slice(1),x(r).reverse().slice(1))]}},
b.extent=function(c){return arguments.length?b.majorExtent(c).minorExtent(c):b.minorExtent()},b.majorExtent=function(c){return arguments.length?(f=+c[0][0],e=+c[1][0],r=+c[0][1],t=+c[1][1],f>e&&(c=f,f=e,e=c),r>t&&(c=r,r=t,t=c),b.precision(A)):[[f,r],[e,t]]},b.minorExtent=function(c){return arguments.length?(k=+c[0][0],d=+c[1][0],q=+c[0][1],h=+c[1][1],k>d&&(c=k,k=d,d=c),q>h&&(c=q,q=h,h=c),b.precision(A)):[[k,q],[d,h]]},b.step=function(c){return arguments.length?b.majorStep(c).minorStep(c):b.minorStep()},
b.majorStep=function(c){return arguments.length?(y=+c[0],z=+c[1],b):[y,z]},b.minorStep=function(c){return arguments.length?(w=+c[0],v=+c[1],b):[w,v]},b.precision=function(c){return arguments.length?(A=+c,p=rf(q,h,90),u=sf(k,d,A),l=rf(r,t,90),x=sf(f,e,A),b):A},b.majorExtent([[-180,-90+aa],[180,90-aa]]).minorExtent([[-180,-80-aa],[180,80+aa]])};N.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[c||k.apply(this,arguments),d||e.apply(this,arguments)]}}var c,d,k=se,e=te;return b.distance=
function(){return N.geo.distance(c||k.apply(this,arguments),d||e.apply(this,arguments))},b.source=function(d){return arguments.length?(k=d,c="function"==typeof d?null:d,b):k},b.target=function(c){return arguments.length?(e=c,d="function"==typeof c?null:c,b):e},b.precision=function(){return arguments.length?b:0},b};N.geo.interpolate=function(b,c){return Sg(b[0]*ma,b[1]*ma,c[0]*ma,c[1]*ma)};N.geo.length=function(b){return Zd=0,N.geo.stream(b,Gc),Zd};var Zd,Gc={sphere:C,point:C,lineStart:function(){function b(e,
f){var h=Math.sin(f*=ma),q=Math.cos(f),t=pa((e*=ma)-c),r=Math.cos(t);Zd+=Math.atan2(Math.sqrt((t=q*Math.sin(t))*t+(t=k*h-d*q*r)*t),d*h+k*q*r);c=e;d=h;k=q}var c,d,k;Gc.point=function(e,f){c=e*ma;d=Math.sin(f*=ma);k=Math.cos(f);Gc.point=b};Gc.lineEnd=function(){Gc.point=Gc.lineEnd=C}},lineEnd:C,polygonStart:C,polygonEnd:C},Bg=Oc(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(N.geo.azimuthalEqualArea=function(){return Gb(Bg)}).raw=Bg;var Cg=Oc(function(b){return(b=Math.acos(b))&&
b/Math.sin(b)},z);(N.geo.azimuthalEquidistant=function(){return Gb(Cg)}).raw=Cg;(N.geo.conicConformal=function(){return Mc(tf)}).raw=tf;(N.geo.conicEquidistant=function(){return Mc(uf)}).raw=uf;var Dg=Oc(function(b){return 1/b},Math.atan);(N.geo.gnomonic=function(){return Gb(Dg)}).raw=Dg;zd.invert=function(b,c){return[b,2*Math.atan(Math.exp(c))-Ka]};(N.geo.mercator=function(){return vf(zd)}).raw=zd;var Eg=Oc(function(){return 1},Math.asin);(N.geo.orthographic=function(){return Gb(Eg)}).raw=Eg;var Fg=
Oc(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(N.geo.stereographic=function(){return Gb(Fg)}).raw=Fg;ue.invert=function(b,c){return[-c,2*Math.atan(Math.exp(b))-Ka]};(N.geo.transverseMercator=function(){var b=vf(ue),c=b.center,d=b.rotate;return b.center=function(b){return b?c([-b[1],b[0]]):(b=c(),[b[1],-b[0]])},b.rotate=function(b){return b?d([b[0],b[1],2<b.length?b[2]+90:90]):(b=d(),[b[0],b[1],b[2]-90])},d([0,0,90])}).raw=ue;N.geom={};N.geom.hull=function(b){function c(b){if(3>
b.length)return[];var e,f=qa(d),h=qa(k),q=b.length,t=[],r=[];for(e=0;q>e;e++)t.push([+f.call(this,b[e],e),+h.call(this,b[e],e),e]);t.sort(Tg);for(e=0;q>e;e++)r.push([t[e][0],-t[e][1]]);var f=wf(t),r=wf(r),h=r[0]===f[0],q=r[r.length-1]===f[f.length-1],p=[];for(e=f.length-1;0<=e;--e)p.push(b[t[f[e]][2]]);for(e=+h;e<r.length-q;++e)p.push(b[t[r[e]][2]]);return p}var d=zc,k=Pc;return arguments.length?c(b):(c.x=function(b){return arguments.length?(d=b,c):d},c.y=function(b){return arguments.length?(k=b,
c):k},c)};N.geom.polygon=function(b){return Yc(b,$d),b};var $d=N.geom.polygon.prototype=[];$d.area=function(){for(var b,c=-1,d=this.length,k=this[d-1],e=0;++c<d;)b=k,k=this[c],e+=b[1]*k[0]-b[0]*k[1];return.5*e};$d.centroid=function(b){var c,d,k=-1,e=this.length,f=0,h=0,q=this[e-1];for(arguments.length||(b=-1/(6*this.area()));++k<e;)c=q,q=this[k],d=c[0]*q[1]-q[0]*c[1],f+=(c[0]+q[0])*d,h+=(c[1]+q[1])*d;return[f*b,h*b]};$d.clip=function(b){for(var c,d,k,e,f,h,q=xf(b),t=-1,r=this.length-xf(this),p=this[r-
1];++t<r;){c=b.slice();b.length=0;e=this[t];f=c[(k=c.length-q)-1];for(d=-1;++d<k;)h=c[d],ve(h,p,e)?(ve(f,p,e)||b.push(we(f,h,p,e)),b.push(h)):ve(f,p,e)&&b.push(we(f,h,p,e)),f=h;q&&b.push(b[0]);p=e}return b};var Dc,lc,Bc,ze,Qc,zf=[],Df=[];Bf.prototype.prepare=function(){for(var b,c=this.edges,d=c.length;d--;)b=c[d].edge,b.b&&b.a||c.splice(d,1);return c.sort(Cf),c.length};Cd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?
this.edge.b:this.edge.a}};Ae.prototype={insert:function(b,c){var d,k,e;if(b){if(c.P=b,c.N=b.N,b.N&&(b.N.P=c),b.N=c,b.R){for(b=b.R;b.L;)b=b.L;b.L=c}else b.R=c;d=b}else this._?(b=Ff(this._),c.P=null,c.N=b,b.P=b.L=c,d=b):(c.P=c.N=null,this._=c,d=null);c.L=c.R=null;c.U=d;c.C=!0;for(b=c;d&&d.C;)k=d.U,d===k.L?(e=k.R,e&&e.C?(d.C=e.C=!1,k.C=!0,b=k):(b===d.R&&(Sc(this,d),b=d,d=b.U),d.C=!1,k.C=!0,Tc(this,k))):(e=k.L,e&&e.C?(d.C=e.C=!1,k.C=!0,b=k):(b===d.L&&(Tc(this,d),b=d,d=b.U),d.C=!1,k.C=!0,Sc(this,k))),
d=b.U;this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var c,d,k,e=b.U,f=b.L,h=b.R;if(d=f?h?Ff(h):f:h,e?e.L===b?e.L=d:e.R=d:this._=d,f&&h?(k=d.C,d.C=b.C,d.L=f,f.U=d,d!==h?(e=d.U,d.U=b.U,b=d.R,e.L=b,d.R=h,h.U=d):(d.U=e,e=d,b=d.R)):(k=b.C,b=d),b&&(b.U=e),!k){if(b&&b.C)return void(b.C=!1);do{if(b===this._)break;if(b===e.L){if(c=e.R,c.C&&(c.C=!1,e.C=!0,Sc(this,e),c=e.R),c.L&&c.L.C||c.R&&c.R.C){c.R&&c.R.C||(c.L.C=!1,c.C=!0,Tc(this,c),c=e.R);c.C=e.C;e.C=c.R.C=!1;Sc(this,e);
b=this._;break}}else if(c=e.L,c.C&&(c.C=!1,e.C=!0,Tc(this,e),c=e.L),c.L&&c.L.C||c.R&&c.R.C){c.L&&c.L.C||(c.R.C=!1,c.C=!0,Sc(this,c),c=e.L);c.C=e.C;e.C=c.L.C=!1;Tc(this,e);b=this._;break}c.C=!0;b=e;e=e.U}while(!b.C);b&&(b.C=!1)}}};N.geom.voronoi=function(b){function c(b){var k=Array(b.length),e=q[0][0],f=q[0][1],h=q[1][0],t=q[1][1];return Be(d(b),q).cells.forEach(function(c,d){var q=c.edges,r=c.site;(k[d]=q.length?q.map(function(b){b=b.start();return[b.x,b.y]}):r.x>=e&&r.x<=h&&r.y>=f&&r.y<=t?[[e,t],
[h,t],[h,f],[e,f]]:[]).point=b[d]}),k}function d(b){return b.map(function(b,c){return{x:Math.round(f(b,c)/aa)*aa,y:Math.round(h(b,c)/aa)*aa,i:c}})}var k=zc,e=Pc,f=k,h=e,q=ae;return b?c(b):(c.links=function(b){return Be(d(b)).edges.filter(function(b){return b.l&&b.r}).map(function(c){return{source:b[c.l.i],target:b[c.r.i]}})},c.triangles=function(b){var c=[];return Be(d(b)).cells.forEach(function(d,k){for(var e,f=d.site,h=d.edges.sort(Cf),q=-1,t=h.length,r=h[t-1].edge,r=r.l===f?r.r:r.l;++q<t;)e=r,
r=h[q].edge,r=r.l===f?r.r:r.l,k<e.i&&k<r.i&&0>(f.x-r.x)*(e.y-f.y)-(f.x-e.x)*(r.y-f.y)&&c.push([b[k],b[e.i],b[r.i]])}),c},c.x=function(b){return arguments.length?(f=qa(k=b),c):k},c.y=function(b){return arguments.length?(h=qa(e=b),c):e},c.clipExtent=function(b){return arguments.length?(q=null==b?ae:b,c):q===ae?null:q},c.size=function(b){return arguments.length?c.clipExtent(b&&[[0,0],b]):q===ae?null:q&&q[1]},c)};var ae=[[-1E6,-1E6],[1E6,1E6]];N.geom.delaunay=function(b){return N.geom.voronoi().triangles(b)};
N.geom.quadtree=function(b,c,d,k,e){function f(b){function r(b,c,d,k,e,f,h,q){if(!isNaN(d)&&!isNaN(k))if(b.leaf){var t=b.x,u=b.y;if(null!=t){if(!(.01>pa(t-d)+pa(u-k))){var l=b.point;b.x=b.y=b.point=null;p(b,l,t,u,e,f,h,q)}p(b,c,d,k,e,f,h,q)}else b.x=d,b.y=k,b.point=c}else p(b,c,d,k,e,f,h,q)}function p(b,c,d,k,e,f,h,q){var t=.5*(e+h),u=.5*(f+q),l=d>=t,x=k>=u,w=x<<1|l;b.leaf=!1;b=b.nodes[w]||(b.nodes[w]=Gf());l?e=t:h=t;x?f=u:q=u;r(b,c,d,k,e,f,h,q)}var u,l,x,w,v,y,z,A,g,C=qa(q),E=qa(t);if(null!=c)y=
c,z=d,A=k,g=e;else if(A=g=-(y=z=1/0),l=[],x=[],v=b.length,h)for(w=0;v>w;++w)u=b[w],u.x<y&&(y=u.x),u.y<z&&(z=u.y),u.x>A&&(A=u.x),u.y>g&&(g=u.y),l.push(u.x),x.push(u.y);else for(w=0;v>w;++w){var G=+C(u=b[w],w);u=+E(u,w);y>G&&(y=G);z>u&&(z=u);G>A&&(A=G);u>g&&(g=u);l.push(G);x.push(u)}G=A-y;u=g-z;G>u?g=z+G:A=y+u;var B=Gf();if(B.add=function(b){r(B,b,+C(b,++w),+E(b,w),y,z,A,g)},B.visit=function(b){Uc(b,B,y,z,A,g)},B.find=function(b){return ah(B,b[0],b[1],y,z,A,g)},w=-1,null==c){for(;++w<v;)r(B,b[w],l[w],
x[w],y,z,A,g);--w}else b.forEach(B.add);return l=x=b=u=null,B}var h,q=zc,t=Pc;return(h=arguments.length)?(q=Zg,t=$g,3===h&&(e=d,k=c,d=c=0),f(b)):(f.x=function(b){return arguments.length?(q=b,f):q},f.y=function(b){return arguments.length?(t=b,f):t},f.extent=function(b){return arguments.length?(null==b?c=d=k=e=null:(c=+b[0][0],d=+b[0][1],k=+b[1][0],e=+b[1][1]),f):null==c?null:[[c,d],[k,e]]},f.size=function(b){return arguments.length?(null==b?c=d=k=e=null:(c=d=0,k=+b[0],e=+b[1]),f):null==c?null:[k-c,
e-d]},f)};N.interpolateRgb=Ce;N.interpolateObject=Hf;N.interpolateNumber=Rb;N.interpolateString=If;var De=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ee=new RegExp(De.source,"g");N.interpolate=mc;N.interpolators=[function(b,c){var d=typeof c;return("string"===d?$c.has(c.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(c)?Ce:If:c instanceof Da?Ce:Array.isArray(c)?Dd:"object"===d&&isNaN(c)?Hf:Rb)(b,c)}];N.interpolateArray=Dd;var Gg=function(){return z},hi=N.map({linear:Gg,poly:function(b){return function(c){return Math.pow(c,
b)}},quad:function(){return ch},cubic:function(){return dh},sin:function(){return fh},exp:function(){return gh},circle:function(){return hh},elastic:function(b,c){var d;return 2>arguments.length&&(c=.45),arguments.length?d=c/kb*Math.asin(1/b):(b=1,d=c/4),function(k){return 1+b*Math.pow(2,-10*k)*Math.sin((k-d)*kb/c)}},back:function(b){return b||(b=1.70158),function(c){return c*c*((b+1)*c-b)}},bounce:function(){return ih}}),ii=N.map({"in":z,out:Jf,"in-out":Kf,"out-in":function(b){return Kf(Jf(b))}});
N.ease=function(b){var c=b.indexOf("-"),d=0<=c?b.slice(0,c):b,c=0<=c?b.slice(c+1):"in";return d=hi.get(d)||Gg,c=ii.get(c)||z,bh(c(d.apply(null,vg.call(arguments,1))))};N.interpolateHcl=function(b,c){b=N.hcl(b);c=N.hcl(c);var d=b.h,k=b.c,e=b.l,f=c.h-d,h=c.c-k,q=c.l-e;return isNaN(h)&&(h=0,k=isNaN(k)?c.c:k),isNaN(f)?(f=0,d=isNaN(d)?c.h:d):180<f?f-=360:-180>f&&(f+=360),function(b){return ja(d+f*b,k+h*b,e+q*b)+""}};N.interpolateHsl=function(b,c){b=N.hsl(b);c=N.hsl(c);var d=b.h,k=b.s,e=b.l,f=c.h-d,h=c.s-
k,q=c.l-e;return isNaN(h)&&(h=0,k=isNaN(k)?c.s:k),isNaN(f)?(f=0,d=isNaN(d)?c.h:d):180<f?f-=360:-180>f&&(f+=360),function(b){return nb(d+f*b,k+h*b,e+q*b)+""}};N.interpolateLab=function(b,c){b=N.lab(b);c=N.lab(c);var d=b.l,k=b.a,e=b.b,f=c.l-d,h=c.a-k,q=c.b-e;return function(b){return Ya(d+f*b,k+h*b,e+q*b)+""}};N.interpolateRound=Lf;N.transform=function(b){var c=bb.createElementNS(N.ns.prefix.svg,"g");return(N.transform=function(b){if(null!=b){c.setAttribute("transform",b);var d=c.transform.baseVal.consolidate()}return new Mf(d?
d.matrix:ji)})(b)};Mf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ji={a:1,b:0,c:0,d:1,e:0,f:0};N.interpolateTransform=Of;N.layout={};N.layout.bundle=function(){return function(b){for(var c=[],d=-1,k=b.length;++d<k;)c.push(lh(b[d]));return c}};N.layout.chord=function(){function b(){var r,u,l,x,w,v={},y=[],z=N.range(f),A=[];d=[];k=[];r=0;for(x=-1;++x<f;){u=0;for(w=-1;++w<f;)u+=e[x][w];y.push(u);A.push(N.range(f));
r+=u}h&&z.sort(function(b,c){return h(y[b],y[c])});q&&A.forEach(function(b,c){b.sort(function(b,d){return q(e[c][b],e[c][d])})});r=(kb-p*f)/r;u=0;for(x=-1;++x<f;){l=u;for(w=-1;++w<f;){var g=z[x],C=A[g][w],E=e[g][C],G=u,B=u+=E*r;v[g+"-"+C]={index:g,subindex:C,startAngle:G,endAngle:B,value:E}}k[g]={index:g,startAngle:l,endAngle:u,value:(u-l)/r};u+=p}for(x=-1;++x<f;)for(w=x-1;++w<f;)r=v[x+"-"+w],u=v[w+"-"+x],(r.value||u.value)&&d.push(r.value<u.value?{source:u,target:r}:{source:r,target:u});t&&c()}function c(){d.sort(function(b,
c){return t((b.source.value+b.target.value)/2,(c.source.value+c.target.value)/2)})}var d,k,e,f,h,q,t,r={},p=0;return r.matrix=function(b){return arguments.length?(f=(e=b)&&e.length,d=k=null,r):e},r.padding=function(b){return arguments.length?(p=b,d=k=null,r):p},r.sortGroups=function(b){return arguments.length?(h=b,d=k=null,r):h},r.sortSubgroups=function(b){return arguments.length?(q=b,d=null,r):q},r.sortChords=function(b){return arguments.length?(t=b,d&&c(),r):t},r.chords=function(){return d||b(),
d},r.groups=function(){return k||b(),k},r};N.layout.force=function(){function b(c){return function(b,d,k,e){if(b.point!==c){k=b.cx-c.x;var f=b.cy-c.y;d=e-d;e=k*k+f*f;if(e>d*d/y)return w>e&&(d=b.charge/e,c.px-=k*d,c.py-=f*d),!0;b.point&&e&&w>e&&(d=b.pointCharge/e,c.px-=k*d,c.py-=f*d)}return!b.charge}}function c(b){b.px=N.event.x;b.py=N.event.y;q.resume()}var d,k,e,f,h,q={},t=N.dispatch("start","tick","end"),r=[1,1],p=.9,u=ki,l=li,x=-30,w=mi,v=.1,y=.64,A=[],g=[];return q.tick=function(){if(.005>(k*=
.99))return t.end({type:"end",alpha:k=0}),!0;var c,d,q,u,l,w,y,z,C=A.length,E=g.length;for(d=0;E>d;++d)q=g[d],c=q.source,u=q.target,y=u.x-c.x,z=u.y-c.y,(l=y*y+z*z)&&(l=k*f[d]*((l=Math.sqrt(l))-e[d])/l,y*=l,z*=l,u.x-=y*(w=c.weight/(u.weight+c.weight)),u.y-=z*w,c.x+=y*(w=1-w),c.y+=z*w);if((w=k*v)&&(y=r[0]/2,z=r[1]/2,d=-1,w))for(;++d<C;)q=A[d],q.x+=(y-q.x)*w,q.y+=(z-q.y)*w;if(x)for(Qf(c=N.geom.quadtree(A),k,h),d=-1;++d<C;)(q=A[d]).fixed||c.visit(b(q));for(d=-1;++d<C;)q=A[d],q.fixed?(q.x=q.px,q.y=q.py):
(q.x-=(q.px-(q.px=q.x))*p,q.y-=(q.py-(q.py=q.y))*p);t.tick({type:"tick",alpha:k})},q.nodes=function(b){return arguments.length?(A=b,q):A},q.links=function(b){return arguments.length?(g=b,q):g},q.size=function(b){return arguments.length?(r=b,q):r},q.linkDistance=function(b){return arguments.length?(u="function"==typeof b?b:+b,q):u},q.distance=q.linkDistance,q.linkStrength=function(b){return arguments.length?(l="function"==typeof b?b:+b,q):l},q.friction=function(b){return arguments.length?(p=+b,q):
p},q.charge=function(b){return arguments.length?(x="function"==typeof b?b:+b,q):x},q.chargeDistance=function(b){return arguments.length?(w=b*b,q):Math.sqrt(w)},q.gravity=function(b){return arguments.length?(v=+b,q):v},q.theta=function(b){return arguments.length?(y=b*b,q):Math.sqrt(y)},q.alpha=function(b){return arguments.length?(b=+b,k?k=0<b?b:0:0<b&&(t.start({type:"start",alpha:k=b}),N.timer(q.tick)),q):k},q.start=function(){function b(k,e){if(!d){d=Array(t);for(q=0;t>q;++q)d[q]=[];for(q=0;p>q;++q){var f=
g[q];d[f.source.index].push(f.target);d[f.target.index].push(f.source)}}for(var h=d[c],q=-1,r=h.length;++q<r;)if(!isNaN(f=h[q][k]))return f;return Math.random()*e}var c,d,k,t=A.length,p=g.length,w=r[0],v=r[1];for(c=0;t>c;++c)(k=A[c]).index=c,k.weight=0;for(c=0;p>c;++c)k=g[c],"number"==typeof k.source&&(k.source=A[k.source]),"number"==typeof k.target&&(k.target=A[k.target]),++k.source.weight,++k.target.weight;for(c=0;t>c;++c)k=A[c],isNaN(k.x)&&(k.x=b("x",w)),isNaN(k.y)&&(k.y=b("y",v)),isNaN(k.px)&&
(k.px=k.x),isNaN(k.py)&&(k.py=k.y);if(e=[],"function"==typeof u)for(c=0;p>c;++c)e[c]=+u.call(this,g[c],c);else for(c=0;p>c;++c)e[c]=u;if(f=[],"function"==typeof l)for(c=0;p>c;++c)f[c]=+l.call(this,g[c],c);else for(c=0;p>c;++c)f[c]=l;if(h=[],"function"==typeof x)for(c=0;t>c;++c)h[c]=+x.call(this,A[c],c);else for(c=0;t>c;++c)h[c]=x;return q.resume()},q.resume=function(){return q.alpha(.1)},q.stop=function(){return q.alpha(0)},q.drag=function(){return d||(d=N.behavior.drag().origin(z).on("dragstart.force",
mh).on("drag.force",c).on("dragend.force",nh)),arguments.length?void this.on("mouseover.force",oh).on("mouseout.force",ph).call(d):d},N.rebind(q,t,"on")};var ki=20,li=1,mi=1/0;N.layout.hierarchy=function(){function b(e){var f,h=[e],q=[];for(e.depth=0;null!=(f=h.pop());)if(q.push(f),(r=d.call(b,f,f.depth))&&(t=r.length)){for(var t,r,p;0<=--t;)h.push(p=r[t]),p.parent=f,p.depth=f.depth+1;k&&(f.value=0);f.children=r}else k&&(f.value=+k.call(b,f,f.depth)||0),delete f.children;return Ib(e,function(b){var d,
e;c&&(d=b.children)&&d.sort(c);k&&(e=b.parent)&&(e.value+=b.value)}),q}var c=th,d=rh,k=sh;return b.sort=function(d){return arguments.length?(c=d,b):c},b.children=function(c){return arguments.length?(d=c,b):d},b.value=function(c){return arguments.length?(k=c,b):k},b.revalue=function(c){return k&&(Wc(c,function(b){b.children&&(b.value=0)}),Ib(c,function(c){var d;c.children||(c.value=+k.call(b,c,c.depth)||0);(d=c.parent)&&(d.value+=c.value)})),c},b};N.layout.partition=function(){function b(c,d,k,e){var f=
c.children;if(c.x=d,c.y=c.depth*e,c.dx=k,c.dy=e,f&&(h=f.length)){var h,q,t=-1;for(k=c.value?k/c.value:0;++t<h;)b(q=f[t],d,c=q.value*k,e),d+=c}}function c(b){b=b.children;var d=0;if(b&&(k=b.length))for(var k,e=-1;++e<k;)d=Math.max(d,c(b[e]));return 1+d}function d(f,h){var q=k.call(this,f,h);return b(q[0],0,e[0],e[1]/c(q[0])),q}var k=N.layout.hierarchy(),e=[1,1];return d.size=function(b){return arguments.length?(e=b,d):e},Vc(d,k)};N.layout.pie=function(){function b(h){var q,t=h.length,r=h.map(function(d,
k){return+c.call(b,d,k)}),p=+("function"==typeof k?k.apply(this,arguments):k),u=("function"==typeof e?e.apply(this,arguments):e)-p,l=Math.min(Math.abs(u)/t,+("function"==typeof f?f.apply(this,arguments):f)),x=l*(0>u?-1:1),w=(u-t*x)/N.sum(r),t=N.range(t),v=[];return null!=d&&t.sort(d===Hg?function(b,c){return r[c]-r[b]}:function(b,c){return d(h[b],h[c])}),t.forEach(function(b){v[b]={data:h[b],value:q=r[b],startAngle:p,endAngle:p+=q*w+x,padAngle:l}}),v}var c=Number,d=Hg,k=0,e=kb,f=0;return b.value=
function(d){return arguments.length?(c=d,b):c},b.sort=function(c){return arguments.length?(d=c,b):d},b.startAngle=function(c){return arguments.length?(k=c,b):k},b.endAngle=function(c){return arguments.length?(e=c,b):e},b.padAngle=function(c){return arguments.length?(f=c,b):f},b};var Hg={};N.layout.stack=function(){function b(q,t){if(!(l=q.length))return q;var r=q.map(function(d,k){return c.call(b,d,k)}),p=r.map(function(c){return c.map(function(c,d){return[f.call(b,c,d),h.call(b,c,d)]})}),u=d.call(b,
p,t),r=N.permute(r,u),p=N.permute(p,u),l,x,w,v=k.call(b,p,t),y=r[0].length;for(x=0;y>x;++x)for(e.call(b,r[0][x],w=v[x],p[0][x][1]),u=1;l>u;++u)e.call(b,r[u][x],w+=p[u-1][x][1],p[u][x][1]);return q}var c=z,d=Fe,k=Ge,e=wh,f=uh,h=vh;return b.values=function(d){return arguments.length?(c=d,b):c},b.order=function(c){return arguments.length?(d="function"==typeof c?c:ni.get(c)||Fe,b):d},b.offset=function(c){return arguments.length?(k="function"==typeof c?c:oi.get(c)||Ge,b):k},b.x=function(c){return arguments.length?
(f=c,b):f},b.y=function(c){return arguments.length?(h=c,b):h},b.out=function(c){return arguments.length?(e=c,b):e},b};var ni=N.map({"inside-out":function(b){var c,d=b.length,k=b.map(xh),e=b.map(yh),f=N.range(d).sort(function(b,c){return k[b]-k[c]}),h=0,q=0,t=[],r=[];for(b=0;d>b;++b)c=f[b],q>h?(h+=e[c],t.push(c)):(q+=e[c],r.push(c));return r.reverse().concat(t)},reverse:function(b){return N.range(b.length).reverse()},"default":Fe}),oi=N.map({silhouette:function(b){var c,d,k,e=b.length,f=b[0].length,
h=[],q=0,t=[];for(d=0;f>d;++d){for(k=c=0;e>c;c++)k+=b[c][d][1];k>q&&(q=k);h.push(k)}for(d=0;f>d;++d)t[d]=(q-h[d])/2;return t},wiggle:function(b){var c,d,k,e,f,h,q,t,r,p=b.length,u=b[0],l=u.length,x=[];x[0]=t=r=0;for(d=1;l>d;++d){for(e=c=0;p>c;++c)e+=b[c][d][1];f=c=0;for(q=u[d][0]-u[d-1][0];p>c;++c){k=0;for(h=(b[c][d][1]-b[c][d-1][1])/(2*q);c>k;++k)h+=(b[k][d][1]-b[k][d-1][1])/q;f+=h*b[c][d][1]}x[d]=t-=e?f/e*q:0;r>t&&(r=t)}for(d=0;l>d;++d)x[d]-=r;return x},expand:function(b){var c,d,k,e=b.length,f=
b[0].length,h=1/e,q=[];for(d=0;f>d;++d){for(k=c=0;e>c;c++)k+=b[c][d][1];if(k)for(c=0;e>c;c++)b[c][d][1]/=k;else for(c=0;e>c;c++)b[c][d][1]=h}for(d=0;f>d;++d)q[d]=0;return q},zero:Ge});N.layout.histogram=function(){function b(f,h){var q,t,r=[],p=f.map(d,this),u=k.call(this,p,h),l=e.call(this,u,p,h);h=-1;for(var x=p.length,w=l.length-1,v=c?1:1/x;++h<w;)q=r[h]=[],q.dx=l[h+1]-(q.x=l[h]),q.y=0;if(0<w)for(h=-1;++h<x;)t=p[h],t>=u[0]&&t<=u[1]&&(q=r[N.bisect(l,t,1,w)-1],q.y+=v,q.push(f[h]));return r}var c=
!0,d=Number,k=Bh,e=Ah;return b.value=function(c){return arguments.length?(d=c,b):d},b.range=function(c){return arguments.length?(k=qa(c),b):k},b.bins=function(c){return arguments.length?(e="number"==typeof c?function(b){return Rf(b,c)}:qa(c),b):e},b.frequency=function(d){return arguments.length?(c=!!d,b):c},b};N.layout.pack=function(){function b(f,h){var q=d.call(this,f,h),t=q[0],r=e[0],p=e[1],u=null==c?Math.sqrt:"function"==typeof c?c:function(){return c};if(t.x=t.y=0,Ib(t,function(b){b.r=+u(b.value)}),
Ib(t,Uf),k){var l=k*(c?1:Math.max(2*t.r/r,2*t.r/p))/2;Ib(t,function(b){b.r+=l});Ib(t,Uf);Ib(t,function(b){b.r-=l})}return Wf(t,r/2,p/2,c?1:1/Math.max(2*t.r/r,2*t.r/p)),q}var c,d=N.layout.hierarchy().sort(Ch),k=0,e=[1,1];return b.size=function(c){return arguments.length?(e=c,b):e},b.radius=function(d){return arguments.length?(c=null==d||"function"==typeof d?d:+d,b):c},b.padding=function(c){return arguments.length?(k=+c,b):k},Vc(b,d)};N.layout.tree=function(){function b(r,p){var u=f.call(this,r,p),
l=u[0],x=c(l);if(Ib(x,d),x.parent.m=-x.z,Wc(x,k),t)Wc(l,e);else{var w=l,v=l,y=l;Wc(l,function(b){b.x<w.x&&(w=b);b.x>v.x&&(v=b);b.depth>y.depth&&(y=b)});var z=h(w,v)/2-w.x,A=q[0]/(v.x+h(v,w)/2+z),g=q[1]/(y.depth||1);Wc(l,function(b){b.x=(b.x+z)*A;b.y=b.depth*g})}return u}function c(b){for(var d={A:null,children:[b]},k=[d];null!=(b=k.pop());)for(var e,f=b.children,h=0,q=f.length;q>h;++h)k.push((f[h]=e={_:f[h],parent:b,children:(e=f[h].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:h}).a=
e);return d.children[0]}function d(b){var c=b.children,k=b.parent.children,e=b.i?k[b.i-1]:null;if(c.length){for(var f,q=0,t=0,r=b.children,p=r.length;0<=--p;)f=r[p],f.z+=q,f.m+=q,q+=f.s+(t+=f.c);c=(c[0].z+c[c.length-1].z)/2;e?(b.z=e.z+h(b._,e._),b.m=b.z-c):b.z=c}else e&&(b.z=e.z+h(b._,e._));c=b.parent;k=b.parent.A||k[0];if(e){for(var q=f=b,t=e,r=f.parent.children[0],p=f.m,u=q.m,l=t.m,x=r.m;t=Je(t),f=Ie(f),t&&f;){r=Ie(r);q=Je(q);q.a=b;e=t.z+l-f.z-p+h(t._,f._);if(0<e){var w=t.a.parent===b.parent?t.a:
k,v=b,y=e,z=y/(v.i-w.i);v.c-=z;v.s+=y;w.c+=z;v.z+=y;v.m+=y;p+=e;u+=e}l+=t.m;p+=f.m;x+=r.m;u+=q.m}t&&!Je(q)&&(q.t=t,q.m+=l-u);f&&!Ie(r)&&(r.t=f,r.m+=p-x,k=b)}c.A=k}function k(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function e(b){b.x*=q[0];b.y=b.depth*q[1]}var f=N.layout.hierarchy().sort(null).value(null),h=Xf,q=[1,1],t=null;return b.separation=function(c){return arguments.length?(h=c,b):h},b.size=function(c){return arguments.length?(t=null==(q=c)?e:null,b):t?null:q},b.nodeSize=function(c){return arguments.length?
(t=null==(q=c)?null:e,b):t?q:null},Vc(b,f)};N.layout.cluster=function(){function b(f,h){var q,t=c.call(this,f,h),r=t[0],p=0;Ib(r,function(b){var c=b.children;c&&c.length?(b.x=Gh(c),b.y=Fh(c)):(b.x=q?p+=d(b,q):0,b.y=0,q=b)});var u=Yf(r),l=Zf(r),x=u.x-d(u,l)/2,w=l.x+d(l,u)/2;return Ib(r,e?function(b){b.x=(b.x-r.x)*k[0];b.y=(r.y-b.y)*k[1]}:function(b){b.x=(b.x-x)/(w-x)*k[0];b.y=(1-(r.y?b.y/r.y:1))*k[1]}),t}var c=N.layout.hierarchy().sort(null).value(null),d=Xf,k=[1,1],e=!1;return b.separation=function(c){return arguments.length?
(d=c,b):d},b.size=function(c){return arguments.length?(e=null==(k=c),b):e?null:k},b.nodeSize=function(c){return arguments.length?(e=null!=(k=c),b):e?k:null},Vc(b,c)};N.layout.treemap=function(){function b(c,d){for(var k,e,f=-1,h=c.length;++f<h;)e=(k=c[f]).value*(0>d?0:d),k.area=isNaN(e)||0>=e?0:e}function c(d){var e=d.children;if(e&&e.length){var f,h=p(d),q=[],t=e.slice(),r=1/0,u="slice"===l?h.dx:"dice"===l?h.dy:"slice-dice"===l?1&d.depth?h.dy:h.dx:Math.min(h.dx,h.dy);b(t,h.dx*h.dy/d.value);for(q.area=
0;0<(d=t.length);){q.push(d=t[d-1]);q.area+=d.area;var w;if(!(w="squarify"!==l)){d=u;f=void 0;var v=q.area;w=0;for(var y=1/0,z=-1,A=q.length;++z<A;)(f=q[z].area)&&(y>f&&(y=f),f>w&&(w=f));w=(f=(v*=v,d*=d,v?Math.max(d*w*x/v,v/(d*y*x)):1/0))<=r}w?(t.pop(),r=f):(q.area-=q.pop().area,k(q,u,h,!1),u=Math.min(h.dx,h.dy),q.length=q.area=0,r=1/0)}q.length&&(k(q,u,h,!0),q.length=q.area=0);e.forEach(c)}}function d(c){var e=c.children;if(e&&e.length){var f=p(c),h=e.slice(),q=[];b(h,f.dx*f.dy/c.value);for(q.area=
0;c=h.pop();)q.push(c),q.area+=c.area,null!=c.z&&(k(q,c.z?f.dx:f.dy,f,!h.length),q.length=q.area=0);e.forEach(d)}}function k(b,c,d,e){var f,h=-1,t=b.length,r=d.x,p=d.y,u=c?q(b.area/c):0;if(c==d.dx){for((e||u>d.dy)&&(u=d.dy);++h<t;)f=b[h],f.x=r,f.y=p,f.dy=u,r+=f.dx=Math.min(d.x+d.dx-r,u?q(f.area/u):0);f.z=!0;f.dx+=d.x+d.dx-r;d.y+=u;d.dy-=u}else{for((e||u>d.dx)&&(u=d.dx);++h<t;)f=b[h],f.x=r,f.y=p,f.dx=u,p+=f.dy=Math.min(d.y+d.dy-p,u?q(f.area/u):0);f.z=!1;f.dy+=d.y+d.dy-p;d.x+=u;d.dx-=u}}function e(k){k=
f||h(k);var q=k[0];return q.x=0,q.y=0,q.dx=t[0],q.dy=t[1],f&&h.revalue(q),b([q],q.dx*q.dy/q.value),(f?d:c)(q),u&&(f=k),k}var f,h=N.layout.hierarchy(),q=Math.round,t=[1,1],r=null,p=Ke,u=!1,l="squarify",x=.5*(1+Math.sqrt(5));return e.size=function(b){return arguments.length?(t=b,e):t},e.padding=function(b){function c(d){var k=b.call(e,d,d.depth);return null==k?Ke(d):$f(d,"number"==typeof k?[k,k,k,k]:k)}function d(c){return $f(c,b)}if(!arguments.length)return r;var k;return p=null==(r=b)?Ke:"function"==
(k=typeof b)?c:"number"===k?(b=[b,b,b,b],d):d,e},e.round=function(b){return arguments.length?(q=b?Math.round:Number,e):q!=Number},e.sticky=function(b){return arguments.length?(u=b,f=null,e):u},e.ratio=function(b){return arguments.length?(x=b,e):x},e.mode=function(b){return arguments.length?(l=b+"",e):l},Vc(e,h)};N.random={normal:function(b,c){var d=arguments.length;return 2>d&&(c=1),1>d&&(b=0),function(){var d,k;do d=2*Math.random()-1,k=2*Math.random()-1,k=d*d+k*k;while(!k||1<k);return b+c*d*Math.sqrt(-2*
Math.log(k)/k)}},logNormal:function(){var b=N.random.normal.apply(N,arguments);return function(){return Math.exp(b())}},bates:function(b){var c=N.random.irwinHall(b);return function(){return c()/b}},irwinHall:function(b){return function(){for(var c=0,d=0;b>d;d++)c+=Math.random();return c}}};N.scale={};var Ih={floor:z,ceil:z};N.scale.linear=function(){return bg([0,1],[0,1],mc,!1)};var Lh={s:1,g:1,p:1,r:1,e:1};N.scale.log=function(){return cg(N.scale.linear().domain([0,1]),10,!0,[1,10])};var dg=N.format(".0e"),
Mh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};N.scale.pow=function(){return eg(N.scale.linear(),1,[0,1])};N.scale.sqrt=function(){return N.scale.pow().exponent(.5)};N.scale.ordinal=function(){return fg([],{t:"range",a:[[]]})};N.scale.category10=function(){return N.scale.ordinal().range(pi)};N.scale.category20=function(){return N.scale.ordinal().range(qi)};N.scale.category20b=function(){return N.scale.ordinal().range(ri)};N.scale.category20c=function(){return N.scale.ordinal().range(si)};
var pi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ta),qi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ta),ri=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ta),si=[3244733,7057110,10406625,
13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ta);N.scale.quantile=function(){return gg([],[])};N.scale.quantize=function(){return hg(0,1,[0,1])};N.scale.threshold=function(){return ig([.5],[0,1])};N.scale.identity=function(){return jg([0,1])};N.svg={};N.svg.arc=function(){function b(){var r=Math.max(0,+d.apply(this,arguments)),p=Math.max(0,+k.apply(this,arguments)),u=q.apply(this,arguments)-
Ka,l=h.apply(this,arguments)-Ka,x=Math.abs(l-u),w=u>l?0:1;if(r>p&&(v=p,p=r,r=v),x>=ei)return c(p,w)+(r?c(r,1-w):"")+"Z";var v,y,z,A,g,C,E,G,B,F;E=v=0;x=[];((A=(+t.apply(this,arguments)||0)/2)&&(z=f===be?Math.sqrt(r*r+p*p):+f.apply(this,arguments),w||(E*=-1),p&&(E=ta(z/p*Math.sin(A))),r&&(v=ta(z/r*Math.sin(A)))),p)?(z=p*Math.cos(u+E),A=p*Math.sin(u+E),g=p*Math.cos(l-E),C=p*Math.sin(l-E),y=Math.abs(l-u-2*E)<=la?0:1,E&&Id(z,A,g,C)===w^y&&(g=(u+l)/2,z=p*Math.cos(g),A=p*Math.sin(g),g=C=null)):z=A=0;if(r){E=
r*Math.cos(l-v);G=r*Math.sin(l-v);B=r*Math.cos(u+v);F=r*Math.sin(u+v);var m=Math.abs(u-l+2*v)<=la?0:1;v&&Id(E,G,B,F)===1-w^m&&(B=(u+l)/2,E=r*Math.cos(B),G=r*Math.sin(B),B=F=null)}else E=G=0;if(.001<(v=Math.min(Math.abs(p-r)/2,+e.apply(this,arguments)))){y=p>r^w?0:1;var m=null==B?[E,G]:null==g?[z,A]:we([z,A],[B,F],[g,C],[E,G]),u=z-m[0],l=A-m[1],D=g-m[0],I=C-m[1],u=1/Math.sin(Math.acos((u*D+l*I)/(Math.sqrt(u*u+l*l)*Math.sqrt(D*D+I*I)))/2),m=Math.sqrt(m[0]*m[0]+m[1]*m[1]);null!=g?(l=Math.min(v,(p-m)/
(u+1)),D=Jd(null==B?[E,G]:[B,F],[z,A],p,l,w),I=Jd([g,C],[E,G],p,l,w),v===l?x.push("M",D[0],"A",l,",",l," 0 0,",y," ",D[1],"A",p,",",p," 0 ",1-w^Id(D[1][0],D[1][1],I[1][0],I[1][1]),",",w," ",I[1],"A",l,",",l," 0 0,",y," ",I[0]):x.push("M",D[0],"A",l,",",l," 0 1,",y," ",I[0])):x.push("M",z,",",A);null!=B?(p=Math.min(v,(r-m)/(u-1)),B=Jd([z,A],[B,F],r,-p,w),g=Jd([E,G],null==g?[z,A]:[g,C],r,-p,w),v===p?x.push("L",g[0],"A",p,",",p," 0 0,",y," ",g[1],"A",r,",",r," 0 ",w^Id(g[1][0],g[1][1],B[1][0],B[1][1]),
",",1-w," ",B[1],"A",p,",",p," 0 0,",y," ",B[0]):x.push("L",g[0],"A",p,",",p," 0 0,",y," ",B[0])):x.push("L",E,",",G)}else x.push("M",z,",",A),null!=g&&x.push("A",p,",",p," 0 ",y,",",w," ",g,",",C),x.push("L",E,",",G),null!=B&&x.push("A",r,",",r," 0 ",m,",",1-w," ",B,",",F);return x.push("Z"),x.join("")}function c(b,d){return"M0,"+b+"A"+b+","+b+" 0 1,"+d+" 0,"+-b+"A"+b+","+b+" 0 1,"+d+" 0,"+b}var d=Oh,k=Ph,e=Nh,f=be,q=kg,h=lg,t=Qh;return b.innerRadius=function(c){return arguments.length?(d=qa(c),
b):d},b.outerRadius=function(c){return arguments.length?(k=qa(c),b):k},b.cornerRadius=function(c){return arguments.length?(e=qa(c),b):e},b.padRadius=function(c){return arguments.length?(f=c==be?be:qa(c),b):f},b.startAngle=function(c){return arguments.length?(q=qa(c),b):q},b.endAngle=function(c){return arguments.length?(h=qa(c),b):h},b.padAngle=function(c){return arguments.length?(t=qa(c),b):t},b.centroid=function(){var b=(+d.apply(this,arguments)+ +k.apply(this,arguments))/2,c=(+q.apply(this,arguments)+
+h.apply(this,arguments))/2-Ka;return[Math.cos(c)*b,Math.sin(c)*b]},b};var be="auto";N.svg.line=function(){return mg(z)};var Ne=N.map({linear:mb,"linear-closed":function(b){return mb(b)+"Z"},step:function(b){for(var c=0,d=b.length,k=b[0],e=[k[0],",",k[1]];++c<d;)e.push("H",(k[0]+(k=b[c])[0])/2,"V",k[1]);return 1<d&&e.push("H",k[0]),e.join("")},"step-before":Oe,"step-after":Pe,basis:ng,"basis-open":function(b){if(4>b.length)return mb(b);for(var c,d=[],k=-1,e=b.length,f=[0],q=[0];3>++k;)c=b[k],f.push(c[0]),
q.push(c[1]);d.push(ub(cc,f)+","+ub(cc,q));for(--k;++k<e;)c=b[k],f.shift(),f.push(c[0]),q.shift(),q.push(c[1]),Re(d,f,q);return d.join("")},"basis-closed":function(b){for(var c,d,k=-1,e=b.length,f=e+4,q=[],h=[];4>++k;)d=b[k%e],q.push(d[0]),h.push(d[1]);c=[ub(cc,q),",",ub(cc,h)];for(--k;++k<f;)d=b[k%e],q.shift(),q.push(d[0]),h.shift(),h.push(d[1]),Re(c,q,h);return c.join("")},bundle:function(b,c){var d=b.length-1;if(d)for(var k,e,f=b[0][0],q=b[0][1],h=b[d][0]-f,t=b[d][1]-q,r=-1;++r<=d;)k=b[r],e=r/
d,k[0]=c*k[0]+(1-c)*(f+e*h),k[1]=c*k[1]+(1-c)*(q+e*t);return ng(b)},cardinal:function(b,c){return 3>b.length?mb(b):b[0]+Kd(b,Qe(b,c))},"cardinal-open":function(b,c){return 4>b.length?mb(b):b[1]+Kd(b.slice(1,-1),Qe(b,c))},"cardinal-closed":function(b,c){return 3>b.length?mb(b):b[0]+Kd((b.push(b[0]),b),Qe([b[b.length-2]].concat(b,[b[1]]),c))},monotone:function(b){if(3>b.length)b=mb(b);else{var c=b[0],d,k,e,f,q=[],h;d=0;h=b.length-1;for(var t=[],r=b[1],p=t[0]=Se(b[0],r);++d<h;)t[d]=(p+(p=Se(r,r=b[d+
1])))/2;h=(t[d]=p,t);t=-1;for(r=b.length-1;++t<r;)d=Se(b[t],b[t+1]),pa(d)<aa?h[t]=h[t+1]=0:(k=h[t]/d,e=h[t+1]/d,f=k*k+e*e,9<f&&(f=3*d/Math.sqrt(f),h[t]=f*k,h[t+1]=f*e));for(t=-1;++t<=r;)f=(b[Math.min(r,t+1)][0]-b[Math.max(0,t-1)][0])/(6*(1+h[t]*h[t])),q.push([f||0,h[t]*f||0]);b=c+Kd(b,q)}return b}});Ne.forEach(function(b,c){c.key=b;c.closed=/-closed$/.test(b)});var og=[0,2/3,1/3,0],pg=[0,1/3,2/3,0],cc=[0,1/6,2/3,1/6];N.svg.line.radial=function(){var b=mg(qg);return b.radius=b.x,delete b.x,b.angle=
b.y,delete b.y,b};Oe.reverse=Pe;Pe.reverse=Oe;N.svg.area=function(){return rg(z)};N.svg.area.radial=function(){var b=rg(qg);return b.radius=b.x,delete b.x,b.innerRadius=b.x0,delete b.x0,b.outerRadius=b.x1,delete b.x1,b.angle=b.y,delete b.y,b.startAngle=b.y0,delete b.y0,b.endAngle=b.y1,delete b.y1,b};N.svg.chord=function(){function b(f,h){var q=c(this,k,f,h),t=c(this,e,f,h);return"M"+q.p0+d(q.r,q.p1,q.a1-q.a0)+(q.a0==t.a0&&q.a1==t.a1?"Q 0,0 "+q.p0:"Q 0,0 "+t.p0+d(t.r,t.p1,t.a1-t.a0)+("Q 0,0 "+q.p0))+
"Z"}function c(b,d,k,e){var t=d.call(b,k,e);d=f.call(b,t,e);k=h.call(b,t,e)-Ka;b=q.call(b,t,e)-Ka;return{r:d,a0:k,a1:b,p0:[d*Math.cos(k),d*Math.sin(k)],p1:[d*Math.cos(b),d*Math.sin(b)]}}function d(b,c,k){return"A"+b+","+b+" 0 "+ +(k>la)+",1 "+c}var k=se,e=te,f=Rh,h=kg,q=lg;return b.radius=function(c){return arguments.length?(f=qa(c),b):f},b.source=function(c){return arguments.length?(k=qa(c),b):k},b.target=function(c){return arguments.length?(e=qa(c),b):e},b.startAngle=function(c){return arguments.length?
(h=qa(c),b):h},b.endAngle=function(c){return arguments.length?(q=qa(c),b):q},b};N.svg.diagonal=function(){function b(e,f){var q=c.call(this,e,f),h=d.call(this,e,f),t=(q.y+h.y)/2,q=[q,{x:q.x,y:t},{x:h.x,y:t},h];return q=q.map(k),"M"+q[0]+"C"+q[1]+" "+q[2]+" "+q[3]}var c=se,d=te,k=sg;return b.source=function(d){return arguments.length?(c=qa(d),b):c},b.target=function(c){return arguments.length?(d=qa(c),b):d},b.projection=function(c){return arguments.length?(k=c,b):k},b};N.svg.diagonal.radial=function(){var b=
N.svg.diagonal(),c=sg,d=b.projection;return b.projection=function(b){return arguments.length?d(Sh(c=b)):c},b};N.svg.symbol=function(){function b(k,e){return(Ig.get(c.call(this,k,e))||tg)(d.call(this,k,e))}var c=Uh,d=Th;return b.type=function(d){return arguments.length?(c=qa(d),b):c},b.size=function(c){return arguments.length?(d=qa(c),b):d},b};var Ig=N.map({circle:tg,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+
-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*Jg));var c=b*Jg;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/ce);var c=b*ce/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(b){b=Math.sqrt(b/ce);var c=b*ce/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});N.svg.symbolTypes=Ig.keys();var ce=Math.sqrt(3),Jg=Math.tan(30*ma);xa.transition=function(b){for(var c,
d=oc||++Kg,k=Ue(b),e=[],f=de||{time:Date.now(),ease:eh,delay:0,duration:250},q=-1,h=this.length;++q<h;){e.push(b=[]);for(var t=this[q],r=-1,p=t.length;++r<p;)(c=t[r])&&Ld(c,r,k,d,f),b.push(c)}return Xc(e,k,d)};xa.interrupt=function(b){return this.each(null==b?Pd:ug(Ue(b)))};var oc,de,Pd=ug(Ue()),Ra=[],Kg=0;Ra.call=xa.call;Ra.empty=xa.empty;Ra.node=xa.node;Ra.size=xa.size;N.transition=function(b,c){return b&&b.transition?oc?b.transition(c):b:N.selection().transition(b)};N.transition.prototype=Ra;Ra.select=
function(b){var c,d,k,e=this.id,f=this.namespace,q=[];b=K(b);for(var h=-1,t=this.length;++h<t;){q.push(c=[]);for(var r=this[h],p=-1,u=r.length;++p<u;)(k=r[p])&&(d=b.call(k,k.__data__,p,h))?("__data__"in k&&(d.__data__=k.__data__),Ld(d,p,f,e,k[f][e]),c.push(d)):c.push(null)}return Xc(q,f,e)};Ra.selectAll=function(b){var c,d,k,e,f=this.id,q=this.namespace,h=[];b=O(b);for(var t=-1,r=this.length;++t<r;)for(var p=this[t],u=-1,l=p.length;++u<l;)if(c=p[u]){e=c[q][f];d=b.call(c,c.__data__,u,t);h.push(c=[]);
for(var x=-1,w=d.length;++x<w;)(k=d[x])&&Ld(k,x,q,f,e),c.push(k)}return Xc(h,q,f)};Ra.filter=function(b){var c,d,k,e=[];"function"!=typeof b&&(b=Y(b));for(var f=0,q=this.length;q>f;f++){e.push(c=[]);d=this[f];for(var h=0,t=d.length;t>h;h++)(k=d[h])&&b.call(k,k.__data__,h,f)&&c.push(k)}return Xc(e,this.namespace,this.id)};Ra.tween=function(b,c){var d=this.id,k=this.namespace;return 2>arguments.length?this.node()[k][d].tween.get(b):Z(this,null==c?function(c){c[k][d].tween.remove(b)}:function(e){e[k][d].tween.set(b,
c)})};Ra.attr=function(b,c){function d(){this.removeAttribute(h)}function k(){this.removeAttributeNS(h.space,h.local)}function e(b){return null==b?d:(b+="",function(){var c,d=this.getAttribute(h);return d!==b&&(c=q(d,b),function(b){this.setAttribute(h,c(b))})})}function f(b){return null==b?k:(b+="",function(){var c,d=this.getAttributeNS(h.space,h.local);return d!==b&&(c=q(d,b),function(b){this.setAttributeNS(h.space,h.local,c(b))})})}if(2>arguments.length){for(c in b)this.attr(c,b[c]);return this}var q=
"transform"==b?Of:mc,h=N.ns.qualify(b);return Te(this,"attr."+b,c,h.local?f:e)};Ra.attrTween=function(b,c){function d(b,k){var f=c.call(this,b,k,this.getAttribute(e));return f&&function(b){this.setAttribute(e,f(b))}}function k(b,d){var f=c.call(this,b,d,this.getAttributeNS(e.space,e.local));return f&&function(b){this.setAttributeNS(e.space,e.local,f(b))}}var e=N.ns.qualify(b);return this.tween("attr."+b,e.local?k:d)};Ra.style=function(c,d,k){function e(){this.style.removeProperty(c)}var f=arguments.length;
if(3>f){if("string"!=typeof c){2>f&&(d="");for(k in c)this.style(k,c[k],d);return this}k=""}return Te(this,"style."+c,d,function(d){return null==d?e:(d+="",function(){var e,f=b(this).getComputedStyle(this,null).getPropertyValue(c);return f!==d&&(e=mc(f,d),function(b){this.style.setProperty(c,e(b),k)})})})};Ra.styleTween=function(c,d,k){return 3>arguments.length&&(k=""),this.tween("style."+c,function(e,f){var q=d.call(this,e,f,b(this).getComputedStyle(this,null).getPropertyValue(c));return q&&function(b){this.style.setProperty(c,
q(b),k)}})};Ra.text=function(b){return Te(this,"text",b,Vh)};Ra.remove=function(){var b=this.namespace;return this.each("end.transition",function(){var c;2>this[b].count&&(c=this.parentNode)&&c.removeChild(this)})};Ra.ease=function(b){var c=this.id,d=this.namespace;return 1>arguments.length?this.node()[d][c].ease:("function"!=typeof b&&(b=N.ease.apply(N,arguments)),Z(this,function(k){k[d][c].ease=b}))};Ra.delay=function(b){var c=this.id,d=this.namespace;return 1>arguments.length?this.node()[d][c].delay:
Z(this,"function"==typeof b?function(k,e,f){k[d][c].delay=+b.call(k,k.__data__,e,f)}:(b=+b,function(k){k[d][c].delay=b}))};Ra.duration=function(b){var c=this.id,d=this.namespace;return 1>arguments.length?this.node()[d][c].duration:Z(this,"function"==typeof b?function(k,e,f){k[d][c].duration=Math.max(1,b.call(k,k.__data__,e,f))}:(b=Math.max(1,b),function(k){k[d][c].duration=b}))};Ra.each=function(b,c){var d=this.id,k=this.namespace;if(2>arguments.length){var e=de,f=oc;try{oc=d,Z(this,function(c,e,
f){de=c[k][d];b.call(c,c.__data__,e,f)})}finally{de=e,oc=f}}else Z(this,function(e){e=e[k][d];(e.event||(e.event=N.dispatch("start","end","interrupt"))).on(b,c)});return this};Ra.transition=function(){for(var b,c,d,k,e=this.id,f=++Kg,q=this.namespace,h=[],t=0,r=this.length;r>t;t++){h.push(b=[]);c=this[t];for(var p=0,u=c.length;u>p;p++)(d=c[p])&&(k=d[q][e],Ld(d,p,q,f,{time:k.time,ease:k.ease,delay:k.delay+k.duration,duration:k.duration})),b.push(d)}return Xc(h,q,f)};N.svg.axis=function(){function b(r){r.each(function(){var b,
r=N.select(this),p=this.__chart__||d,u=this.__chart__=d.copy(),l=null==t?u.ticks?u.ticks.apply(u,h):u.domain():t,x=null==c?u.tickFormat?u.tickFormat.apply(u,h):z:c,w=r.selectAll(".tick").data(l,u),l=w.enter().insert("g",".domain").attr("class","tick").style("opacity",aa),v=N.transition(w.exit()).style("opacity",aa).remove(),y=N.transition(w.order()).style("opacity",1),A=Math.max(e,0)+q,g=Ed(u),r=r.selectAll(".domain").data([0]),r=(r.enter().append("path").attr("class","domain"),N.transition(r));l.append("line");
l.append("text");var C,E,G,B,F=l.select("line"),m=y.select("line"),x=w.select("text").text(x),w=l.select("text"),D=y.select("text"),I="top"===k||"left"===k?-1:1;if("bottom"===k||"top"===k?(b=Wh,C="x",G="y",E="x2",B="y2",x.attr("dy",0>I?"0em":".71em").style("text-anchor","middle"),r.attr("d","M"+g[0]+","+I*f+"V0H"+g[1]+"V"+I*f)):(b=Xh,C="y",G="x",E="y2",B="x2",x.attr("dy",".32em").style("text-anchor",0>I?"end":"start"),r.attr("d","M"+I*f+","+g[0]+"H0V"+g[1]+"H"+I*f)),F.attr(B,I*e),w.attr(G,I*A),m.attr(E,
0).attr(B,I*e),D.attr(C,0).attr(G,I*A),u.rangeBand)var V=u,Q=V.rangeBand()/2,p=u=function(b){return V(b)+Q};else p.rangeBand?p=u:v.call(b,u,p);l.call(b,p,u);y.call(b,u,u)})}var c,d=N.scale.linear(),k=Lg,e=6,f=6,q=3,h=[10],t=null;return b.scale=function(c){return arguments.length?(d=c,b):d},b.orient=function(c){return arguments.length?(k=c in ti?c+"":Lg,b):k},b.ticks=function(){return arguments.length?(h=arguments,b):h},b.tickValues=function(c){return arguments.length?(t=c,b):t},b.tickFormat=function(d){return arguments.length?
(c=d,b):c},b.tickSize=function(c){var d=arguments.length;return d?(e=+c,f=+arguments[d-1],b):e},b.innerTickSize=function(c){return arguments.length?(e=+c,b):e},b.outerTickSize=function(c){return arguments.length?(f=+c,b):f},b.tickPadding=function(c){return arguments.length?(q=+c,b):q},b.tickSubdivide=function(){return arguments.length&&b},b};var Lg="bottom",ti={top:1,right:1,bottom:1,left:1};N.svg.brush=function(){function c(b){b.each(function(){var b=N.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),q=b.selectAll(".background").data([0]);q.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");b.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=b.selectAll(".resize").data(y,z);h.exit().remove();h.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return ui[b]}).append("rect").attr("x",
function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");h.style("display",c.empty()?"none":null);var t,b=N.transition(b),q=N.transition(q);p&&(t=Ed(p),q.attr("x",t[0]).attr("width",t[1]-t[0]),k(b));u&&(t=Ed(u),q.attr("y",t[0]).attr("height",t[1]-t[0]),e(b));d(b)})}function d(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+l[+/e$/.test(b)]+","+x[+/^s/.test(b)]+")"})}function k(b){b.select(".extent").attr("x",
l[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(b){b.select(".extent").attr("y",x[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",x[1]-x[0])}function f(){function y(){var b=N.mouse(E),c=!1;C&&(b[0]+=C[0],b[1]+=C[1]);Q||(N.event.altKey?(g||(g=[(l[0]+l[1])/2,(x[0]+x[1])/2]),H[0]=l[+(b[0]<g[0])],H[1]=x[+(b[1]<g[1])]):g=null);I&&z(b,p,0)&&(k(m),c=!0);V&&z(b,u,1)&&(e(m),c=!0);c&&(d(m),B({type:"brush",mode:Q?"move":"resize"}))}function z(b,c,d){var k,e,f=Ed(c);c=
f[0];var f=f[1],h=H[d],r=d?x:l,p=r[1]-r[0];return Q&&(c-=h,f-=p+h),k=(d?v:w)?Math.max(c,Math.min(f,b[d])):b[d],Q?e=(k+=h)+p:(g&&(h=Math.max(c,Math.min(f,2*g[d]-k))),k>h?(e=k,k=h):e=h),r[0]!=k||r[1]!=e?(d?t=null:q=null,r[0]=k,r[1]=e,!0):void 0}function A(){y();m.style("pointer-events","all").selectAll(".resize").style("display",c.empty()?"none":null);N.select("body").style("cursor",null);W.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);Y();B({type:"brushend"})}var g,C,E=this,G=N.select(N.event.target),B=r.of(E,arguments),m=N.select(E),D=G.datum(),I=!/^(n|s)$/.test(D)&&p,V=!/^(e|w)$/.test(D)&&u,Q=G.classed("extent"),Y=na(E),H=N.mouse(E),W=N.select(b(E)).on("keydown.brush",function(){32==N.event.keyCode&&(Q||(g=null,H[0]-=l[1],H[1]-=x[1],Q=2),F())}).on("keyup.brush",function(){32==N.event.keyCode&&2==Q&&(H[0]+=l[1],H[1]+=x[1],Q=0,F())});if(N.event.changedTouches?W.on("touchmove.brush",y).on("touchend.brush",
A):W.on("mousemove.brush",y).on("mouseup.brush",A),m.interrupt().selectAll("*").interrupt(),Q)H[0]=l[0]-H[0],H[1]=x[0]-H[1];else if(D){var K=+/w$/.test(D),D=+/^n/.test(D);C=[l[1-K]-H[0],x[1-D]-H[1]];H[0]=l[K];H[1]=x[D]}else N.event.altKey&&(g=H.slice());m.style("pointer-events","none").selectAll(".resize").style("display",null);N.select("body").style("cursor",G.style("cursor"));B({type:"brushstart"});y()}var q,t,r=D(c,"brushstart","brush","brushend"),p=null,u=null,l=[0,0],x=[0,0],w=!0,v=!0,y=bf[0];
return c.event=function(b){b.each(function(){var b=r.of(this,arguments),c={x:l,y:x,i:q,j:t},d=this.__chart__||c;this.__chart__=c;oc?N.select(this).transition().each("start.brush",function(){q=d.i;t=d.j;l=d.x;x=d.y;b({type:"brushstart"})}).tween("brush:brush",function(){var d=Dd(l,c.x),k=Dd(x,c.y);return q=t=null,function(e){l=c.x=d(e);x=c.y=k(e);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){q=c.i;t=c.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),
b({type:"brush",mode:"resize"}),b({type:"brushend"}))})},c.x=function(b){return arguments.length?(p=b,y=bf[!p<<1|!u],c):p},c.y=function(b){return arguments.length?(u=b,y=bf[!p<<1|!u],c):u},c.clamp=function(b){return arguments.length?(p&&u?(w=!!b[0],v=!!b[1]):p?w=!!b:u&&(v=!!b),c):p&&u?[w,v]:p?w:u?v:null},c.extent=function(b){var d,k,e,f,h;return arguments.length?(p&&(d=b[0],k=b[1],u&&(d=d[0],k=k[0]),q=[d,k],p.invert&&(d=p(d),k=p(k)),d>k&&(h=d,d=k,k=h),(d!=l[0]||k!=l[1])&&(l=[d,k])),u&&(e=b[0],f=b[1],
p&&(e=e[1],f=f[1]),t=[e,f],u.invert&&(e=u(e),f=u(f)),e>f&&(h=e,e=f,f=h),(e!=x[0]||f!=x[1])&&(x=[e,f])),c):(p&&(q?(d=q[0],k=q[1]):(d=l[0],k=l[1],p.invert&&(d=p.invert(d),k=p.invert(k)),d>k&&(h=d,d=k,k=h))),u&&(t?(e=t[0],f=t[1]):(e=x[0],f=x[1],u.invert&&(e=u.invert(e),f=u.invert(f)),e>f&&(h=e,e=f,f=h))),p&&u?[[d,e],[k,f]]:p?[d,k]:u&&[e,f])},c.clear=function(){return c.empty()||(l=[0,0],x=[0,0],q=t=null),c},c.empty=function(){return!!p&&l[0]==l[1]||!!u&&x[0]==x[1]},N.rebind(c,r,"on")};var ui={n:"ns-resize",
e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},bf=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],cf=da.format=zg.timeFormat,Mg=cf.utc,Ng=Mg("%Y-%m-%dT%H:%M:%S.%LZ");cf.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ve:Ng;Ve.parse=function(b){b=new Date(b);return isNaN(b)?null:b};Ve.toString=Ng.toString;da.second=wb(function(b){return new Za(1E3*Math.floor(b/1E3))},function(b,c){b.setTime(b.getTime()+
1E3*Math.floor(c))},function(b){return b.getSeconds()});da.seconds=da.second.range;da.seconds.utc=da.second.utc.range;da.minute=wb(function(b){return new Za(6E4*Math.floor(b/6E4))},function(b,c){b.setTime(b.getTime()+6E4*Math.floor(c))},function(b){return b.getMinutes()});da.minutes=da.minute.range;da.minutes.utc=da.minute.utc.range;da.hour=wb(function(b){var c=b.getTimezoneOffset()/60;return new Za(36E5*(Math.floor(b/36E5-c)+c))},function(b,c){b.setTime(b.getTime()+36E5*Math.floor(c))},function(b){return b.getHours()});
da.hours=da.hour.range;da.hours.utc=da.hour.utc.range;da.month=wb(function(b){return b=da.day(b),b.setDate(1),b},function(b,c){b.setMonth(b.getMonth()+c)},function(b){return b.getMonth()});da.months=da.month.range;da.months.utc=da.month.utc.range;var Md=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],df=[[da.second,1],[da.second,5],[da.second,15],[da.second,30],[da.minute,1],[da.minute,5],[da.minute,15],[da.minute,30],[da.hour,1],[da.hour,3],[da.hour,
6],[da.hour,12],[da.day,1],[da.day,2],[da.week,1],[da.month,1],[da.month,3],[da.year,1]],vi=cf.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",$b]]),Yh={range:function(b,c,d){return N.range(Math.ceil(b/d)*d,+c,d).map(nc)},
floor:z,ceil:z};df.year=da.year;da.scale=function(){return We(N.scale.linear(),df,vi)};var Og=df.map(function(b){return[b[0].utc,b[1]]}),wi=Mg.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",
$b]]);Og.year=da.year.utc;da.scale.utc=function(){return We(N.scale.linear(),Og,wi)};N.text=Ia(function(b){return b.responseText});N.json=function(b,c){return fb(b,"application/json",Zh,c)};N.html=function(b,c){return fb(b,"text/html",$h,c)};N.xml=Ia(function(b){return b.responseXML});"object"==typeof m&&m.exports&&(m.exports=N);this.d3=N}()},{}],54:[function(b,m,g){function h(b,c){this.point=b;this.index=c}function c(b,c){for(var e=b.point,f=c.point,h=e.length,l=0;h>l;++l){var u=f[l]-e[l];if(u)return u}return 0}
function l(b,c,e){if(1===b)return e?[[-1,0]]:[];c=c.map(function(b,c){return[b[0],c]});c.sort(function(b,c){return b[0]-c[0]});for(var f=Array(b-1),h=1;b>h;++h)f[h-1]=[c[h-1][1],c[h][1]];return e&&f.push([-1,f[0][1]],[f[b-1][1],-1]),f}var e=b("incremental-convex-hull"),f=b("uniq");m.exports=function(b,d){var p=b.length;if(0===p)return[];var t=b[0].length;if(1>t)return[];if(1===t)return l(p,b,d);for(var x=Array(p),w=1,u=0;p>u;++u){for(var r=b[u],y=Array(t+1),k=0,q=0;t>q;++q){var z=r[q];y[q]=z;k+=z*
z}y[t]=k;x[u]=new h(y,u);w=Math.max(k,w)}f(x,c);for(var p=x.length,r=Array(p+t+1),g=Array(p+t+1),k=Array(t+1),u=0;t>=u;++u)k[u]=0;k[t]=(t+1)*(t+1)*w;r[0]=k.slice();g[0]=-1;for(u=0;t>=u;++u)y=k.slice(),y[u]=1,r[u+1]=y,g[u+1]=-1;for(u=0;p>u;++u)w=x[u],r[u+t+1]=w.point,g[u+t+1]=w.index;p=e(r,!1);if(p=d?p.filter(function(b){for(var c=0,d=0;t>=d;++d){var k=g[b[d]];if(0>k&&2<=++c)return!1;b[d]=k}return!0}):p.filter(function(b){for(var c=0;t>=c;++c){var d=g[b[c]];if(0>d)return!1;b[c]=d}return!0}),1&t)for(u=
0;u<p.length;++u)w=p[u],y=w[0],w[0]=w[1],w[1]=y;return p}},{"incremental-convex-hull":168,uniq:218}],55:[function(b,m,g){function h(b,l,e){var f=0|b[e];if(0>=f)return[];var v,d=Array(f);if(e===b.length-1)for(v=0;f>v;++v)d[v]=l;else for(v=0;f>v;++v)d[v]=h(b,l,e+1);return d}m.exports=function(b,l){switch("undefined"==typeof l&&(l=0),typeof b){case "number":if(0<b){var e=0|b,f=l,v,d;v=Array(e);for(d=0;e>d;++d)v[d]=f;return v}break;case "object":if("number"==typeof b.length)return h(b,l,0)}return[]}},
{}],56:[function(b,m,g){(function(h,c){(function(){function l(){return function(){h.nextTick(p)}}function e(){return function(){D(p)}}function f(){var b=0,c=new T(p),d=document.createTextNode("");return c.observe(d,{characterData:!0}),function(){d.data=b=++b%2}}function v(){var b=new MessageChannel;return b.port1.onmessage=p,function(){b.port2.postMessage(0)}}function d(){return function(){setTimeout(p,1)}}function p(){for(var b=0;L>b;b+=2)(0,S[b])(S[b+1]),S[b]=void 0,S[b+1]=void 0;L=0}function t(){try{var c=
b("vertx");return D=c.runOnLoop||c.runOnContext,e()}catch(k){return d()}}function x(){}function w(b,c,d,k){try{b.call(c,d,k)}catch(e){return e}}function u(b,c,d){P(function(b){var k=!1,e=w(d,c,function(d){k||(k=!0,c!==d?y(b,d):q(b,d))},function(c){k||(k=!0,z(b,c))},"Settle: "+(b._label||" unknown promise"));!k&&e&&(k=!0,z(b,e))},b)}function r(b,c){c._state===V?q(b,c._result):c._state===Y?z(b,c._result):g(c,void 0,function(c){y(b,c)},function(c){z(b,c)})}function y(b,c){if(b===c)z(b,new TypeError("You cannot resolve a promise with itself"));
else if("function"==typeof c||"object"==typeof c&&null!==c)if(c.constructor===b.constructor)r(b,c);else{var d;try{d=c.then}catch(k){d=(W.error=k,W)}d===W?z(b,W.error):void 0===d?q(b,c):"function"==typeof d?u(b,c,d):q(b,c)}else q(b,c)}function k(b){b._onerror&&b._onerror(b._result);A(b)}function q(b,c){b._state===X&&(b._result=c,b._state=V,0!==b._subscribers.length&&P(A,b))}function z(b,c){b._state===X&&(b._state=Y,b._result=c,P(k,b))}function g(b,c,d,k){var e=b._subscribers,f=e.length;b._onerror=
null;e[f]=c;e[f+V]=d;e[f+Y]=k;0===f&&b._state&&P(A,b)}function A(b){var c=b._subscribers,d=b._state;if(0!==c.length){for(var k,e,f=b._result,h=0;h<c.length;h+=3)k=c[h],e=c[h+d],k?B(d,k,e,f):e(f);b._subscribers.length=0}}function C(){this.error=null}function B(b,c,d,k){var e,f,h,t,r="function"==typeof d;if(r){var p;try{p=d(k)}catch(u){p=(Z.error=u,Z)}if(e=p,e===Z?(t=!0,f=e.error,e=null):h=!0,c===e)return void z(c,new TypeError("A promises callback cannot return that same promise."))}else e=k,h=!0;
c._state!==X||(r&&h?y(c,e):t?z(c,f):b===V?q(c,e):b===Y&&z(c,e))}function G(b,c){try{c(function(c){y(b,c)},function(c){z(b,c)})}catch(d){z(b,d)}}function F(b,c){this._instanceConstructor=b;this.promise=new b(x);this._validateInput(c)?(this._input=c,this.length=c.length,this._remaining=c.length,this._init(),0===this.length?q(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&q(this.promise,this._result))):z(this.promise,this._validationError())}function I(b){this._id=
U++;this._result=this._state=void 0;this._subscribers=[];if(x!==b){if("function"!=typeof b)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof I))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");G(this,b)}}var D,H,K,O=Array.isArray?Array.isArray:function(b){return"[object Array]"===Object.prototype.toString.call(b)},L=0,P=({}.toString,
function(b,c){S[L]=b;S[L+1]=c;L+=2;2===L&&(H?H(p):K())}),M="undefined"!=typeof window?window:void 0,Q=M||{},T=Q.MutationObserver||Q.WebKitMutationObserver,Q="undefined"!=typeof h&&"[object process]"==={}.toString.call(h),R="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,S=Array(1E3);K=Q?l():T?f():R?v():void 0===M&&"function"==typeof b?t():d();var X=void 0,V=1,Y=2,W=new C,Z=new C;F.prototype._validateInput=function(b){return O(b)};F.prototype._validationError=
function(){return Error("Array Methods must be provided an Array")};F.prototype._init=function(){this._result=Array(this.length)};F.prototype._enumerate=function(){for(var b=this.length,c=this.promise,d=this._input,k=0;c._state===X&&b>k;k++)this._eachEntry(d[k],k)};F.prototype._eachEntry=function(b,c){var d=this._instanceConstructor;"object"==typeof b&&null!==b?b.constructor===d&&b._state!==X?(b._onerror=null,this._settledAt(b._state,c,b._result)):this._willSettleAt(d.resolve(b),c):(this._remaining--,
this._result[c]=b)};F.prototype._settledAt=function(b,c,d){var k=this.promise;k._state===X&&(this._remaining--,b===Y?z(k,d):this._result[c]=d);0===this._remaining&&q(k,this._result)};F.prototype._willSettleAt=function(b,c){var d=this;g(b,void 0,function(b){d._settledAt(V,c,b)},function(b){d._settledAt(Y,c,b)})};var U=0;I.all=function(b){return(new F(this,b)).promise};I.race=function(b){function c(b){y(k,b)}function d(b){z(k,b)}var k=new this(x);if(!O(b))return z(k,new TypeError("You must pass an array to race.")),
k;for(var e=b.length,f=0;k._state===X&&e>f;f++)g(this.resolve(b[f]),void 0,c,d);return k};I.resolve=function(b){if(b&&"object"==typeof b&&b.constructor===this)return b;var c=new this(x);return y(c,b),c};I.reject=function(b){var c=new this(x);return z(c,b),c};I._setScheduler=function(b){H=b};I._setAsap=function(b){P=b};I._asap=P;I.prototype={constructor:I,then:function(b,c){var d=this._state;if(d===V&&!b||d===Y&&!c)return this;var k=new this.constructor(x),e=this._result;if(d){var f=arguments[d-1];
P(function(){B(d,k,f,e)})}else g(this,k,b,c);return k},"catch":function(b){return this.then(null,b)}};M=function(){var b;if("undefined"!=typeof c)b=c;else if("undefined"!=typeof self)b=self;else try{b=Function("return this")()}catch(d){throw Error("polyfill failed because global object is unavailable in this environment");}var k=b.Promise;k&&"[object Promise]"===Object.prototype.toString.call(k.resolve())&&!k.cast||(b.Promise=I)};Q={Promise:I,polyfill:M};"undefined"!=typeof m&&m.exports?m.exports=
Q:"undefined"!=typeof this&&(this.ES6Promise=Q);M()}).call(this)}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:38}],57:[function(b,m,g){function h(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function c(b){return"function"==typeof b}function l(b){return"object"==typeof b&&null!==b}m.exports=h;h.EventEmitter=h;h.prototype._events=void 0;h.prototype._maxListeners=void 0;h.defaultMaxListeners=
10;h.prototype.setMaxListeners=function(b){if("number"!=typeof b||0>b||isNaN(b))throw TypeError("n must be a positive number");return this._maxListeners=b,this};h.prototype.emit=function(b){var f,h,d,p;if(this._events||(this._events={}),"error"===b&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if(f=arguments[1],f instanceof Error)throw f;throw TypeError('Uncaught, unspecified "error" event.');}if(h=this._events[b],void 0===h)return!1;if(c(h))switch(arguments.length){case 1:h.call(this);
break;case 2:h.call(this,arguments[1]);break;case 3:h.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),h.apply(this,f)}else if(l(h))for(f=Array.prototype.slice.call(arguments,1),p=h.slice(),h=p.length,d=0;h>d;d++)p[d].apply(this,f);return!0};h.prototype.addListener=function(b,f){var v;if(!c(f))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",b,c(f.listener)?f.listener:
f),this._events[b]?l(this._events[b])?this._events[b].push(f):this._events[b]=[this._events[b],f]:this._events[b]=f,l(this._events[b])&&!this._events[b].warned&&(v=void 0===this._maxListeners?h.defaultMaxListeners:this._maxListeners,v&&0<v&&this._events[b].length>v&&(this._events[b].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[b].length),"function"==typeof console.trace&&console.trace())),
this};h.prototype.on=h.prototype.addListener;h.prototype.once=function(b,f){function h(){this.removeListener(b,h);d||(d=!0,f.apply(this,arguments))}if(!c(f))throw TypeError("listener must be a function");var d=!1;return h.listener=f,this.on(b,h),this};h.prototype.removeListener=function(b,f){var h,d,p;if(!c(f))throw TypeError("listener must be a function");if(!this._events||!this._events[b])return this;if(h=this._events[b],p=h.length,d=-1,h===f||c(h.listener)&&h.listener===f)delete this._events[b],
this._events.removeListener&&this.emit("removeListener",b,f);else if(l(h)){for(;0<p--;)if(h[p]===f||h[p].listener&&h[p].listener===f){d=p;break}if(0>d)return this;1===h.length?(h.length=0,delete this._events[b]):h.splice(d,1);this._events.removeListener&&this.emit("removeListener",b,f)}return this};h.prototype.removeAllListeners=function(b){var f,h;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[b]&&delete this._events[b],this;
if(0===arguments.length){for(f in this._events)"removeListener"!==f&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events={},this}if(h=this._events[b],c(h))this.removeListener(b,h);else if(h)for(;h.length;)this.removeListener(b,h[h.length-1]);return delete this._events[b],this};h.prototype.listeners=function(b){return this._events&&this._events[b]?c(this._events[b])?[this._events[b]]:this._events[b].slice():[]};h.prototype.listenerCount=function(b){if(this._events){b=
this._events[b];if(c(b))return 1;if(b)return b.length}return 0};h.listenerCount=function(b,c){return b.listenerCount(c)}},{}],58:[function(b,m,g){m.exports=function(b){var c=typeof b;if("string"===c){c=b;b=+b;var l;if(l=0===b)a:{var e;l=c.length;for(var f=0;l>f;f++)if(e=c.charCodeAt(f),(9>e||13<e)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(8192>e||8205<e)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e){l=!1;break a}l=!0}if(l)return!1}else if("number"!==c)return!1;return 1>
b-b}},{}],59:[function(b,m,g){function h(b,c,d,e,f){this.gl=b;this.type=c;this.handle=d;this.length=e;this.usage=f}function c(b,c,d,e,f,h){var l=f.length*f.BYTES_PER_ELEMENT;if(0>h)return b.bufferData(c,f,e),l;if(l+h>d)throw Error("gl-buffer: If resizing buffer, must not specify offset");return b.bufferSubData(c,h,f),d}function l(b,c){for(var d=e.malloc(b.length,c),f=b.length,h=0;f>h;++h)d[h]=b[h];return d}var e=b("typedarray-pool"),f=b("ndarray-ops"),v=b("ndarray"),d="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");
b=h.prototype;b.bind=function(){this.gl.bindBuffer(this.type,this.handle)};b.unbind=function(){this.gl.bindBuffer(this.type,null)};b.dispose=function(){this.gl.deleteBuffer(this.handle)};b.update=function(b,h){if("number"!=typeof h&&(h=-1),this.bind(),"object"==typeof b&&"undefined"!=typeof b.shape){var x=b.dtype;if(0>d.indexOf(x)&&(x="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER)x=gl.getExtension("OES_element_index_uint")&&"uint16"!==x?"uint32":"uint16";var w;if(w=x===b.dtype)a:{w=b.stride;
for(var u=1,r=w.length-1;0<=r;--r){if(w[r]!==u){w=!1;break a}u*=b.shape[r]}w=!0}w?0===b.offset&&b.data.length===b.shape[0]?this.length=c(this.gl,this.type,this.length,this.usage,b.data,h):this.length=c(this.gl,this.type,this.length,this.usage,b.data.subarray(b.offset,b.shape[0]),h):(x=e.malloc(b.size,x),w=v(x,b.shape),f.assign(w,b),0>h?this.length=c(this.gl,this.type,this.length,this.usage,x,h):this.length=c(this.gl,this.type,this.length,this.usage,x.subarray(0,b.size),h),e.free(x))}else if(Array.isArray(b))x=
this.type===this.gl.ELEMENT_ARRAY_BUFFER?l(b,"uint16"):l(b,"float32"),0>h?this.length=c(this.gl,this.type,this.length,this.usage,x,h):this.length=c(this.gl,this.type,this.length,this.usage,x.subarray(0,b.length),h),e.free(x);else if("object"==typeof b&&"number"==typeof b.length)this.length=c(this.gl,this.type,this.length,this.usage,b,h);else{if("number"!=typeof b&&void 0!==b)throw Error("gl-buffer: Invalid data type");if(0<=h)throw Error("gl-buffer: Cannot specify offset when resizing buffer");b|=
0;0>=b&&(b=1);this.gl.bufferData(this.type,0|b,this.usage);this.length=b}};m.exports=function(b,c,d,e){if(d=d||b.ARRAY_BUFFER,e=e||b.DYNAMIC_DRAW,d!==b.ARRAY_BUFFER&&d!==b.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(e!==b.DYNAMIC_DRAW&&e!==b.STATIC_DRAW&&e!==b.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var f=b.createBuffer();
b=new h(b,d,f,0,e);return b.update(c),b}},{ndarray:189,"ndarray-ops":184,"typedarray-pool":217}],60:[function(b,m,g){function h(b,c,e){this.plot=b;this.shader=c;this.buffer=e;this.bounds=[1/0,1/0,-(1/0),-(1/0)];this.numPoints=0;this.color=[0,0,0,1]}var c=b("gl-shader"),l=b("gl-buffer"),e=b("typedarray-pool"),f=b("./lib/shaders");m.exports=function(b,e){var t=c(b.gl,f.vertex,f.fragment),x=l(b.gl),t=new h(b,t,x);return t.update(e),b.addObject(t),t};var v=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],
[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,
-1,0]];b=h.prototype;b.draw=function(){var b=[1,0,0,0,1,0,0,0,1],c=[1,1];return function(){var e=this.plot,f=this.shader,h=this.buffer,u=this.bounds,r=this.numPoints,l=(this.color,e.gl),k=e.dataBox,q=e.viewBox,e=e.pixelRatio,z=u[3]-u[1],g=k[2]-k[0],A=k[3]-k[1];b[0]=2*(u[2]-u[0])/g;b[4]=2*z/A;b[6]=2*(u[0]-k[0])/g-1;b[7]=2*(u[1]-k[1])/A-1;u=q[3]-q[1];c[0]=2*e/(q[2]-q[0]);c[1]=2*e/u;h.bind();f.bind();f.uniforms.viewTransform=b;f.uniforms.pixelScale=c;f.uniforms.color=this.color;f.attributes.position.pointer(l.FLOAT,
!1,16,0);f.attributes.pixelOffset.pointer(l.FLOAT,!1,16,8);l.drawArrays(l.TRIANGLES,0,r*v.length)}}();b.drawPick=function(b){return b};b.pick=function(b,c){return null};b.update=function(b){b=b||{};var c=b.positions||[],f=b.errors||[],h=1;"lineWidth"in b&&(h=+b.lineWidth);var l=5;"capSize"in b&&(l=+b.capSize);this.color=(b.color||[0,0,0,1]).slice();var u=this.bounds=[1/0,1/0,-(1/0),-(1/0)];b=this.numPoints=c.length>>1;for(var r=0;b>r;++r){var y=c[2*r],k=c[2*r+1];u[0]=Math.min(y,u[0]);u[1]=Math.min(k,
u[1]);u[2]=Math.max(y,u[2]);u[3]=Math.max(k,u[3])}u[2]===u[0]&&(u[2]+=1);u[3]===u[1]&&(u[3]+=1);for(var q=1/(u[2]-u[0]),z=1/(u[3]-u[1]),g=u[0],u=u[1],A=e.mallocFloat32(b*v.length*4),C=0,r=0;b>r;++r)for(var y=c[2*r],k=c[2*r+1],B=f[4*r],G=f[4*r+1],F=f[4*r+2],m=f[4*r+3],D=0;D<v.length;++D){var H=v[D],K=H[0],O=H[1];0>K?K*=B:0<K&&(K*=G);0>O?O*=F:0<O&&(O*=m);A[C++]=q*(y-g+K);A[C++]=z*(k-u+O);A[C++]=h*H[2]+(l+h)*H[4];A[C++]=h*H[3]+(l+h)*H[5]}this.buffer.update(A);e.free(A)};b.dispose=function(){this.plot.removeObject(this);
this.shader.dispose();this.buffer.dispose()}},{"./lib/shaders":61,"gl-buffer":59,"gl-shader":138,"typedarray-pool":217}],61:[function(b,m,g){m.exports={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec2 pixelOffset;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\n\nvoid main() {\n  vec3 scrPosition = viewTransform * vec3(position, 1);\n  gl_Position = vec4(\n    scrPosition.xy + scrPosition.z * pixelScale * pixelOffset,\n    0,\n    scrPosition.z);\n}\n",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"}},{}],62:[function(b,m,g){function h(b,c,d,e){this.gl=b;this.shader=e;this.buffer=c;this.vao=d;this.pixelRatio=1;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]];this.lineWidth=[1,1,1];this.capSize=[10,10,10];this.lineCount=[0,0,0];this.lineOffset=[0,0,0];this.opacity=1}function c(b,c){for(var d=
0;3>d;++d)b[0][d]=Math.min(b[0][d],c[d]),b[1][d]=Math.max(b[1][d],c[d])}function l(b,c,d,e){e=p[e];for(var f=0;f<e.length;++f){var h=e[f];b.push(c[0],c[1],c[2],d[0],d[1],d[2],d[3],h[0],h[1],h[2])}return e.length}m.exports=function(b){var c=b.gl,d=e(c),u=f(c,[{buffer:d,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:d,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:d,type:c.FLOAT,size:3,offset:28,stride:40}]),r=v(c);r.attributes.position.location=0;r.attributes.color.location=1;r.attributes.offset.location=
2;c=new h(c,d,u,r);return c.update(b),c};var e=b("gl-buffer"),f=b("gl-vao"),v=b("./shaders/index"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=h.prototype;b.isOpaque=function(){return 1<=this.opacity};b.isTransparent=function(){return 1>this.opacity};b.drawTransparent=b.draw=function(b){var c=this.gl,e=this.shader.uniforms;this.shader.bind();var f=e.view=b.view||d,h=e.projection=b.projection||d;e.model=b.model||d;e.clipBounds=this.clipBounds;e.opacity=this.opacity;b=this.pixelRatio*(h[3]*f[12]+h[7]*f[13]+
h[11]*f[14]+h[15]*f[15])/c.drawingBufferHeight;this.vao.bind();for(f=0;3>f;++f)c.lineWidth(this.lineWidth[f]),e.capSize=this.capSize[f]*b,c.drawArrays(c.LINES,this.lineOffset[f],this.lineCount[f]);this.vao.unbind()};var p=function(){for(var b=Array(3),c=0;3>c;++c){for(var d=[],e=1;2>=e;++e)for(var f=-1;1>=f;f+=2){var h=[0,0,0];h[(e+c)%3]=f;d.push(h)}b[c]=d}return b}();b.update=function(b){b=b||{};"lineWidth"in b&&(this.lineWidth=b.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,
this.lineWidth,this.lineWidth]));"capSize"in b&&(this.capSize=b.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));"opacity"in b&&(this.opacity=b.opacity);var d=b.color||[[0,0,0],[0,0,0],[0,0,0]],e=b.position;b=b.error;if(Array.isArray(d[0])||(d=[d,d,d]),e&&b){var f=[],h=e.length,p=0;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];this.lineCount=[0,0,0];for(var k=0;3>k;++k){this.lineOffset[k]=p;var q=0;a:for(;h>q;++q){for(var v=e[q],g=0;3>g;++g)if(isNaN(v[g])||
!isFinite(v[g]))continue a;var g=b[q],A=d[k];if(Array.isArray(A[0])&&(A=d[q]),3===A.length&&(A=[A[0],A[1],A[2],1]),!isNaN(g[0][k])&&!isNaN(g[1][k])){if(0>g[0][k]){var C=v.slice();C[k]+=g[0][k];f.push(v[0],v[1],v[2],A[0],A[1],A[2],A[3],0,0,0,C[0],C[1],C[2],A[0],A[1],A[2],A[3],0,0,0);c(this.bounds,C);p+=2+l(f,C,A,k)}0<g[1][k]&&(C=v.slice(),C[k]+=g[1][k],f.push(v[0],v[1],v[2],A[0],A[1],A[2],A[3],0,0,0,C[0],C[1],C[2],A[0],A[1],A[2],A[3],0,0,0),c(this.bounds,C),p+=2+l(f,C,A,k))}}this.lineCount[k]=p-this.lineOffset[k]}this.buffer.update(f)}};
b.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":63,"gl-buffer":59,"gl-vao":166}],63:[function(b,m,g){var h=b("gl-shader");m.exports=function(b){return h(b,"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}",
"#define GLSLIFY 1\nprecision mediump float;\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(fragPosition, clipBounds[0])) || any(greaterThan(fragPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = opacity * fragColor;\n}",null,[{name:"position",type:"vec3"},{name:"offset",type:"vec3"},{name:"color",type:"vec4"}])}},{"gl-shader":138}],64:[function(b,m,g){function h(b){var c=b.getParameter(b.FRAMEBUFFER_BINDING),
d=b.getParameter(b.RENDERBUFFER_BINDING);b=b.getParameter(b.TEXTURE_BINDING_2D);return[c,d,b]}function c(b,c){b.bindFramebuffer(b.FRAMEBUFFER,c[0]);b.bindRenderbuffer(b.RENDERBUFFER,c[1]);b.bindTexture(b.TEXTURE_2D,c[2])}function l(b){switch(b){case x:throw Error("gl-fbo: Framebuffer unsupported");case w:throw Error("gl-fbo: Framebuffer incomplete attachment");case u:throw Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");
}}function e(b,c,d,e,f,h){if(!e)return null;c=t(b,c,d,f,e);return c.magFilter=b.NEAREST,c.minFilter=b.NEAREST,c.mipSamples=1,c.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,h,b.TEXTURE_2D,c.handle,0),c}function f(b,c,d,e,f){var h=b.createRenderbuffer();return b.bindRenderbuffer(b.RENDERBUFFER,h),b.renderbufferStorage(b.RENDERBUFFER,e,c,d),b.framebufferRenderbuffer(b.FRAMEBUFFER,f,b.RENDERBUFFER,h),h}function v(b){var d=h(b.gl),r=b.gl,t=b.handle=r.createFramebuffer(),p=b._shape[0],u=b._shape[1],x=b.color.length,
w=b._ext,v=b._useStencil,g=b._useDepth,m=b._colorType;r.bindFramebuffer(r.FRAMEBUFFER,t);for(t=0;x>t;++t)b.color[t]=e(r,p,u,m,r.RGBA,r.COLOR_ATTACHMENT0+t);0===x?(b._color_rb=f(r,p,u,r.RGBA4,r.COLOR_ATTACHMENT0),w&&w.drawBuffersWEBGL(y[0])):1<x&&w.drawBuffersWEBGL(y[x]);(x=r.getExtension("WEBGL_depth_texture"))?v?b.depth=e(r,p,u,x.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):g&&(b.depth=e(r,p,u,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):g&&v?b._depth_rb=f(r,p,u,
r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):g?b._depth_rb=f(r,p,u,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):v&&(b._depth_rb=f(r,p,u,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));p=r.checkFramebufferStatus(r.FRAMEBUFFER);if(p!==r.FRAMEBUFFER_COMPLETE){b._destroyed=!0;r.bindFramebuffer(r.FRAMEBUFFER,null);r.deleteFramebuffer(b.handle);b.handle=null;b.depth&&(b.depth.dispose(),b.depth=null);b._depth_rb&&(r.deleteRenderbuffer(b._depth_rb),b._depth_rb=null);for(t=0;t<b.color.length;++t)b.color[t].dispose(),b.color[t]=
null;b._color_rb&&(r.deleteRenderbuffer(b._color_rb),b._color_rb=null);c(r,d);l(p)}c(r,d)}function d(b,c,d,e,f,h,r,t){this.gl=b;this._shape=[0|c,0|d];this._destroyed=!1;this._ext=t;this.color=Array(f);for(b=0;f>b;++b)this.color[b]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=e;this._useDepth=h;this._useStencil=r;var p=this;c=[0|c,0|d];Object.defineProperties(c,{0:{get:function(){return p._shape[0]},set:function(b){return p.width=b}},1:{get:function(){return p._shape[1]},set:function(b){return p.height=
b}}});this._shapeVector=c;v(this)}function p(b,d,e){if(b._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(b._shape[0]!==d||b._shape[1]!==e){var f=b.gl,r=f.getParameter(f.MAX_RENDERBUFFER_SIZE);if(0>d||d>r||0>e||e>r)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");b._shape[0]=d;b._shape[1]=e;d=h(f);for(e=0;e<b.color.length;++e)b.color[e].shape=b._shape;b._color_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,b._color_rb),f.renderbufferStorage(f.RENDERBUFFER,f.RGBA4,b._shape[0],b._shape[1]));
b.depth&&(b.depth.shape=b._shape);b._depth_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,b._depth_rb),b._useDepth&&b._useStencil?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_STENCIL,b._shape[0],b._shape[1]):b._useDepth?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,b._shape[0],b._shape[1]):b._useStencil&&f.renderbufferStorage(f.RENDERBUFFER,f.STENCIL_INDEX,b._shape[0],b._shape[1]));f.bindFramebuffer(f.FRAMEBUFFER,b.handle);e=f.checkFramebufferStatus(f.FRAMEBUFFER);e!==f.FRAMEBUFFER_COMPLETE&&(b.dispose(),
c(f,d),l(e));c(f,d)}}var t=b("gl-texture2d");m.exports=function(b,c,e,f){x||(x=b.FRAMEBUFFER_UNSUPPORTED,w=b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,u=b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var h=b.getExtension("WEBGL_draw_buffers");if(!y&&h){var t=b.getParameter(h.MAX_COLOR_ATTACHMENTS_WEBGL);y=Array(t+1);for(var p=0;t>=p;++p){for(var l=Array(t),v=0;p>v;++v)l[v]=b.COLOR_ATTACHMENT0+v;for(v=p;t>v;++v)l[v]=b.NONE;y[p]=l}}if(Array.isArray(c)&&(f=e,e=0|c[1],c=0|
c[0]),"number"!=typeof c)throw Error("gl-fbo: Missing shape parameter");t=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(0>c||c>t||0>e||e>t)throw Error("gl-fbo: Parameters are too large for FBO");f=f||{};t=1;if("color"in f){if(t=Math.max(0|f.color,0),0>t)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<t){if(!h)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(t>b.getParameter(h.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+t+
" draw buffers");}}p=b.UNSIGNED_BYTE;l=b.getExtension("OES_texture_float");if(f["float"]&&0<t){if(!l)throw Error("gl-fbo: Context does not support floating point textures");p=b.FLOAT}else f.preferFloat&&0<t&&l&&(p=b.FLOAT);l=!0;"depth"in f&&(l=!!f.depth);v=!1;return"stencil"in f&&(v=!!f.stencil),new d(b,c,e,p,t,l,v,h)};var x,w,u,r,y=null;b=d.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(b){if(Array.isArray(b)||(b=[0|b,0|b]),
2!==b.length)throw Error("gl-fbo: Shape vector must be length 2");var c=0|b[0];b=0|b[1];return p(this,c,b),[c,b]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(b){return b|=0,p(this,b,this._shape[1]),b},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(b){return b|=0,p(this,this._shape[0],b),b},enumerable:!1}});b.bind=function(){if(!this._destroyed){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.handle);b.viewport(0,
0,this._shape[0],this._shape[1])}};b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var b=this.gl;b.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(b.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var c=0;c<this.color.length;++c)this.color[c].dispose(),this.color[c]=null;this._color_rb&&(b.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":162}],65:[function(b,m,g){g.lineVertex="#define GLSLIFY 1\nprecision mediump float;\n\nfloat inverse_1_0(float m) {\n  return 1.0 / m;\n}\n\nmat2 inverse_1_0(mat2 m) {\n  return mat2(m[1][1],-m[0][1],\n             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse_1_0(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse_1_0(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\n\nattribute vec2 a, d;\n\nuniform mat3 matrix;\nuniform vec2 screenShape;\nuniform float width;\n\nvarying vec2 direction;\n\nvoid main() {\n  vec2 dir = (matrix * vec3(d, 0)).xy;\n  vec3 base = matrix * vec3(a, 1);\n  vec2 n = 0.5 * width *\n    normalize(screenShape.yx * vec2(dir.y, -dir.x)) / screenShape.xy;\n  vec2 tangent = normalize(screenShape.xy * dir);\n  if(dir.x < 0.0 || (dir.x == 0.0 && dir.y < 0.0)) {\n    direction = -tangent;\n  } else {\n    direction = tangent;\n  }\n  gl_Position = vec4(base.xy/base.z + n, 0, 1);\n}\n";
g.lineFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\nuniform vec2 screenShape;\nuniform sampler2D dashPattern;\nuniform float dashLength;\n\nvarying vec2 direction;\n\nvoid main() {\n  float t = fract(dot(direction, gl_FragCoord.xy) / dashLength);\n  vec4 pcolor = color * texture2D(dashPattern, vec2(t, 0.0)).r;\n  gl_FragColor = vec4(pcolor.rgb * pcolor.a, pcolor.a);\n}\n";g.mitreVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 p;\n\nuniform mat3  matrix;\nuniform vec2 screenShape;\nuniform float radius;\n\nvoid main() {\n  vec3 pp = matrix * vec3(p, 1);\n  gl_Position  = vec4(pp.xy, 0, pp.z);\n  gl_PointSize = radius;\n}\n";
g.mitreFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  if(length(gl_PointCoord.xy - 0.5) > 0.25) {\n    discard;\n  }\n  gl_FragColor = vec4(color.rgb, color.a);\n}\n";g.pickVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 a, d;\nattribute vec4 pick0, pick1;\n\nuniform mat3 matrix;\nuniform vec2 screenShape;\nuniform float width;\n\nvarying vec4 pickA, pickB;\n\nfloat inverse_1_0(float m) {\n  return 1.0 / m;\n}\n\nmat2 inverse_1_0(mat2 m) {\n  return mat2(m[1][1],-m[0][1],\n             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse_1_0(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse_1_0(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\n\nvoid main() {\n  vec3 base = matrix * vec3(a, 1);\n  vec2 n = width *\n    normalize(screenShape.yx * vec2(d.y, -d.x)) / screenShape.xy;\n  gl_Position = vec4(base.xy/base.z + n, 0, 1);\n  pickA = pick0;\n  pickB = pick1;\n}\n";
g.pickFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 pickOffset;\n\nvarying vec4 pickA, pickB;\n\nvoid main() {\n  vec4 fragId = vec4(pickA.xyz, 0.0);\n  if(pickB.w > pickA.w) {\n    fragId.xyz = pickB.xyz;\n  }\n\n  fragId += pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  gl_FragColor = fragId / 255.0;\n}\n";
g.fillVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 a, d;\n\nuniform mat3 matrix;\nuniform vec2 projectAxis;\nuniform float projectValue;\nuniform float depth;\n\nvoid main() {\n  vec3 base = matrix * vec3(a, 1);\n  vec2 p = base.xy / base.z;\n  if(d.y < 0.0 || (d.y == 0.0 && d.x < 0.0)) {\n    if(dot(p, projectAxis) < projectValue) {\n      p = p * (1.0 - abs(projectAxis)) + projectAxis * projectValue;\n    }\n  }\n  gl_Position = vec4(p, depth, 1);\n}\n";g.fillFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"},
{}],66:[function(b,m,g){function h(b,c,d,e,f,h,k,q){this.plot=b;this.dashPattern=c;this.lineBuffer=d;this.pickBuffer=e;this.lineShader=f;this.mitreShader=h;this.fillShader=k;this.pickShader=q;this.usingDashes=!1;this.bounds=[1/0,1/0,-(1/0),-(1/0)];this.width=1;this.color=[0,0,1,1];this.fill=[!1,!1,!1,!1];this.fillColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.data=null;this.pickOffset=this.vertCount=this.numPoints=0;this.lodBuffer=[]}function c(b){return b.map(function(b){return b.slice()})}
m.exports=function(b,c){var d=b.gl,u=e(d),r=e(d),v=f(d,[1,1]),k=l(d,p.lineVertex,p.lineFragment),q=l(d,p.mitreVertex,p.mitreFragment),g=l(d,p.fillVertex,p.fillFragment),d=l(d,p.pickVertex,p.pickFragment),u=new h(b,v,u,r,k,q,g,d);return b.addObject(u),u.update(c),u};var l=b("gl-shader"),e=b("gl-buffer"),f=b("gl-texture2d"),v=b("ndarray"),d=b("typedarray-pool"),p=b("./lib/shaders");b=h.prototype;b.draw=function(){var b=[1,0,0,0,1,0,0,0,1],c=[0,0],d=[1,0],e=[-1,0],f=[0,1],h=[0,-1];return function(){var k=
this.plot,q=this.color,p=this.width,l=(this.numPoints,this.bounds),v=this.vertCount,g=k.gl,B=k.viewBox,G=k.dataBox,F=k.pixelRatio,m=l[3]-l[1],D=G[2]-G[0],H=G[3]-G[1],K=B[2]-B[0],B=B[3]-B[1];b[0]=2*(l[2]-l[0])/D;b[4]=2*m/H;b[6]=2*(l[0]-G[0])/D-1;b[7]=2*(l[1]-G[1])/H-1;c[0]=K;c[1]=B;this.lineBuffer.bind();l=this.fill;if(l[0]||l[1]||l[2]||l[3])m=this.fillShader,m.bind(),G=m.uniforms,G.matrix=b,G.depth=k.nextDepthValue(),k=m.attributes,k.a.pointer(g.FLOAT,!1,16,0),k.d.pointer(g.FLOAT,!1,16,8),g.depthMask(!0),
g.enable(g.DEPTH_TEST),k=this.fillColor,l[0]&&(G.color=k[0],G.projectAxis=e,G.projectValue=1,g.drawArrays(g.TRIANGLES,0,v)),l[1]&&(G.color=k[1],G.projectAxis=h,G.projectValue=1,g.drawArrays(g.TRIANGLES,0,v)),l[2]&&(G.color=k[2],G.projectAxis=d,G.projectValue=1,g.drawArrays(g.TRIANGLES,0,v)),l[3]&&(G.color=k[3],G.projectAxis=f,G.projectValue=1,g.drawArrays(g.TRIANGLES,0,v)),g.depthMask(!1),g.disable(g.DEPTH_TEST);k=this.lineShader;k.bind();l=k.uniforms;l.matrix=b;l.color=q;l.width=p*F;l.screenShape=
c;l.dashPattern=this.dashPattern.bind();l.dashLength=this.dashLength*F;k=k.attributes;if(k.a.pointer(g.FLOAT,!1,16,0),k.d.pointer(g.FLOAT,!1,16,8),g.drawArrays(g.TRIANGLES,0,v),2<p&&!this.usingDashes)k=this.mitreShader,k.bind(),l=k.uniforms,l.matrix=b,l.color=q,l.screenShape=c,l.radius=p*F,k.attributes.p.pointer(g.FLOAT,!1,48,0),g.drawArrays(g.POINTS,0,v/3|0)}}();b.drawPick=function(){var b=[1,0,0,0,1,0,0,0,1],c=[0,0],d=[0,0,0,0];return function(e){var f=this.plot,h=this.pickShader,k=this.lineBuffer,
q=this.pickBuffer,p=this.width,l=this.numPoints,v=this.bounds,g=this.vertCount,B=f.gl,G=f.viewBox,F=f.dataBox,f=f.pickPixelRatio,m=v[2]-v[0],D=v[3]-v[1],H=F[2]-F[0],K=F[3]-F[1],O=G[2]-G[0],G=G[3]-G[1];this.pickOffset=e;b[0]=2*m/H;b[4]=2*D/K;b[6]=2*(v[0]-F[0])/H-1;b[7]=2*(v[1]-F[1])/K-1;c[0]=O;c[1]=G;d[0]=255&e;d[1]=e>>>8&255;d[2]=e>>>16&255;d[3]=e>>>24;h.bind();v=h.uniforms;v.matrix=b;v.width=p*f;v.pickOffset=d;v.screenShape=c;h=h.attributes;return k.bind(),h.a.pointer(B.FLOAT,!1,16,0),h.d.pointer(B.FLOAT,
!1,16,8),q.bind(),h.pick0.pointer(B.UNSIGNED_BYTE,!1,8,0),h.pick1.pointer(B.UNSIGNED_BYTE,!1,8,4),B.drawArrays(B.TRIANGLES,0,g),e+l}}();b.pick=function(b,c,d){b=this.pickOffset;c=this.numPoints;if(b>d||d>=b+c)return null;d-=b;b=this.data;return{object:this,pointId:d,dataCoord:[b[2*d],b[2*d+1]]}};b.update=function(b){b=b||{};var e=this.plot.gl;this.color=(b.color||[0,0,1,1]).slice();this.width=+(b.width||1);this.fill=(b.fill||[!1,!1,!1,!1]).slice();this.fillColor=c(b.fillColor||[[0,0,0,1],[0,0,0,1],
[0,0,0,1],[0,0,0,1]]);for(var h=b.dashes||[1],p=0,r=0;r<h.length;++r)p+=h[r];for(var l=d.mallocUint8(p),k=0,q=255,r=0;r<h.length;++r){for(var g=0;g<h[r];++g)l[k++]=q;q^=255}this.dashPattern.dispose();this.usingDashes=1<h.length;this.dashPattern=f(e,v(l,[p,1,4],[1,0,0]));this.dashPattern.minFilter=e.NEAREST;this.dashPattern.magFilter=e.NEAREST;this.dashLength=p;d.free(l);this.data=b=b.positions;e=this.bounds;e[0]=e[1]=1/0;e[2]=e[3]=-(1/0);var E=this.numPoints=b.length>>>1;if(0!==E){for(r=0;E>r;++r)h=
b[2*r],p=b[2*r+1],e[0]=Math.min(e[0],h),e[1]=Math.min(e[1],p),e[2]=Math.max(e[2],h),e[3]=Math.max(e[3],p);e[0]===e[2]&&(e[2]+=1);e[3]===e[1]&&(e[3]+=1);r=d.mallocFloat32(24*(E-1));l=d.mallocUint32(12*(E-1));q=r.length;g=l.length;k=E;for(this.vertCount=6*(E-1);1<k;){var A=--k,h=b[2*k],p=b[2*k+1],h=(h-e[0])/(e[2]-e[0]),p=(p-e[1])/(e[3]-e[1]),C=A-1,E=b[2*C],C=b[2*C+1],E=(E-e[0])/(e[2]-e[0]),C=(C-e[1])/(e[3]-e[1]),B=E-h,G=C-p,F=A|16777216,m=A-1,D=A,A=A-1|16777216;r[--q]=-G;r[--q]=-B;r[--q]=p;r[--q]=h;
l[--g]=F;l[--g]=m;r[--q]=G;r[--q]=B;r[--q]=C;r[--q]=E;l[--g]=D;l[--g]=A;r[--q]=-G;r[--q]=-B;r[--q]=C;r[--q]=E;l[--g]=D;l[--g]=A;r[--q]=G;r[--q]=B;r[--q]=C;r[--q]=E;l[--g]=D;l[--g]=A;r[--q]=-G;r[--q]=-B;r[--q]=p;r[--q]=h;l[--g]=F;l[--g]=m;r[--q]=G;r[--q]=B;r[--q]=p;r[--q]=h;l[--g]=F;l[--g]=m}this.lineBuffer.update(r);this.pickBuffer.update(l);d.free(r);d.free(l)}};b.dispose=function(){this.plot.removeObject(this);this.lineBuffer.dispose();this.pickBuffer.dispose();this.lineShader.dispose();this.mitreShader.dispose();
this.fillShader.dispose();this.pickShader.dispose();this.dashPattern.dispose()}},{"./lib/shaders":65,"gl-buffer":59,"gl-shader":138,"gl-texture2d":162,ndarray:189,"typedarray-pool":217}],67:[function(b,m,g){var h=b("gl-shader"),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];g.createShader=function(b){return h(b,"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n",
"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n",
null,c)};g.createPickShader=function(b){return h(b,"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n",
"#define GLSLIFY 1\nprecision mediump float;\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1_0(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\n\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId/255.0, encode_float_1_0(pixelArcLength).xyz);\n}",
null,c)}},{"gl-shader":138}],68:[function(b,m,g){function h(b){for(var c=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],d=0;3>d;++d)c[0][d]=Math.max(b[0][d],c[0][d]),c[1][d]=Math.min(b[1][d],c[1][d]);return c}function c(b,c,d,e){this.arcLength=b;this.position=c;this.index=d;this.dataCoordinate=e}function l(b,c,d,e,f,h){this.gl=b;this.shader=c;this.pickShader=d;this.buffer=e;this.vao=f;this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],
[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=h;this.opacity=this.dashScale=1;this.dirty=!0;this.pixelRatio=1}m.exports=function(b){var c=b.gl||b.scene&&b.scene.gl,d=x(c);d.attributes.position.location=0;d.attributes.nextPosition.location=1;d.attributes.arcLength.location=2;d.attributes.lineWidth.location=3;d.attributes.color.location=4;var h=w(c);h.attributes.position.location=0;h.attributes.nextPosition.location=1;h.attributes.arcLength.location=2;h.attributes.lineWidth.location=3;h.attributes.color.location=
4;for(var p=e(c),u=f(c,[{buffer:p,size:3,offset:0,stride:48},{buffer:p,size:3,offset:12,stride:48},{buffer:p,size:1,offset:24,stride:48},{buffer:p,size:1,offset:28,stride:48},{buffer:p,size:4,offset:32,stride:48}]),g=t(Array(1024),[256,1,4]),C=0;1024>C;++C)g.data[C]=255;g=v(c,g);g.wrap=c.REPEAT;c=new l(c,d,h,p,u,g);return c.update(b),c};var e=b("gl-buffer"),f=b("gl-vao"),v=b("gl-texture2d"),d=b("glsl-read-float"),p=b("binary-search-bounds"),t=b("ndarray");b=b("./lib/shaders");var x=b.createShader,
w=b.createPickShader,u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=l.prototype;b.isTransparent=function(){return 1>this.opacity};b.isOpaque=function(){return 1<=this.opacity};b.pickSlots=1;b.setPickBase=function(b){this.pickId=b};b.drawTransparent=b.draw=function(b){var c=this.gl,d=this.shader,e=this.vao;d.bind();d.uniforms={model:b.model||u,view:b.view||u,projection:b.projection||u,clipBounds:h(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-
1],opacity:this.opacity,screenShape:[c.drawingBufferWidth,c.drawingBufferHeight],pixelRatio:this.pixelRatio};e.bind();e.draw(c.TRIANGLE_STRIP,this.vertexCount)};b.drawPick=function(b){var c=this.gl,d=this.pickShader,e=this.vao;d.bind();d.uniforms={model:b.model||u,view:b.view||u,projection:b.projection||u,pickId:this.pickId,clipBounds:h(this.clipBounds),screenShape:[c.drawingBufferWidth,c.drawingBufferHeight],pixelRatio:this.pixelRatio};e.bind();e.draw(c.TRIANGLE_STRIP,this.vertexCount)};b.update=
function(b){this.dirty=!0;"dashScale"in b&&(this.dashScale=b.dashScale);"opacity"in b&&(this.opacity=+b.opacity);var c=b.position||b.positions;if(c){var d=b.color||b.colors||[0,0,0,1],e=b.lineWidth||1,f=[],h=[],l=[],u=0,x=0,v=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],w=1;a:for(;w<c.length;++w){var g=c[w-1],m=c[w];h.push(u);l.push(g.slice());for(var H=0;3>H;++H){if(isNaN(g[H])||isNaN(m[H])||!isFinite(g[H])||!isFinite(m[H]))continue a;v[0][H]=Math.min(v[0][H],g[H],m[H]);v[1][H]=Math.max(v[1][H],g[H],m[H])}var K,
O;Array.isArray(d[0])?(K=d[w-1],O=d[w]):K=O=d;3===K.length&&(K=[K[0],K[1],K[2],1]);3===O.length&&(O=[O[0],O[1],O[2],1]);var L;Array.isArray(e)?L=e[w-1]:L=e;for(var H=u,P=0,M=0;3>M;++M)var Q=g[M]-m[M],P=P+Q*Q;u+=Math.sqrt(P);f.push(g[0],g[1],g[2],m[0],m[1],m[2],H,L,K[0],K[1],K[2],K[3],g[0],g[1],g[2],m[0],m[1],m[2],H,-L,K[0],K[1],K[2],K[3],m[0],m[1],m[2],g[0],g[1],g[2],u,-L,O[0],O[1],O[2],O[3],m[0],m[1],m[2],g[0],g[1],g[2],u,L,O[0],O[1],O[2],O[3]);x+=4}if(this.buffer.update(f),h.push(u),l.push(c[c.length-
1].slice()),this.bounds=v,this.vertexCount=x,this.points=l,this.arcLength=h,"dashes"in b){b=b.dashes.slice();b.unshift(0);for(w=1;w<b.length;++w)b[w]=b[w-1]+b[w];c=t(Array(1024),[256,1,4]);for(w=0;256>w;++w){for(H=0;4>H;++H)c.set(w,0,H,0);1&p.le(b,b[b.length-1]*w/255)?c.set(w,0,0,0):c.set(w,0,0,255)}this.texture.setPixels(c)}}};b.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};b.pick=function(b){if(!b||b.id!==this.pickId)return null;b=d(b.value[0],b.value[1],b.value[2],
0);var e=p.le(this.arcLength,b);if(0>e)return null;if(e===this.arcLength.length-1)return new c(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),e);for(var k=this.points[e],f=this.points[Math.min(e+1,this.points.length-1)],h=(b-this.arcLength[e])/(this.arcLength[e+1]-this.arcLength[e]),t=1-h,l=[0,0,0],u=0;3>u;++u)l[u]=t*k[u]+h*f[u];e=Math.min(.5>h?e:e+1,this.points.length-1);return new c(b,l,e,this.points[e])}},{"./lib/shaders":67,"binary-search-bounds":69,"gl-buffer":59,
"gl-texture2d":162,"gl-vao":166,"glsl-read-float":70,ndarray:189}],69:[function(b,m,g){arguments[4][4][0].apply(g,arguments)},{dup:4}],70:[function(b,m,g){m.exports=function(b,e,f,v){return h[0]=v,h[1]=f,h[2]=e,h[3]=b,c[0]};var h=new Uint8Array(4),c=new Float32Array(h.buffer)},{}],71:[function(b,m,g){m.exports=function(b,c){var l=c[0],e=c[1],f=c[2],v=c[3],d=c[4],p=c[5],t=c[6],x=c[7],w=c[8],u=w*d-p*x,r=-w*v+p*t,y=x*v-d*t,k=l*u+e*r+f*y;return k?(k=1/k,b[0]=u*k,b[1]=(-w*e+f*x)*k,b[2]=(p*e-f*d)*k,b[3]=
r*k,b[4]=(w*l-f*t)*k,b[5]=(-p*l+f*v)*k,b[6]=y*k,b[7]=(-x*l+e*t)*k,b[8]=(d*l-e*v)*k,b):null}},{}],72:[function(b,m,g){m.exports=function(b){var c=new Float32Array(16);return c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[8]=b[8],c[9]=b[9],c[10]=b[10],c[11]=b[11],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15],c}},{}],73:[function(b,m,g){m.exports=function(){var b=new Float32Array(16);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=
1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}},{}],74:[function(b,m,g){m.exports=function(b){var c=b[0],l=b[1],e=b[2],f=b[3],v=b[4],d=b[5],p=b[6],t=b[7],x=b[8],w=b[9],u=b[10],r=b[11],y=b[12],k=b[13],q=b[14];b=b[15];return(c*d-l*v)*(u*b-r*q)-(c*p-e*v)*(w*b-r*k)+(c*t-f*v)*(w*q-u*k)+(l*p-e*d)*(x*b-r*y)-(l*t-f*d)*(x*q-u*y)+(e*t-f*p)*(x*k-w*y)}},{}],75:[function(b,m,g){m.exports=function(b,c){var l=c[0],e=c[1],f=c[2],v=c[3],d=l+l,p=e+e,t=f+f,l=l*d,x=e*d,e=e*p,w=f*d,u=f*p,f=f*t,d=v*d,p=v*p,v=v*t;return b[0]=
1-e-f,b[1]=x+v,b[2]=w-p,b[3]=0,b[4]=x-v,b[5]=1-l-f,b[6]=u+d,b[7]=0,b[8]=w+p,b[9]=u-d,b[10]=1-l-e,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}},{}],76:[function(b,m,g){m.exports=function(b,c,l){var e=c[0],f=c[1],v=c[2],d=c[3],p=e+e,t=f+f,x=v+v;c=e*p;var w=e*t,e=e*x,u=f*t,f=f*x,v=v*x,p=d*p,t=d*t,d=d*x;return b[0]=1-(u+v),b[1]=w+d,b[2]=e-t,b[3]=0,b[4]=w-d,b[5]=1-(c+v),b[6]=f+p,b[7]=0,b[8]=e+t,b[9]=f-p,b[10]=1-(c+u),b[11]=0,b[12]=l[0],b[13]=l[1],b[14]=l[2],b[15]=1,b}},{}],77:[function(b,m,g){m.exports=
function(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}},{}],78:[function(b,m,g){m.exports=function(b,c){var l=c[0],e=c[1],f=c[2],v=c[3],d=c[4],p=c[5],t=c[6],x=c[7],w=c[8],u=c[9],r=c[10],y=c[11],k=c[12],q=c[13],g=c[14],E=c[15],A=l*p-e*d,C=l*t-f*d,B=l*x-v*d,G=e*t-f*p,F=e*x-v*p,m=f*x-v*t,D=w*q-u*k,H=w*g-r*k,K=w*E-y*k,O=u*g-r*q,L=u*E-y*q,P=r*E-y*g,M=A*P-C*L+B*O+G*K-F*H+m*D;return M?(M=1/M,b[0]=(p*P-t*L+x*O)*M,b[1]=(f*
L-e*P-v*O)*M,b[2]=(q*m-g*F+E*G)*M,b[3]=(r*F-u*m-y*G)*M,b[4]=(t*K-d*P-x*H)*M,b[5]=(l*P-f*K+v*H)*M,b[6]=(g*B-k*m-E*C)*M,b[7]=(w*m-r*B+y*C)*M,b[8]=(d*L-p*K+x*D)*M,b[9]=(e*K-l*L-v*D)*M,b[10]=(k*F-q*B+E*A)*M,b[11]=(u*B-w*F-y*A)*M,b[12]=(p*H-d*O-t*D)*M,b[13]=(l*O-e*H+f*D)*M,b[14]=(q*C-k*G-g*A)*M,b[15]=(w*G-u*C+r*A)*M,b):null}},{}],79:[function(b,m,g){var h=b("./identity");m.exports=function(b,l,e,f){var v,d,p,t,x,w,u,r,g,k,q=l[0],z=l[1];l=l[2];var E=f[0],A=f[1];f=f[2];var C=e[0],B=e[1];e=e[2];return 1E-6>
Math.abs(q-C)&&1E-6>Math.abs(z-B)&&1E-6>Math.abs(l-e)?h(b):(u=q-C,r=z-B,g=l-e,k=1/Math.sqrt(u*u+r*r+g*g),u*=k,r*=k,g*=k,v=A*g-f*r,d=f*u-E*g,p=E*r-A*u,k=Math.sqrt(v*v+d*d+p*p),k?(k=1/k,v*=k,d*=k,p*=k):(v=0,d=0,p=0),t=r*p-g*d,x=g*v-u*p,w=u*d-r*v,k=Math.sqrt(t*t+x*x+w*w),k?(k=1/k,t*=k,x*=k,w*=k):(t=0,x=0,w=0),b[0]=v,b[1]=t,b[2]=u,b[3]=0,b[4]=d,b[5]=x,b[6]=r,b[7]=0,b[8]=p,b[9]=w,b[10]=g,b[11]=0,b[12]=-(v*q+d*z+p*l),b[13]=-(t*q+x*z+w*l),b[14]=-(u*q+r*z+g*l),b[15]=1,b)}},{"./identity":77}],80:[function(b,
m,g){m.exports=function(b,c,l){var e=c[0],f=c[1],v=c[2],d=c[3],p=c[4],t=c[5],x=c[6],w=c[7],u=c[8],r=c[9],g=c[10],k=c[11],q=c[12],z=c[13],E=c[14];c=c[15];var A=l[0],C=l[1],B=l[2],G=l[3];return b[0]=A*e+C*p+B*u+G*q,b[1]=A*f+C*t+B*r+G*z,b[2]=A*v+C*x+B*g+G*E,b[3]=A*d+C*w+B*k+G*c,A=l[4],C=l[5],B=l[6],G=l[7],b[4]=A*e+C*p+B*u+G*q,b[5]=A*f+C*t+B*r+G*z,b[6]=A*v+C*x+B*g+G*E,b[7]=A*d+C*w+B*k+G*c,A=l[8],C=l[9],B=l[10],G=l[11],b[8]=A*e+C*p+B*u+G*q,b[9]=A*f+C*t+B*r+G*z,b[10]=A*v+C*x+B*g+G*E,b[11]=A*d+C*w+B*k+G*
c,A=l[12],C=l[13],B=l[14],G=l[15],b[12]=A*e+C*p+B*u+G*q,b[13]=A*f+C*t+B*r+G*z,b[14]=A*v+C*x+B*g+G*E,b[15]=A*d+C*w+B*k+G*c,b}},{}],81:[function(b,m,g){m.exports=function(b,c,l,e,f){c=1/Math.tan(c/2);var v=1/(e-f);return b[0]=c/l,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=c,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=(f+e)*v,b[11]=-1,b[12]=0,b[13]=0,b[14]=2*f*e*v,b[15]=0,b}},{}],82:[function(b,m,g){m.exports=function(b,c,l,e){var f,v,d,p,t,x,w,u,r,g,k,q,z,E,A,C,B,G,F,m,D,H,K,O,L=e[0],P=e[1];e=e[2];var M=Math.sqrt(L*L+
P*P+e*e);return 1E-6>Math.abs(M)?null:(M=1/M,L*=M,P*=M,e*=M,f=Math.sin(l),v=Math.cos(l),d=1-v,p=c[0],t=c[1],x=c[2],w=c[3],u=c[4],r=c[5],g=c[6],k=c[7],q=c[8],z=c[9],E=c[10],A=c[11],C=L*L*d+v,B=P*L*d+e*f,G=e*L*d-P*f,F=L*P*d-e*f,m=P*P*d+v,D=e*P*d+L*f,H=L*e*d+P*f,K=P*e*d-L*f,O=e*e*d+v,b[0]=p*C+u*B+q*G,b[1]=t*C+r*B+z*G,b[2]=x*C+g*B+E*G,b[3]=w*C+k*B+A*G,b[4]=p*F+u*m+q*D,b[5]=t*F+r*m+z*D,b[6]=x*F+g*m+E*D,b[7]=w*F+k*m+A*D,b[8]=p*H+u*K+q*O,b[9]=t*H+r*K+z*O,b[10]=x*H+g*K+E*O,b[11]=w*H+k*K+A*O,c!==b&&(b[12]=
c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]),b)}},{}],83:[function(b,m,g){m.exports=function(b,c,l){var e=Math.sin(l);l=Math.cos(l);var f=c[4],v=c[5],d=c[6],p=c[7],t=c[8],x=c[9],w=c[10],u=c[11];return c!==b&&(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]),b[4]=f*l+t*e,b[5]=v*l+x*e,b[6]=d*l+w*e,b[7]=p*l+u*e,b[8]=t*l-f*e,b[9]=x*l-v*e,b[10]=w*l-d*e,b[11]=u*l-p*e,b}},{}],84:[function(b,m,g){m.exports=function(b,c,l){var e=Math.sin(l);l=Math.cos(l);var f=c[0],v=
c[1],d=c[2],p=c[3],t=c[8],x=c[9],w=c[10],u=c[11];return c!==b&&(b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]),b[0]=f*l-t*e,b[1]=v*l-x*e,b[2]=d*l-w*e,b[3]=p*l-u*e,b[8]=f*e+t*l,b[9]=v*e+x*l,b[10]=d*e+w*l,b[11]=p*e+u*l,b}},{}],85:[function(b,m,g){m.exports=function(b,c,l){var e=Math.sin(l);l=Math.cos(l);var f=c[0],v=c[1],d=c[2],p=c[3],t=c[4],x=c[5],w=c[6],u=c[7];return c!==b&&(b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=
c[15]),b[0]=f*l+t*e,b[1]=v*l+x*e,b[2]=d*l+w*e,b[3]=p*l+u*e,b[4]=t*l-f*e,b[5]=x*l-v*e,b[6]=w*l-d*e,b[7]=u*l-p*e,b}},{}],86:[function(b,m,g){m.exports=function(b,c,l){var e=l[0],f=l[1];l=l[2];return b[0]=c[0]*e,b[1]=c[1]*e,b[2]=c[2]*e,b[3]=c[3]*e,b[4]=c[4]*f,b[5]=c[5]*f,b[6]=c[6]*f,b[7]=c[7]*f,b[8]=c[8]*l,b[9]=c[9]*l,b[10]=c[10]*l,b[11]=c[11]*l,b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15],b}},{}],87:[function(b,m,g){m.exports=function(b,c,l){var e,f,v,d,p,t,x,w,u,r,g,k,q=l[0],z=l[1];l=l[2];return c===
b?(b[12]=c[0]*q+c[4]*z+c[8]*l+c[12],b[13]=c[1]*q+c[5]*z+c[9]*l+c[13],b[14]=c[2]*q+c[6]*z+c[10]*l+c[14],b[15]=c[3]*q+c[7]*z+c[11]*l+c[15]):(e=c[0],f=c[1],v=c[2],d=c[3],p=c[4],t=c[5],x=c[6],w=c[7],u=c[8],r=c[9],g=c[10],k=c[11],b[0]=e,b[1]=f,b[2]=v,b[3]=d,b[4]=p,b[5]=t,b[6]=x,b[7]=w,b[8]=u,b[9]=r,b[10]=g,b[11]=k,b[12]=e*q+p*z+u*l+c[12],b[13]=f*q+t*z+r*l+c[13],b[14]=v*q+x*z+g*l+c[14],b[15]=d*q+w*z+k*l+c[15]),b}},{}],88:[function(b,m,g){m.exports=function(b,c){if(b===c){var l=c[1],e=c[2],f=c[3],v=c[6],
d=c[7],p=c[11];b[1]=c[4];b[2]=c[8];b[3]=c[12];b[4]=l;b[6]=c[9];b[7]=c[13];b[8]=e;b[9]=v;b[11]=c[14];b[12]=f;b[13]=d;b[14]=p}else b[0]=c[0],b[1]=c[4],b[2]=c[8],b[3]=c[12],b[4]=c[1],b[5]=c[5],b[6]=c[9],b[7]=c[13],b[8]=c[2],b[9]=c[6],b[10]=c[10],b[11]=c[14],b[12]=c[3],b[13]=c[7],b[14]=c[11],b[15]=c[15];return b}},{}],89:[function(b,m,g){function h(b,c){for(var h=[0,0,0,0],d=0;4>d;++d)for(var p=0;4>p;++p)h[p]+=b[4*d+p]*c[d];return h}var c=b("barycentric"),l=b("polytope-closest-point/lib/closest_point_2d.js");
m.exports=function(b,f,v,d,p,t){if(1===b.length)return[0,b[0].slice()];for(var x=Array(b.length),w=0;w<b.length;++w){for(var u=w,r=b[w],g=t,r=h(p,h(d,h(v,[r[0],r[1],r[2],1]))),k=0;3>k;++k)r[k]/=r[3];x[u]=[.5*g[0]*(1+r[0]),.5*g[1]*(1-r[1])]}v=0;d=1/0;for(w=0;w<x.length;++w){for(t=p=0;2>t;++t)p+=Math.pow(x[w][t]-f[t],2);d>p&&(d=p,v=w)}if(2===x.length){for(p=d=w=0;2>p;++p)w+=Math.pow(f[p]-x[0][p],2),d+=Math.pow(f[p]-x[1][p],2);f=(w=Math.sqrt(w),d=Math.sqrt(d),1E-6>w+d?[1,0]:[d/(w+d),w/(d+w)])}else 3===
x.length?(w=[0,0],f=(l(x[0],x[1],x[2],f,w),c(x,w))):f=[];for(w=x=0;3>w;++w){if(-.001>f[w]||1.0001<f[w])return null;x+=f[w]}if(.001<Math.abs(x-1))b=null;else{x=f;w=[0,0,0];for(d=0;d<b.length;++d)for(p=b[d],t=x[d],u=0;3>u;++u)w[u]+=t*p[u];b=[v,w,f]}return b}},{barycentric:92,"polytope-closest-point/lib/closest_point_2d.js":94}],90:[function(b,m,g){g.meshShader={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat cookTorranceSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution_2_0(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n  \n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular_1_1(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}",
attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};g.wireShader={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
g.pointShader={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};g.pickShader={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}",attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};g.pointPickShader={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}",attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]};g.contourShader={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n",attributes:[{name:"position",type:"vec3"}]}},{}],91:[function(b,m,g){function h(b,c,d,k,e,f,q,h,r,t,p,l,u,x,w,v,g,y,A,z,C,E,m,ha,na,sa,ra){this.gl=b;this.cells=[];this.positions=[];this.intensity=[];this.texture=c;this.dirty=!0;this.triShader=d;this.lineShader=k;this.pointShader=e;this.pickShader=f;this.pointPickShader=q;this.contourShader=h;this.trianglePositions=
r;this.triangleColors=p;this.triangleNormals=u;this.triangleUVs=l;this.triangleIds=t;this.triangleVAO=x;this.triangleCount=0;this.lineWidth=1;this.edgePositions=w;this.edgeColors=g;this.edgeUVs=y;this.edgeIds=v;this.edgeVAO=A;this.edgeCount=0;this.pointPositions=z;this.pointColors=E;this.pointUVs=m;this.pointSizes=ha;this.pointIds=C;this.pointVAO=na;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=sa;this.contourVAO=ra;this.contourCount=0;this.contourColor=[0,0,0];this.contourEnable=
!0;this.pickId=1;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this._projection=this._view=this._model=B;this._resolution=[1,1]}function c(b){b=w({colormap:b,nshades:256,format:"rgba"});for(var c=new Uint8Array(1024),d=0;256>d;++d){for(var k=b[d],e=0;3>e;++e)c[4*d+e]=k[e];c[4*d+3]=255*k[3]}return x(c,
[256,256,4],[4,0,1])}var l=b("gl-shader"),e=b("gl-buffer"),f=b("gl-vao"),v=b("gl-texture2d"),d=b("normals"),p=b("gl-mat4/multiply"),t=b("gl-mat4/invert"),x=b("ndarray"),w=b("colormap"),u=b("simplicial-complex-contour"),r=b("typedarray-pool");g=b("./lib/shaders");var y=b("./lib/closest-point"),k=g.meshShader,q=g.wireShader,z=g.pointShader,E=g.pickShader,A=g.pointPickShader,C=g.contourShader,B=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=h.prototype;b.isOpaque=function(){return 1<=this.opacity};b.isTransparent=
function(){return 1>this.opacity};b.pickSlots=1;b.setPickBase=function(b){this.pickId=b};b.highlight=function(b){if(!b||!this.contourEnable)return void(this.contourCount=0);var c=u(this.cells,this.intensity,b.intensity);b=c.cells;for(var d=c.vertexIds,c=c.vertexWeights,k=b.length,e=r.mallocFloat32(6*k),f=0,q=0;k>q;++q)for(var h=b[q],t=0;2>t;++t){var p=h[0];2===h.length&&(p=h[t]);for(var l=c[p],x=1-l,w=this.positions[d[p][0]],p=this.positions[d[p][1]],v=0;3>v;++v)e[f++]=l*w[v]+x*p[v]}this.contourCount=
f/3|0;this.contourPositions.update(e.subarray(0,f));r.free(e)};b.update=function(b){b=b||{};var k=this.gl;this.dirty=!0;"contourEnable"in b&&(this.contourEnable=b.contourEnable);"contourColor"in b&&(this.contourColor=b.contourColor);"lineWidth"in b&&(this.lineWidth=b.lineWidth);"opacity"in b&&(this.opacity=b.opacity);b.texture?(this.texture.dispose(),this.texture=v(k,b.texture)):b.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=k.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=k.LINEAR,
this.texture.setPixels(c(b.colormap)),this.texture.generateMipmap());var k=b.cells,e=b.positions;if(e&&k){var f=[],q=[],h=[],r=[],t=[],p=[],l=[],u=[],x=[],w=[],g=[],y=[],A=[],z=[];this.cells=k;this.positions=e;var C=b.vertexNormals,E=b.cellNormals;b.useFacetNormals&&!E&&(E=d.faceNormals(k,e));E||C||(C=d.vertexNormals(k,e));var B=b.vertexColors,m=b.cellColors,ga=b.meshColor||[1,1,1,1],ia=b.vertexUVs,ha=b.vertexIntensity,na=b.cellUVs,sa=b.cellIntensity,ra=1/0,ya=-(1/0);if(!ia&&!na)if(ha)for(var fa=
0;fa<ha.length;++fa)var ta=ha[fa],ra=Math.min(ra,ta),ya=Math.max(ya,ta);else if(sa)for(fa=0;fa<sa.length;++fa)ta=sa[fa],ra=Math.min(ra,ta),ya=Math.max(ya,ta);else for(fa=0;fa<e.length;++fa)ta=e[fa][2],ra=Math.min(ra,ta),ya=Math.max(ya,ta);if(ha)this.intensity=ha;else if(sa){for(var ka=e.length,fa=Array(ka),ta=0;ka>ta;++ta)fa[ta]=0;ka=k.length;for(ta=0;ka>ta;++ta)for(var Sa=k[ta],Da=0;Da<Sa.length;++Da)fa[Sa[Da]]=sa[ta];this.intensity=fa}else{fa=e.length;ta=Array(fa);for(ka=0;fa>ka;++ka)ta[ka]=e[ka][2];
this.intensity=ta}ta=b.pointSizes;b=b.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];for(fa=0;fa<e.length;++fa)for(var ca=e[fa],ka=0;3>ka;++ka)!isNaN(ca[ka])&&isFinite(ca[ka])&&(this.bounds[0][ka]=Math.min(this.bounds[0][ka],ca[ka]),this.bounds[1][ka]=Math.max(this.bounds[1][ka],ca[ka]));var nb=Da=Sa=0,fa=0;a:for(;fa<k.length;++fa){var Aa=k[fa];switch(Aa.length){case 1:for(var ja=Aa[0],ca=e[ja],ka=0;3>ka;++ka)if(isNaN(ca[ka])||!isFinite(ca[ka]))continue a;w.push(ca[0],ca[1],ca[2]);
var oa;oa=B?B[ja]:m?m[fa]:ga;3===oa.length?g.push(oa[0],oa[1],oa[2],1):g.push(oa[0],oa[1],oa[2],oa[3]);ca=ia?ia[ja]:ha?[(ha[ja]-ra)/(ya-ra),0]:na?na[fa]:sa?[(sa[fa]-ra)/(ya-ra),0]:[(ca[2]-ra)/(ya-ra),0];y.push(ca[0],ca[1]);ta?A.push(ta[ja]):A.push(b);z.push(fa);nb+=1;break;case 2:for(ka=0;2>ka;++ka)for(ja=Aa[ka],ca=e[ja],ja=0;3>ja;++ja)if(isNaN(ca[ja])||!isFinite(ca[ja]))continue a;for(ka=0;2>ka;++ka)ja=Aa[ka],ca=e[ja],p.push(ca[0],ca[1],ca[2]),oa=B?B[ja]:m?m[fa]:ga,3===oa.length?l.push(oa[0],oa[1],
oa[2],1):l.push(oa[0],oa[1],oa[2],oa[3]),ca=ia?ia[ja]:ha?[(ha[ja]-ra)/(ya-ra),0]:na?na[fa]:sa?[(sa[fa]-ra)/(ya-ra),0]:[(ca[2]-ra)/(ya-ra),0],u.push(ca[0],ca[1]),x.push(fa);Da+=1;break;case 3:for(ka=0;3>ka;++ka)for(ja=Aa[ka],ca=e[ja],ja=0;3>ja;++ja)if(isNaN(ca[ja])||!isFinite(ca[ja]))continue a;for(ka=0;3>ka;++ka)ja=Aa[ka],ca=e[ja],f.push(ca[0],ca[1],ca[2]),oa=B?B[ja]:m?m[fa]:ga,3===oa.length?q.push(oa[0],oa[1],oa[2],1):q.push(oa[0],oa[1],oa[2],oa[3]),ca=ia?ia[ja]:ha?[(ha[ja]-ra)/(ya-ra),0]:na?na[fa]:
sa?[(sa[fa]-ra)/(ya-ra),0]:[(ca[2]-ra)/(ya-ra),0],r.push(ca[0],ca[1]),ca=C?C[ja]:E[fa],h.push(ca[0],ca[1],ca[2]),t.push(fa);Sa+=1}}this.pointCount=nb;this.edgeCount=Da;this.triangleCount=Sa;this.pointPositions.update(w);this.pointColors.update(g);this.pointUVs.update(y);this.pointSizes.update(A);this.pointIds.update(new Uint32Array(z));this.edgePositions.update(p);this.edgeColors.update(l);this.edgeUVs.update(u);this.edgeIds.update(new Uint32Array(x));this.trianglePositions.update(f);this.triangleColors.update(q);
this.triangleUVs.update(r);this.triangleNormals.update(h);this.triangleIds.update(new Uint32Array(t))}};b.drawTransparent=b.draw=function(b){b=b||{};var c=this.gl,d=b.model||B,k=b.view||B,e=b.projection||B,f=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(b=0;3>b;++b)f[0][b]=Math.max(f[0][b],this.clipBounds[0][b]),f[1][b]=Math.min(f[1][b],this.clipBounds[1][b]);d={model:d,view:k,projection:e,clipBounds:f,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,
fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);k=Array(16);p(k,d.view,d.model);p(k,d.projection,k);t(k,k);for(b=0;3>b;++b)d.eyePosition[b]=k[12+b]/k[15];e=k[15];for(b=0;3>b;++b)e+=this.lightPosition[b]*k[4*b+3];for(b=0;3>b;++b){for(var f=k[12+b],q=0;3>q;++q)f+=k[4*q+b]*this.lightPosition[q];d.lightPosition[b]=f/e}0<this.triangleCount&&(b=this.triShader,b.bind(),b.uniforms=d,this.triangleVAO.bind(),
c.drawArrays(c.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&0<this.lineWidth&&(b=this.lineShader,b.bind(),b.uniforms=d,this.edgeVAO.bind(),c.lineWidth(this.lineWidth),c.drawArrays(c.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(b=this.pointShader,b.bind(),b.uniforms=d,this.pointVAO.bind(),c.drawArrays(c.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(b=this.contourShader,b.bind(),
b.uniforms=d,this.contourVAO.bind(),c.drawArrays(c.LINES,0,this.contourCount),this.contourVAO.unbind())};b.drawPick=function(b){b=b||{};var c=this.gl,d=b.model||B,k=b.view||B;b=b.projection||B;for(var e=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],f=0;3>f;++f)e[0][f]=Math.max(e[0][f],this.clipBounds[0][f]),e[1][f]=Math.min(e[1][f],this.clipBounds[1][f]);this._model=[].slice.call(d);this._view=[].slice.call(k);this._projection=[].slice.call(b);this._resolution=[c.drawingBufferWidth,c.drawingBufferHeight];d={model:d,
view:k,projection:b,clipBounds:e,pickId:this.pickId/255};k=this.pickShader;if(k.bind(),k.uniforms=d,0<this.triangleCount&&(this.triangleVAO.bind(),c.drawArrays(c.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),0<this.edgeCount&&(this.edgeVAO.bind(),c.lineWidth(this.lineWidth),c.drawArrays(c.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),0<this.pointCount)k=this.pointPickShader,k.bind(),k.uniforms=d,this.pointVAO.bind(),c.drawArrays(c.POINTS,0,this.pointCount),this.pointVAO.unbind()};
b.pick=function(b){if(!b||b.id!==this.pickId)return null;for(var c=b.value[0]+256*b.value[1]+65536*b.value[2],d=this.cells[c],k=this.positions,e=Array(d.length),f=0;f<d.length;++f)e[f]=k[d[f]];b=y(e,[b.coord[0],this._resolution[1]-b.coord[1]],this._model,this._view,this._projection,this._resolution);if(!b)return null;k=b[2];for(f=e=0;f<d.length;++f)e+=k[f]*this.intensity[d[f]];return{position:b[1],index:d[b[0]],cell:d,cellId:c,intensity:e,dataCoordinate:this.positions[d[b[0]]]}};b.dispose=function(){this.texture.dispose();
this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();
this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};m.exports=function(b){var c=b.gl,d;d=l(c,k);d=(d.attributes.position.location=0,d.attributes.color.location=2,d.attributes.uv.location=3,d.attributes.normal.location=4,d);var r;r=l(c,q);r=(r.attributes.position.location=0,r.attributes.color.location=2,r.attributes.uv.location=3,r);var t;t=l(c,z);t=(t.attributes.position.location=0,t.attributes.color.location=
2,t.attributes.uv.location=3,t.attributes.pointSize.location=4,t);var p;p=l(c,E);p=(p.attributes.position.location=0,p.attributes.id.location=1,p);var u;u=l(c,A);u=(u.attributes.position.location=0,u.attributes.id.location=1,u.attributes.pointSize.location=4,u);var w;w=l(c,C);w=(w.attributes.position.location=0,w);var g=v(c,x(new Uint8Array([255,255,255,255]),[1,1,4]));g.generateMipmap();g.minFilter=c.LINEAR_MIPMAP_LINEAR;g.magFilter=c.LINEAR;var y=e(c),B=e(c),m=e(c),R=e(c),S=e(c),X=f(c,[{buffer:y,
type:c.FLOAT,size:3},{buffer:S,type:c.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:c.FLOAT,size:4},{buffer:m,type:c.FLOAT,size:2},{buffer:R,type:c.FLOAT,size:3}]),V=e(c),Y=e(c),W=e(c),Z=e(c),U=f(c,[{buffer:V,type:c.FLOAT,size:3},{buffer:Z,type:c.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Y,type:c.FLOAT,size:4},{buffer:W,type:c.FLOAT,size:2}]),ea=e(c),ga=e(c),ia=e(c),ha=e(c),na=e(c),sa=f(c,[{buffer:ea,type:c.FLOAT,size:3},{buffer:na,type:c.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ga,type:c.FLOAT,
size:4},{buffer:ia,type:c.FLOAT,size:2},{buffer:ha,type:c.FLOAT,size:1}]),ra=e(c),ya=f(c,[{buffer:ra,type:c.FLOAT,size:3}]),c=new h(c,g,d,r,t,p,u,w,y,S,B,m,R,X,V,Z,Y,W,U,ea,na,ga,ia,ha,sa,ra,ya);return c.update(b),c}},{"./lib/closest-point":89,"./lib/shaders":90,colormap:40,"gl-buffer":59,"gl-mat4/invert":78,"gl-mat4/multiply":80,"gl-shader":138,"gl-texture2d":162,"gl-vao":166,ndarray:189,normals:93,"simplicial-complex-contour":95,"typedarray-pool":217}],92:[function(b,m,g){function h(b){for(var c=
0,f=0;f<b.length;++f)c+=b[f];return c}m.exports=function(b,e){for(var f=e.length,v=Array(f+1),d=0;f>d;++d){for(var p=Array(f+1),t=0;f>=t;++t)p[t]=b[t][d];v[d]=p}v[f]=Array(f+1);for(d=0;f>=d;++d)v[f][d]=1;p=Array(f+1);for(d=0;f>d;++d)p[d]=e[d];p[f]=1;v=c(v,p);p=h(v[f+1]);0===p&&(p=1);t=Array(f+1);for(d=0;f>=d;++d)t[d]=h(v[d])/p;return t};var c=b("robust-linear-solve")},{"robust-linear-solve":192}],93:[function(b,m,g){g.vertexNormals=function(b,c){for(var l=c.length,e=Array(l),f=0;l>f;++f)e[f]=[0,0,
0];for(f=0;f<b.length;++f)for(var v=b[f],d=0,p=v[v.length-1],t=v[0],x=0;x<v.length;++x){for(var d=p,p=t,t=v[(x+1)%v.length],w=c[d],u=c[p],r=c[t],g=Array(3),k=0,q=Array(3),z=0,d=0;3>d;++d)g[d]=w[d]-u[d],k+=g[d]*g[d],q[d]=r[d]-u[d],z+=q[d]*q[d];if(1E-6<k*z)for(w=e[p],k=1/Math.sqrt(k*z),d=0;3>d;++d)z=(d+1)%3,u=(d+2)%3,w[d]+=k*(q[z]*g[u]-q[u]*g[z])}for(f=0;l>f;++f){w=e[f];for(d=v=0;3>d;++d)v+=w[d]*w[d];if(1E-6<v)for(k=1/Math.sqrt(v),d=0;3>d;++d)w[d]*=k;else for(d=0;3>d;++d)w[d]=0}return e};g.faceNormals=
function(b,c){for(var l=b.length,e=Array(l),f=0;l>f;++f){for(var v=b[f],d=Array(3),p=0;3>p;++p)d[p]=c[v[p]];for(var v=Array(3),t=Array(3),p=0;3>p;++p)v[p]=d[1][p]-d[0][p],t[p]=d[2][p]-d[0][p];for(var d=Array(3),x=0,p=0;3>p;++p){var w=(p+1)%3,u=(p+2)%3;d[p]=v[w]*t[u]-v[u]*t[w];x+=d[p]*d[p]}x=1E-6<x?1/Math.sqrt(x):0;for(p=0;3>p;++p)d[p]*=x;e[f]=d}return e}},{}],94:[function(b,m,g){var h=new Float64Array(4),c=new Float64Array(4),l=new Float64Array(4);m.exports=function(b,f,v,d,p){h.length<d.length&&
(h=new Float64Array(d.length),c=new Float64Array(d.length),l=new Float64Array(d.length));for(var t=0;t<d.length;++t)h[t]=b[t]-d[t],c[t]=f[t]-b[t],l[t]=v[t]-b[t];for(var x=0,w=0,u=0,r=0,g=0,k=0,t=0;t<d.length;++t)var q=c[t],z=l[t],E=h[t],x=x+q*q,w=w+q*z,u=u+z*z,r=r+E*q,g=g+E*z,k=k+E*E;var A,t=Math.abs(x*u-w*w),q=w*g-u*r,z=w*r-x*g;if(t>=q+z)0>q?0>z&&0>r?(z=0,-r>=x?(q=1,A=x+2*r+k):(q=-r/x,A=r*q+k)):(q=0,0<=g?(z=0,A=k):-g>=u?(z=1,A=u+2*g+k):(z=-g/u,A=g*z+k)):0>z?(z=0,0<=r?(q=0,A=k):-r>=x?(q=1,A=x+2*r+
k):(q=-r/x,A=r*q+k)):(A=1/t,q*=A,z*=A,A=q*(x*q+w*z+2*r)+z*(w*q+u*z+2*g)+k);else{var C,B,G,F;0>q?(C=w+r,B=u+g,B>C?(G=B-C,F=x-2*w+u,G>=F?(q=1,z=0,A=x+2*r+k):(q=G/F,z=1-q,A=q*(x*q+w*z+2*r)+z*(w*q+u*z+2*g)+k)):(q=0,0>=B?(z=1,A=u+2*g+k):0<=g?(z=0,A=k):(z=-g/u,A=g*z+k))):0>z?(C=w+g,B=x+r,B>C?(G=B-C,F=x-2*w+u,G>=F?(z=1,q=0,A=u+2*g+k):(z=G/F,q=1-z,A=q*(x*q+w*z+2*r)+z*(w*q+u*z+2*g)+k)):(z=0,0>=B?(q=1,A=x+2*r+k):0<=r?(q=0,A=k):(q=-r/x,A=r*q+k))):(G=u+g-w-r,0>=G?(q=0,z=1,A=u+2*g+k):(F=x-2*w+u,G>=F?(q=1,z=0,
A=x+2*r+k):(q=G/F,z=1-q,A=q*(x*q+w*z+2*r)+z*(w*q+u*z+2*g)+k)))}x=1-q-z;for(t=0;t<d.length;++t)p[t]=x*b[t]+q*f[t]+z*v[t];return 0>A?0:A}},{}],95:[function(b,m,g){m.exports=function(b,v,d,p){d=d||0;if("undefined"==typeof p){for(var t=b.length,x=p=0;t>x;++x)p=0|Math.max(p,b[x].length);--p}if(0===b.length||1>p)return{cells:[],vertexIds:[],vertexWeights:[]};for(var x=+d,w=v.length,t=c.mallocUint8(w),u=0;w>u;++u)t[u]=v[u]<x|0;for(var r=p,g=b.length,x=c.mallocUint32(2*(r*(r+1)/2*g|0)),u=w=0;g>u;++u)for(var k=
b[u],r=k.length,q=0;r>q;++q)for(var z=0;q>z;++z){var E=k[z],A=k[q];x[w++]=0|Math.min(E,A);x[w++]=0|Math.max(E,A)}l(h(x,[w/2|0,2]));for(u=r=2;w>u;u+=2)(x[u-2]!==x[u]||x[u-1]!==x[u+1])&&(x[r++]=x[u],x[r++]=x[u+1]);x=h(x,[r/2|0,2]);d=+d;w=x.data;u=x.shape[0];r=c.mallocDouble(u);for(k=g=0;u>k;++k)q=w[2*k],z=w[2*k+1],t[q]!==t[z]&&(E=v[q],A=v[z],w[2*g]=q,w[2*g+1]=z,r[g++]=(A-d)/(A-E));d=(x.shape[0]=g,h(r,[g]));w=0|v.length;v=c.mallocInt32(2*w);u=x.shape[0];r=x.data;for(k=g=v[0]=0;u>k;++k)if(q=r[2*k],q!==
g){for(v[2*g+1]=k;++g<q;)v[2*g]=k,v[2*g+1]=k;v[2*g]=k}for(v[2*g+1]=u;++g<w;)v[2*g]=v[2*g+1]=u;b=e(p)(b,x.data,v,t);w=0|x.shape[0];u=x.data;p=Array(w);for(r=0;w>r;++r)p[r]=[u[2*r],u[2*r+1]];w=[].slice.call(d.data,0,d.shape[0]);return c.free(t),c.free(x.data),c.free(d.data),c.free(v),{cells:b,vertexIds:p,vertexWeights:w}};var h=b("ndarray"),c=b("typedarray-pool"),l=b("ndarray-sort"),e=b("./lib/codegen")},{"./lib/codegen":96,ndarray:189,"ndarray-sort":99,"typedarray-pool":217}],96:[function(b,m,g){m.exports=
function(b){var f=l[b];if(!f){var f=l,v;v=Array(b+1);v[0]=[[]];for(var d=1;b>=d;++d)for(var p=v[d]=c(d),t=0;t<p.length;++t);for(var x=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",b,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"],d=b+1;1<d;--d){b+1>d&&x.push("else ");x.push("if(l===",d,"){");
p=[];for(t=0;d>t;++t)p.push("(S[c["+t+"]]<<"+t+")");x.push("var M=",p.join("+"),";if(M===0||M===",(1<<d)-1,"){continue}switch(M){");p=v[d-1];for(t=0;t<p.length;++t){x.push("case ",t,":");var w=p[t];if(!(0>=w.length)){x.push("R.push(");for(var u=0;u<w.length;++u){var r=w[u];0<u&&x.push(",");x.push("[");for(var g=0;g<r.length;++g){var k=r[g];0<g&&x.push(",");x.push("B(C,E,c[",k[0],"],c[",k[1],"])")}x.push("]")}x.push(");")}x.push("break;")}x.push("}}")}x.push("}return R;};return getContour",b,"d");
v=(new Function("pool",x.join("")))(h);f=f[b]=v}return f};var h=b("typedarray-pool"),c=b("marching-simplex-table"),l={}},{"marching-simplex-table":97,"typedarray-pool":217}],97:[function(b,m,g){function h(b,c,f){for(var h=Array(b),d=0;b>d;++d)h[d]=0,d===c&&(h[d]+=.5),d===f&&(h[d]+=.5);return h}m.exports=function(b){for(var e=1<<b+1,f=Array(e),v=0;e>v;++v){var d=v,p;var t=b,x=v;if(0===x||x===(1<<t+1)-1)p=[];else{var w=[];p=[];for(var u=0;t>=u;++u)if(x&1<<u){w.push(h(t,u-1,u-1));p.push(null);for(var r=
0;t>=r;++r)~x&1<<r&&(w.push(h(t,u-1,r-1)),p.push([u,r]))}t=c(w);x=[];u=0;b:for(;u<t.length;++u){for(var w=t[u],g=[],r=0;r<w.length;++r){if(!p[w[r]])continue b;g.push(p[w[r]].slice())}x.push(g)}p=x}f[d]=p}return f};var c=b("convex-hull")},{"convex-hull":42}],98:[function(b,m,g){function h(b){switch(b){case "uint8":return[f.mallocUint8,f.freeUint8];case "uint16":return[f.mallocUint16,f.freeUint16];case "uint32":return[f.mallocUint32,f.freeUint32];case "int8":return[f.mallocInt8,f.freeInt8];case "int16":return[f.mallocInt16,
f.freeInt16];case "int32":return[f.mallocInt32,f.freeInt32];case "float32":return[f.mallocFloat,f.freeFloat];case "float64":return[f.mallocDouble,f.freeDouble];default:return null}}function c(b){for(var c=[],e=0;b>e;++e)c.push("s"+e);for(e=0;b>e;++e)c.push("n"+e);for(e=1;b>e;++e)c.push("d"+e);for(e=1;b>e;++e)c.push("e"+e);for(e=1;b>e;++e)c.push("f"+e);return c}function l(b,e){function f(b){return"generic"===e?["data.get(",b,")"].join(""):["data[",b,"]"].join("")}function l(b,c){return"generic"===
e?["data.set(",b,",",c,")"].join(""):["data[",b,"]=",c].join("")}var w=["'use strict'"],u=["ndarrayInsertionSort",b.join("d"),e].join(""),r=["left","right","data","offset"].concat(c(b.length)),v=h(e),k=["i,j,cptr,ptr=left*s0+offset"];if(1<b.length){for(var q=[],g=1;g<b.length;++g)k.push("i"+g),q.push("n"+g);v?k.push("scratch=malloc("+q.join("*")+")"):k.push("scratch=new Array("+q.join("*")+")");k.push("dptr","sptr","a","b")}else k.push("scratch");if(w.push(["function ",u,"(",r.join(","),"){var ",
k.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),1<b.length){w.push("dptr=0;sptr=ptr");for(g=b.length-1;0<=g;--g)r=b[g],0!==r&&w.push(["for(i",r,"=0;i",r,"<n",r,";++i",r,"){"].join(""));w.push("scratch[dptr++]=",f("sptr"));for(g=0;g<b.length;++g)r=b[g],0!==r&&w.push("sptr+=d"+r,"}");w.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0");for(g=1;g<b.length;++g)1===g&&w.push("__l:"),w.push(["for(i",g,"=0;i",g,"<n",g,";++i",g,"){"].join(""));w.push(["a=",f("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));
for(g=b.length-1;1<=g;--g)w.push("sptr+=e"+g,"dptr+=f"+g,"}");w.push("dptr=cptr;sptr=cptr-s0");for(g=b.length-1;0<=g;--g)r=b[g],0!==r&&w.push(["for(i",r,"=0;i",r,"<n",r,";++i",r,"){"].join(""));w.push(l("dptr",f("sptr")));for(g=0;g<b.length;++g)r=b[g],0!==r&&w.push(["dptr+=d",r,";sptr+=d",r].join(""),"}");w.push("cptr-=s0\n}");w.push("dptr=cptr;sptr=0");for(g=b.length-1;0<=g;--g)r=b[g],0!==r&&w.push(["for(i",r,"=0;i",r,"<n",r,";++i",r,"){"].join(""));w.push(l("dptr","scratch[sptr++]"));for(g=0;g<
b.length;++g)r=b[g],0!==r&&w.push("dptr+=d"+r,"}")}else w.push("scratch="+f("ptr"),"while((j--\x3eleft)&&("+f("cptr-s0")+">scratch)){",l("cptr",f("cptr-s0")),"cptr-=s0","}",l("cptr","scratch"));if(w.push("}"),1<b.length&&v&&w.push("free(scratch)"),w.push("} return "+u),v)return w=new Function("malloc","free",w.join("\n")),w(v[0],v[1]);w=new Function(w.join("\n"));return w()}function e(b,e,f){function l(b){return["(offset+",b,"*s0)"].join("")}function w(b){return"generic"===e?["data.get(",b,")"].join(""):
["data[",b,"]"].join("")}function u(b,c){return"generic"===e?["data.set(",b,",",c,")"].join(""):["data[",b,"]=",c].join("")}function r(c,k,e){if(1===c.length)D.push("ptr0="+l(c[0]));else for(var f=0;f<c.length;++f)D.push(["b_ptr",f,"=s0*",c[f]].join(""));k&&D.push("pivot_ptr=0");D.push("ptr_shift=offset");for(f=b.length-1;0<=f;--f){var q=b[f];0!==q&&D.push(["for(i",q,"=0;i",q,"<n",q,";++i",q,"){"].join(""))}if(1<c.length)for(f=0;f<c.length;++f)D.push(["ptr",f,"=b_ptr",f,"+ptr_shift"].join(""));D.push(e);
k&&D.push("++pivot_ptr");for(f=0;f<b.length;++f)q=b[f],0!==q&&(1<c.length?D.push("ptr_shift+=d"+q):D.push("ptr0+=d"+q),D.push("}"))}function g(c,k,e,f){if(1===k.length)D.push("ptr0="+l(k[0]));else{for(var q=0;q<k.length;++q)D.push(["b_ptr",q,"=s0*",k[q]].join(""));D.push("ptr_shift=offset")}e&&D.push("pivot_ptr=0");c&&D.push(c+":");for(q=1;q<b.length;++q)D.push(["for(i",q,"=0;i",q,"<n",q,";++i",q,"){"].join(""));if(1<k.length)for(q=0;q<k.length;++q)D.push(["ptr",q,"=b_ptr",q,"+ptr_shift"].join(""));
D.push(f);for(q=b.length-1;1<=q;--q)e&&D.push("pivot_ptr+=f"+q),1<k.length?D.push("ptr_shift+=e"+q):D.push("ptr0+=e"+q),D.push("}")}function k(){1<b.length&&O&&D.push("free(pivot1)","free(pivot2)")}function q(c,k){var e="el"+c,f="el"+k;if(1<b.length){var q="__l"+ ++L;g(q,[e,f],!1,["comp=",w("ptr0"),"-",w("ptr1"),"\nif(comp>0){tmp0=",e,";",e,"=",f,";",f,"=tmp0;break ",q,"}\nif(comp<0){break ",q,"}"].join(""))}else D.push(["if(",w(l(e)),">",w(l(f)),"){tmp0=",e,";",e,"=",f,";",f,"=tmp0}"].join(""))}
function z(c,k){1<b.length?r([c,k],!1,u("ptr0",w("ptr1"))):D.push(u(l(c),w(l(k))))}function E(c,k,e){if(1<b.length){var f="__l"+ ++L;g(f,[k],!0,[c,"=",w("ptr0"),"-pivot",e,"[pivot_ptr]\nif(",c,"!==0){break ",f,"}"].join(""))}else D.push([c,"=",w(l(k)),"-pivot",e].join(""))}function A(c,k){1<b.length?r([c,k],!1,["tmp=",w("ptr0"),"\n",u("ptr0",w("ptr1")),"\n",u("ptr1","tmp")].join("")):D.push(["ptr0=",l(c),"\nptr1=",l(k),"\ntmp=",w("ptr0"),"\n",u("ptr0",w("ptr1")),"\n",u("ptr1","tmp")].join(""))}function C(c,
k,e){1<b.length?(r([c,k,e],!1,["tmp=",w("ptr0"),"\n",u("ptr0",w("ptr1")),"\n",u("ptr1",w("ptr2")),"\n",u("ptr2","tmp")].join("")),D.push("++"+k,"--"+e)):D.push(["ptr0=",l(c),"\nptr1=",l(k),"\nptr2=",l(e),"\n++",k,"\n--",e,"\ntmp=",w("ptr0"),"\n",u("ptr0",w("ptr1")),"\n",u("ptr1",w("ptr2")),"\n",u("ptr2","tmp")].join(""))}function B(b,c){A(b,c);D.push("--"+c)}function G(c,k,e){1<b.length?r([c,k],!0,[u("ptr0",w("ptr1")),"\n",u("ptr1",["pivot",e,"[pivot_ptr]"].join(""))].join("")):D.push(u(l(c),w(l(k))),
u(l(k),"pivot"+e))}function F(k,e){D.push(["if((",e,"-",k,")<=",v,"){\ninsertionSort(",k,",",e,",data,offset,",c(b.length).join(","),")\n}else{\n",H,"(",k,",",e,",data,offset,",c(b.length).join(","),")\n}"].join(""))}function m(c,k,e){1<b.length?(D.push(["__l",++L,":while(true){"].join("")),r([c],!0,["if(",w("ptr0"),"!==pivot",k,"[pivot_ptr]){break __l",L,"}"].join("")),D.push(e,"}")):D.push(["while(",w(l(c)),"===pivot",k,"){",e,"}"].join(""))}var D=["'use strict'"],H=["ndarrayQuickSort",b.join("d"),
e].join(""),K=["left","right","data","offset"].concat(c(b.length)),O=h(e),L=0;D.push(["function ",H,"(",K.join(","),"){"].join(""));K="sixth=((right-left+1)/6)|0 index1=left+sixth index5=right-sixth index3=(left+right)>>1 index2=index3-sixth index4=index3+sixth el1=index1 el2=index2 el3=index3 el4=index4 el5=index5 less=left+1 great=right-1 pivots_are_equal=true tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1=0 comp_pivot2=0 comp=0".split(" ");if(1<b.length){for(var P=[],M=1;M<b.length;++M)P.push("n"+
M),K.push("i"+M);for(M=0;8>M;++M)K.push("b_ptr"+M);K.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+P.join("*"));O?K.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):K.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else K.push("pivot1","pivot2");if(D.push("var "+K.join(",")),q(1,2),q(4,5),q(1,3),q(2,3),q(1,4),q(3,4),q(2,5),q(2,3),q(4,5),1<b.length?r("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),!0,["pivot1[pivot_ptr]=",w("ptr1"),
"\npivot2[pivot_ptr]=",w("ptr3"),"\npivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\nx=",w("ptr0"),"\ny=",w("ptr2"),"\nz=",w("ptr4"),"\n",u("ptr5","x"),"\n",u("ptr6","y"),"\n",u("ptr7","z")].join("")):D.push(["pivot1=",w(l("el2")),"\npivot2=",w(l("el4")),"\npivots_are_equal=pivot1===pivot2\nx=",w(l("el1")),"\ny=",w(l("el3")),"\nz=",w(l("el5")),"\n",u(l("index1"),"x"),"\n",u(l("index3"),"y"),"\n",u(l("index5"),"z")].join("")),z("index2","left"),z("index4","right"),D.push("if(pivots_are_equal){"),
D.push("for(k=less;k<=great;++k){"),E("comp","k",1),D.push("if(comp===0){continue}"),D.push("if(comp<0){"),D.push("if(k!==less){"),A("k","less"),D.push("}"),D.push("++less"),D.push("}else{"),D.push("while(true){"),E("comp","great",1),D.push("if(comp>0){"),D.push("great--"),D.push("}else if(comp<0){"),C("k","less","great"),D.push("break"),D.push("}else{"),B("k","great"),D.push("break"),D.push("}"),D.push("}"),D.push("}"),D.push("}"),D.push("}else{"),D.push("for(k=less;k<=great;++k){"),E("comp_pivot1",
"k",1),D.push("if(comp_pivot1<0){"),D.push("if(k!==less){"),A("k","less"),D.push("}"),D.push("++less"),D.push("}else{"),E("comp_pivot2","k",2),D.push("if(comp_pivot2>0){"),D.push("while(true){"),E("comp","great",2),D.push("if(comp>0){"),D.push("if(--great<k){break}"),D.push("continue"),D.push("}else{"),E("comp","great",1),D.push("if(comp<0){"),C("k","less","great"),D.push("}else{"),B("k","great"),D.push("}"),D.push("break"),D.push("}"),D.push("}"),D.push("}"),D.push("}"),D.push("}"),D.push("}"),G("left",
"(less-1)",1),G("right","(great+1)",2),F("left","(less-2)"),F("(great+2)","right"),D.push("if(pivots_are_equal){"),k(),D.push("return"),D.push("}"),D.push("if(less<index1&&great>index5){"),m("less",1,"++less"),m("great",2,"--great"),D.push("for(k=less;k<=great;++k){"),E("comp_pivot1","k",1),D.push("if(comp_pivot1===0){"),D.push("if(k!==less){"),A("k","less"),D.push("}"),D.push("++less"),D.push("}else{"),E("comp_pivot2","k",2),D.push("if(comp_pivot2===0){"),D.push("while(true){"),E("comp","great",
2),D.push("if(comp===0){"),D.push("if(--great<k){break}"),D.push("continue"),D.push("}else{"),E("comp","great",1),D.push("if(comp<0){"),C("k","less","great"),D.push("}else{"),B("k","great"),D.push("}"),D.push("break"),D.push("}"),D.push("}"),D.push("}"),D.push("}"),D.push("}"),D.push("}"),k(),F("less","great"),D.push("}return "+H),1<b.length&&O)return K=new Function("insertionSort","malloc","free",D.join("\n")),K(f,O[0],O[1]);K=new Function("insertionSort",D.join("\n"));return K(f)}var f=b("typedarray-pool"),
v=32;m.exports=function(b,f){var h=["'use strict'"],x=["ndarraySortWrapper",b.join("d"),f].join("");h.push(["function ",x,"(array){"].join(""));for(var w=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],u=0;u<b.length;++u)w.push(["s",u,"=stride[",u,"]|0,n",u,"=shape[",u,"]|0"].join(""));for(var r=Array(b.length),g=[],u=0;u<b.length;++u){var k=b[u];0!==k&&(0===g.length?r[k]="1":r[k]=g.join("*"),g.push("n"+k))}for(var q=g=-1,u=0;u<b.length;++u)k=b[u],0!==k&&(0<g?w.push(["d",
k,"=s",k,"-d",g,"*n",g].join("")):w.push(["d",k,"=s",k].join("")),g=k),k=b.length-1-u,0!==k&&(0<q?w.push(["e",k,"=s",k,"-e",q,"*n",q,",f",k,"=",r[k],"-f",q,"*n",q].join("")):w.push(["e",k,"=s",k,",f",k,"=",r[k]].join("")),q=k);h.push("var "+w.join(","));w=["0","n0-1","data","offset"].concat(c(b.length));h.push(["if(n0<=",v,"){insertionSort(",w.join(","),")}else{quickSort(",w.join(","),")}"].join(""));h.push("}return "+x);h=new Function("insertionSort","quickSort",h.join("\n"));x=l(b,f);w=e(b,f,x);
return h(x,w)}},{"typedarray-pool":217}],99:[function(b,m,g){var h=b("./lib/compile_sort.js"),c={};m.exports=function(b){var e=b.order,f=b.dtype,v=[e,f].join(":"),d=c[v];return d||(c[v]=d=h(e,f)),d(b),b}},{"./lib/compile_sort.js":98}],100:[function(b,m,g){function h(b,c,d){this.plot=b;this.vbo=c;this.shader=d}m.exports=function(b){var v=b.gl,d=c(v,[0,0,0,1,1,0,1,1]),v=l(v,e.boxVert,e.lineFrag);return new h(b,d,v)};var c=b("gl-buffer"),l=b("gl-shader"),e=b("./shaders");b=h.prototype;b.bind=function(){var b=
this.shader;this.vbo.bind();this.shader.bind();b.attributes.coord.pointer();b.uniforms.screenBox=this.plot.screenBox};b.drawBox=function(){var b=[0,0],c=[0,0];return function(d,e,h,l,w){var u=this.shader,r=this.plot.gl;b[0]=d;b[1]=e;c[0]=h;c[1]=l;u.uniforms.lo=b;u.uniforms.hi=c;u.uniforms.color=w;r.drawArrays(r.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":103,"gl-buffer":59,"gl-shader":138}],101:[function(b,m,g){function h(b,c,e,f){this.plot=
b;this.vbo=c;this.shader=e;this.tickShader=f;this.ticks=[[],[]]}function c(b,c){return b-c}m.exports=function(b){var c=b.gl,f=l(c),x=e(c,v.gridVert,v.gridFrag),c=e(c,v.tickVert,v.gridFrag);return new h(b,f,x,c)};var l=b("gl-buffer"),e=b("gl-shader"),f=b("binary-search-bounds"),v=b("./shaders");b=h.prototype;b.draw=function(){var b=[0,0],c=[0,0],e=[0,0];return function(){for(var f=this.plot,h=this.vbo,l=this.shader,r=this.ticks,v=f.gl,k=f._tickBounds,q=f.dataBox,g=f.viewBox,E=f.gridLineWidth,A=f.gridLineColor,
C=f.gridLineEnable,f=f.pixelRatio,B=0;2>B;++B){var G=k[B],F=.5*(q[B+2]+q[B]),m=q[B+2]-q[B];c[B]=2*(k[B+2]-G)/m;b[B]=2*(G-F)/m}l.bind();h.bind();l.attributes.dataCoord.pointer();l.uniforms.dataShift=b;l.uniforms.dataScale=c;for(B=h=0;2>B;++B)e[0]=e[1]=0,e[B]=1,l.uniforms.dataAxis=e,l.uniforms.lineWidth=E[B]/(g[B+2]-g[B])*f,l.uniforms.color=A[B],k=6*r[B].length,C[B]&&v.drawArrays(v.TRIANGLES,h,k),h+=k}}();b.drawTickMarks=function(){var b=[0,0],e=[0,0],h=[1,0],l=[0,1],w=[0,0],u=[0,0];return function(){for(var r=
this.plot,v=this.vbo,k=this.tickShader,q=this.ticks,g=r.gl,E=r._tickBounds,A=r.dataBox,C=r.viewBox,B=r.pixelRatio,G=r.screenBox,F=G[2]-G[0],G=G[3]-G[1],m=C[2]-C[0],D=C[3]-C[1],H=0;2>H;++H){var K=E[H],O=.5*(A[H+2]+A[H]),L=A[H+2]-A[H];e[H]=2*(E[H+2]-K)/L;b[H]=2*(K-O)/L}e[0]*=m/F;b[0]*=m/F;e[1]*=D/G;b[1]*=D/G;k.bind();v.bind();k.attributes.dataCoord.pointer();v=k.uniforms;v.dataShift=b;v.dataScale=e;k=r.tickMarkLength;m=r.tickMarkWidth;r=r.tickMarkColor;H=6*q[0].length;K=Math.min(f.ge(q[0],(A[0]-E[0])/
(E[2]-E[0]),c),q[0].length);O=Math.min(f.gt(q[0],(A[2]-E[0])/(E[2]-E[0]),c),q[0].length);D=0+6*K;K=6*Math.max(0,O-K);O=Math.min(f.ge(q[1],(A[1]-E[1])/(E[3]-E[1]),c),q[1].length);q=Math.min(f.gt(q[1],(A[3]-E[1])/(E[3]-E[1]),c),q[1].length);E=H+6*O;q=6*Math.max(0,q-O);w[0]=2*(C[0]-k[1])/F-1;w[1]=(C[3]+C[1])/G-1;u[0]=k[1]*B/F;u[1]=m[1]*B/G;v.color=r[1];v.tickScale=u;v.dataAxis=l;v.screenOffset=w;g.drawArrays(g.TRIANGLES,E,q);w[0]=(C[2]+C[0])/F-1;w[1]=2*(C[1]-k[0])/G-1;u[0]=m[0]*B/F;u[1]=k[0]*B/G;v.color=
r[0];v.tickScale=u;v.dataAxis=h;v.screenOffset=w;g.drawArrays(g.TRIANGLES,D,K);w[0]=2*(C[2]+k[3])/F-1;w[1]=(C[3]+C[1])/G-1;u[0]=k[3]*B/F;u[1]=m[3]*B/G;v.color=r[3];v.tickScale=u;v.dataAxis=l;v.screenOffset=w;g.drawArrays(g.TRIANGLES,E,q);w[0]=(C[2]+C[0])/F-1;w[1]=2*(C[3]+k[2])/G-1;u[0]=m[2]*B/F;u[1]=k[2]*B/G;v.color=r[2];v.tickScale=u;v.dataAxis=h;v.screenOffset=w;g.drawArrays(g.TRIANGLES,D,K)}}();b.update=function(){var b=[1,1,-1,-1,1,-1],c=[1,-1,1,1,-1,-1];return function(e){var f=e.ticks;e=e.bounds;
for(var h=new Float32Array(18*(f[0].length+f[1].length)),l=(this.plot.zeroLineEnable,0),r=[[],[]],v=0;2>v;++v)for(var k=r[v],q=f[v],g=e[v],E=e[v+2],A=0;A<q.length;++A){var C=(q[A].x-g)/(E-g);k.push(C);for(var B=0;6>B;++B)h[l++]=C,h[l++]=b[B],h[l++]=c[B]}this.ticks=r;this.vbo.update(h)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":103,"binary-search-bounds":105,"gl-buffer":59,"gl-shader":138}],102:[function(b,m,g){function h(b,c,d){this.plot=
b;this.vbo=c;this.shader=d}m.exports=function(b){var v=b.gl,d=c(v,[-1,-1,-1,1,1,-1,1,1]),v=l(v,e.lineVert,e.lineFrag);return new h(b,d,v)};var c=b("gl-buffer"),l=b("gl-shader"),e=b("./shaders");b=h.prototype;b.bind=function(){var b=this.shader;this.vbo.bind();this.shader.bind();b.attributes.coord.pointer();b.uniforms.screenBox=this.plot.screenBox};b.drawLine=function(){var b=[0,0],c=[0,0];return function(d,e,h,l,w,u){var r=this.plot,g=this.shader,k=r.gl;b[0]=d;b[1]=e;c[0]=h;c[1]=l;g.uniforms.start=
b;g.uniforms.end=c;g.uniforms.width=w*r.pixelRatio;g.uniforms.color=u;k.drawArrays(k.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":103,"gl-buffer":59,"gl-shader":138}],103:[function(b,m,g){m.exports={lineVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n",
lineFrag:"#define GLSLIFY 1\nprecision lowp float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n",textVert:"#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n",
textFrag:"#define GLSLIFY 1\nprecision lowp float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n",gridVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n",
gridFrag:"#define GLSLIFY 1\nprecision lowp float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n",boxVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n",tickVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"}},
{}],104:[function(b,m,g){function h(b,c,e){this.plot=b;this.vbo=c;this.shader=e;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=[0,0]}m.exports=function(b){var e=b.gl,f=c(e),e=l(e,v.textVert,v.textFrag);return new h(b,f,e)};var c=b("gl-buffer"),l=b("gl-shader"),e=b("text-cache"),f=b("binary-search-bounds"),v=b("./shaders");b=h.prototype;b.drawTicks=function(){var b=[0,0],c=[0,0],e=[0,0];return function(h){var l=this.plot,u=this.shader,r=this.tickX[h],v=this.tickOffset[h],
k=l.gl,q=l.viewBox,g=l.dataBox,E=l.screenBox,A=l.pixelRatio,C=l.tickEnable,B=l.tickPad,G=l.tickColor,F=l.tickAngle,m=(l.tickMarkLength,l.labelEnable),D=l.labelPad,H=l.labelColor,l=l.labelAngle,K=this.labelOffset[h],O=this.labelCount[h],L=f.lt(r,g[h]),r=f.le(r,g[h+2]);b[0]=b[1]=0;b[h]=1;c[h]=(q[2+h]+q[h])/(E[2+h]-E[h])-1;E=2/E[2+(1^h)]-E[1^h];c[1^h]=E*q[1^h]-1;C[h]&&(c[1^h]-=E*A*B[h],r>L&&(u.uniforms.dataAxis=b,u.uniforms.screenOffset=c,u.uniforms.color=G[h],u.uniforms.angle=F[h],k.drawArrays(k.TRIANGLES,
v[L],v[r]-v[L])));m[h]&&(c[1^h]-=E*A*D[h],u.uniforms.dataAxis=e,u.uniforms.screenOffset=c,u.uniforms.color=H[h],u.uniforms.angle=l[h],k.drawArrays(k.TRIANGLES,K,O));c[1^h]=E*q[2+(1^h)]-1;C[h+2]&&(c[1^h]+=E*A*B[h+2],r>L&&(u.uniforms.dataAxis=b,u.uniforms.screenOffset=c,u.uniforms.color=G[h+2],u.uniforms.angle=F[h+2],k.drawArrays(k.TRIANGLES,v[L],v[r]-v[L])));m[h+2]&&(c[1^h]+=E*A*D[h+2],u.uniforms.dataAxis=e,u.uniforms.screenOffset=c,u.uniforms.color=H[h+2],u.uniforms.angle=l[h+2],k.drawArrays(k.TRIANGLES,
K,O))}}();b.drawTitle=function(){var b=[0,0],c=[0,0];return function(){for(var e=this.plot,f=this.shader,h=e.gl,l=e.screenBox,r=e.titleCenter,v=e.titleAngle,k=e.titleColor,r=e.titleCenter,e=e.pixelRatio,q=0;2>q;++q)c[q]=2*(r[q]*e-l[q])/(l[2+q]-l[q])-1;f.bind();f.uniforms.dataAxis=b;f.uniforms.screenOffset=c;f.uniforms.angle=v;f.uniforms.color=k;h.drawArrays(h.TRIANGLES,this.titleOffset,this.titleCount)}}();b.bind=function(){var b=[0,0],c=[0,0],e=[0,0];return function(){var f=this.plot,h=this.shader,
l=f._tickBounds,r=f.dataBox,v=f.screenBox,k=f.viewBox;h.bind();for(var q=0;2>q;++q){var g=l[q],E=.5*(r[q+2]+r[q]),A=r[q+2]-r[q],C=k[q+2]-k[q],B=v[q+2]-v[q];c[q]=2*(l[q+2]-g)/A*C/B;b[q]=2*(g-E)/A*C/B}e[1]=2*f.pixelRatio/(v[3]-v[1]);e[0]=e[1]*(v[3]-v[1])/(v[2]-v[0]);h.uniforms.dataScale=c;h.uniforms.dataShift=b;h.uniforms.textScale=e;this.vbo.bind();h.attributes.textCoordinate.pointer()}}();b.update=function(b){for(var c=[],f=b.ticks,h=b.bounds,l=0;2>l;++l){for(var u=[Math.floor(c.length/3)],r=[-(1/
0)],v=f[l],k=0;k<v.length;++k){for(var q=v[k],g=q.x,E=q.fontSize||12,q=e(q.font||"sans-serif",q.text).data,A=1/(h[l+2]-h[l]),C=h[l],B=0;B<q.length;B+=2)c.push(q[B]*E,-q[B+1]*E,(g-C)*A);u.push(Math.floor(c.length/3));r.push(g)}this.tickOffset[l]=u;this.tickX[l]=r}for(l=0;2>l;++l){this.labelOffset[l]=Math.floor(c.length/3);q=e(b.labelFont[l],b.labels[l]).data;E=b.labelSize[l];for(k=0;k<q.length;k+=2)c.push(q[k]*E,-q[k+1]*E,0);this.labelCount[l]=Math.floor(c.length/3)-this.labelOffset[l]}this.titleOffset=
Math.floor(c.length/3);q=e(b.titleFont,b.title).data;E=b.titleSize;for(k=0;k<q.length;k+=2)c.push(q[k]*E,-q[k+1]*E,0);this.titleCount=Math.floor(c.length/3)-this.titleOffset;this.vbo.update(c)};b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":103,"binary-search-bounds":105,"gl-buffer":59,"gl-shader":138,"text-cache":212}],105:[function(b,m,g){function h(b,c,f,h,d){b=["function ",b,"(a,l,h,",h.join(","),"){",d?"":"var i=",f?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];
return d?0>c.indexOf("c")?b.push(";if(x===y){return m}else if(x<=y){"):b.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):b.push(";if(",c,"){i=m;"),f?b.push("l=m+1}else{h=m-1}"):b.push("h=m-1}else{l=m+1}"),b.push("}"),d?b.push("return -1};"):b.push("return i};"),b.join("")}function c(b,c,f,v){return(new Function([h("A","x"+b+"y",c,["y"],v),h("P","c(x,y)"+b+"0",c,["y","c"],v),"function dispatchBsearch",f,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",
f].join("")))()}m.exports={ge:c(">=",!1,"GE"),gt:c(">",!1,"GT"),lt:c("<",!0,"LT"),le:c("<=",!0,"LE"),eq:c("-",!0,"EQ",!0)}},{}],106:[function(b,m,g){function h(b,c){this.gl=b;this.pickBuffer=c;this.screenBox=[0,0,b.drawingBufferWidth,b.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,
0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=
[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=[1/0,1/0,-(1/0),-(1/0)];this.pickDirty=this.dirty=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function c(b){b=b.slice();for(var c=
0;c<b.length;++c)b[c]=b[c].slice();return b}function l(b,c){return b.x-c.x}m.exports=function(b){var c=b.gl,l=e(c,[c.drawingBufferWidth,c.drawingBufferHeight]),c=new h(c,l);return c.grid=f(c),c.text=v(c),c.line=d(c),c.box=p(c),c.update(b),c};var e=b("gl-select-static"),f=b("./lib/grid"),v=b("./lib/text"),d=b("./lib/line"),p=b("./lib/box");b=h.prototype;b.setDirty=function(){this.dirty=this.pickDirty=!0};b.setOverlayDirty=function(){this.dirty=!0};b.nextDepthValue=function(){return this._depthCounter++/
65536};b.draw=function(){return function(){var b=this.gl,c=this.screenBox,d=this.viewBox,e=this.dataBox,f=this.pixelRatio,h=this.grid,k=this.line,q=this.text,l=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){this.dirty=!1;b.bindFramebuffer(b.FRAMEBUFFER,null);b.enable(b.SCISSOR_TEST);b.disable(b.DEPTH_TEST);b.depthFunc(b.LESS);b.depthMask(!1);b.enable(b.BLEND);
b.blendEquation(b.FUNC_ADD,b.FUNC_ADD);b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA);b.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var p=this.borderColor;b.clearColor(p[0]*p[3],p[1]*p[3],p[2]*p[3],p[3]);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);b.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]);p=this.backgroundColor;b.clearColor(p[0]*p[3],p[1]*p[3],p[2]*p[3],p[3]);b.clear(b.COLOR_BUFFER_BIT);h.draw();var p=this.zeroLineEnable,v=this.zeroLineColor,g=this.zeroLineWidth;if(p[0]||
p[1])for(k.bind(),h=0;2>h;++h)if(p[h]&&0>=e[h]&&0<=e[h+2]){var B=c[h]-e[h]*(c[h+2]-c[h])/(e[h+2]-e[h]);0===h?k.drawLine(B,c[1],B,c[3],g[h],v[h]):k.drawLine(c[0],B,c[2],B,g[h],v[h])}for(h=0;h<l.length;++h)l[h].draw();b.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]);b.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);this.grid.drawTickMarks();k.bind();c=this.borderLineEnable;e=this.borderLineWidth;l=this.borderLineColor;c[1]&&k.drawLine(d[0],d[1]-.5*e[1]*f,d[0],d[3]+.5*e[3]*f,e[1],l[1]);c[0]&&k.drawLine(d[0]-.5*e[0]*
f,d[1],d[2]+.5*e[2]*f,d[1],e[0],l[0]);c[3]&&k.drawLine(d[2],d[1]-.5*e[1]*f,d[2],d[3]+.5*e[3]*f,e[3],l[3]);c[2]&&k.drawLine(d[0]-.5*e[0]*f,d[3],d[2]+.5*e[2]*f,d[3],e[2],l[2]);q.bind();for(h=0;2>h;++h)q.drawTicks(h);this.titleEnable&&q.drawTitle();d=this.overlays;for(h=0;h<d.length;++h)d[h].draw();b.disable(b.SCISSOR_TEST);b.disable(b.BLEND);b.depthMask(!0)}}}();b.drawPick=function(){return function(){var b=this.pickBuffer;this.gl;this._pickTimeout=null;b.begin();for(var c=1,d=this.objects,e=0;e<d.length;++e)c=
d[e].drawPick(c);b.end()}}();b.pick=function(){return function(b,c){var d=this.pixelRatio,e=this.pickPixelRatio,f=this.viewBox,h=0|Math.round((b-f[0]/d)*e),d=0|Math.round((c-f[1]/d)*e),e=this.pickBuffer.query(h,d,this.pickRadius);if(!e)return null;for(var e=e.id+(e.value[0]<<8)+(e.value[1]<<16)+(e.value[2]<<24),f=this.objects,k=0;k<f.length;++k){var q=f[k].pick(h,d,e);if(q)return q}return null}}();b.setScreenBox=function(b){var c=this.screenBox,d=this.pixelRatio;c[0]=0|Math.round(b[0]*d);c[1]=0|Math.round(b[1]*
d);c[2]=0|Math.round(b[2]*d);c[3]=0|Math.round(b[3]*d);this.setDirty()};b.setDataBox=function(b){var c=this.dataBox;c[0]===b[0]&&c[1]===b[1]&&c[2]===b[2]&&c[3]===b[3]||(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],this.setDirty())};b.setViewBox=function(b){var c=this.pixelRatio,d=this.viewBox;d[0]=0|Math.round(b[0]*c);d[1]=0|Math.round(b[1]*c);d[2]=0|Math.round(b[2]*c);d[3]=0|Math.round(b[3]*c);c=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((b[2]-b[0])*c),0|Math.round((b[3]-b[1])*c)];this.setDirty()};
b.update=function(b){b=b||{};var d=this.gl,e=this.pixelRatio=b.pixelRatio||1;this.pickPixelRatio=Math.max(e,1);this.setScreenBox(b.screenBox||[0,0,d.drawingBufferWidth/e,d.drawingBufferHeight/e]);this.screenBox;this.setViewBox(b.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/e,.125*(this.screenBox[3]-this.screenBox[1])/e,.875*(this.screenBox[2]-this.screenBox[0])/e,.875*(this.screenBox[3]-this.screenBox[1])/e]);var d=this.viewBox,f=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(b.dataBox||[-10,-10/
f,10,10/f]);this.borderColor=(b.borderColor||[0,0,0,0]).slice();this.backgroundColor=(b.backgroundColor||[0,0,0,0]).slice();this.gridLineEnable=(b.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=(b.gridLineWidth||[1,1]).slice();this.gridLineColor=c(b.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(b.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(b.zeroLineWidth||[4,4]).slice();this.zeroLineColor=c(b.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(b.tickMarkLength||
[0,0,0,0]).slice();this.tickMarkWidth=(b.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=c(b.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(b.titleCenter||[.5*(d[0]+d[2])/e,(d[3]+120)/e]).slice();this.titleEnable=!("titleEnable"in b&&!b.titleEnable);this.titleAngle=b.titleAngle||0;this.titleColor=(b.titleColor||[0,0,0,1]).slice();this.labelPad=(b.labelPad||[15,15,15,15]).slice();this.labelAngle=(b.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=
(b.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=c(b.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.tickPad=(b.tickPad||[15,15,15,15]).slice();this.tickAngle=(b.tickAngle||[0,0,0,0]).slice();this.tickEnable=(b.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=c(b.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(b.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(b.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=c(b.borderLineColor||
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);e=b.ticks||[[],[]];d=this._tickBounds;d[0]=d[1]=1/0;d[2]=d[3]=-(1/0);for(f=0;2>f;++f){var h=e[f].slice(0);0!==h.length&&(h.sort(l),d[f]=Math.min(d[f],h[0].x),d[f+2]=Math.max(d[f+2],h[h.length-1].x))}this.grid.update({bounds:d,ticks:e});this.text.update({bounds:d,ticks:e,labels:b.labels||["x","y"],labelSize:b.labelSize||[12,12],labelFont:b.labelFont||["sans-serif","sans-serif"],title:b.title||"",titleSize:b.titleSize||18,titleFont:b.titleFont||"sans-serif"});
this.setDirty()};b.dispose=function(){this.box.dispose();this.grid.dispose();this.text.dispose();this.line.dispose();for(var b=this.objects.length-1;0<=b;--b)this.objects[b].dispose();this.objects.length=0;for(b=this.overlays.length-1;0<=b;--b)this.overlays[b].dispose();this.overlays.length=0;this.gl=null};b.addObject=function(b){0>this.objects.indexOf(b)&&(this.objects.push(b),this.setDirty())};b.removeObject=function(b){for(var c=this.objects,d=0;d<c.length;++d)if(c[d]===b){c.splice(d,1);this.setDirty();
break}};b.addOverlay=function(b){0>this.overlays.indexOf(b)&&(this.overlays.push(b),this.setOverlayDirty())};b.removeOverlay=function(b){for(var c=this.overlays,d=0;d<c.length;++d)if(c[d]===b){c.splice(d,1);this.setOverlayDirty();break}}},{"./lib/box":100,"./lib/grid":101,"./lib/line":102,"./lib/text":104,"gl-select-static":137}],107:[function(b,m,g){var h=b("gl-shader");m.exports=function(b){return h(b,"#define GLSLIFY 1\nprecision mediump float;\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}",
"#define GLSLIFY 1\nprecision mediump float;\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}",null,[{name:"position",type:"vec2"}])}},{"gl-shader":138}],108:[function(b,m,g){m.exports=function(b,v){b=b||document.body;v=v||{};var d=[.01,1/0];"distanceLimits"in v&&(d[0]=v.distanceLimits[0],d[1]=v.distanceLimits[1]);"zoomMin"in v&&(d[0]=v.zoomMin);"zoomMax"in v&&(d[1]=v.zoomMax);
var p=c({center:v.center||[0,0,0],up:v.up||[0,1,0],eye:v.eye||[0,0,10],mode:v.mode||"orbit",distanceLimits:d}),t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0,w=b.clientWidth,u=b.clientHeight,r={view:p,element:b,delay:v.delay||16,rotateSpeed:v.rotateSpeed||1,zoomSpeed:v.zoomSpeed||1,translateSpeed:v.translateSpeed||1,flipX:!!v.flipX,flipY:!!v.flipY,modes:p.modes,tick:function(){var c=h(),d=this.delay;p.idle(c-d);p.flush(c-(100+2*d));p.recalcMatrix(c-2*d);for(var c=!0,d=p.computedMatrix,e=0;16>e;++e)c=c&&
t[e]===d[e],t[e]=d[e];d=b.clientWidth===w&&b.clientHeight===u;return w=b.clientWidth,u=b.clientHeight,c?!d:(x=Math.exp(p.computedRadius[0]),!0)},lookAt:function(b,c,d){p.lookAt(p.lastT(),b,c,d)},rotate:function(b,c,d){p.rotate(p.lastT(),b,c,d)},pan:function(b,c,d){p.pan(p.lastT(),b,c,d)},translate:function(b,c,d){p.translate(p.lastT(),b,c,d)}};Object.defineProperties(r,{matrix:{get:function(){return p.computedMatrix},set:function(b){return p.setMatrix(p.lastT(),b),p.computedMatrix},enumerable:!0},
mode:{get:function(){return p.getMode()},set:function(b){return p.setMode(b),p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(b){return p.lookAt(p.lastT(),b),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(b){return p.lookAt(p.lastT(),null,b),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(b){return p.lookAt(p.lastT(),null,null,b),p.computedUp},enumerable:!0},distance:{get:function(){return x},
set:function(b){return p.setDistance(p.lastT(),b),b},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(d)},set:function(b){return p.setDistanceLimits(b),b},enumerable:!0}});b.addEventListener("contextmenu",function(b){return b.preventDefault(),!1});var g=0,k=0;return l(b,function(c,d,e,l){var t=1/b.clientHeight,u=t*(d-g),v=t*(e-k),w=r.flipX?1:-1,m=r.flipY?1:-1,D=Math.PI*r.rotateSpeed,t=h();1&c?l.shift?p.rotate(t,0,0,-u*D):p.rotate(t,w*D*u,-m*D*v,0):2&c?p.pan(t,-r.translateSpeed*
u*x,r.translateSpeed*v*x,0):4&c&&(c=r.zoomSpeed*v/window.innerHeight*(t-p.lastT())*50,p.pan(t,0,0,x*(Math.exp(c)-1)));g=d;k=e}),e(b,function(b,c,d){var e=r.flipX?1:-1,k=r.flipY?1:-1;d=h();Math.abs(b)>Math.abs(c)?p.rotate(d,0,0,-b*e*Math.PI*r.rotateSpeed/window.innerWidth):(b=r.zoomSpeed*k*c/window.innerHeight*(d-p.lastT())/100,p.pan(d,0,0,x*(Math.exp(b)-1)))},!0),r};var h=b("right-now"),c=b("3d-view"),l=b("mouse-change"),e=b("mouse-wheel")},{"3d-view":22,"mouse-change":173,"mouse-wheel":177,"right-now":191}],
109:[function(b,m,g){!function(){function b(c){c.permitHostObjects___&&c.permitHostObjects___(b)}function c(b){return!(b.substr(0,r.length)==r&&"___"===b.substr(b.length-3))}function l(b){if(b!==Object(b))throw new TypeError("Not an object: "+b);var c=b[g];if(c&&c.key===b)return c;if(u(b)){c={key:b};try{return w(b,g,{value:c,writable:!1,enumerable:!1,configurable:!1}),c}catch(d){}}}function e(b){return b.prototype=null,Object.freeze(b)}function f(){q||"undefined"==typeof console||(q=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}
if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=b);var v=!1;if("function"==typeof WeakMap){var d=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var p=new d,t=Object.freeze({});if(p.set(t,1),1===p.get(t))return void(m.exports=WeakMap);v=!0}}var x=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),w=Object.defineProperty,u=Object.isExtensible,r="weakmap:",g=r+"ident:"+Math.random()+"___";"undefined"!=typeof crypto&&
"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array&&(p=new ArrayBuffer(25),p=new Uint8Array(p),crypto.getRandomValues(p),g=r+"rand:"+Array.prototype.map.call(p,function(b){return(b%36).toString(36)}).join("")+"___");if(w(Object,"getOwnPropertyNames",{value:function(b){return x(b).filter(c)}}),"getPropertyNames"in Object){var k=Object.getPropertyNames;w(Object,"getPropertyNames",{value:function(b){return k(b).filter(c)}})}!function(){var b=Object.freeze;
w(Object,"freeze",{value:function(c){return l(c),b(c)}});var c=Object.seal;w(Object,"seal",{value:function(b){return l(b),c(b)}});var d=Object.preventExtensions;w(Object,"preventExtensions",{value:function(b){return l(b),d(b)}})}();var q=!1,z=0,E=function(){this instanceof E||f();var b=[],c=[],d=z++;return Object.create(E.prototype,{get___:{value:e(function(e,k){var f,h=l(e);return h?d in h?h[d]:k:(f=b.indexOf(e),0<=f?c[f]:k)})},has___:{value:e(function(c){var e=l(c);return e?d in e:0<=b.indexOf(c)})},
set___:{value:e(function(e,k){var f,h=l(e);return h?h[d]=k:(f=b.indexOf(e),0<=f?c[f]=k:(f=b.length,c[f]=k,b[f]=e)),this})},delete___:{value:e(function(e){var k,f,h=l(e);return h?d in h&&delete h[d]:(k=b.indexOf(e),0>k?!1:(f=b.length-1,b[k]=void 0,c[k]=c[f],b[k]=b[f],b.length=f,c.length=f,!0))})}})};E.prototype=Object.create(Object.prototype,{get:{value:function(b,c){return this.get___(b,c)},writable:!0,configurable:!0},has:{value:function(b){return this.has___(b)},writable:!0,configurable:!0},set:{value:function(b,
c){return this.set___(b,c)},writable:!0,configurable:!0},"delete":{value:function(b){return this.delete___(b)},writable:!0,configurable:!0}});"function"==typeof d?!function(){function c(){this instanceof E||f();var k,q=new d,r=void 0,l=!1;return k=v?function(b,c){return q.set(b,c),q.has(b)||(r||(r=new E),r.set(b,c)),this}:function(b,c){if(l)try{q.set(b,c)}catch(d){r||(r=new E),r.set___(b,c)}else q.set(b,c);return this},Object.create(E.prototype,{get___:{value:e(function(b,c){return r?q.has(b)?q.get(b):
r.get___(b,c):q.get(b,c)})},has___:{value:e(function(b){return q.has(b)||(r?r.has___(b):!1)})},set___:{value:e(k)},delete___:{value:e(function(b){var c=!!q["delete"](b);return r?r.delete___(b)||c:c})},permitHostObjects___:{value:e(function(c){if(c!==b)throw Error("bogus call to permitHostObjects___");l=!0})}})}v&&"undefined"!=typeof Proxy&&(Proxy=void 0);c.prototype=E.prototype;m.exports=c;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():
("undefined"!=typeof Proxy&&(Proxy=void 0),m.exports=E)}}()},{}],110:[function(b,m,g){g="undefined"==typeof WeakMap?b("weak-map"):WeakMap;var h=b("gl-buffer"),c=b("gl-vao"),l=new g;m.exports=function(b){var f=l.get(b);if(!f||!b.isBuffer(f._triangleBuffer.buffer)){var v=h(b,new Float32Array([-1,-1,-1,4,4,-1])),f=c(b,[{buffer:v,type:b.FLOAT,size:2}]);f._triangleBuffer=v;l.set(b,f)}f.bind();b.drawArrays(b.TRIANGLES,0,3);f.unbind()}},{"gl-buffer":59,"gl-vao":166,"weak-map":109}],111:[function(b,m,g){function h(b,
c){return b[0]=c[0],b[1]=c[1],b[2]=c[2],b}function c(b){this.gl=b;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=
"sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,
1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=v(b)}function l(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}m.exports=function(b,d){var e=new c(b);return e.update(d),e};var e=b("./lib/text.js"),f=b("./lib/lines.js"),
v=b("./lib/background.js"),d=b("./lib/cube.js"),p=b("./lib/ticks.js"),t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);b=c.prototype;b.update=function(b){function c(d,e,k){if(k in b){var f,h=b[k],r=this[k];(d?Array.isArray(h)&&Array.isArray(h[0]):Array.isArray(h))?this[k]=f=[e(h[0]),e(h[1]),e(h[2])]:this[k]=f=[e(h),e(h),e(h)];for(d=0;3>d;++d)if(f[d]!==r[d])return!0}return!1}b=b||{};var d,k=c.bind(this,!1,Number),h=c.bind(this,!1,Boolean),r=c.bind(this,!1,String),l=c.bind(this,!0,function(b){if(Array.isArray(b)){if(3===
b.length)return[+b[0],+b[1],+b[2],1];if(4===b.length)return[+b[0],+b[1],+b[2],+b[3]]}return[0,0,0,1]}),t=!1,u=!1;if("bounds"in b)for(var v=b.bounds,x=0;2>x;++x)for(var w=0;3>w;++w)v[x][w]!==this.bounds[x][w]&&(u=!0),this.bounds[x][w]=v[x][w];if("ticks"in b)for(d=b.ticks,t=!0,this.autoTicks=!1,x=0;3>x;++x)this.tickSpacing[x]=0;else k("tickSpacing")&&(this.autoTicks=!0,u=!0);if(this._firstInit&&("ticks"in b||"tickSpacing"in b||(this.autoTicks=!0),u=!0,t=!0,this._firstInit=!1),u&&this.autoTicks&&(d=
p.create(this.bounds,this.tickSpacing),t=!0),t){for(x=0;3>x;++x)d[x].sort(function(b,c){return b.x-c.x});p.equal(d,this.ticks)?t=!1:this.ticks=d}h("tickEnable");r("tickFont")&&(t=!0);k("tickSize");k("tickAngle");k("tickPad");l("tickColor");d=r("labels");r("labelFont")&&(d=!0);h("labelEnable");k("labelSize");k("labelPad");l("labelColor");h("lineEnable");h("lineMirror");k("lineWidth");l("lineColor");h("lineTickEnable");h("lineTickMirror");k("lineTickLength");k("lineTickWidth");l("lineTickColor");h("gridEnable");
k("gridWidth");l("gridColor");h("zeroEnable");l("zeroLineColor");k("zeroLineWidth");h("backgroundEnable");l("backgroundColor");this._text?this._text&&(d||t)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&t&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=f(this.gl,this.bounds,this.ticks))};var x=[new l,new l,new l],w=[0,0,0],u={model:t,view:t,projection:t};
b.isOpaque=function(){return!0};b.isTransparent=function(){return!1};b.drawTransparent=function(b){};var r=[0,0,0],y=[0,0,0],k=[0,0,0];b.draw=function(b){b=b||u;var c=this.gl,e=b.model||t,f=b.view||t,l=b.projection||t;b=this.bounds;for(var p=d(e,f,l,b),v=p.cubeEdges,g=p.axis,c=this.pixelRatio*(l[3]*f[12]+l[7]*f[13]+l[11]*f[14]+l[15]*f[15])/c.drawingBufferHeight,p=0;3>p;++p)this.lastCubeProps.cubeEdges[p]=v[p],this.lastCubeProps.axis[p]=g[p];for(p=0;3>p;++p)for(var m=x[p],D=p,H=this.bounds,K=g,O=m.primalOffset,
L=m.primalMinor,P=m.mirrorOffset,m=m.mirrorMinor,M=v[D],Q=0;3>Q;++Q)if(D!==Q){var T=O,R=P,S=L,X=m;M&1<<Q&&(T=P,R=O,S=m,X=L);T[Q]=H[0][Q];R[Q]=H[1][Q];0<K[Q]?(S[Q]=-1,X[Q]=0):(S[Q]=0,X[Q]=1)}for(p=0;3>p;++p)this.backgroundEnable[p]?w[p]=g[p]:w[p]=0;this._background.draw(e,f,l,b,w,this.backgroundColor);this._lines.bind(e,f,l,this);for(p=0;3>p;++p){D=[0,0,0];0<g[p]?D[p]=b[1][p]:D[p]=b[0][p];for(v=0;2>v;++v)H=(p+1+v)%3,K=(p+1+(1^v))%3,this.gridEnable[H]&&this._lines.drawGrid(H,K,this.bounds,D,this.gridColor[H],
this.gridWidth[H]*this.pixelRatio);for(v=0;2>v;++v)H=(p+1+v)%3,K=(p+1+(1^v))%3,this.zeroEnable[K]&&0>=b[0][K]&&0<=b[1][K]&&this._lines.drawZero(H,K,this.bounds,D,this.zeroLineColor[K],this.zeroLineWidth[K]*this.pixelRatio)}for(p=0;3>p;++p){this.lineEnable[p]&&this._lines.drawAxisLine(p,this.bounds,x[p].primalOffset,this.lineColor[p],this.lineWidth[p]*this.pixelRatio);this.lineMirror[p]&&this._lines.drawAxisLine(p,this.bounds,x[p].mirrorOffset,this.lineColor[p],this.lineWidth[p]*this.pixelRatio);g=
h(r,x[p].primalMinor);D=h(y,x[p].mirrorMinor);H=this.lineTickLength;for(v=0;3>v;++v)K=c/e[5*v],g[v]=g[v]*H[v]*K,D[v]=D[v]*H[v]*K;this.lineTickEnable[p]&&this._lines.drawAxisTicks(p,x[p].primalOffset,g,this.lineTickColor[p],this.lineTickWidth[p]*this.pixelRatio);this.lineTickMirror[p]&&this._lines.drawAxisTicks(p,x[p].mirrorOffset,D,this.lineTickColor[p],this.lineTickWidth[p]*this.pixelRatio)}this._text.bind(e,f,l,this.pixelRatio);for(p=0;3>p;++p){f=x[p].primalMinor;l=h(k,x[p].primalOffset);for(v=
0;3>v;++v)this.lineTickEnable[p]&&(l[v]+=c*f[v]*Math.max(this.lineTickLength[v],0)/e[5*v]);if(this.tickEnable[p]){for(v=0;3>v;++v)l[v]+=c*f[v]*this.tickPad[v]/e[5*v];this._text.drawTicks(p,this.tickSize[p],this.tickAngle[p],l,this.tickColor[p])}if(this.labelEnable[p]){for(v=0;3>v;++v)l[v]+=c*f[v]*this.labelPad[v]/e[5*v];l[p]+=.5*(b[0][p]+b[1][p]);this._text.drawLabel(p,this.labelSize[p],this.labelAngle[p],l,this.labelColor[p])}}};b.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();
this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":112,"./lib/cube.js":113,"./lib/lines.js":114,"./lib/text.js":116,"./lib/ticks.js":117}],112:[function(b,m,g){function h(b,c,d,e){this.gl=b;this.buffer=c;this.vao=d;this.shader=e}m.exports=function(b){for(var v=[],d=[],p=0,t=0;3>t;++t)for(var x=(t+1)%3,g=(t+2)%3,u=[0,0,0],r=[0,0,0],y=-1;1>=y;y+=2){d.push(p,p+2,p+1,p+1,p+2,p+3);u[t]=y;r[t]=y;for(var k=-1;1>=k;k+=2){u[x]=k;for(var q=-1;1>=q;q+=2)u[g]=q,v.push(u[0],u[1],u[2],
r[0],r[1],r[2]),p+=1}k=x;x=g;g=k}v=c(b,new Float32Array(v));d=c(b,new Uint16Array(d),b.ELEMENT_ARRAY_BUFFER);d=l(b,[{buffer:v,type:b.FLOAT,size:3,offset:0,stride:24},{buffer:v,type:b.FLOAT,size:3,offset:12,stride:24}],d);p=e(b);return p.attributes.position.location=0,p.attributes.normal.location=1,new h(b,v,d,p)};var c=b("gl-buffer"),l=b("gl-vao"),e=b("./shaders").bg;b=h.prototype;b.draw=function(b,c,d,e,h,l){for(var g=!1,u=0;3>u;++u)g=g||h[u];g&&(g=this.gl,g.enable(g.POLYGON_OFFSET_FILL),g.polygonOffset(1,
2),this.shader.bind(),this.shader.uniforms={model:b,view:c,projection:d,bounds:e,enable:h,colors:l},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),g.disable(g.POLYGON_OFFSET_FILL))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":115,"gl-buffer":59,"gl-vao":166}],113:[function(b,m,g){m.exports=function(b,k,q,g){c(f,k,b);c(f,q,f);for(k=b=0;2>k;++k)for(p[2]=g[k][2],q=0;2>q;++q){p[1]=g[q][1];for(var E=0;2>E;++E){p[0]=g[E][0];for(var A=v[b],C=p,
B=f,G=0;4>G;++G){A[G]=B[12+G];for(var m=0;3>m;++m)A[G]+=C[m]*B[4*m+G]}b+=1}}g=-1;for(k=0;8>k;++k){b=v[k][3];for(q=0;3>q;++q)d[k][q]=v[k][q]/b;0>b&&(0>g?g=k:d[k][2]<d[g][2]&&(g=k))}if(0>g)for(k=g=0;3>k;++k){q=(k+2)%3;b=(k+1)%3;A=E=-1;for(C=0;2>C;++C)B=C<<k,G=B+(C<<q)+(1-C<<b),m=B+(1-C<<q)+(C<<b),0>e(d[B],d[G],d[m],t)||(C?E=1:A=1);if(!(0>E||0>A))for(C=0;2>C;++C){B=C<<k;G=B+(C<<q)+(1-C<<b);m=B+(1-C<<q)+(C<<b);a:{B=[v[B],v[G],v[m],v[B+(1<<q)+(1<<b)]];for(m=0;m<x.length;++m)if(B=l.positive(B,x[m]),3>B.length){B=
0;break a}for(var m=B[0],G=m[0]/m[3],I=m[1]/m[3],D=0,m=1;m+1<B.length;++m)var H=B[m],K=B[m+1],D=D+Math.abs((H[0]/H[3]-G)*(K[1]/K[3]-I)-(H[1]/H[3]-I)*(K[0]/K[3]-G));B=D}C?E=B:A=B}A>E&&(g|=1<<k)}q=7^g;C=-1;for(k=0;8>k;++k)k!==g&&k!==q&&(0>C?C=k:d[C][1]>d[k][1]&&(C=k));E=-1;for(k=0;3>k;++k)B=C^1<<k,B!==g&&B!==q&&(0>E&&(E=B),b=d[B],b[0]<d[E][0]&&(E=B));A=-1;for(k=0;3>k;++k)B=C^1<<k,B!==g&&B!==q&&B!==E&&(0>A&&(A=B),b=d[B],b[0]>d[A][0]&&(A=B));b=w;b[0]=b[1]=b[2]=0;b[h.log2(E^C)]=C&E;b[h.log2(C^A)]=C&A;
k=7^A;k===g||k===q?(k=7^E,b[h.log2(A^k)]=k&A):b[h.log2(E^k)]=k&E;b=u;for(k=0;3>k;++k)g&1<<k?b[k]=-1:b[k]=1;return r};var h=b("bit-twiddle"),c=b("gl-mat4/multiply"),l=(b("gl-mat4/invert"),b("split-polygon")),e=b("robust-orientation"),f=Array(16),v=(Array(16),Array(8)),d=Array(8),p=Array(3),t=[0,0,0];!function(){for(var b=0;8>b;++b)v[b]=[1,1,1,1],d[b]=[1,1,1]}();var x=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],w=[1,1,1],u=[0,0,0],r={cubeEdges:w,axis:u}},{"bit-twiddle":33,
"gl-mat4/invert":78,"gl-mat4/multiply":80,"robust-orientation":195,"split-polygon":119}],114:[function(b,m,g){function h(b){return b[0]=b[1]=b[2]=0,b}function c(b,c){return b[0]=c[0],b[1]=c[1],b[2]=c[2],b}function l(b,c,d,e,f,h,l,p){this.gl=b;this.vertBuffer=c;this.vao=d;this.shader=e;this.tickCount=f;this.tickOffset=h;this.gridCount=l;this.gridOffset=p}m.exports=function(b,c,d){var k=[];c=[0,0,0];var h=[0,0,0],p=[0,0,0],t=[0,0,0];k.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var x=0;3>x;++x){for(var g=
k.length/3|0,w=0;w<d[x].length;++w){var G=+d[x][w].x;k.push(G,0,1,G,1,1,G,0,-1,G,0,-1,G,1,1,G,1,-1)}G=k.length/3|0;c[x]=g;h[x]=G-g;g=k.length/3|0;for(w=0;w<d[x].length;++w)G=+d[x][w].x,k.push(G,0,1,G,1,1,G,0,-1,G,0,-1,G,1,1,G,1,-1);G=k.length/3|0;p[x]=g;t[x]=G-g}d=e(b,new Float32Array(k));k=f(b,[{buffer:d,type:b.FLOAT,size:3,stride:0,offset:0}]);x=v(b);return x.attributes.position.location=0,new l(b,d,k,x,h,c,t,p)};var e=b("gl-buffer"),f=b("gl-vao"),v=b("./shaders").line,d=[0,0,0],p=[0,0,0],t=[0,
0,0],x=[0,0,0],w=[1,1];b=l.prototype;b.bind=function(b,c,d){this.shader.bind();this.shader.uniforms.model=b;this.shader.uniforms.view=c;this.shader.uniforms.projection=d;w[0]=this.gl.drawingBufferWidth;w[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=w;this.vao.bind()};b.drawAxisLine=function(b,d,e,k,f){var l=h(p);this.shader.uniforms.majorAxis=p;l[b]=d[1][b]-d[0][b];this.shader.uniforms.minorAxis=l;e=c(x,e);e[b]+=d[0][b];this.shader.uniforms.offset=e;this.shader.uniforms.lineWidth=
f;this.shader.uniforms.color=k;d=h(t);d[(b+2)%3]=1;this.shader.uniforms.screenAxis=d;this.vao.draw(this.gl.TRIANGLES,6);d=h(t);d[(b+1)%3]=1;this.shader.uniforms.screenAxis=d;this.vao.draw(this.gl.TRIANGLES,6)};b.drawAxisTicks=function(b,c,e,k,f){var l=h(d);l[b]=1;this.shader.uniforms.majorAxis=l;this.shader.uniforms.offset=c;this.shader.uniforms.minorAxis=e;this.shader.uniforms.color=k;this.shader.uniforms.lineWidth=f;c=h(t);c[b]=1;this.shader.uniforms.screenAxis=c;this.vao.draw(this.gl.TRIANGLES,
this.tickCount[b],this.tickOffset[b])};b.drawGrid=function(b,e,f,k,q,l){var v=h(p);v[e]=f[1][e]-f[0][e];this.shader.uniforms.minorAxis=v;k=c(x,k);k[e]+=f[0][e];this.shader.uniforms.offset=k;e=h(d);e[b]=1;this.shader.uniforms.majorAxis=e;e=h(t);e[b]=1;this.shader.uniforms.screenAxis=e;this.shader.uniforms.lineWidth=l;this.shader.uniforms.color=q;this.vao.draw(this.gl.TRIANGLES,this.gridCount[b],this.gridOffset[b])};b.drawZero=function(b,d,e,k,f,l){var v=h(p);this.shader.uniforms.majorAxis=v;v[b]=e[1][b]-
e[0][b];this.shader.uniforms.minorAxis=v;k=c(x,k);k[b]+=e[0][b];this.shader.uniforms.offset=k;b=h(t);b[d]=1;this.shader.uniforms.screenAxis=b;this.shader.uniforms.lineWidth=l;this.shader.uniforms.color=f;this.vao.draw(this.gl.TRIANGLES,6)};b.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":115,"gl-buffer":59,"gl-vao":166}],115:[function(b,m,g){var h=b("gl-shader");g.line=function(b){return h(b,"#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n",
"#define GLSLIFY 1\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}",null,[{name:"position",type:"vec3"}])};g.text=function(b){return h(b,"#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvoid main() {  \n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n  mat2 planeXform = scale * mat2(cos(angle), sin(angle),\n                                -sin(angle), cos(angle));\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n  vec4 worldPosition = model * vec4(dataPosition, 1);\n  \n  //Compute clip position\n  vec4 viewPosition = view * worldPosition;\n  vec4 clipPosition = projection * viewPosition;\n  clipPosition /= clipPosition.w;\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec4(viewOffset, 0, 0);\n\n  //Done\n  gl_Position = clipPosition;\n}",
"#define GLSLIFY 1\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}",null,[{name:"position",type:"vec3"}])};g.bg=function(b){return h(b,"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  if(dot(normal, enable) > 0.0) {\n    vec3 nPosition = mix(bounds[0], bounds[1], 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n  colorChannel = abs(normal);\n}",
"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] + \n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}",null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":138}],116:[function(b,m,g){(function(h){function c(b,c,d,e){this.gl=b;this.shader=c;this.buffer=d;this.vao=e;this.tickOffset=this.tickCount=this.labelOffset=
this.labelCount=null}m.exports=function(b,d,f,h,k,q){var p=l(b),t=e(b,[{buffer:p,size:3}]),x=v(b);x.attributes.position.location=0;b=new c(b,x,p,t);return b.update(d,f,h,k,q),b};var l=b("gl-buffer"),e=b("gl-vao"),f=b("vectorize-text"),v=b("./shaders").text;h=window||h.global||{};var d=h.__TEXT_CACHE||{};h.__TEXT_CACHE={};h=c.prototype;var p=[0,0];h.bind=function(b,c,d,e){this.vao.bind();this.shader.bind();var k=this.shader.uniforms;k.model=b;k.view=c;k.projection=d;k.pixelScale=e;p[0]=this.gl.drawingBufferWidth;
p[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=p};h.update=function(b,c,e,h,k){function q(b,c,e,k){var h=d[e];h||(h=d[e]={});var q=h[c];if(!q){var q=h,r;e={triangles:!0,font:e,textAlign:"center",textBaseline:"middle"};try{r=f(c,e)}catch(p){r=(console.warn("error vectorizing text:",p),{cells:[],positions:[]})}q=q[c]=r}c=(k||12)/12;k=q.positions;q=q.cells;r=0;for(e=q.length;e>r;++r)for(var h=q[r],t=2;0<=t;--t){var u=k[h[t]];l.push(c*u[0],-c*u[1],b)}}for(var l=(this.gl,[]),p=[0,0,0],
t=[0,0,0],v=[0,0,0],x=[0,0,0],g=0;3>g;++g){v[g]=l.length/3|0;q(.5*(b[0][g]+b[1][g]),c[g],e);x[g]=(l.length/3|0)-v[g];p[g]=l.length/3|0;for(var m=0;m<h[g].length;++m)h[g][m].text&&q(h[g][m].x,h[g][m].text,h[g][m].font||k,h[g][m].fontSize||12);t[g]=(l.length/3|0)-p[g]}this.buffer.update(l);this.tickOffset=p;this.tickCount=t;this.labelOffset=v;this.labelCount=x};var t=[0,0,0];h.drawTicks=function(b,c,d,e,k){t[0]=t[1]=t[2]=0;t[b]=1;this.shader.uniforms.axis=t;this.shader.uniforms.color=k;this.shader.uniforms.angle=
d;this.shader.uniforms.scale=c;this.shader.uniforms.offset=e;this.vao.draw(this.gl.TRIANGLES,this.tickCount[b],this.tickOffset[b])};var x=[0,0,0];h.drawLabel=function(b,c,d,e,k){this.shader.uniforms.axis=x;this.shader.uniforms.color=k;this.shader.uniforms.angle=d;this.shader.uniforms.scale=c;this.shader.uniforms.offset=e;this.vao.draw(this.gl.TRIANGLES,this.labelCount[b],this.labelOffset[b])};h.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this,b("_process"))},
{"./shaders":115,_process:38,"gl-buffer":59,"gl-vao":166,"vectorize-text":219}],117:[function(b,m,g){function h(b,h){var e=b+"",f=e.indexOf("."),v=0;0<=f&&(v=e.length-f-1);var f=Math.pow(10,v),e=Math.round(b*h*f),d=e+"";if(0<=d.indexOf("e"))return d;d=e/f;f=e%f;0>e?(d=0|-Math.ceil(d),f=0|-f):(d=0|Math.floor(d),f|=0);d=""+d;if(0>e&&(d="-"+d),v){for(e=""+f;e.length<v;)e="0"+e;return d+"."+e}return d}g.create=function(b,l){for(var e=[],f=0;3>f;++f){for(var v=[],d=(.5*(b[0][f]+b[1][f]),0);d*l[f]<=b[1][f];++d)v.push({x:d*
l[f],text:h(l[f],d)});for(d=-1;d*l[f]>=b[0][f];--d)v.push({x:d*l[f],text:h(l[f],d)});e.push(v)}return e};g.equal=function(b,h){for(var e=0;3>e;++e){if(b[e].length!==h[e].length)return!1;for(var f=0;f<b[e].length;++f){var v=b[e][f],d=h[e][f];if(v.x!==d.x||v.text!==d.text)return!1}}return!0}},{}],118:[function(b,m,g){m.exports=function(b,c,l){c=c||0;l=l||1;return[[b[12]+b[0],b[13]+b[1],b[14]+b[2],b[15]+b[3]],[b[12]-b[0],b[13]-b[1],b[14]-b[2],b[15]-b[3]],[b[12]+b[4],b[13]+b[5],b[14]+b[6],b[15]+b[7]],
[b[12]-b[4],b[13]-b[5],b[14]-b[6],b[15]-b[7]],[c*b[12]+b[8],c*b[13]+b[9],c*b[14]+b[10],c*b[15]+b[11]],[l*b[12]-b[8],l*b[13]-b[9],l*b[14]-b[10],l*b[15]-b[11]]]}},{}],119:[function(b,m,g){function h(b,c){var d=e(l(b,c),[c[c.length-1]]);return d[d.length-1]}function c(b,c,d,e){c=-c/(e-c);0>c?c=0:1<c&&(c=1);e=1-c;for(var h=b.length,l=Array(h),g=0;h>g;++g)l[g]=c*b[g]+e*d[g];return l}var l=b("robust-dot-product"),e=b("robust-sum");m.exports=function(b,e){for(var d=[],l=[],t=h(b[b.length-1],e),g=b[b.length-
1],w=b[0],u=0;u<b.length;++u,g=w){var w=b[u],r=h(w,e);if(0>t&&0<r||0<t&&0>r)t=c(g,r,w,t),d.push(t),l.push(t.slice());0>r?l.push(w.slice()):0<r?d.push(w.slice()):(d.push(w.slice()),l.push(w.slice()));t=r}return{positive:d,negative:l}};m.exports.positive=function(b,e){for(var d=[],l=h(b[b.length-1],e),t=b[b.length-1],g=b[0],w=0;w<b.length;++w,t=g){var g=b[w],u=h(g,e);(0>l&&0<u||0<l&&0>u)&&d.push(c(t,u,g,l));0<=u&&d.push(g.slice());l=u}return d};m.exports.negative=function(b,e){for(var d=[],l=h(b[b.length-
1],e),t=b[b.length-1],g=b[0],w=0;w<b.length;++w,t=g){var g=b[w],u=h(g,e);(0>l&&0<u||0<l&&0>u)&&d.push(c(t,u,g,l));0>=u&&d.push(g.slice());l=u}return d}},{"robust-dot-product":120,"robust-sum":198}],120:[function(b,m,g){var h=b("two-product"),c=b("robust-sum");m.exports=function(b,e){for(var f=h(b[0],e[0]),v=1;v<b.length;++v)f=c(f,h(b[v],e[v]));return f}},{"robust-sum":198,"two-product":215}],121:[function(b,m,g){function h(b,c,d){this.lo=b;this.hi=c;this.pixelsPerDataUnit=d}m.exports=function(b,k,
h,g,E){var A=k.model||p,C=k.view||p,B=k.projection||p;b=b.bounds;E=E||e(A,C,B,b);k=E.axis;E.edges;f(t,C,A);f(t,B,t);E=u;for(A=0;3>A;++A)E[A].lo=1/0,E[A].hi=-(1/0),E[A].pixelsPerDataUnit=1/0;C=c(v(t,t));v(t,t);for(B=0;3>B;++B){var G=(B+1)%3,m=(B+2)%3,I=r,A=0;a:for(;2>A;++A){var D=[];if(0>k[B]!=!!A){I[B]=b[A][B];for(var H=0;2>H;++H){I[G]=b[H^A][G];for(var K=0;2>K;++K)I[m]=b[K^H^A][m],D.push(I.slice())}for(H=0;H<C.length;++H){if(0===D.length)continue a;D=l.positive(D,C[H])}for(H=0;H<D.length;++H){var m=
D[H],O,K=r;O=t;for(var L=m,P=h,M=g,Q=0;3>Q;++Q){for(var T=x,R=w,S=0;3>S;++S)R[S]=T[S]=L[S];R[3]=T[3]=1;R[Q]+=1;d(R,R,O);0>R[3]&&(K[Q]=1/0);--T[Q];d(T,T,O);0>T[3]&&(K[Q]=1/0);S=(T[0]/T[3]-R[0]/R[3])*P;T=(T[1]/T[3]-R[1]/R[3])*M;K[Q]=.25*Math.sqrt(S*S+T*T)}O=K;for(K=0;3>K;++K)E[K].lo=Math.min(E[K].lo,m[K]),E[K].hi=Math.max(E[K].hi,m[K]),K!==B&&(E[K].pixelsPerDataUnit=Math.min(E[K].pixelsPerDataUnit,Math.abs(O[K])))}}}}return E};var c=b("extract-frustum-planes"),l=b("split-polygon"),e=b("./lib/cube.js"),
f=b("gl-mat4/multiply"),v=b("gl-mat4/transpose"),d=b("gl-vec4/transformMat4"),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),t=new Float32Array(16),x=[0,0,0,1],w=[0,0,0,1],u=[new h(1/0,-(1/0),1/0),new h(1/0,-(1/0),1/0),new h(1/0,-(1/0),1/0)],r=[0,0,0]},{"./lib/cube.js":113,"extract-frustum-planes":118,"gl-mat4/multiply":80,"gl-mat4/transpose":88,"gl-vec4/transformMat4":167,"split-polygon":119}],122:[function(b,m,g){var h=b("gl-shader");m.exports=function(b){return h(b,"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n",
"#define GLSLIFY 1\nprecision mediump float;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}",null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":138}],123:[function(b,m,g){function h(b,c,d,e){this.gl=b;this.buffer=c;this.vao=d;this.shader=e;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];
this.drawSides=[!0,!0,!0];this.axes=null}var c=b("gl-buffer"),l=b("gl-vao"),e=b("./shaders/index");m.exports=function(b,d){function f(b,c,d,e,k,h){b=[b,c,d,0,0,0,1];b[e+3]=1;b[e]=k;p.push.apply(p,b);b[6]=-1;p.push.apply(p,b);b[e]=h;p.push.apply(p,b);p.push.apply(p,b);b[6]=1;p.push.apply(p,b);b[e]=k;p.push.apply(p,b)}var p=[];f(0,0,0,0,0,1);f(0,0,0,1,0,1);f(0,0,0,2,0,1);f(1,0,0,1,-1,1);f(1,0,0,2,-1,1);f(0,1,0,0,-1,1);f(0,1,0,2,-1,1);f(0,0,1,0,-1,1);f(0,0,1,1,-1,1);var r=c(b,p),v=l(b,[{type:b.FLOAT,
buffer:r,size:3,offset:0,stride:28},{type:b.FLOAT,buffer:r,size:3,offset:12,stride:28},{type:b.FLOAT,buffer:r,size:1,offset:24,stride:28}]),k=e(b);k.attributes.position.location=0;k.attributes.color.location=1;k.attributes.weight.location=2;r=new h(b,r,v,k);return r.update(d),r};var f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=h.prototype;var v=[0,0,0],d=[0,0,0],p=[0,0];b.isTransparent=function(){return!1};b.drawTransparent=function(b){};b.draw=function(b){var c=this.gl,e=this.vao,h=this.shader;e.bind();
h.bind();var l,g=b.model||f,k=b.view||f;b=b.projection||f;this.axes&&(l=this.axes.lastCubeProps.axis);for(var q=0;3>q;++q)l&&0>l[q]?(v[q]=this.bounds[0][q],d[q]=this.bounds[1][q]):(v[q]=this.bounds[1][q],d[q]=this.bounds[0][q]);p[0]=c.drawingBufferWidth;p[1]=c.drawingBufferHeight;h.uniforms.model=g;h.uniforms.view=k;h.uniforms.projection=b;h.uniforms.coordinates=[this.position,v,d];h.uniforms.colors=this.colors;h.uniforms.screenShape=p;for(q=0;3>q;++q)h.uniforms.lineWidth=this.lineWidth[q]*this.pixelRatio,
this.enabled[q]&&(e.draw(c.TRIANGLES,6,6*q),this.drawSides[q]&&e.draw(c.TRIANGLES,12,18+12*q));e.unbind()};b.update=function(b){b&&("bounds"in b&&(this.bounds=b.bounds),"position"in b&&(this.position=b.position),"lineWidth"in b&&(this.lineWidth=b.lineWidth),"colors"in b&&(this.colors=b.colors),"enabled"in b&&(this.enabled=b.enabled),"drawSides"in b&&(this.drawSides=b.drawSides))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders/index":122,"gl-buffer":59,
"gl-vao":166}],124:[function(b,m,g){function h(){this.mouse=[-1,-1];this.screen=null;this.distance=1/0;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function c(b,c){var d=null;try{(d=b.getContext("webgl",c))||(d=b.getContext("experimental-webgl",c))}catch(e){return null}return d}function l(b){return"boolean"==typeof b?b:!0}m.exports=function(b){function k(){if(!C&&U.autoResize){var b=B.parentNode,c=1,d=1;b&&b!==document.body?(c=b.clientWidth,d=b.clientHeight):(c=window.innerWidth,
d=window.innerHeight);var b=0|Math.ceil(c*U.pixelRatio),e=0|Math.ceil(d*U.pixelRatio);if(b!==B.width||e!==B.height)B.width=b,B.height=e,b=B.style,b.position=b.position||"absolute",b.left="0px",b.top="0px",b.width=c+"px",b.height=d+"px",S=!0}}function q(){for(var b=M.length,c=R.length,d=0;c>d;++d)T[d]=0;d=0;a:for(;b>d;++d){var e=M[d],k=e.pickSlots;if(k){for(var f=0;c>f;++f)if(255>T[f]+k){Q[d]=f;e.setPickBase(T[f]+1);T[f]+=k;continue a}f=p(G,Z);Q[d]=c;R.push(f);T.push(k);e.setPickBase(1);c+=1}else Q[d]=
-1}for(;0<c&&0===T[c-1];)T.pop(),R.pop().dispose()}function g(){return U.contextLost?!0:void(G.isContextLost()&&(U.contextLost=!0,U.mouseListener.enabled=!1,U.selection.object=null,U.oncontextloss&&U.oncontextloss()))}function E(){if(!g()){k();var b=U.camera.tick();W.view=U.camera.matrix;S=S||b;X=X||b;L.pixelRatio=U.pixelRatio;P.pixelRatio=U.pixelRatio;var b=M.length,c=ha[0],d=ha[1];c[0]=c[1]=c[2]=1/0;d[0]=d[1]=d[2]=-(1/0);for(var e=0;b>e;++e){var f=M[e];f.pixelRatio=U.pixelRatio;f.axes=U.axes;S=
S||!!f.dirty;X=X||!!f.dirty;if(f=f.bounds)for(var h=f[0],q=f[1],f=0;3>f;++f)c[f]=Math.min(c[f],h[f]),d[f]=Math.max(d[f],q[f])}h=U.bounds;if(U.autoBounds)for(f=0;3>f;++f)d[f]<c[f]?(c[f]=-1,d[f]=1):(c[f]===d[f]&&(--c[f],d[f]+=1),e=.05*(d[f]-c[f]),c[f]-=e,d[f]+=e),h[0][f]=c[f],h[1][f]=d[f];c=!1;for(f=0;3>f;++f)c=c||na[0][f]!==h[0][f]||na[1][f]!==h[1][f],na[0][f]=h[0][f],na[1][f]=h[1][f];if(c){d=[0,0,0];for(e=0;3>e;++e){var f=d,q=e,l;l=(h[1][e]-h[0][e])/10;var r=Math.round(Math.log(Math.abs(l))/Math.log(10));
0>r?(r=Math.round(Math.pow(10,-r)),l=Math.ceil(l*r)/r):0<r?(r=Math.round(Math.pow(10,r)),l=Math.ceil(l/r)*r):l=Math.ceil(l);f[q]=l}L.autoTicks?L.update({bounds:h,tickSpacing:d}):L.update({bounds:h})}X=X||c;S=S||c;c=G.drawingBufferWidth;d=G.drawingBufferHeight;Z[0]=c;Z[1]=d;ea[0]=0|Math.max(c/U.pixelRatio,1);ea[1]=0|Math.max(d/U.pixelRatio,1);u(V,U.fovy,c/d,U.zNear,U.zFar);for(e=0;16>e;++e)Y[e]=0;Y[15]=1;for(e=f=0;3>e;++e)f=Math.max(f,h[1][e]-h[0][e]);for(e=0;3>e;++e)U.autoScale?Y[5*e]=U.aspect[e]/
(h[1][e]-h[0][e]):Y[5*e]=1/f,U.autoCenter&&(Y[12+e]=.5*-Y[5*e]*(h[0][e]+h[1][e]));for(e=0;b>e;++e)f=M[e],f.axesBounds=h,U.clipToBounds&&(f.clipBounds=h);I.object&&(U.snapToData?P.position=I.dataCoordinate:P.position=I.dataPosition,P.bounds=h);if(X&&(X=!1,!g()))for(G.colorMask(!0,!0,!0,!0),G.depthMask(!0),G.disable(G.BLEND),G.enable(G.DEPTH_TEST),e=M.length,h=R.length,f=0;h>f;++f){q=R[f];q.shape=ea;q.begin();for(l=0;e>l;++l)Q[l]===f&&(r=M[l],r.drawPick&&(r.pixelRatio=1,r.drawPick(W)));q.end()}if(S){U.axesPixels=
v(U.axes,W,c,d);U.onrender&&U.onrender();G.bindFramebuffer(G.FRAMEBUFFER,null);G.viewport(0,0,c,d);e=U.clearColor;G.clearColor(e[0],e[1],e[2],e[3]);G.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT);G.depthMask(!0);G.colorMask(!0,!0,!0,!0);G.enable(G.DEPTH_TEST);G.depthFunc(G.LEQUAL);G.disable(G.BLEND);G.disable(G.CULL_FACE);h=!1;L.enable&&(h=h||L.isTransparent(),L.draw(W));P.axes=L;I.object&&P.draw(W);G.disable(G.CULL_FACE);for(e=0;b>e;++e)f=M[e],f.axes=L,f.pixelRatio=U.pixelRatio,f.isOpaque&&f.isOpaque()&&
f.draw(W),f.isTransparent&&f.isTransparent()&&(h=!0);if(h){D.shape=Z;D.bind();G.clear(G.DEPTH_BUFFER_BIT);G.colorMask(!1,!1,!1,!1);G.depthMask(!0);G.depthFunc(G.LESS);L.enable&&L.isTransparent()&&L.drawTransparent(W);for(e=0;b>e;++e)f=M[e],f.isOpaque&&f.isOpaque()&&f.draw(W);G.enable(G.BLEND);G.blendEquation(G.FUNC_ADD);G.blendFunc(G.ONE,G.ONE_MINUS_SRC_ALPHA);G.colorMask(!0,!0,!0,!0);G.depthMask(!1);G.clearColor(0,0,0,0);G.clear(G.COLOR_BUFFER_BIT);L.isTransparent()&&L.drawTransparent(W);for(e=0;b>
e;++e)f=M[e],f.isTransparent&&f.isTransparent()&&f.drawTransparent(W);G.bindFramebuffer(G.FRAMEBUFFER,null);G.blendFunc(G.ONE,G.ONE_MINUS_SRC_ALPHA);G.disable(G.DEPTH_TEST);H.bind();D.color[0].bind(0);H.uniforms.accumBuffer=0;x(G);G.disable(G.BLEND)}S=!1;for(e=0;b>e;++e)M[e].dirty=!1}}}function A(){C||U.contextLost||(requestAnimationFrame(A),E())}b=b||{};var C=!1,B=(b.pixelRatio||parseFloat(window.devicePixelRatio),b.canvas);B||((B=document.createElement("canvas"),b.container)?b.container.appendChild(B):
document.body.appendChild(B));var G=b.gl;if(G||(G=c(B,b.glOptions||{premultipliedAlpha:!0,antialias:!0})),!G)throw Error("webgl not supported");var m=b.bounds||[[-10,-10,-10],[10,10,10]],I=new h,D=t(G,[G.drawingBufferWidth,G.drawingBufferHeight],{preferFloat:!0}),H=r(G),K=b.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},O=b.axes||{},L=f(G,O);L.enable=!O.disable;var P=d(G,b.spikes||{}),M=[],Q=[],T=[],R=[],S=!0,X=!0,V=Array(16),Y=Array(16),W={view:null,projection:V,
model:Y},X=!0,Z=[G.drawingBufferWidth,G.drawingBufferHeight],U={gl:G,contextLost:!1,pixelRatio:b.pixelRatio||parseFloat(window.devicePixelRatio),canvas:B,selection:I,camera:e(B,K),axes:L,axesPixels:null,spikes:P,bounds:m,objects:M,shape:Z,aspect:b.aspectRatio||[1,1,1],pickRadius:b.pickRadius||10,zNear:b.zNear||.01,zFar:b.zFar||1E3,fovy:b.fovy||Math.PI/4,clearColor:b.clearColor||[0,0,0,0],autoResize:l(b.autoResize),autoBounds:l(b.autoBounds),autoScale:!!b.autoScale,autoCenter:l(b.autoCenter),clipToBounds:l(b.clipToBounds),
snapToData:!!b.snapToData,onselect:b.onselect||null,onrender:b.onrender||null,onclick:b.onclick||null,cameraParams:W,oncontextloss:null,mouseListener:null},ea=[G.drawingBufferWidth/U.pixelRatio|0,G.drawingBufferHeight/U.pixelRatio|0];U.autoResize&&k();window.addEventListener("resize",k);U.update=function(b){C||(S=!0,X=!0)};U.add=function(b){C||(b.axes=L,M.push(b),Q.push(-1),S=!0,X=!0,q())};U.remove=function(b){C||(b=M.indexOf(b),0>b||(M.splice(b,1),Q.pop(),S=!0,X=!0,q()))};U.dispose=function(){if(!C&&
(C=!0,window.removeEventListener("resize",k),B.removeEventListener("webglcontextlost",g),U.mouseListener.enabled=!1,!U.contextLost)){L.dispose();P.dispose();for(var b=0;b<M.length;++b)M[b].dispose();D.dispose();for(b=0;b<R.length;++b)R[b].dispose();H.dispose();P=L=G=null;M=[]}};var ga=!1,ia=0;U.mouseListener=w(B,function(b,c,d){if(!C){var e=R.length,k=M.length,f=I.object;I.distance=1/0;I.mouse[0]=c;I.mouse[1]=d;I.object=null;I.screen=null;I.dataCoordinate=I.dataPosition=null;var h=!1;if(b)ga=!0;else{ga&&
(X=!0);ga=!1;for(var q=0;e>q;++q){var l=R[q].query(c,ea[1]-d-1,U.pickRadius);if(l&&!(l.distance>I.distance))for(var r=0;k>r;++r){var p=M[r];if(Q[r]===q){var t=p.pick(l);t&&(I.screen=l.coord,I.distance=l.distance,I.object=p,I.index=t.distance,I.dataPosition=t.position,I.dataCoordinate=t.dataCoordinate,I.data=t,h=!0)}}}}f&&f!==I.object&&(f.highlight&&f.highlight(null),S=!0);I.object&&(I.object.highlight&&I.object.highlight(I.data),S=!0);(h=h||I.object!==f)&&U.onselect&&U.onselect(I);1&b&&!(1&ia)&&U.onclick&&
U.onclick(I);ia=b}});B.addEventListener("webglcontextlost",g);var ha=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],na=[ha[0].slice(),ha[1].slice()];return A(),U.redraw=function(){C||(S=!0,E())},U};var e=b("3d-view-controls"),f=b("gl-axes3d"),v=b("gl-axes3d/properties"),d=b("gl-spikes3d"),p=b("gl-select-static"),t=b("gl-fbo"),x=b("a-big-triangle"),w=b("mouse-change"),u=b("gl-mat4/perspective"),r=b("./lib/shader")},{"./lib/shader":107,"3d-view-controls":108,"a-big-triangle":110,"gl-axes3d":111,"gl-axes3d/properties":121,
"gl-fbo":64,"gl-mat4/perspective":81,"gl-select-static":137,"gl-spikes3d":123,"mouse-change":173}],125:[function(b,m,g){m.exports={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec2 offset;\nattribute vec4 color;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\n\nvarying vec4 fragColor;\n\nvec4 computePosition_1_0(vec2 position, vec2 offset, mat3 view, vec2 scale) {\n  vec3 xposition = view * vec3(position, 1.0);\n  return vec4(\n    xposition.xy + scale * offset * xposition.z,\n    0,\n    xposition.z);\n}\n\n\n\n\nvoid main() {\n  fragColor = color;\n\n  gl_Position = computePosition_1_0(\n    position,\n    offset,\n    viewTransform,\n    pixelScale);\n}\n",
fragment:"#define GLSLIFY 1\nprecision lowp float;\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n",pickVertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec2 offset;\nattribute vec4 id;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\nuniform vec4 pickOffset;\n\nvarying vec4 fragColor;\n\nvec4 computePosition_1_0(vec2 position, vec2 offset, mat3 view, vec2 scale) {\n  vec3 xposition = view * vec3(position, 1.0);\n  return vec4(\n    xposition.xy + scale * offset * xposition.z,\n    0,\n    xposition.z);\n}\n\n\n\n\nvoid main() {\n  vec4 fragId = id + pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  fragColor = fragId / 255.0;\n\n  gl_Position = computePosition_1_0(\n    position,\n    offset,\n    viewTransform,\n    pixelScale);\n}\n",
pickFragment:"#define GLSLIFY 1\nprecision lowp float;\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = fragColor;\n}\n"}},{}],126:[function(b,m,g){function h(b){if(b in t)return t[b];var c=[],e=[];d(b,{polygons:!0,font:"sans-serif",textAlign:"left",textBaseline:"alphabetic"}).forEach(function(b){b.forEach(function(b){for(var d=0;d<b.length;++d){var k=b[(d+b.length-1)%b.length],f=b[d],h=b[(d+1)%b.length],q=b[(d+2)%b.length],l=f[0]-k[0],p=f[1]-k[1],t=Math.sqrt(l*l+p*p),l=l/t,p=p/t;c.push(k[0],
k[1]+1.4);e.push(p,-l);c.push(k[0],k[1]+1.4);e.push(-p,l);c.push(f[0],f[1]+1.4);e.push(-p,l);c.push(f[0],f[1]+1.4);e.push(-p,l);c.push(k[0],k[1]+1.4);e.push(p,-l);c.push(f[0],f[1]+1.4);e.push(p,-l);k=q[0]-h[0];q=q[1]-h[1];t=Math.sqrt(k*k+q*q);k/=t;q/=t;c.push(f[0],f[1]+1.4);e.push(p,-l);c.push(f[0],f[1]+1.4);e.push(-p,l);c.push(h[0],h[1]+1.4);e.push(-q,k);c.push(h[0],h[1]+1.4);e.push(-q,k);c.push(f[0],f[1]+1.4);e.push(q,-k);c.push(h[0],h[1]+1.4);e.push(q,-k)}})});for(var f=[1/0,1/0,-(1/0),-(1/0)],
k=0;k<c.length;k+=2)for(var h=0;2>h;++h)f[h]=Math.min(f[h],c[k+h]),f[2+h]=Math.max(f[2+h],c[k+h]);return t[b]={coords:c,normals:e,bounds:f}}function c(b,c,d,e,k,f,h){this.plot=b;this.shader=c;this.pickShader=d;this.positionBuffer=e;this.offsetBuffer=k;this.colorBuffer=f;this.idBuffer=h;this.bounds=[1/0,1/0,-(1/0),-(1/0)];this.pickOffset=this.numVertices=this.numPoints=0;this.points=null}m.exports=function(b,d){var f=b.gl,h=l(f,p.vertex,p.fragment),k=l(f,p.pickVertex,p.pickFragment),q=e(f),t=e(f),
v=e(f),f=e(f),h=new c(b,h,k,q,t,v,f);return h.update(d),b.addObject(h),h};var l=b("gl-shader"),e=b("gl-buffer"),f=b("text-cache"),v=b("typedarray-pool"),d=b("vectorize-text"),p=b("./lib/shaders"),t={},x=c.prototype;!function(){function b(){var e=this.plot,f=this.bounds,h=e.viewBox,l=e.dataBox,e=e.pixelRatio,p=f[3]-f[1],t=l[2]-l[0],v=l[3]-l[1];c[0]=2*(f[2]-f[0])/t;c[4]=2*p/v;c[6]=2*(f[0]-l[0])/t-1;c[7]=2*(f[1]-l[1])/v-1;f=h[3]-h[1];d[0]=2*e/(h[2]-h[0]);d[1]=2*e/f}var c=[1,0,0,0,1,0,0,0,1],d=[1,1];
x.draw=function(){var e=this.shader,f=this.numVertices,h=this.plot.gl;b.call(this);e.bind();e.uniforms.pixelScale=d;e.uniforms.viewTransform=c;this.positionBuffer.bind();e.attributes.position.pointer();this.offsetBuffer.bind();e.attributes.offset.pointer();this.colorBuffer.bind();e.attributes.color.pointer(h.UNSIGNED_BYTE,!0);h.drawArrays(h.TRIANGLES,0,f)};var e=[0,0,0,0];x.drawPick=function(k){var f=this.pickShader,h=this.numVertices,l=this.plot.gl;this.pickOffset=k;for(var p=0;4>p;++p)e[p]=k>>8*
p&255;return b.call(this),f.bind(),f.uniforms.pixelScale=d,f.uniforms.viewTransform=c,f.uniforms.pickOffset=e,this.positionBuffer.bind(),f.attributes.position.pointer(),this.offsetBuffer.bind(),f.attributes.offset.pointer(),this.idBuffer.bind(),f.attributes.id.pointer(l.UNSIGNED_BYTE,!1),l.drawArrays(l.TRIANGLES,0,h),k+this.numPoints}}();x.pick=function(b,c,d){b=this.pickOffset;c=this.numPoints;if(b>d||d>=b+c)return null;d-=b;b=this.points;return{object:this,pointId:d,dataCoord:[b[2*d],b[2*d+1]]}};
x.update=function(b){b=b||{};var c=b.positions||[],d=b.colors||[],e=b.glyphs||[],k=b.sizes||[],q=b.borderWidths||[];b=b.borderColors||[];this.points=c;for(var l=this.bounds=[1/0,1/0,-(1/0),-(1/0)],p=0,t=0;t<e.length;++t)for(var p=p+(f("sans-serif",e[t]).data.length+h(e[t]).coords.length>>1),g=0;2>g;++g)l[g]=Math.min(l[g],c[2*t+g]),l[2+g]=Math.max(l[2+g],c[2*t+g]);l[0]===l[2]&&(l[2]+=1);l[3]===l[1]&&(l[3]+=1);for(var x=1/(l[2]-l[0]),m=1/(l[3]-l[1]),F=l[0],l=l[1],I=v.mallocFloat32(2*p),D=v.mallocFloat32(2*
p),H=v.mallocUint8(4*p),K=v.mallocUint32(p),O=0,t=0;t<e.length;++t){for(var L=f("sans-serif",e[t]),P=h(e[t]),M=x*(c[2*t]-F),Q=m*(c[2*t+1]-l),T=k[t],R=255*d[4*t],S=255*d[4*t+1],X=255*d[4*t+2],V=255*d[4*t+3],Y=.5*(P.bounds[0]+P.bounds[2]),W=.5*(P.bounds[1]+P.bounds[3]),g=0;g<L.data.length;g+=2)I[2*O]=M,I[2*O+1]=Q,D[2*O]=-T*(L.data[g]-Y),D[2*O+1]=-T*(L.data[g+1]-W),H[4*O]=R,H[4*O+1]=S,H[4*O+2]=X,H[4*O+3]=V,K[O]=t,O+=1;L=q[t];R=255*b[4*t];S=255*b[4*t+1];X=255*b[4*t+2];V=255*b[4*t+3];for(g=0;g<P.coords.length;g+=
2)I[2*O]=M,I[2*O+1]=Q,D[2*O]=-(T*(P.coords[g]-Y)+L*P.normals[g]),D[2*O+1]=-(T*(P.coords[g+1]-W)+L*P.normals[g+1]),H[4*O]=R,H[4*O+1]=S,H[4*O+2]=X,H[4*O+3]=V,K[O]=t,O+=1}this.numPoints=e.length;this.numVertices=p;this.positionBuffer.update(I);this.offsetBuffer.update(D);this.colorBuffer.update(H);this.idBuffer.update(K);v.free(I);v.free(D);v.free(H);v.free(K)};x.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.offsetBuffer.dispose();this.colorBuffer.dispose();
this.idBuffer.dispose();this.plot.removeObject(this)}},{"./lib/shaders":125,"gl-buffer":59,"gl-shader":138,"text-cache":212,"typedarray-pool":217,"vectorize-text":219}],127:[function(b,m,g){g.pointVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute float weight;\n\nuniform mat3 matrix;\nuniform float pointSize, useWeight;\n\nvarying float fragWeight;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n  fragWeight = mix(1.0, weight, useWeight);\n}\n";
g.pointFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\n\nvarying float fragWeight;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  vec4 baseColor = mix(borderColor, color, smoothStep(radius, centerFraction));\n  float alpha = 1.0 - pow(1.0 - baseColor.a, fragWeight);\n  gl_FragColor = vec4(baseColor.rgb * alpha, alpha);\n}\n";
g.pickVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n";
g.pickFragment="#define GLSLIFY 1\nprecision mediump float;\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"},{}],128:[function(b,m,g){arguments[4][105][0].apply(g,arguments)},{dup:105}],129:[function(b,m,g){function h(b,c,d,e,f,h){for(var l=b+1;c>=l;++l){for(var k=d[l],q=e[2*l],v=e[2*l+1],g=f[l],A=h[l],C=l;C>b;){var B=d[C-1],m=e[2*(C-1)];if(0<=(B-k||q-m))break;d[C]=B;e[2*C]=
m;e[2*C+1]=e[2*C-1];f[C]=f[C-1];h[C]=h[C-1];--C}d[C]=k;e[2*C]=q;e[2*C+1]=v;f[C]=g;h[C]=A}}function c(b,c,d,e,f,h){var l=d[b],k=e[2*b],q=e[2*b+1],v=f[b],g=h[b];d[b]=d[c];e[2*b]=e[2*c];e[2*b+1]=e[2*c+1];f[b]=f[c];h[b]=h[c];d[c]=l;e[2*c]=k;e[2*c+1]=q;f[c]=v;h[c]=g}function l(b,c,d,e,f,h){d[b]=d[c];e[2*b]=e[2*c];e[2*b+1]=e[2*c+1];f[b]=f[c];h[b]=h[c]}function e(b,c,d,e,f,h,l,k,q,v,g){k[b]=k[c];q[2*b]=q[2*c];q[2*b+1]=q[2*c+1];v[b]=v[c];g[b]=g[c];k[c]=d;q[2*c]=e;q[2*c+1]=f;v[c]=h;g[c]=l}function f(b,c,d,
e,f){return 0>(d[b]-d[c]||e[2*c]-e[2*b]||f[b]-f[c])}function v(b,t,g,w,u,r){var y=(t-b+1)/6|0,k=b+y,q=t-y,z=b+t>>1,E=z-y,A=z+y,C=k,B=E,m=z,F=A,I=q,y=b+1,D=t-1,H=0;f(C,B,g,w,u,r)&&(H=C,C=B,B=H);f(F,I,g,w,u,r)&&(H=F,F=I,I=H);f(C,m,g,w,u,r)&&(H=C,C=m,m=H);f(B,m,g,w,u,r)&&(H=B,B=m,m=H);f(C,F,g,w,u,r)&&(H=C,C=F,F=H);f(m,F,g,w,u,r)&&(H=m,m=F,F=H);f(B,I,g,w,u,r)&&(H=B,B=I,I=H);f(B,m,g,w,u,r)&&(H=B,B=m,m=H);f(F,I,g,w,u,r)&&(H=F,F=I,I=H);var H=g[B],K=w[2*B],O=w[2*B+1],L=u[B],B=r[B],P=g[F],M=w[2*F],Q=w[2*F+
1],T=u[F],F=r[F],R=g[m],S=g[I];g[k]=g[C];g[z]=R;g[q]=S;for(R=0;2>R;++R){var S=w[2*m+R],X=w[2*I+R];w[2*k+R]=w[2*C+R];w[2*z+R]=S;w[2*q+R]=X}R=u[m];S=u[I];u[k]=u[C];u[z]=R;u[q]=S;m=r[m];I=r[I];r[k]=r[C];r[z]=m;r[q]=I;l(E,b,g,w,u,r);l(A,t,g,w,u,r);for(k=y;D>=k;++k)if(0>(H-g[k]||w[2*k]-K||L-u[k]))k!==y&&c(k,y,g,w,u,r),++y;else if(!(0>(P-g[k]||w[2*k]-M||T-u[k])))for(;;){if(0>(P-g[D]||w[2*D]-M||T-u[D])){if(0>(H-g[D]||w[2*D]-K||L-u[D])){var q=k,z=y,E=D,A=g,C=w,m=u,I=r,R=A[q],S=C[2*q],X=C[2*q+1],V=m[q],Y=
I[q];A[q]=A[z];C[2*q]=C[2*z];C[2*q+1]=C[2*z+1];m[q]=m[z];I[q]=I[z];A[z]=A[E];C[2*z]=C[2*E];C[2*z+1]=C[2*E+1];m[z]=m[E];I[z]=I[E];A[E]=R;C[2*E]=S;C[2*E+1]=X;m[E]=V;I[E]=Y;++y}else c(k,D,g,w,u,r);--D;break}if(--D<k)break}e(b,y-1,H,K,O,L,B,g,w,u,r);e(t,D+1,P,M,Q,T,F,g,w,u,r);d>=y-2-b?h(b,y-2,g,w,u,r):v(b,y-2,g,w,u,r);d>=t-(D+2)?h(D+2,t,g,w,u,r):v(D+2,t,g,w,u,r);d>=D-y?h(y,D,g,w,u,r):v(y,D,g,w,u,r)}m.exports=function(b,c,e,f,l){4*d>=l?h(0,l-1,b,c,e,f):v(0,l-1,b,c,e,f)};var d=32},{}],130:[function(b,m,
g){function h(b,c,h){this.pixelSize=b;this.offset=c;this.count=h}var c=b("typedarray-pool"),l=b("./lib/sort");m.exports=function(b,f,v,d){function p(c,d,k,h,q,l){k*=.5;var r=h+1,t=q-h;v[E]=t;z[E++]=l;for(var u=0;2>u;++u)for(var g=0;2>g;++g){var x=c+u*k,w=d+g*k,A;A=b;for(var y=f,m=q,S=x,X=w,V=x+k,Y=w+k,W=r,Z=r;m>Z;++Z){var U=A[2*Z],ea=A[2*Z+1],ga=y[Z];U>=S&&V>=U&&ea>=X&&Y>=ea&&(Z===W?W+=1:(A[2*Z]=A[2*W],A[2*Z+1]=A[2*W+1],y[Z]=y[W],A[2*W]=U,A[2*W+1]=ea,y[W]=ga,W+=1))}A=W;A!==r&&(A-r>=Math.max(.9*t,
32)&&(y=q+h>>>1,p(x,w,k,r,y,l+1),r=y),p(x,w,k,r,A,l+1),r=A)}}var t=b.length>>>1;if(1>t)return[];for(var g=1/0,w=1/0,u=-(1/0),r=-(1/0),y=0;t>y;++y){var k=b[2*y],q=b[2*y+1],g=Math.min(g,k),u=Math.max(u,k),w=Math.min(w,q),r=Math.max(r,q);f[y]=y}g===u&&(u+=1+Math.abs(u));w===r&&(r+=1+Math.abs(u));y=1/(u-g);k=1/(r-w);q=Math.max(u-g,r-w);d=d||[0,0,0,0];d[0]=g;d[1]=w;d[2]=u;d[3]=r;var z=c.mallocInt32(t),E=0;p(g,w,q,0,t,0);l(z,b,f,v,t);d=[];u=0;r=t;for(E=t-1;0<=E;--E){b[2*E]=(b[2*E]-g)*y;b[2*E+1]=(b[2*E+
1]-w)*k;var A=z[E];A!==u&&(d.push(new h(q*Math.pow(.5,A),E+1,r-(E+1))),r=E+1,u=A)}return d.push(new h(q*Math.pow(.5,A+1),0,r)),c.free(z),d}},{"./lib/sort":129,"typedarray-pool":217}],131:[function(b,m,g){function h(b,c,d,e,f,h){this.plot=b;this.offsetBuffer=c;this.pickBuffer=d;this.weightBuffer=e;this.shader=f;this.pickShader=h;this.scales=[];this.size=12;this.borderSize=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=[0,0,0,1];this.bounds=[1/0,1/0,-(1/0),-(1/0)];this.pickOffset=0;this.xCoords=
this.points=null}var c=b("gl-shader"),l=b("gl-buffer"),e=b("binary-search-bounds"),f=b("snap-points-2d"),v=b("typedarray-pool"),d=b("./lib/shader");m.exports=function(b,e){var f=b.gl,v=l(f),u=l(f),r=l(f),g=c(f,d.pointVertex,d.pointFragment),f=c(f,d.pickVertex,d.pickFragment),v=new h(b,v,u,r,g,f);return v.update(e),b.addObject(v),v};b=h.prototype;b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.xCoords&&v.free(this.xCoords);
this.plot.removeObject(this)};b.update=function(b){function c(d,e){return d in b?b[d]:e}b=b||{};this.size=c("size",12);this.color=c("color",[1,0,0,1]).slice();this.borderSize=c("borderSize",1);this.borderColor=c("borderColor",[0,0,0,1]).slice();this.xCoords&&v.free(this.xCoords);var d=b.positions,e=v.mallocFloat32(d.length),h=v.mallocInt32(d.length>>>1);e.set(d);var l=v.mallocFloat32(d.length);this.points=d;this.scales=f(e,h,l,this.bounds);this.offsetBuffer.update(e);this.pickBuffer.update(h);this.weightBuffer.update(l);
for(var g=v.mallocFloat32(d.length>>>1),k=0,q=0;k<d.length;k+=2,++q)g[q]=e[k];v.free(h);v.free(e);v.free(l);this.xCoords=g;this.pointCount=d.length>>>1;this.pickOffset=0};b.drawPick=function(){var b=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(d){var f=this.plot,h=this.pickShader,l=this.scales,v=this.offsetBuffer,k=this.pickBuffer,q=this.bounds,g=this.size,E=this.borderSize,A=f.gl,C=f.pickPixelRatio,B=f.viewBox,m=f.dataBox;if(0===this.pointCount)return d;var F=q[2]-q[0],I=q[3]-q[1],D=m[2]-m[0],
H=m[3]-m[1],f=Math.min(D/((B[2]-B[0])*C/f.pixelRatio),H/((B[3]-B[1])*C/f.pixelRatio));b[0]=2*F/D;b[4]=2*I/H;b[6]=2*(q[0]-m[0])/D-1;b[7]=2*(q[1]-m[1])/H-1;this.pickOffset=d;c[0]=255&d;c[1]=d>>8&255;c[2]=d>>16&255;c[3]=d>>24&255;h.bind();h.uniforms.matrix=b;h.uniforms.color=this.color;h.uniforms.borderColor=this.borderColor;h.uniforms.pointSize=C*(g+E);h.uniforms.pickOffset=c;0===this.borderSize?h.uniforms.centerFraction=2:h.uniforms.centerFraction=g/(g+E+1.25);v.bind();h.attributes.position.pointer();
k.bind();h.attributes.pickId.pointer(A.UNSIGNED_BYTE);h=this.xCoords;v=(m[0]-q[0]-f*g*C)/F;q=(m[2]-q[0]+f*g*C)/F;for(g=l.length-1;0<=g;--g)m=l[g],m.pixelSize<f&&1<g||(C=m.offset,m=m.count+C,C=e.ge(h,v,C,m-1),m=e.lt(h,q,C,m-1)+1,A.drawArrays(A.POINTS,C,m-C));return d+this.pointCount}}();b.draw=function(){var b=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,d=this.shader,f=this.scales,h=this.offsetBuffer,l=this.bounds,v=this.size,k=this.borderSize,q=c.gl,g=c.pixelRatio,E=c.viewBox,c=c.dataBox;
if(0!==this.pointCount){var A=l[2]-l[0],C=l[3]-l[1],B=c[2]-c[0],m=c[3]-c[1],E=Math.min(B/(E[2]-E[0]),m/(E[3]-E[1]));b[0]=2*A/B;b[4]=2*C/m;b[6]=2*(l[0]-c[0])/B-1;b[7]=2*(l[1]-c[1])/m-1;d.bind();d.uniforms.matrix=b;d.uniforms.color=this.color;d.uniforms.borderColor=this.borderColor;d.uniforms.pointSize=g*(v+k);d.uniforms.useWeight=1;0===this.borderSize?d.uniforms.centerFraction=2:d.uniforms.centerFraction=v/(v+k+1.25);h.bind();d.attributes.position.pointer();this.weightBuffer.bind();d.attributes.weight.pointer();
h=this.xCoords;k=(c[0]-l[0]-E*v*g)/A;l=(c[2]-l[0]+E*v*g)/A;v=!0;for(g=f.length-1;0<=g;--g)A=f[g],A.pixelSize<E&&1<g||(c=A.offset,A=A.count+c,c=e.ge(h,k,c,A-1),A=e.lt(h,l,c,A-1)+1,q.drawArrays(q.POINTS,c,A-c),v&&(v=!1,d.uniforms.useWeight=0))}}}();b.pick=function(b,c,d){b=this.pickOffset;c=this.pointCount;if(b>d||d>=b+c)return null;d-=b;b=this.points;return{object:this,pointId:d,dataCoord:[b[2*d],b[2*d+1]]}}},{"./lib/shader":127,"binary-search-bounds":128,"gl-buffer":59,"gl-shader":138,"snap-points-2d":130,
"typedarray-pool":217}],132:[function(b,m,g){var h=b("vectorize-text");m.exports=function(b,e){var f=c[e];if(f||(f=c[e]={}),b in f)return f[b];for(var v=h(b,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:e}),d=h(b,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:e}),p=[[1/0,1/0],[-(1/0),-(1/0)]],t=0;t<v.positions.length;++t)for(var g=v.positions[t],w=0;2>w;++w)p[0][w]=Math.min(p[0][w],g[w]),p[1][w]=Math.max(p[1][w],g[w]);return f[b]=[d,v,p]};var c={}},{"vectorize-text":219}],
133:[function(b,m,g){function h(b,d){var e=c(b,d),f=e.attributes;return f.position.location=0,f.color.location=1,f.glyph.location=2,f.id.location=3,e}var c=b("gl-shader");b=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}];var l={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n",attributes:b},e={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n",attributes:b},f={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n",attributes:b},v={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}",attributes:b},d={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}",attributes:b},p={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n",
fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}",attributes:b};g.createPerspective=function(b){return h(b,l)};g.createOrtho=function(b){return h(b,e)};g.createProject=
function(b){return h(b,f)};g.createPickPerspective=function(b){return h(b,v)};g.createPickOrtho=function(b){return h(b,d)};g.createPickProject=function(b){return h(b,p)}},{"gl-shader":138}],134:[function(b,m,g){function h(b,c){var d=b[0],e=b[1],k=b[2],f=b[3];return b[0]=c[0]*d+c[4]*e+c[8]*k+c[12]*f,b[1]=c[1]*d+c[5]*e+c[9]*k+c[13]*f,b[2]=c[2]*d+c[6]*e+c[10]*k+c[14]*f,b[3]=c[3]*d+c[7]*e+c[11]*k+c[15]*f,b}function c(b,c,d,e){return h(e,e,d),h(e,e,c),h(e,e,b)}function l(b,c){this.index=b;this.dataCoordinate=
this.position=c}function e(b,c,d,e,k,f,h,q,r,p,t,u){this.gl=b;this.pixelRatio=1;this.shader=c;this.orthoShader=d;this.projectShader=e;this.pointBuffer=k;this.colorBuffer=f;this.glyphBuffer=h;this.idBuffer=q;this.vao=r;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.pickId=0;this.pickPerspectiveShader=p;this.pickOrthoShader=t;this.pickProjectShader=u;this.points=[];this._selectResult=new l(0,[0,0,0]);this.useOrtho=
!0;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]];this.dirty=!0}function f(b){return b[0]=b[1]=b[2]=0,b}function v(b,c){return b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=1,b}function d(b,c,d,e){return b[0]=c[0],b[1]=c[1],b[2]=c[2],b[d]=e,b}function p(b,e,h,l,r,p){var t=h.gl;if(h.vao.bind(),r===1>h.opacity||p)b.bind(),
b=b.uniforms,b.model=l.model||k,b.view=l.view||k,b.projection=l.projection||k,q[0]=2/t.drawingBufferWidth,q[1]=2/t.drawingBufferHeight,b.screenSize=q,b.highlightId=h.highlightId,b.highlightScale=h.highlightScale,b.fragClipBounds=I,b.clipBounds=h.axes.bounds,b.opacity=h.opacity,b.pickGroup=h.pickId/255,b.pixelRatio=h.pixelRatio,h.vao.draw(t.TRIANGLES,h.vertexCount),0<h.lineWidth&&(t.lineWidth(h.lineWidth),h.vao.draw(t.LINES,h.lineVertexCount,h.vertexCount));var g,t=h.axesProject;b=h.gl;p=e.uniforms;
var x=l.model||k,w=l.view||k;l=l.projection||k;var y=h.axesBounds;g=h.clipBounds;for(var m=F,V=0;2>V;++V)for(var Y=0;3>Y;++Y)m[V][Y]=Math.max(Math.min(g[V][Y],1E8),-1E8);g=h.axes?h.axes.lastCubeProps.axis:[1,1,1];q[0]=2/b.drawingBufferWidth;q[1]=2/b.drawingBufferHeight;e.bind();p.view=w;p.projection=l;p.screenSize=q;p.highlightId=h.highlightId;p.highlightScale=h.highlightScale;p.clipBounds=m;p.pickGroup=h.pickId/255;p.pixelRatio=h.pixelRatio;for(e=0;3>e;++e)if(t[e]&&1>h.projectOpacity[e]===r){p.scale=
h.projectScale[e];p.opacity=h.projectOpacity[e];for(var V=B,W=0;16>W;++W)V[W]=0;for(W=0;4>W;++W)V[5*W]=1;V[5*e]=0;0>g[e]?V[12+e]=y[0][e]:V[12+e]=y[1][e];u(V,x,V);p.model=V;var V=(e+1)%3,Y=(e+2)%3,Z=f(z),U=f(E);Z[V]=1;U[Y]=1;var W=c(l,w,x,v(A,Z)),ea=c(l,w,x,v(C,U));if(Math.abs(W[1])>Math.abs(ea[1]))var ga=W,W=ea,ea=ga,ga=Z,Z=U,U=ga,ga=V,V=Y,Y=ga;0>W[0]&&(Z[V]=-1);0<ea[1]&&(U[Y]=-1);for(W=ga=ea=0;4>W;++W)ea+=Math.pow(x[4*V+W],2),ga+=Math.pow(x[4*Y+W],2);Z[V]/=Math.sqrt(ea);U[Y]/=Math.sqrt(ga);p.axes[0]=
Z;p.axes[1]=U;p.fragClipBounds[0]=d(G,m[0],e,-1E8);p.fragClipBounds[1]=d(G,m[1],e,1E8);h.vao.draw(b.TRIANGLES,h.vertexCount);0<h.lineWidth&&(b.lineWidth(h.lineWidth),h.vao.draw(b.LINES,h.lineVertexCount,h.vertexCount))}h.vao.unbind()}var t=b("gl-buffer"),x=b("gl-vao"),w=b("typedarray-pool"),u=b("gl-mat4/multiply"),r=b("./lib/shaders"),y=b("./lib/glyphs"),k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];m.exports=function(b){var c=b.gl,d=r.createPerspective(c),k=r.createOrtho(c),f=r.createProject(c),h=r.createPickPerspective(c),
q=r.createPickOrtho(c),l=r.createPickProject(c),p=t(c),u=t(c),v=t(c),g=t(c),w=x(c,[{buffer:p,size:3,type:c.FLOAT},{buffer:u,size:4,type:c.FLOAT},{buffer:v,size:2,type:c.FLOAT},{buffer:g,size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),c=new e(c,d,k,f,p,u,v,g,w,h,q,l);return c.update(b),c};b=e.prototype;b.pickSlots=1;b.setPickBase=function(b){this.pickId=b};b.isTransparent=function(){if(1>this.opacity)return!0;for(var b=0;3>b;++b)if(this.axesProject[b]&&1>this.projectOpacity[b])return!0;return!1};b.isOpaque=
function(){if(1<=this.opacity)return!0;for(var b=0;3>b;++b)if(this.axesProject[b]&&1<=this.projectOpacity[b])return!0;return!1};var q=[0,0],z=[0,0,0],E=[0,0,0],A=[0,0,0,1],C=[0,0,0,1],B=k.slice(),G=[0,0,0],F=[[0,0,0],[0,0,0]],I=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];b.draw=function(b){p(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,b,!1,!1)};b.drawTransparent=function(b){p(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,b,!0,!1)};b.drawPick=function(b){p(this.useOrtho?
this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,b,!1,!0)};b.pick=function(b){if(!b||b.id!==this.pickId)return null;var c=b.value[2]+(b.value[1]<<8)+(b.value[0]<<16);if(c>=this.pointCount||0>c)return null;b=this.points[c];var d=this._selectResult;d.index=c;for(c=0;3>c;++c)d.position[c]=d.dataCoordinate[c]=b[c];return d};b.highlight=function(b){b?(b=b.index,this.highlightId=[(255&b)/255,(b>>8&255)/255,(b>>16&255)/255,0]):this.highlightId=[1,1,1,1]};b.update=function(b){if(b=
b||{},"perspective"in b&&(this.useOrtho=!b.perspective),"orthographic"in b&&(this.useOrtho=!!b.orthographic),"lineWidth"in b&&(this.lineWidth=b.lineWidth),"project"in b)if(Array.isArray(b.project))this.axesProject=b.project;else{var c=!!b.project;this.axesProject=[c,c,c]}"projectScale"in b&&(Array.isArray(b.projectScale)?this.projectScale=b.projectScale.slice():(c=+b.projectScale,this.projectScale=[c,c,c]));"projectOpacity"in b&&(Array.isArray(b.projectOpacity)?this.projectOpacity=b.projectOpacity.slice():
(c=+b.projectOpacity,this.projectOpacity=[c,c,c]));"opacity"in b&&(this.opacity=b.opacity);this.dirty=!0;if(c=b.position){var d=b.font||"normal",e=b.alignment||[0,0],k=[1/0,1/0,1/0],f=[-(1/0),-(1/0),-(1/0)],h=b.glyph,q=b.color,l=b.size,r=b.angle;b=b.lineColor;var p=0,t=0,u=0,v=c.length,g=0;a:for(;v>g;++g){for(var x=c[g],A=0;3>A;++A)if(isNaN(x[A])||!isFinite(x[A]))continue a;var z;z=Array.isArray(h)?y(h[g],d):h?y(h,d):y("\u25cf",d);var C=z[0],E=z[1],m=z[2],t=t+3*C.cells.length,u=u+2*E.edges.length}var g=
t+u,B=w.mallocFloat(3*g),G=w.mallocFloat(4*g),F=w.mallocFloat(2*g),I=w.mallocUint32(g),fa=[0,e[1]],ta=0,ka=t,Sa=[0,0,0,1],Da=[0,0,0,1],ca=Array.isArray(q)&&Array.isArray(q[0]),nb=Array.isArray(b)&&Array.isArray(b[0]),g=0;a:for(;v>g;++g){x=c[g];for(A=0;3>A;++A){if(isNaN(x[A])||!isFinite(x[A])){p+=1;continue a}f[A]=Math.max(f[A],x[A]);k[A]=Math.min(k[A],x[A])}z=Array.isArray(h)?y(h[g],d):h?y(h,d):y("\u25cf",d);C=z[0];E=z[1];m=z[2];if(Array.isArray(q)){var Aa;if(Aa=ca?q[g]:q,3===Aa.length){for(A=0;3>
A;++A)Sa[A]=Aa[A];Sa[3]=1}else if(4===Aa.length)for(A=0;4>A;++A)Sa[A]=Aa[A]}else Sa[0]=Sa[1]=Sa[2]=0,Sa[3]=1;if(Array.isArray(b))if(Aa=nb?b[g]:b,3===Aa.length){for(A=0;3>A;++A)Da[A]=Aa[A];Da[A]=1}else{if(4===Aa.length)for(A=0;4>A;++A)Da[A]=Aa[A]}else Da[0]=Da[1]=Da[2]=0,Da[3]=1;z=.5;Array.isArray(l)?z=+l[g]:l?z=+l:this.useOrtho&&(z=12);x=0;Array.isArray(r)?x=+r[g]:r&&(x=+r);for(var ja=Math.cos(x),oa=Math.sin(x),x=c[g],A=0;3>A;++A)f[A]=Math.max(f[A],x[A]),k[A]=Math.min(k[A],x[A]);0>e[0]?fa[0]=e[0]*
(1+m[1][0]):0<e[0]&&(fa[0]=-e[0]*(1+m[0][0]));m=C.cells;C=C.positions;for(A=0;A<m.length;++A)for(var Ya=m[A],Ma=0;3>Ma;++Ma){for(var ua=0;3>ua;++ua)B[3*ta+ua]=x[ua];for(ua=0;4>ua;++ua)G[4*ta+ua]=Sa[ua];I[ta]=p;ua=C[Ya[Ma]];F[2*ta]=z*(ja*ua[0]-oa*ua[1]+fa[0]);F[2*ta+1]=z*(oa*ua[0]+ja*ua[1]+fa[1]);ta+=1}m=E.edges;C=E.positions;for(A=0;A<m.length;++A)for(Ya=m[A],Ma=0;2>Ma;++Ma){for(ua=0;3>ua;++ua)B[3*ka+ua]=x[ua];for(ua=0;4>ua;++ua)G[4*ka+ua]=Da[ua];I[ka]=p;ua=C[Ya[Ma]];F[2*ka]=z*(ja*ua[0]-oa*ua[1]+
fa[0]);F[2*ka+1]=z*(oa*ua[0]+ja*ua[1]+fa[1]);ka+=1}p+=1}this.vertexCount=t;this.lineVertexCount=u;this.pointBuffer.update(B);this.colorBuffer.update(G);this.glyphBuffer.update(F);this.idBuffer.update(new Uint32Array(I));w.free(B);w.free(G);w.free(F);w.free(I);this.bounds=[k,f];this.points=c;this.pointCount=c.length}};b.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();
this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/glyphs":132,"./lib/shaders":133,"gl-buffer":59,"gl-mat4/multiply":80,"gl-vao":166,"typedarray-pool":217}],135:[function(b,m,g){g.boxVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n";g.boxFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"},
{}],136:[function(b,m,g){function h(b,c,d){this.plot=b;this.boxBuffer=c;this.boxShader=d;this.enabled=!0;this.selectBox=[1/0,1/0,-(1/0),-(1/0)];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var c=b("gl-shader"),l=b("gl-buffer"),e=b("./lib/shaders");m.exports=function(b,v){var d=b.gl,p=l(d,[0,0,0,1,1,0,1,1]),d=c(d,e.boxVertex,e.boxFragment),p=new h(b,p,d);return p.update(v),b.addOverlay(p),p};b=h.prototype;
b.draw=function(){if(this.enabled){var b=this.plot,c=this.selectBox,d=this.borderWidth,e=(this.innerFill,this.innerColor),h=(this.outerFill,this.outerColor),l=this.borderColor,g=b.box,u=b.screenBox,r=b.dataBox,y=b.viewBox,k=b.pixelRatio,b=(c[0]-r[0])*(y[2]-y[0])/(r[2]-r[0])+y[0],q=(c[1]-r[1])*(y[3]-y[1])/(r[3]-r[1])+y[1],z=(c[2]-r[0])*(y[2]-y[0])/(r[2]-r[0])+y[0],c=(c[3]-r[1])*(y[3]-y[1])/(r[3]-r[1])+y[1];if(b=Math.max(b,y[0]),q=Math.max(q,y[1]),z=Math.min(z,y[2]),c=Math.min(c,y[3]),!(b>z||q>c))if(g.bind(),
y=u[2]-u[0],u=u[3]-u[1],this.outerFill&&(g.drawBox(0,0,y,q,h),g.drawBox(0,q,b,c,h),g.drawBox(0,c,y,u,h),g.drawBox(z,q,y,c,h)),this.innerFill&&g.drawBox(b,q,z,c,e),0<d)d*=k,g.drawBox(b-d,q-d,z+d,q+d,l),g.drawBox(b-d,c-d,z+d,c+d,l),g.drawBox(b-d,q-d,b+d,c+d,l),g.drawBox(z-d,q-d,z+d,c+d,l)}};b.update=function(b){b=b||{};this.innerFill=!!b.innerFill;this.outerFill=!!b.outerFill;this.innerColor=(b.innerColor||[0,0,0,.5]).slice();this.outerColor=(b.outerColor||[0,0,0,.5]).slice();this.borderColor=(b.borderColor||
[0,0,0,1]).slice();this.borderWidth=b.borderWidth||0;this.selectBox=(b.selectBox||this.selectBox).slice()};b.dispose=function(){this.boxBuffer.dispose();this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":135,"gl-buffer":59,"gl-shader":138}],137:[function(b,m,g){function h(b,c,d,e,f){this.coord=[b,c];this.id=d;this.value=e;this.distance=f}function c(b,c,d){this.gl=b;this.fbo=c;this.buffer=d;this._readTimeout=null;var e=this;this._readCallback=function(){e.gl&&(c.bind(),b.readPixels(0,
0,c.shape[0],c.shape[1],b.RGBA,b.UNSIGNED_BYTE,e.buffer),e._readTimeout=null)}}m.exports=function(b,d){var f=l(b,d),h=e.mallocUint8(d[0]*d[1]*4);return new c(b,f,h)};var l=b("gl-fbo"),e=b("typedarray-pool"),f=b("ndarray"),v=b("bit-twiddle").nextPow2,d=b("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX",
"this_closestY"],localVars:[]},body:{body:"{if(255>_inline_7_arg0_||255>_inline_7_arg1_||255>_inline_7_arg2_||255>_inline_7_arg3_){var _inline_7_l=_inline_7_arg4_-_inline_7_arg6_[0],_inline_7_a=_inline_7_arg5_-_inline_7_arg6_[1],_inline_7_f=_inline_7_l*_inline_7_l+_inline_7_a*_inline_7_a;_inline_7_f<this_closestD2&&(this_closestD2=_inline_7_f,this_closestX=_inline_7_arg6_[0],this_closestY=_inline_7_arg6_[1])}}",args:[{name:"_inline_7_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg1_",lvalue:!1,
rvalue:!0,count:1},{name:"_inline_7_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_7_a","_inline_7_f","_inline_7_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2",
"this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});b=c.prototype;Object.defineProperty(b,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(b){if(this.gl){this.fbo.shape=b;var c=this.fbo.shape[0],d=this.fbo.shape[1];if(d*c*4>this.buffer.length){e.free(this.buffer);for(var f=this.buffer=e.mallocUint8(v(d*c*4)),h=0;d*c*4>h;++h)f[h]=255}return b}}});b.begin=function(){var b=this.gl;this.shape;b&&(this.fbo.bind(),b.clearColor(1,1,1,1),
b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT))};b.end=function(){var b=this.gl;b&&(b.bindFramebuffer(b.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};b.query=function(b,c,e){if(!this.gl)return null;var l=this.fbo.shape.slice();b|=0;c|=0;"number"!=typeof e&&(e=1);var u=0|Math.min(Math.max(b-e,0),l[0]),r=0|Math.min(Math.max(b+e,0),l[0]);b=0|Math.min(Math.max(c-e,0),l[1]);c=0|Math.min(Math.max(c+e,0),l[1]);if(u>=r||b>=c)return null;
c=[r-u,c-b];l=f(this.buffer,[c[0],c[1],4],[4,4*l[0],1],4*(u+l[0]*b));e=d(l.hi(c[0],c[1],1),e,e);c=e[0];r=e[1];if(0>c||Math.pow(this.radius,2)<e[2])return null;var g=l.get(c,r,0),k=l.get(c,r,1),q=l.get(c,r,2),l=l.get(c,r,3);return new h(c+u|0,r+b|0,g,[k,q,l],Math.sqrt(e[2]))};b.dispose=function(){this.gl&&(this.fbo.dispose(),e.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":33,"cwise/lib/wrapper":48,"gl-fbo":64,ndarray:189,"typedarray-pool":217}],
138:[function(b,m,g){function h(b){this.gl=b;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function c(b,c){return b.name<c.name?-1:1}var l=b("./lib/create-uniforms"),e=b("./lib/create-attributes"),f=b("./lib/reflect"),v=b("./lib/shader-cache"),d=b("./lib/runtime-reflect");b=h.prototype;b.bind=function(){this.program||this._relink();this.gl.useProgram(this.program)};b.dispose=function(){this._fref&&this._fref.dispose();
this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};b.update=function(b,h,g,w){function u(){y.program=v.program(k,y._vref,y._fref,q,z);for(var b=0;b<g.length;++b)F[b]=k.getUniformLocation(y.program,g[b].name)}if(!h||1===arguments.length){var r=b;b=r.vertex;h=r.fragment;g=r.uniforms;w=r.attributes}var y=this,k=y.gl,r=y._vref;y._vref=v.shader(k,k.VERTEX_SHADER,b);r&&r.dispose();y.vertShader=y._vref.shader;
r=this._fref;if(y._fref=v.shader(k,k.FRAGMENT_SHADER,h),r&&r.dispose(),y.fragShader=y._fref.shader,!g||!w){r=k.createProgram();if(k.attachShader(r,y.fragShader),k.attachShader(r,y.vertShader),k.linkProgram(r),!k.getProgramParameter(r,k.LINK_STATUS))throw r=k.getProgramInfoLog(r),console.error("gl-shader: Error linking program:",r),Error("gl-shader: Error linking program:"+r);g=g||d.uniforms(k,r);w=w||d.attributes(k,r);k.deleteProgram(r)}w=w.slice();w.sort(c);for(var r=[],q=[],z=[],E=0;E<w.length;++E){var A=
w[E];if(0<=A.type.indexOf("mat")){for(var C=0|A.type.charAt(A.type.length-1),m=Array(C),G=0;C>G;++G)m[G]=z.length,q.push(A.name+"["+G+"]"),"number"==typeof A.location?z.push(A.location+G):Array.isArray(A.location)&&A.location.length===C&&"number"==typeof A.location[G]?z.push(0|A.location[G]):z.push(-1);r.push({name:A.name,type:A.type,locations:m})}else r.push({name:A.name,type:A.type,locations:[z.length]}),q.push(A.name),"number"==typeof A.location?z.push(0|A.location):z.push(-1)}for(E=A=0;E<z.length;++E)if(0>
z[E]){for(;0<=z.indexOf(A);)A+=1;z[E]=A}var F=Array(g.length);u();y._relink=u;y.types={uniforms:f(g),attributes:f(w)};y.attributes=e(k,y,r,z);Object.defineProperty(y,"uniforms",l(k,y,g,F))};m.exports=function(b,c,d,e,f){b=new h(b);return b.update(c,d,e,f),b}},{"./lib/create-attributes":139,"./lib/create-uniforms":140,"./lib/reflect":141,"./lib/runtime-reflect":142,"./lib/shader-cache":143}],139:[function(b,m,g){function h(b,c,h,d,l,t){this._gl=b;this._wrapper=c;this._index=h;this._locations=d;this._dimension=
l;this._constFunc=t}function c(b,c,l,d,p,t,g){for(var w=["gl","v"],u=[],r=0;p>r;++r)w.push("x"+r),u.push("x"+r);w.push("if(x0.length===void 0){return gl.vertexAttrib"+p+"f(v,"+u.join()+")}else{return gl.vertexAttrib"+p+"fv(v,x0)}");var y=Function.apply(null,w),k=new h(b,c,l,d,p,y);Object.defineProperty(t,g,{set:function(c){return b.disableVertexAttribArray(d[l]),y(b,d[l],c),c},get:function(){return k},enumerable:!0})}function l(b,f,h,d,l,t,g){for(var w=Array(l),u=Array(l),r=0;l>r;++r)c(b,f,h[r],d,
l,w,r),u[r]=w[r];Object.defineProperty(w,"location",{set:function(b){if(Array.isArray)for(var c=0;l>c;++c)u[c].location=b[c];else for(c=0;l>c;++c)result[c]=u[c].location=b+c;return b},get:function(){for(var b=Array(l),c=0;l>c;++c)b[c]=d[h[c]];return b},enumerable:!0});w.pointer=function(c,k,f,r){c=c||b.FLOAT;k=!!k;f=f||l*l;r=r||0;for(var t=0;l>t;++t){var u=d[h[t]];b.vertexAttribPointer(u,l,c,k,f,r+t*l);b.enableVertexAttribArray(u)}};var y=Array(l),k=b["vertexAttrib"+l+"fv"];Object.defineProperty(t,
g,{set:function(c){for(var f=0;l>f;++f){var r=d[h[f]];if(b.disableVertexAttribArray(r),Array.isArray(c[0]))k.call(b,r,c[f]);else{for(var t=0;l>t;++t)y[t]=c[l*f+t];k.call(b,r,y)}}return c},get:function(){return w},enumerable:!0})}m.exports=function(b,f,h,d){for(var p={},t=0,g=h.length;g>t;++t){var w=h[t],u=w.name,r=w.type,w=w.locations;switch(r){case "bool":case "int":case "float":c(b,f,w[0],d,1,p,u);break;default:if(0<=r.indexOf("vec")){var y=r.charCodeAt(r.length-1)-48;if(2>y||4<y)throw Error("gl-shader: Invalid data type for attribute "+
u+": "+r);c(b,f,w[0],d,y,p,u)}else{if(!(0<=r.indexOf("mat")))throw Error("gl-shader: Unknown data type for attribute "+u+": "+r);y=r.charCodeAt(r.length-1)-48;if(2>y||4<y)throw Error("gl-shader: Invalid data type for attribute "+u+": "+r);l(b,f,w,d,y,p,u)}}}return p};b=h.prototype;b.pointer=function(b,c,h,d){var l=this._gl,t=this._locations[this._index];l.vertexAttribPointer(t,this._dimension,b||l.FLOAT,!!c,h||0,d||0);l.enableVertexAttribArray(t)};b.set=function(b,c,h,d){return this._constFunc(this._locations[this._index],
b,c,h,d)};Object.defineProperty(b,"location",{get:function(){return this._locations[this._index]},set:function(b){return b!==this._locations[this._index]&&(this._locations[this._index]=0|b,this._wrapper.program=null),0|b}})},{}],140:[function(b,m,g){function h(b){return(new Function("y","return function(){return y}"))(b)}function c(b,c){for(var h=Array(b),d=0;b>d;++d)h[d]=c;return h}var l=b("./reflect");m.exports=function(b,f,g,d){function p(b,c,d){switch(d){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+
c+"],obj"+b+")";case "float":return"gl.uniform1f(locations["+c+"],obj"+b+")";default:var e=d.indexOf("vec");if(!(0<=e&&1>=e&&d.length===4+e)){if(0===d.indexOf("mat")&&4===d.length){e=d.charCodeAt(d.length-1)-48;if(2>e||4<e)throw Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+d);return"gl.uniformMatrix"+e+"fv(locations["+c+"],false,obj"+b+")"}throw Error("gl-shader: Unknown uniform data type for "+name+": "+d);}e=d.charCodeAt(d.length-1)-48;if(2>e||4<e)throw Error("gl-shader: Invalid data type");
switch(d.charAt(0)){case "b":case "i":return"gl.uniform"+e+"iv(locations["+c+"],obj"+b+")";case "v":return"gl.uniform"+e+"fv(locations["+c+"],obj"+b+")";default:throw Error("gl-shader: Unrecognized data type for vector "+name+": "+d);}}}function t(b,c){if("object"!=typeof c)return[[b,c]];var d=[],e;for(e in c){var f=c[e],h=b,h=h+(parseInt(e)+""===e?"["+e+"]":"."+e);"object"==typeof f?d.push.apply(d,t(h,f)):d.push([h,f])}return d}function x(c){var f=["return function updateProperty(obj){"];c=t("",
c);for(var h=0;h<c.length;++h){var l=c[h],r=l[0],l=l[1];d[l]&&f.push(p(r,l,g[l].type))}f.push("return obj}");return(new Function("gl","locations",f.join("\n")))(b,d)}function w(b){switch(b){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;default:var d=b.indexOf("vec");if(0<=d&&1>=d&&b.length===4+d){d=b.charCodeAt(b.length-1)-48;if(2>d||4<d)throw Error("gl-shader: Invalid data type");return"b"===b.charAt(0)?c(d,!1):c(d,0)}if(0===b.indexOf("mat")&&
4===b.length){d=b.charCodeAt(b.length-1)-48;if(2>d||4<d)throw Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+b);return c(d*d,0)}throw Error("gl-shader: Unknown uniform data type for "+name+": "+b);}}function u(c,q,l){if("object"==typeof l){var p=r(l);Object.defineProperty(c,q,{get:h(p),set:x(l),enumerable:!0,configurable:!1})}else d[l]?Object.defineProperty(c,q,{get:(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+
l+"])}"))(b,f,d),set:x(l),enumerable:!0,configurable:!1}):c[q]=w(g[l].type)}function r(b){var c;if(Array.isArray(b)){c=Array(b.length);for(var d=0;d<b.length;++d)u(c,d,b[d])}else for(d in c={},b)u(c,d,b[d]);return c}var y=l(g,!0);return{get:h(r(y)),set:x(y),enumerable:!0,configurable:!0}}},{"./reflect":141}],141:[function(b,m,g){m.exports=function(b,c){for(var l={},e=0;e<b.length;++e)for(var f=b[e].name.split("."),g=l,d=0;d<f.length;++d){var p=f[d].split("[");if(1<p.length){p[0]in g||(g[p[0]]=[]);
for(var g=g[p[0]],t=1;t<p.length;++t){var x=parseInt(p[t]);t<p.length-1||d<f.length-1?(x in g||(t<p.length-1?g[x]=[]:g[x]={}),g=g[x]):c?g[x]=e:g[x]=b[e].type}}else d<f.length-1?(p[0]in g||(g[p[0]]={}),g=g[p[0]]):c?g[p[0]]=e:g[p[0]]=b[e].type}return l}},{}],142:[function(b,m,g){function h(b,f){if(!l){var h=Object.keys(c);l={};for(var d=0;d<h.length;++d){var p=h[d];l[b[p]]=c[p]}}return l[f]}g.uniforms=function(b,c){for(var l=b.getProgramParameter(c,b.ACTIVE_UNIFORMS),d=[],p=0;l>p;++p){var t=b.getActiveUniform(c,
p);if(t){var g=h(b,t.type);if(1<t.size)for(var w=0;w<t.size;++w)d.push({name:t.name.replace("[0]","["+w+"]"),type:g});else d.push({name:t.name,type:g})}}return d};g.attributes=function(b,c){for(var l=b.getProgramParameter(c,b.ACTIVE_ATTRIBUTES),d=[],p=0;l>p;++p){var t=b.getActiveAttrib(c,p);t&&d.push({name:t.name,type:h(b,t.type)})}return d};var c={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",
BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},l=null},{}],143:[function(b,m,g){function h(b,c,e,f,h,l,u){this.id=b;this.src=c;this.type=e;this.shader=f;this.count=l;this.programs=[];this.cache=u}function c(b){this.gl=b;this.shaders=[{},{}];this.programs={}}function l(b){var d=e.get(b);return d||(d=new c(b),e.set(b,d)),d}g.shader=function(b,c,e){return l(b).getShaderReference(c,e)};g.program=function(b,c,
e,f,h){return l(b).getProgram(c,e,f,h)};var e=new ("undefined"==typeof WeakMap?b("weakmap-shim"):WeakMap),f=0;h.prototype.dispose=function(){if(0===--this.count){for(var b=this.cache,c=b.gl,e=this.programs,f=0,h=e.length;h>f;++f){var l=b.programs[e[f]];l&&(delete b.programs[f],c.deleteProgram(l))}c.deleteShader(this.shader);delete b.shaders[this.type===c.FRAGMENT_SHADER|0][this.src]}};b=c.prototype;b.getShaderReference=function(b,c){var e=this.gl,l=this.shaders[b===e.FRAGMENT_SHADER|0],g=l[c];if(g&&
e.isShader(g.shader))g.count+=1;else{g=e.createShader(b);if(e.shaderSource(g,c),e.compileShader(g),!e.getShaderParameter(g,e.COMPILE_STATUS))throw e=e.getShaderInfoLog(g),console.error("gl-shader: Error compiling shader:",e),Error("gl-shader: Error compiling shader:"+e);g=l[c]=new h(f++,c,b,g,[],1,this)}return g};b.getProgram=function(b,c,e,f){var h=[b.id,c.id,e.join(":"),f.join(":")].join("@"),l=this.programs[h];if(!l||!this.gl.isProgram(l)){var l=this.programs,u=this.gl,r=b.shader,g=c.shader,k=
u.createProgram();u.attachShader(k,r);u.attachShader(k,g);for(r=0;r<e.length;++r)u.bindAttribLocation(k,f[r],e[r]);if(u.linkProgram(k),!u.getProgramParameter(k,u.LINK_STATUS))throw b=u.getProgramInfoLog(k),console.error("gl-shader: Error linking program:",b),Error("gl-shader: Error linking program:"+b);l[h]=l=k;b.programs.push(h);c.programs.push(h)}return l}},{"weakmap-shim":146}],144:[function(b,m,g){var h=b("./hidden-store.js");m.exports=function(){var b={};return function(l){if(("object"!=typeof l||
null===l)&&"function"!=typeof l)throw Error("Weakmap-shim: Key must be object");var e=l.valueOf(b);return e&&e.identity===b?e:h(l,b)}}},{"./hidden-store.js":145}],145:[function(b,m,g){m.exports=function(b,c){var l={identity:c},e=b.valueOf;return Object.defineProperty(b,"valueOf",{value:function(b){return b!==c?e.apply(this,arguments):l},writable:!0}),l}},{}],146:[function(b,m,g){var h=b("./create-store.js");m.exports=function(){var b=h();return{get:function(h,e){var f=b(h);return f.hasOwnProperty("value")?
f.value:e},set:function(h,e){b(h).value=e},has:function(h){return"value"in b(h)},"delete":function(h){return delete b(h).value}}}},{"./create-store.js":144}],147:[function(b,m,g){function h(b){this.plot=b;this.enable=[!0,!0,!1,!1];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[1/0,1/0]}m.exports=function(b,l){var e=new h(b);return e.update(l),b.addOverlay(e),e};b=h.prototype;b.update=function(b){b=b||{};this.enable=(b.enable||[!0,!0,!1,!1]).slice();this.width=
(b.width||[1,1,1,1]).slice();this.color=(b.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(b){return b.slice()});this.center=(b.center||[1/0,1/0]).slice();this.plot.setOverlayDirty()};b.draw=function(){var b=this.enable,h=this.width,e=this.color,f=this.center,g=this.plot,d=g.line,p=g.dataBox,g=g.viewBox;if(d.bind(),p[0]<=f[0]&&f[0]<=p[2]&&p[1]<=f[1]&&f[1]<=p[3]){var t=g[0]+(f[0]-p[0])/(p[2]-p[0])*(g[2]-g[0]),f=g[1]+(f[1]-p[1])/(p[3]-p[1])*(g[3]-g[1]);b[0]&&d.drawLine(t,f,g[0],f,h[0],
e[0]);b[1]&&d.drawLine(t,f,t,g[1],h[1],e[1]);b[2]&&d.drawLine(t,f,g[2],f,h[2],e[2]);b[3]&&d.drawLine(t,f,t,g[3],h[3],e[3])}};b.dispose=function(){this.plot.removeOverlay(this)}},{}],148:[function(b,m,g){var h=b("gl-shader");g.createShader=function(b){b=h(b,"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec4 uv;\nattribute vec2 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  value = f.x;\n  kill = f.y;\n  planeCoordinate = uv.xy;\n  \n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}",
"#define GLSLIFY 1\nprecision mediump float;\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat beckmannSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution_2_0(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\n\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = beckmannSpecular_1_1(L, V, N, roughness);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  float interpValue = (value - lowerBound.z) / (upperBound.z - lowerBound.z);\n  vec4 surfaceColor = texture2D(colormap, vec2(interpValue, interpValue));\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n",
null,[{name:"uv",type:"vec4"},{name:"f",type:"vec2"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b};g.createPickShader=function(b){b=h(b,"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec4 uv;\nattribute vec2 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  value = f.x;\n  kill = f.y;\n  planeCoordinate = uv.xy;\n  \n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}",
"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 || \n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}",
null,[{name:"uv",type:"vec4"},{name:"f",type:"vec2"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b};g.createContourShader=function(b){b=h(b,"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec4 uv;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = dataCoordinate.z;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n",
"#define GLSLIFY 1\nprecision mediump float;\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat beckmannSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution_2_0(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\n\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = beckmannSpecular_1_1(L, V, N, roughness);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  float interpValue = (value - lowerBound.z) / (upperBound.z - lowerBound.z);\n  vec4 surfaceColor = texture2D(colormap, vec2(interpValue, interpValue));\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n",
null,[{name:"uv",type:"vec4"}]);return b.attributes.uv.location=0,b};g.createPickContourShader=function(b){b=h(b,"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec4 uv;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = dataCoordinate.z;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n",
"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 || \n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}",
null,[{name:"uv",type:"vec4"}]);return b.attributes.uv.location=0,b}},{"gl-shader":138}],149:[function(b,m,g){arguments[4][4][0].apply(g,arguments)},{dup:4}],150:[function(b,m,g){function h(b){if(b in e)return e[b];for(var d=[],f=0;b>f;++f)d.push("out",f,"s=0.5*(inp",f,"l-inp",f,"r);");for(var h=["array"],r=["junk"],f=0;b>f;++f){h.push("array");r.push("out"+f+"s");var p=c(b);p[f]=-1;h.push({array:0,offset:p.slice()});p[f]=1;h.push({array:0,offset:p.slice()});r.push("inp"+f+"l","inp"+f+"r")}return e[b]=
l({args:h,pre:v,post:v,body:{body:d.join(""),args:r.map(function(b){return{name:b,lvalue:0===b.indexOf("out"),rvalue:0===b.indexOf("inp"),count:"junk"!==b|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+b})}m.exports=function(b,l,g){if(Array.isArray(g)){if(g.length!==l.dimension)throw Error("ndarray-gradient: invalid boundary conditions");}else g="string"==typeof g?c(l.dimension,g):c(l.dimension,"clamp");if(b.dimension!==l.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");
if(b.shape[l.dimension]!==l.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var u=0;u<l.dimension;++u)if(b.shape[u]!==l.shape[u])throw Error("ndarray-gradient: shape mismatch");if(0!==l.size)if(0>=l.dimension)b=(b.set(0),b);else{var r=g;g=r.join();if(u=f[g])g=u;else{for(var u=r.length,v=["function gradient(dst,src){var s=src.shape.slice();"],k=0;1<<u>k;++k){for(var q=[],z=0;u>z;++z)k&1<<z&&q.push(z+1);for(var m=0;m<1<<q.length;++m){for(var A=q.slice(),z=0;z<q.length;++z)m&
1<<z&&(A[z]=-A[z]);for(var z=A,A=u-z.length,C=[],B=[],G=[],F=0;u>F;++F)0<=z.indexOf(F+1)?G.push("0"):0<=z.indexOf(-(F+1))?G.push("s["+F+"]-1"):(G.push("-1"),C.push("1"),B.push("s["+F+"]-2"));B=".lo("+C.join()+").hi("+B.join()+")";if(0===C.length&&(B=""),0<A){v.push("if(1");for(F=0;u>F;++F)0<=z.indexOf(F+1)||0<=z.indexOf(-(F+1))||v.push("&&s[",F,"]>2");v.push("){grad",A,"(src.pick(",G.join(),")",B);for(F=0;u>F;++F)0<=z.indexOf(F+1)||0<=z.indexOf(-(F+1))||v.push(",dst.pick(",G.join(),",",F,")",B);v.push(");")}for(F=
0;F<z.length;++F){var C=Math.abs(z[F])-1,I="dst.pick("+G.join()+","+C+")"+B;switch(r[C]){case "clamp":var D=G.slice(),H=G.slice();0>z[F]?D[C]="s["+C+"]-2":H[C]="1";0===A?v.push("if(s[",C,"]>1){dst.set(",G.join(),",",C,",0.5*(src.get(",D.join(),")-src.get(",H.join(),")))}else{dst.set(",G.join(),",",C,",0)};"):v.push("if(s[",C,"]>1){diff(",I,",src.pick(",D.join(),")",B,",src.pick(",H.join(),")",B,");}else{zero(",I,");};");break;case "mirror":0===A?v.push("dst.set(",G.join(),",",C,",0);"):v.push("zero(",
I,");");break;case "wrap":D=G.slice();H=G.slice();0>z[F]?(D[C]="s["+C+"]-2",H[C]="0"):(D[C]="s["+C+"]-1",H[C]="1");0===A?v.push("if(s[",C,"]>2){dst.set(",G.join(),",",C,",0.5*(src.get(",D.join(),")-src.get(",H.join(),")))}else{dst.set(",G.join(),",",C,",0)};"):v.push("if(s[",C,"]>2){diff(",I,",src.pick(",D.join(),")",B,",src.pick(",H.join(),")",B,");}else{zero(",I,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<A&&v.push("};")}}v.push("return dst;};return gradient");
r=["diff","zero"];q=[d,p];for(k=1;u>=k;++k)r.push("grad"+k),q.push(h(k));r.push(v.join(""));u=Function.apply(void 0,r).apply(void 0,q);g=(e[g]=u,u)}b=g(b,l)}return b};var c=b("dup"),l=b("cwise-compiler"),e={},f={},v={body:"",args:[],thisVars:[],localVars:[]},d=l({args:["array","array","array"],pre:v,post:v,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},
funcName:"cdiff"}),p=l({args:["array"],pre:v,post:v,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":151,dup:55}],151:[function(b,m,g){arguments[4][49][0].apply(g,arguments)},{"./lib/thunk.js":153,dup:49}],152:[function(b,m,g){arguments[4][50][0].apply(g,arguments)},{dup:50,uniq:154}],153:[function(b,m,g){arguments[4][51][0].apply(g,arguments)},{"./compile.js":152,dup:51}],154:[function(b,m,g){arguments[4][52][0].apply(g,
arguments)},{dup:52}],155:[function(b,m,g){var h=b("ndarray"),c=b("./doConvert.js");m.exports=function(b,e){for(var f=[],g=b,d=1;g instanceof Array;)f.push(g.length),d*=g.length,g=g[0];return 0===f.length?h():(e||(e=h(new Float64Array(d),f)),c(e,b),e)}},{"./doConvert.js":156,ndarray:189}],156:[function(b,m,g){m.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",
args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":157}],157:[function(b,m,g){function h(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=
[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var c=b("./lib/thunk.js");m.exports=function(b){var e=new h;e.pre=b.pre;e.body=b.body;e.post=b.post;var f=b.args.slice(0);e.argTypes=f.slice(0);for(var g=0;g<f.length;++g){var d=f[g];if("array"===d){if(e.arrayArgs.push(g),e.shimArgs.push("array"+g),g<e.pre.args.length&&0<e.pre.args[g].count)throw Error("cwise: pre() block may not reference array args");if(g<e.post.args.length&&0<e.post.args[g].count)throw Error("cwise: post() block may not reference array args");
}else if("scalar"===d)e.scalarArgs.push(g),e.shimArgs.push("scalar"+g);else if("index"===d){if(e.indexArgs.push(g),g<e.pre.args.length&&0<e.pre.args[g].count)throw Error("cwise: pre() block may not reference array index");if(g<e.body.args.length&&e.body.args[g].lvalue)throw Error("cwise: body() block may not write to array index");if(g<e.post.args.length&&0<e.post.args[g].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===d){if(e.shapeArgs.push(g),g<e.pre.args.length&&
e.pre.args[g].lvalue)throw Error("cwise: pre() block may not write to array shape");if(g<e.body.args.length&&e.body.args[g].lvalue)throw Error("cwise: body() block may not write to array shape");if(g<e.post.args.length&&e.post.args[g].lvalue)throw Error("cwise: post() block may not write to array shape");}else{if("object"!=typeof d||!d.offset)throw Error("cwise: Unknown argument type "+f[g]);e.argTypes[g]="offset";e.offsetArgs.push({array:d.array,offset:d.offset});e.offsetArgIndex.push(g)}}if(0>=
e.arrayArgs.length)throw Error("cwise: No array arguments specified");if(e.pre.args.length>f.length)throw Error("cwise: Too many arguments in pre() block");if(e.body.args.length>f.length)throw Error("cwise: Too many arguments in body() block");if(e.post.args.length>f.length)throw Error("cwise: Too many arguments in post() block");return e.debug=!!b.printCode||!!b.debug,e.funcName=b.funcName||"cwise",e.blockSize=b.blockSize||64,c(e)}},{"./lib/thunk.js":159}],158:[function(b,m,g){function h(b,c,e){var f,
h=b.length,l=c.arrayArgs.length,g=0<c.indexArgs.length,r=[],y=[],k=0,q=0;for(c=0;h>c;++c)y.push(["i",c,"=0"].join(""));for(f=0;l>f;++f)for(c=0;h>c;++c)q=k,k=b[c],0===c?y.push(["d",f,"s",c,"=t",f,"[",k,"]"].join("")):y.push(["d",f,"s",c,"=(t",f,"[",k,"]-s",q,"*t",f,"[",q,"])"].join(""));r.push("var "+y.join(","));for(c=h-1;0<=c;--c)k=b[c],r.push(["for(i",c,"=0;i",c,"<s",k,";++i",c,"){"].join(""));r.push(e);for(c=0;h>c;++c){q=k;k=b[c];for(f=0;l>f;++f)r.push(["p",f,"+=d",f,"s",c].join(""));g&&(0<c&&
r.push(["index[",q,"]-=s",q].join("")),r.push(["++index[",k,"]"].join("")));r.push("}")}return r.join("\n")}function c(b,c,e,f){for(var l=c.length,g=e.arrayArgs.length,u=e.blockSize,r=0<e.indexArgs.length,y=[],k=0;g>k;++k)y.push(["var offset",k,"=p",k].join(""));for(k=b;l>k;++k)y.push(["for(var j"+k+"=SS[",c[k],"]|0;j",k,">0;){"].join("")),y.push(["if(j",k,"<",u,"){"].join("")),y.push(["s",c[k],"=j",k].join("")),y.push(["j",k,"=0"].join("")),y.push(["}else{s",c[k],"=",u].join("")),y.push(["j",k,"-=",
u,"}"].join("")),r&&y.push(["index[",c[k],"]=j",k].join(""));for(k=0;g>k;++k){u=["offset"+k];for(r=b;l>r;++r)u.push(["j",r,"*t",k,"[",c[r],"]"].join(""));y.push(["p",k,"=(",u.join("+"),")"].join(""))}y.push(h(c,e,f));for(k=b;l>k;++k)y.push("}");return y.join("\n")}function l(b,c,e){for(var f=b.body,h=[],l=[],g=0;g<b.args.length;++g){var r=b.args[g];if(!(0>=r.count)){var y=new RegExp(r.name,"g"),k="",q=c.arrayArgs.indexOf(g);switch(c.argTypes[g]){case "offset":k=c.offsetArgIndex.indexOf(g),q=c.offsetArgs[k].array,
k="+q"+k;case "array":var k="p"+q+k,z="l"+g,m="a"+q;1===r.count?"generic"===e[q]?r.lvalue?(h.push(["var ",z,"=",m,".get(",k,")"].join("")),f=f.replace(y,z),l.push([m,".set(",k,",",z,")"].join(""))):f=f.replace(y,[m,".get(",k,")"].join("")):f=f.replace(y,[m,"[",k,"]"].join("")):"generic"===e[q]?(h.push(["var ",z,"=",m,".get(",k,")"].join("")),f=f.replace(y,z),r.lvalue&&l.push([m,".set(",k,",",z,")"].join(""))):(h.push(["var ",z,"=",m,"[",k,"]"].join("")),f=f.replace(y,z),r.lvalue&&l.push([m,"[",k,
"]=",z].join("")));break;case "scalar":f=f.replace(y,"Y"+c.scalarArgs.indexOf(g));break;case "index":f=f.replace(y,"index");break;case "shape":f=f.replace(y,"shape")}}}return[h.join("\n"),f,l.join("\n")].join("\n").trim()}function e(b){for(var c=Array(b.length),e=!0,f=0;f<b.length;++f){var h=b[f],l=h.match(/\d+/),l=l?l[0]:"";0===h.charAt(0)?c[f]="u"+h.charAt(1)+l:c[f]=h.charAt(0)+l;0<f&&(e=e&&c[f]===c[f-1])}return e?c[0]:c.join("")}var f=b("uniq");m.exports=function(b,d){for(var p=0|d[1].length,g=
Array(b.arrayArgs.length),x=Array(b.arrayArgs.length),w=["SS"],u=["'use strict'"],r=[],y=0;p>y;++y)r.push(["s",y,"=SS[",y,"]"].join(""));for(var k=0;k<b.arrayArgs.length;++k)w.push("a"+k),w.push("t"+k),w.push("p"+k),x[k]=d[2*k],g[k]=d[2*k+1];for(k=0;k<b.scalarArgs.length;++k)w.push("Y"+k);if(0<b.shapeArgs.length&&r.push("shape=SS.slice(0)"),0<b.indexArgs.length){y=Array(p);for(k=0;p>k;++k)y[k]="0";r.push(["index=[",y.join(","),"]"].join(""))}for(k=0;k<b.offsetArgs.length;++k){for(var q=b.offsetArgs[k],
z=[],y=0;y<q.offset.length;++y)0!==q.offset[y]&&(1===q.offset[y]?z.push(["t",q.array,"[",y,"]"].join("")):z.push([q.offset[y],"*t",q.array,"[",y,"]"].join("")));0===z.length?r.push("q"+k+"=0"):r.push(["q",k,"=(",z.join("+"),")|0"].join(""))}k=f([].concat(b.pre.thisVars).concat(b.body.thisVars).concat(b.post.thisVars));r=r.concat(k);u.push("var "+r.join(","));for(k=0;k<b.arrayArgs.length;++k)u.push("p"+k+"|=0");3<b.pre.body.length&&u.push(l(b.pre,b,x));r=l(b.body,b,x);a:for(k=0,y=g[0].length;y>k;){for(q=
1;q<g.length;++q)if(g[q][k]!==g[0][k])break a;++k}p>k?u.push(c(k,g[0],b,r)):u.push(h(g[0],b,r));3<b.post.body.length&&u.push(l(b.post,b,x));b.debug&&console.log("Generated cwise routine for ",d,":\n\n",u.join("\n"));p=[b.funcName||"unnamed","_cwise_loop_",g[0].join("s"),"m",k,e(x)].join("");return(new Function(["function ",p,"(",w.join(","),"){",u.join("\n"),"} return ",p].join("")))()}},{uniq:160}],159:[function(b,m,g){var h=b("./compile.js");m.exports=function(b){var l=["'use strict'","var CACHED={}"],
e=[];l.push(["return function ",b.funcName+"_cwise_thunk","(",b.shimArgs.join(","),"){"].join(""));for(var f=[],g=[],d=[["array",b.arrayArgs[0],".shape"].join("")],p=0;p<b.arrayArgs.length;++p){var t=b.arrayArgs[p];e.push(["t",t,"=array",t,".dtype,r",t,"=array",t,".order"].join(""));f.push("t"+t);f.push("r"+t);g.push("t"+t);g.push("r"+t+".join()");d.push("array"+t+".data");d.push("array"+t+".stride");d.push("array"+t+".offset|0")}for(p=0;p<b.scalarArgs.length;++p)d.push("scalar"+b.scalarArgs[p]);
e.push(["type=[",g.join(","),"].join()"].join(""));e.push("proc=CACHED[type]");l.push("var "+e.join(","));l.push(["if(!proc){CACHED[type]=proc=compile([",f.join(","),"])}return proc(",d.join(","),")}"].join(""));b.debug&&console.log("Generated thunk:",l.join("\n"));return(new Function("compile",l.join("\n")))(h.bind(void 0,b))}},{"./compile.js":158}],160:[function(b,m,g){m.exports=function(b,c,l){if(0===b.length)b=[];else if(c){l||b.sort(c);l=1;for(var e=b.length,f=b[0],g=b[0],d=1;e>d;++d)if(g=f,
f=b[d],c(f,g))d===l?l++:b[l++]=f;b=(b.length=l,b)}else{l||b.sort();c=1;l=b.length;e=b[0];f=b[0];for(g=1;l>g;++g,f=e)if(f=e,e=b[g],e!==f)g===c?c++:b[c++]=e;b=(b.length=c,b)}return b}},{}],161:[function(b,m,g){function h(b,c,d,e,f){this.position=b;this.index=c;this.uv=d;this.level=e;this.dataCoordinate=f}function c(b){b=z([k({colormap:b,nshades:256,format:"rgba"}).map(function(b){return[b[0],b[1],b[2],255*b[3]]})]);return q.divseq(b,255),b}function l(b,c,d,e,f,k,q,l,r,p,g,t,u,v){this.gl=b;this.shape=
c;this.bounds=d;this._shader=e;this._pickShader=f;this._coordinateBuffer=k;this._vao=q;this._colorMap=l;this._contourShader=r;this._contourPickShader=p;this._contourBuffer=g;this._contourVAO=t;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=new h([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=u;this._dynamicVAO=v;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=
[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];this.surfaceProject=[!1,!1,!1];this.contourProject=
[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this._field=[E(y.mallocFloat(1024),[0,0]),E(y.mallocFloat(1024),[0,0]),E(y.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]];this.snapToData=!1;this.opacity=1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.dirty=!0}function e(b,c){for(var d=c.axes&&c.axes.lastCubeProps.axis||Q,e=c.showSurface,f=c.showContour,k=0;3>k;++k)for(var e=e||c.surfaceProject[k],
h=0;3>h;++h)f=f||c.contourProject[k][h];for(k=0;3>k;++k){for(var q=T.projections[k],h=0;16>h;++h)q[h]=0;for(h=0;4>h;++h)q[5*h]=1;q[5*k]=0;q[12+k]=c.axesBounds[+(0<d[k])][k];C(q,b.model,q);for(var q=T.clipBounds[k],l=0;2>l;++l)for(h=0;3>h;++h)q[l][h]=b.clipBounds[l][h];q[0][k]=-1E8;q[1][k]=1E8}return T.showSurface=e,T.showContour=f,T}function f(b,c){b=b||{};var d=this.gl;d.disable(d.CULL_FACE);this._colorMap.bind(0);var f=R;f.model=b.model||L;f.view=b.view||L;f.projection=b.projection||L;f.lowerBound=
this.bounds[0];f.upperBound=this.bounds[1];f.contourColor=this.contourColor[0];f.inverseModel=B(f.inverseModel,f.model);for(var k=0;2>k;++k)for(var h=f.clipBounds[k],q=0;3>q;++q)h[q]=Math.min(Math.max(this.clipBounds[k][q],-1E8),1E8);f.kambient=this.ambientLight;f.kdiffuse=this.diffuseLight;f.kspecular=this.specularLight;f.shape=f.roughness=this.roughness;f.fresnel=this.fresnel;f.opacity=this.opacity;f.height=0;f.permutation=X;h=S;C(h,f.view,f.model);C(h,f.projection,h);B(h,h);for(k=0;3>k;++k)f.eyePosition[k]=
h[12+k]/h[15];for(var l=h[15],k=0;3>k;++k)l+=this.lightPosition[k]*h[4*k+3];for(k=0;3>k;++k){for(var r=h[12+k],q=0;3>q;++q)r+=h[4*q+k]*this.lightPosition[q];f.lightPosition[k]=r/l}h=e(f,this);if(h.showSurface&&c===1>this.opacity){this._shader.bind();this._shader.uniforms=f;this._vao.bind();this.showSurface&&this._vao.draw(d.TRIANGLES,this._vertexCount);for(k=0;3>k;++k)this.surfaceProject[k]&&(this._shader.uniforms.model=h.projections[k],this._shader.uniforms.clipBounds=h.clipBounds[k],this._vao.draw(d.TRIANGLES,
this._vertexCount));this._vao.unbind()}if(h.showContour&&!c){l=this._contourShader;f.kambient=1;f.kdiffuse=0;f.kspecular=0;f.opacity=1;l.bind();l.uniforms=f;r=this._contourVAO;r.bind();for(k=0;3>k;++k)for(l.uniforms.permutation=M[k],d.lineWidth(this.contourWidth[k]),q=0;q<this.contourLevels[k].length;++q)q===this.highlightLevel[k]?(l.uniforms.contourColor=this.highlightColor[k],l.uniforms.contourTint=this.highlightTint[k]):(0===q||q-1===this.highlightLevel[k])&&(l.uniforms.contourColor=this.contourColor[k],
l.uniforms.contourTint=this.contourTint[k]),l.uniforms.height=this.contourLevels[k][q],r.draw(d.LINES,this._contourCounts[k][q],this._contourOffsets[k][q]);for(k=0;3>k;++k)for(l.uniforms.model=h.projections[k],l.uniforms.clipBounds=h.clipBounds[k],q=0;3>q;++q)if(this.contourProject[k][q]){l.uniforms.permutation=M[q];d.lineWidth(this.contourWidth[q]);for(var p=0;p<this.contourLevels[q].length;++p)p===this.highlightLevel[q]?(l.uniforms.contourColor=this.highlightColor[q],l.uniforms.contourTint=this.highlightTint[q]):
(0===p||p-1===this.highlightLevel[q])&&(l.uniforms.contourColor=this.contourColor[q],l.uniforms.contourTint=this.contourTint[q]),l.uniforms.height=this.contourLevels[q][p],r.draw(d.LINES,this._contourCounts[q][p],this._contourOffsets[q][p])}r=this._dynamicVAO;r.bind();for(k=0;3>k;++k)if(0!==this._dynamicCounts[k])for(l.uniforms.model=f.model,l.uniforms.clipBounds=f.clipBounds,l.uniforms.permutation=M[k],d.lineWidth(this.dynamicWidth[k]),l.uniforms.contourColor=this.dynamicColor[k],l.uniforms.contourTint=
this.dynamicTint[k],l.uniforms.height=this.dynamicLevel[k],r.draw(d.LINES,this._dynamicCounts[k],this._dynamicOffsets[k]),q=0;3>q;++q)this.contourProject[q][k]&&(l.uniforms.model=h.projections[q],l.uniforms.clipBounds=h.clipBounds[q],r.draw(d.LINES,this._dynamicCounts[k],this._dynamicOffsets[k]));r.unbind()}}function v(b,c){var d=c.shape.slice(),e=b.shape.slice();q.assign(b.lo(1,1).hi(d[0],d[1]),c);q.assign(b.lo(1).hi(d[0],1),c.hi(d[0],1));q.assign(b.lo(1,e[1]-1).hi(d[0],1),c.lo(0,d[1]-1).hi(d[0],
1));q.assign(b.lo(0,1).hi(1,d[1]),c.hi(1));q.assign(b.lo(e[0]-1,1).hi(1,d[1]),c.lo(d[0]-1));b.set(0,0,c.get(0,0));b.set(0,e[1]-1,c.get(0,d[1]-1));b.set(e[0]-1,0,c.get(d[0]-1,0));b.set(e[0]-1,e[1]-1,c.get(d[0]-1,d[1]-1))}function d(b,c){return Array.isArray(b)?[c(b[0]),c(b[1]),c(b[2])]:[c(b),c(b),c(b)]}function p(b){return Array.isArray(b)?3===b.length?[b[0],b[1],b[2],1]:[b[0],b[1],b[2],b[3]]:[0,0,0,1]}function t(b){if(Array.isArray(b)){if(Array.isArray(b))return[p(b[0]),p(b[1]),p(b[2])];b=p(b);return[b.slice(),
b.slice(),b.slice()]}}m.exports=function(b){var c=b.gl,d=(b.field||b.coords&&b.coords[2]||E([],[0,0]),I(c)),e=H(c),f=D(c),k=K(c),h=w(c),q=u(c,[{buffer:h,size:4,stride:O,offset:0},{buffer:h,size:2,stride:O,offset:16},{buffer:h,size:3,stride:O,offset:24}]),p=w(c),g=u(c,[{buffer:p,size:4}]),t=w(c),v=u(c,[{buffer:t,size:2,type:c.FLOAT}]),x=r(c,1,256,c.RGBA,c.UNSIGNED_BYTE);x.minFilter=c.LINEAR;x.magFilter=c.LINEAR;var c=new l(c,[0,0],[[0,0,0],[0,0,0]],d,e,h,q,x,f,k,p,g,t,v),d={levels:[[],[],[]]},A;for(A in b)d[A]=
b[A];return d.colormap=d.colormap||"jet",c.update(d),c};var x=b("bit-twiddle"),w=b("gl-buffer"),u=b("gl-vao"),r=b("gl-texture2d"),y=b("typedarray-pool"),k=b("colormap"),q=b("ndarray-ops"),z=b("ndarray-pack"),E=b("ndarray"),A=b("surface-nets"),C=b("gl-mat4/multiply"),B=b("gl-mat4/invert"),G=b("binary-search-bounds"),F=b("ndarray-gradient"),E=b("ndarray");b=b("./lib/shaders");var I=b.createShader,D=b.createContourShader,H=b.createPickShader,K=b.createPickContourShader,O=36,L=[1,0,0,0,0,1,0,0,0,0,1,
0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],M=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];!function(){for(var b=0;3>b;++b){var c=M[b],d=(b+2)%3;c[(b+1)%3+0]=1;c[d+3]=1;c[b+6]=1}}();b=l.prototype;b.isTransparent=function(){return 1>this.opacity};b.isOpaque=function(){if(1<=this.opacity)return!0;for(var b=0;3>b;++b)if(0<this._contourCounts[b].length||0<this._dynamicCounts[b])return!0;return!1};b.pickSlots=1;b.setPickBase=function(b){this.pickId=b};var Q=[0,0,0],T={showSurface:!1,
showContour:!1,projections:[L.slice(),L.slice(),L.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},R={model:L,view:L,projection:L,inverseModel:L.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1},S=L.slice(),X=[1,0,0,0,1,0,0,0,1];b.draw=
function(b){return f.call(this,b,!1)};b.drawTransparent=function(b){return f.call(this,b,!0)};var V={model:L,view:L,projection:L,inverseModel:L,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};b.drawPick=function(b){b=b||{};var c=this.gl;c.disable(c.CULL_FACE);V.model=b.model||L;V.view=b.view||L;V.projection=b.projection||L;V.shape=this._field[2].shape;V.pickId=this.pickId/
255;V.lowerBound=this.bounds[0];V.upperBound=this.bounds[1];V.permutation=X;for(b=0;2>b;++b)for(var d=V.clipBounds[b],f=0;3>f;++f)d[f]=Math.min(Math.max(this.clipBounds[b][f],-1E8),1E8);d=e(V,this);if(d.showSurface){this._pickShader.bind();this._pickShader.uniforms=V;this._vao.bind();this._vao.draw(c.TRIANGLES,this._vertexCount);for(b=0;3>b;++b)this.surfaceProject[b]&&(this._pickShader.uniforms.model=d.projections[b],this._pickShader.uniforms.clipBounds=d.clipBounds[b],this._vao.draw(c.TRIANGLES,
this._vertexCount));this._vao.unbind()}if(d.showContour){var k=this._contourPickShader;k.bind();k.uniforms=V;var h=this._contourVAO;h.bind();for(f=0;3>f;++f)for(c.lineWidth(this.contourWidth[f]),k.uniforms.permutation=M[f],b=0;b<this.contourLevels[f].length;++b)k.uniforms.height=this.contourLevels[f][b],h.draw(c.LINES,this._contourCounts[f][b],this._contourOffsets[f][b]);for(b=0;3>b;++b)for(k.uniforms.model=d.projections[b],k.uniforms.clipBounds=d.clipBounds[b],f=0;3>f;++f)if(this.contourProject[b][f]){k.uniforms.permutation=
M[f];c.lineWidth(this.contourWidth[f]);for(var q=0;q<this.contourLevels[f].length;++q)k.uniforms.height=this.contourLevels[f][q],h.draw(c.LINES,this._contourCounts[f][q],this._contourOffsets[f][q])}h.unbind()}};b.pick=function(b){if(!b||b.id!==this.pickId)return null;var c=this._field[2].shape,d=this._pickResult,e=c[0]*(b.value[0]+(b.value[2]>>4)/16)/255,f=Math.floor(e),k=e-f;b=c[1]*(b.value[1]+(15&b.value[2])/16)/255;for(var h=Math.floor(b),q=b-h,f=f+1,h=h+1,l=d.position,r=l[0]=l[1]=l[2]=0;2>r;++r)for(var p=
r?k:1-k,g=0;2>g;++g)for(var t=f+r,u=h+g,v=p*(g?q:1-q),x=0;3>x;++x)l[x]+=this._field[x].get(t,u)*v;r=this._pickResult.level;for(p=0;3>p;++p)(r[p]=G.le(this.contourLevels[p],l[p]),0>r[p])?0<this.contourLevels[p].length&&(r[p]=0):r[p]<this.contourLevels[p].length-1&&Math.abs(this.contourLevels[p][r[p]]-l[p])>Math.abs(this.contourLevels[p][r[p]+1]-l[p])&&(r[p]+=1);d.index[0]=.5>k?f:f+1;d.index[1]=.5>q?h:h+1;d.uv[0]=e/c[0];d.uv[1]=b/c[1];for(x=0;3>x;++x)d.dataCoordinate[x]=this._field[x].get(d.index[0],
d.index[1]);return d};b.update=function(b){b=b||{};this.dirty=!0;"contourWidth"in b&&(this.contourWidth=d(b.contourWidth,Number));"showContour"in b&&(this.showContour=d(b.showContour,Boolean));"showSurface"in b&&(this.showSurface=!!b.showSurface);"contourTint"in b&&(this.contourTint=d(b.contourTint,Boolean));"contourColor"in b&&(this.contourColor=t(b.contourColor));"contourProject"in b&&(this.contourProject=d(b.contourProject,function(b){return d(b,Boolean)}));"surfaceProject"in b&&(this.surfaceProject=
b.surfaceProject);"dynamicColor"in b&&(this.dynamicColor=t(b.dynamicColor));"dynamicTint"in b&&(this.dynamicTint=d(b.dynamicTint,Number));"dynamicWidth"in b&&(this.dynamicWidth=d(b.dynamicWidth,Number));"opacity"in b&&(this.opacity=b.opacity);var e=b.field||b.coords&&b.coords[2]||null;if(e||(e=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in b||"coords"in b){var f=(e.shape[0]+2)*(e.shape[1]+
2);f>this._field[2].data.length&&(y.freeFloat(this._field[2].data),this._field[2].data=y.mallocFloat(x.nextPow2(f)));this._field[2]=E(this._field[2].data,[e.shape[0]+2,e.shape[1]+2]);v(this._field[2],e);f=this.shape=e.shape.slice();for(e=0;2>e;++e)this._field[2].size>this._field[e].data.length&&(y.freeFloat(this._field[e].data),this._field[e].data=y.mallocFloat(this._field[2].size)),this._field[e]=E(this._field[e].data,[f[0]+2,f[1]+2]);if(b.coords){var k=b.coords;if(!Array.isArray(k)||3!==k.length)throw Error("gl-surface: invalid coordinates for x/y");
for(e=0;2>e;++e){for(var h=k[e],q=0;2>q;++q)if(h.shape[q]!==f[q])throw Error("gl-surface: coords have incorrect shape");v(this._field[e],h)}}else if(b.ticks){q=b.ticks;if(!Array.isArray(q)||2!==q.length)throw Error("gl-surface: invalid ticks");for(e=0;2>e;++e){k=q[e];if((Array.isArray(k)||k.length)&&(k=E(k)),k.shape[0]!==f[e])throw Error("gl-surface: invalid tick length");h=E(k.data,f);h.stride[e]=k.stride[0];h.stride[1^e]=0;v(this._field[e],h)}}else{for(e=0;2>e;++e)q=[0,0],q[e]=1,this._field[e]=
E(this._field[e].data,[f[0]+2,f[1]+2],q,0);this._field[0].set(0,0,0);for(q=0;q<f[0];++q)this._field[0].set(q+1,0,q);this._field[0].set(f[0]+1,0,f[0]-1);this._field[1].set(0,0,0);for(q=0;q<f[1];++q)this._field[1].set(0,q+1,q);this._field[1].set(0,f[1]+1,f[1]-1)}q=this._field;k=(q[2].size,E(y.mallocFloat(6*q[2].size),[3,f[0]+2,f[1]+2,2]));for(e=0;3>e;++e)F(k.pick(e),q[e],"mirror");for(var l=E(y.mallocFloat(3*q[2].size),[f[0]+2,f[1]+2,3]),e=0;e<f[0]+2;++e)for(q=0;q<f[1]+2;++q){var h=k.get(0,e,q,0),r=
k.get(0,e,q,1),p=k.get(1,e,q,0),g=k.get(1,e,q,1),u=k.get(2,e,q,0),w=k.get(2,e,q,1),z=p*w-g*u,u=u*r-w*h,w=h*g-r*p,h=Math.sqrt(z*z+u*u+w*w);1E-8>h?(h=Math.max(Math.abs(z),Math.abs(u),Math.abs(w)),1E-8>h?(w=1,u=z=0,h=1):h=1/h):h=1/Math.sqrt(h);l.set(e,q,0,z*h);l.set(e,q,1,u*h);l.set(e,q,2,w*h)}y.free(k.data);for(var C=[1/0,1/0,1/0],m=[-(1/0),-(1/0),-(1/0)],B=y.mallocFloat(x.nextPow2((f[0]-1)*(f[1]-1)*54)),G=0,e=k=0;e<f[0]-1;++e)a:for(q=0;q<f[1]-1;++q){for(z=0;2>z;++z)for(u=0;2>u;++u)for(h=0;3>h;++h)if(r=
this._field[h].get(1+e+z,1+q+u),isNaN(r)||!isFinite(r))continue a;for(h=0;6>h;++h){var p=e+P[h][0],g=q+P[h][1],V=this._field[0].get(p+1,g+1),D=this._field[1].get(p+1,g+1),r=this._field[2].get(p+1,g+1),z=l.get(p+1,g+1,0),u=l.get(p+1,g+1,1),w=l.get(p+1,g+1,2);B[G++]=p;B[G++]=g;B[G++]=V;B[G++]=D;B[G++]=r;B[G++]=0;B[G++]=z;B[G++]=u;B[G++]=w;C[0]=Math.min(C[0],V);C[1]=Math.min(C[1],D);C[2]=Math.min(C[2],r);m[0]=Math.max(m[0],V);m[1]=Math.max(m[1],D);m[2]=Math.max(m[2],r);k+=1}}this._vertexCount=k;this._coordinateBuffer.update(B.subarray(0,
G));y.freeFloat(B);y.free(l.data);this.bounds=[C,m]}f=!1;if("levels"in b){l=b.levels;l=Array.isArray(l[0])?l.slice():[[],[],l];for(e=0;3>e;++e)l[e]=l[e].slice(),l.sort(function(b,c){return b-c});e=0;a:for(;3>e;++e){if(l[e].length!==this.contourLevels[e].length){f=!0;break}for(q=0;q<l[e].length;++q)if(l[e][q]!==this.contourLevels[e][q]){f=!0;break a}}this.contourLevels=l}if(f){q=this._field;f=this.shape;w=[];for(C=0;3>C;++C){l=this.contourLevels[C];m=[];B=[];G=[0,0];for(e=0;e<l.length;++e){V=A(this._field[C],
l[e]);m.push(w.length/4|0);q=k=0;a:for(;q<V.cells.length;++q)for(D=V.cells[q],h=0;2>h;++h){var I=V.positions[D[h]],r=I[0],Q=0|Math.floor(r),H=r-Q,r=I[1],S=0|Math.floor(r),K=r-S,T=!1,R=0;b:for(;2>R;++R){G[R]=0;for(var O=(C+R+1)%3,z=0;2>z;++z)for(var X=z?H:1-H,p=0|Math.min(Math.max(Q+z,0),f[0]),u=0;2>u;++u){var L=u?K:1-K,g=0|Math.min(Math.max(S+u,0),f[1]),r=this._field[O].get(p,g);if(!isFinite(r)||isNaN(r)){T=!0;break b}G[R]+=X*L*r}}if(T){if(0<h){for(h=0;4>h;++h)w.pop();--k}continue a}w.push(G[0],G[1],
I[0],I[1]);k+=1}B.push(k)}this._contourOffsets[C]=m;this._contourCounts[C]=B}f=y.mallocFloat(w.length);for(e=0;e<w.length;++e)f[e]=w[e];this._contourBuffer.update(f);y.freeFloat(f)}b.colormap&&this._colorMap.setPixels(c(b.colormap))};b.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();
this._dynamicVAO.dispose();for(var b=0;3>b;++b)y.freeFloat(this._field[b].data)};b.highlight=function(b){if(!b)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(var c=0;3>c;++c)this.enableHighlight[c]?this.highlightLevel[c]=b.level[c]:this.highlightLevel[c]=-1;var d;if(d=this.snapToData?b.dataCoordinate:b.position,this.enableDynamic[0]&&d[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&d[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&
d[2]!==this.dynamicLevel[2]){b=0;for(var e=this.shape,f=y.mallocFloat(12*e[0]*e[1]),k=0;3>k;++k)if(this.enableDynamic[k]){this.dynamicLevel[k]=d[k];var h=this._field[(k+1)%3],q=this._field[(k+2)%3],c=A(this._field[k],d[k]),l=c.cells,r=c.positions;this._dynamicOffsets[k]=b;for(c=0;c<l.length;++c)for(var p=l[c],g=0;2>g;++g){var t=r[p[g]],u=+t[0],v=0|u,x=0|Math.min(v+1,e[0]),w=u-v,z=1-w,C=+t[1],t=0|C,u=0|Math.min(t+1,e[1]),m=C-t,B=1-m,C=z*B,z=z*m,B=w*B,m=w*m,w=C*h.get(v,t)+z*h.get(v,u)+B*h.get(x,t)+
m*h.get(x,u),v=C*q.get(v,t)+z*q.get(v,u)+B*q.get(x,t)+m*q.get(x,u);if(isNaN(w)||isNaN(v)){g&&--b;break}f[2*b+0]=w;f[2*b+1]=v;b+=1}this._dynamicCounts[k]=b-this._dynamicOffsets[k]}else this.dynamicLevel[k]=NaN,this._dynamicCounts[k]=0;this._dynamicBuffer.update(f.subarray(0,2*b));y.freeFloat(f)}}},{"./lib/shaders":148,"binary-search-bounds":149,"bit-twiddle":33,colormap:40,"gl-buffer":59,"gl-mat4/invert":78,"gl-mat4/multiply":80,"gl-texture2d":162,"gl-vao":166,ndarray:189,"ndarray-gradient":150,"ndarray-ops":184,
"ndarray-pack":155,"surface-nets":211,"typedarray-pool":217}],162:[function(b,m,g){function h(b,c,d){var e=b.gl,f=e.getParameter(e.MAX_TEXTURE_SIZE);if(0>c||c>f||0>d||d>f)throw Error("gl-texture2d: Invalid texture size");return b._shape=[c,d],b.bind(),e.texImage2D(e.TEXTURE_2D,0,b.format,c,d,0,b.format,b.type,null),b._mipLevels=[0],b}function c(b,c,d,e,f,h){this.gl=b;this.handle=c;this.format=f;this.type=h;this._shape=[d,e];this._mipLevels=[0];this._minFilter=this._magFilter=b.NEAREST;this._wrapT=
this._wrapS=b.CLAMP_TO_EDGE;this._anisoSamples=1;var l=this;b=[this._wrapS,this._wrapT];Object.defineProperties(b,[{get:function(){return l._wrapS},set:function(b){return l.wrapS=b}},{get:function(){return l._wrapT},set:function(b){return l.wrapT=b}}]);this._wrapVector=b;b=[this._shape[0],this._shape[1]];Object.defineProperties(b,[{get:function(){return l._shape[0]},set:function(b){return l.width=b}},{get:function(){return l._shape[1]},set:function(b){return l.height=b}}]);this._shapeVector=b}function l(b,
c){return 3===b.length?1===c[2]&&c[1]===b[0]*b[2]&&c[0]===b[2]:1===c[0]&&c[1]===b[0]}function e(b){var c=b.createTexture();return b.bindTexture(b.TEXTURE_2D,c),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),c}function f(b,d,f,k,h){var l=b.getParameter(b.MAX_TEXTURE_SIZE);if(0>d||d>l||0>f||f>l)throw Error("gl-texture2d: Invalid texture shape");
if(h===b.FLOAT&&!b.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");l=e(b);return b.texImage2D(b.TEXTURE_2D,0,k,d,f,0,k,h,null),new c(b,l,d,f,k,h)}var v=b("ndarray"),d=b("ndarray-ops"),p=b("typedarray-pool");m.exports=function(b){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");t||(t=[b.LINEAR,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_NEAREST],x=[b.NEAREST,b.LINEAR,
b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR],w=[b.REPEAT,b.CLAMP_TO_EDGE,b.MIRRORED_REPEAT]);if("number"==typeof arguments[1])return f(b,arguments[1],arguments[2],arguments[3]||b.RGBA,arguments[4]||b.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return f(b,0|arguments[1][0],0|arguments[1][1],arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var h=arguments[1];if(h instanceof HTMLCanvasElement||h instanceof HTMLImageElement||
h instanceof HTMLVideoElement||h instanceof ImageData){var g=arguments[2]||b.RGBA,k=arguments[3]||b.UNSIGNED_BYTE,q=e(b);return b.texImage2D(b.TEXTURE_2D,0,g,g,k,h),new c(b,q,0|h.width,0|h.height,g,k)}if(h.shape&&h.data&&h.stride){var z=h,m=z.dtype,h=z.shape.slice(),k=b.getParameter(b.MAX_TEXTURE_SIZE);if(0>h[0]||h[0]>k||0>h[1]||h[1]>k)throw Error("gl-texture2d: Invalid texture size");k=l(h,z.stride.slice());q=0;"float32"===m?q=b.FLOAT:"float64"===m?(q=b.FLOAT,k=!1,m="float32"):"uint8"===m?q=b.UNSIGNED_BYTE:
(q=b.UNSIGNED_BYTE,k=!1,m="uint8");var A=0;if(2===h.length)A=b.LUMINANCE,h=[h[0],h[1],1],z=v(z.data,h,[z.stride[0],z.stride[1],1],z.offset);else{if(3!==h.length)throw Error("gl-texture2d: Invalid shape for texture");if(1===h[2])A=b.ALPHA;else if(2===h[2])A=b.LUMINANCE_ALPHA;else if(3===h[2])A=b.RGB;else{if(4!==h[2])throw Error("gl-texture2d: Invalid shape for pixel coords");A=b.RGBA}}q!==b.FLOAT||b.getExtension("OES_texture_float")||(q=b.UNSIGNED_BYTE,k=!1);var C=z.size;if(k)z=0===z.offset&&z.data.length===
C?z.data:z.data.subarray(z.offset,z.offset+C);else{var B=[h[2],h[2]*h[0],1],g=p.malloc(C,m),B=v(g,h,B,0);"float32"!==m&&"float64"!==m||q!==b.UNSIGNED_BYTE?d.assign(B,z):d.muls(B,z,255);z=g.subarray(0,C)}m=e(b);return b.texImage2D(b.TEXTURE_2D,0,A,h[0],h[1],0,A,q,z),k||p.free(g),new c(b,m,h[0],h[1],A,q)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var t=null,x=null,w=null;b=c.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(b){this.bind();
var c=this.gl;if(this.type===c.FLOAT&&0<=t.indexOf(b)&&(c.getExtension("OES_texture_float_linear")||(b=c.NEAREST)),0>x.indexOf(b))throw Error("gl-texture2d: Unknown filter mode "+b);return c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b),this._minFilter=b}},magFilter:{get:function(){return this._magFilter},set:function(b){this.bind();var c=this.gl;if(this.type===c.FLOAT&&0<=t.indexOf(b)&&(c.getExtension("OES_texture_float_linear")||(b=c.NEAREST)),0>x.indexOf(b))throw Error("gl-texture2d: Unknown filter mode "+
b);return c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,b),this._magFilter=b}},mipSamples:{get:function(){return this._anisoSamples},set:function(b){var c=this._anisoSamples;(this._anisoSamples=0|Math.max(b,1),c!==this._anisoSamples)&&(b=gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,b.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(b){if(this.bind(),0>w.indexOf(b))throw Error("gl-texture2d: Unknown wrap mode "+
b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,b),this._wrapS=b}},wrapT:{get:function(){return this._wrapT},set:function(b){if(this.bind(),0>w.indexOf(b))throw Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,b),this._wrapT=b}},wrap:{get:function(){return this._wrapVector},set:function(b){if(Array.isArray(b)||(b=[b,b]),2!==b.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var c=
0;2>c;++c)if(0>w.indexOf(b[c]))throw Error("gl-texture2d: Unknown wrap mode "+b);this._wrapS=b[0];this._wrapT=b[1];c=this.gl;return this.bind(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT),b}},shape:{get:function(){return this._shapeVector},set:function(b){if(Array.isArray(b)){if(2!==b.length)throw Error("gl-texture2d: Invalid texture shape");}else b=[0|b,0|b];return h(this,0|b[0],0|b[1]),[0|b[0],0|b[1]]}},width:{get:function(){return this._shape[0]},
set:function(b){return b|=0,h(this,b,this._shape[1]),b}},height:{get:function(){return this._shape[1]},set:function(b){return b|=0,h(this,this._shape[0],b),b}}});b.bind=function(b){var c=this.gl;return void 0!==b&&c.activeTexture(c.TEXTURE0+(0|b)),c.bindTexture(c.TEXTURE_2D,this.handle),void 0!==b?0|b:c.getParameter(c.ACTIVE_TEXTURE)-c.TEXTURE0};b.dispose=function(){this.gl.deleteTexture(this.handle)};b.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var b=Math.min(this._shape[0],
this._shape[1]),c=0;0<b;++c,b>>>=1)0>this._mipLevels.indexOf(c)&&this._mipLevels.push(c)};b.setPixels=function(b,c,e,f){var h=this.gl;if(this.bind(),Array.isArray(c)?(f=e,e=0|c[1],c=0|c[0]):(c=c||0,e=e||0),f=f||0,b instanceof HTMLCanvasElement||b instanceof ImageData||b instanceof HTMLImageElement||b instanceof HTMLVideoElement)0>this._mipLevels.indexOf(f)?(h.texImage2D(h.TEXTURE_2D,0,this.format,this.format,this.type,b),this._mipLevels.push(f)):h.texSubImage2D(h.TEXTURE_2D,f,c,e,this.format,this.type,
b);else{if(!(b.shape&&b.stride&&b.data))throw Error("gl-texture2d: Unsupported data type");if(2>b.shape.length||c+b.shape[1]>this._shape[1]>>>f||e+b.shape[0]>this._shape[0]>>>f||0>c||0>e)throw Error("gl-texture2d: Texture dimensions are out of bounds");var g=this.format,t=this.type,x=this._mipLevels,w=b.dtype,m=b.shape.slice();if(2>m.length||3<m.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var G=0,F=0,I=l(m,b.stride.slice());"float32"===w?G=h.FLOAT:"float64"===w?(G=h.FLOAT,
I=!1):"uint8"===w?G=h.UNSIGNED_BYTE:(G=h.UNSIGNED_BYTE,I=!1);if(2===m.length)F=h.LUMINANCE,m=[m[0],m[1],1],b=v(b.data,m,[b.stride[0],b.stride[1],1],b.offset);else{if(3!==m.length)throw Error("gl-texture2d: Invalid shape for texture");if(1===m[2])F=h.ALPHA;else if(2===m[2])F=h.LUMINANCE_ALPHA;else if(3===m[2])F=h.RGB;else{if(4!==m[2])throw Error("gl-texture2d: Invalid shape for pixel coords");F=h.RGBA}}if(F!==h.LUMINANCE&&F!==h.ALPHA||g!==h.LUMINANCE&&g!==h.ALPHA||(F=g),F!==g)throw Error("gl-texture2d: Incompatible texture format for setPixels");
w=b.size;F=0>x.indexOf(f);(F&&x.push(f),G===t&&I)?0===b.offset&&b.data.length===w?F?h.texImage2D(h.TEXTURE_2D,f,g,m[0],m[1],0,g,t,b.data):h.texSubImage2D(h.TEXTURE_2D,f,c,e,m[0],m[1],g,t,b.data):F?h.texImage2D(h.TEXTURE_2D,f,g,m[0],m[1],0,g,t,b.data.subarray(b.offset,b.offset+w)):h.texSubImage2D(h.TEXTURE_2D,f,c,e,m[0],m[1],g,t,b.data.subarray(b.offset,b.offset+w)):(x=t===h.FLOAT?p.mallocFloat32(w):p.mallocUint8(w),I=v(x,m,[m[2],m[2]*m[0],1]),G===h.FLOAT&&t===h.UNSIGNED_BYTE?d.muls(I,b,255):d.assign(I,
b),F?h.texImage2D(h.TEXTURE_2D,f,g,m[0],m[1],0,g,t,x.subarray(0,w)):h.texSubImage2D(h.TEXTURE_2D,f,c,e,m[0],m[1],g,t,x.subarray(0,w)),t===h.FLOAT?p.freeFloat32(x):p.freeUint8(x))}}},{ndarray:189,"ndarray-ops":184,"typedarray-pool":217}],163:[function(b,m,g){m.exports=function(b,c,l){c?c.bind():b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);c=0|b.getParameter(b.MAX_VERTEX_ATTRIBS);if(l){if(l.length>c)throw Error("gl-vao: Too many vertex attributes");for(var e=0;e<l.length;++e){var f=l[e];if(f.buffer){var g=
f.size||4,d=f.type||b.FLOAT,p=!!f.normalized,t=f.stride||0,x=f.offset||0;f.buffer.bind();b.enableVertexAttribArray(e);b.vertexAttribPointer(e,g,d,p,t,x)}else{if("number"==typeof f)b.vertexAttrib1f(e,f);else if(1===f.length)b.vertexAttrib1f(e,f[0]);else if(2===f.length)b.vertexAttrib2f(e,f[0],f[1]);else if(3===f.length)b.vertexAttrib3f(e,f[0],f[1],f[2]);else{if(4!==f.length)throw Error("gl-vao: Invalid vertex attribute");b.vertexAttrib4f(e,f[0],f[1],f[2],f[3])}b.disableVertexAttribArray(e)}}}else b.bindBuffer(b.ARRAY_BUFFER,
null),e=0;for(;c>e;++e)b.disableVertexAttribArray(e)}},{}],164:[function(b,m,g){function h(b){this.gl=b;this._attributes=this._elements=null;this._elementsType=b.UNSIGNED_SHORT}var c=b("./do-bind.js");h.prototype.bind=function(){c(this.gl,this._elements,this._attributes)};h.prototype.update=function(b,c,f){this._elements=c;this._attributes=b;this._elementsType=f||this.gl.UNSIGNED_SHORT};h.prototype.dispose=function(){};h.prototype.unbind=function(){};h.prototype.draw=function(b,c,f){f=f||0;var h=
this.gl;this._elements?h.drawElements(b,c,this._elementsType,f):h.drawArrays(b,f,c)};m.exports=function(b){return new h(b)}},{"./do-bind.js":163}],165:[function(b,m,g){function h(b,c,h,d,l,g){this.location=b;this.dimension=c;this.a=h;this.b=d;this.c=l;this.d=g}function c(b,c,h){this.gl=b;this._ext=c;this.handle=h;this._attribs=[];this._useElements=!1;this._elementsType=b.UNSIGNED_SHORT}var l=b("./do-bind.js");h.prototype.bind=function(b){switch(this.dimension){case 1:b.vertexAttrib1f(this.location,
this.a);break;case 2:b.vertexAttrib2f(this.location,this.a,this.b);break;case 3:b.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:b.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};c.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var b=0;b<this._attribs.length;++b)this._attribs[b].bind(this.gl)};c.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};c.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};c.prototype.update=
function(b,c,g){if(this.bind(),l(this.gl,c,b),this.unbind(),this._attribs.length=0,b)for(var d=0;d<b.length;++d){var p=b[d];"number"==typeof p?this._attribs.push(new h(d,1,p)):Array.isArray(p)&&this._attribs.push(new h(d,p.length,p[0],p[1],p[2],p[3]))}this._useElements=!!c;this._elementsType=g||this.gl.UNSIGNED_SHORT};c.prototype.draw=function(b,c,h){h=h||0;var d=this.gl;this._useElements?d.drawElements(b,c,this._elementsType,h):d.drawArrays(b,h,c)};m.exports=function(b,f){return new c(b,f,f.createVertexArrayOES())}},
{"./do-bind.js":163}],166:[function(b,m,g){var h=b("./lib/vao-native.js"),c=b("./lib/vao-emulated.js");m.exports=function(b,e,f,g){var d,p=b.getExtension("OES_vertex_array_object");return d=p?h(b,p):c(b),d.update(e,f,g),d}},{"./lib/vao-emulated.js":164,"./lib/vao-native.js":165}],167:[function(b,m,g){m.exports=function(b,c,l){var e=c[0],f=c[1],g=c[2];c=c[3];return b[0]=l[0]*e+l[4]*f+l[8]*g+l[12]*c,b[1]=l[1]*e+l[5]*f+l[9]*g+l[13]*c,b[2]=l[2]*e+l[6]*f+l[10]*g+l[14]*c,b[3]=l[3]*e+l[7]*f+l[11]*g+l[15]*
c,b}},{}],168:[function(b,m,g){function h(b,c,d){this.vertices=b;this.adjacent=c;this.boundary=d;this.lastVisited=-1}function c(b,c,d){this.vertices=b;this.cell=c;this.index=d}function l(b,c){return d(b.vertices,c.vertices)}function e(b){for(var c=["function orient(){var tuple=this.tuple;return test("],d=0;b>=d;++d)0<d&&c.push(","),c.push("tuple[",d,"]");c.push(")}return orient");c=new Function("test",c.join(""));b=v[b+1];return b||(b=v),c(b)}function f(b,c,d){this.dimension=b;this.vertices=c;this.simplices=
d;this.interior=d.filter(function(b){return!b.boundary});this.tuple=Array(b+1);for(c=0;b>=c;++c)this.tuple[c]=this.vertices[c];(c=p[b])||(c=p[b]=e(b));this.orient=c}m.exports=function(b,c){var d=b.length;if(0===d)throw Error("Must have at least d+1 points");var e=b[0].length;if(e>=d)throw Error("Must input at least d+1 points");var l=b.slice(0,e+1),p=v.apply(void 0,l);if(0===p)throw Error("Input not in general position");for(var k=Array(e+1),q=0;e>=q;++q)k[q]=q;0>p&&(k[0]=1,k[1]=0);for(var p=new h(k,
Array(e+1),!1),g=p.adjacent,m=Array(e+2),q=0;e>=q;++q){for(var A=k.slice(),C=0;e>=C;++C)C===q&&(A[C]=-1);C=A[0];A[0]=A[1];A[1]=C;A=new h(A,Array(e+1),!0);g[q]=A;m[q]=A}m[e+1]=p;for(q=0;e>=q;++q)for(A=g[q].vertices,k=g[q].adjacent,C=0;e>=C;++C){var B=A[C];if(0>B)k[C]=p;else for(var G=0;e>=G;++G)0>g[G].vertices.indexOf(B)&&(k[C]=g[G])}l=new f(e,l,m);p=!!c;for(q=e+1;d>q;++q)l.insert(b[q],p);return l.boundary()};var v=b("robust-orientation"),d=b("simplicial-complex").compareCells;h.prototype.flip=function(){var b=
this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=b;b=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=b};var p=[];b=f.prototype;b.handleBoundaryDegeneracy=function(b,c){var d=this.dimension,e=this.vertices.length-1,f=this.tuple,h=this.vertices,k=[b];for(b.lastVisited=-e;0<k.length;){b=k.pop();for(var q=(b.vertices,b.adjacent),l=0;d>=l;++l){var p=q[l];if(p.boundary&&!(p.lastVisited<=-e)){for(var g=p.vertices,v=0;d>=v;++v){var m=g[v];0>m?f[v]=c:f[v]=h[m]}g=this.orient();
if(0<g)return p;p.lastVisited=-e;0===g&&k.push(p)}}}return null};b.walk=function(b,c){var d=this.vertices.length-1,e=this.dimension,f=this.vertices,h=this.tuple,k=this.interior[c?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!k.boundary;){for(var q=k.vertices,l=k.adjacent,p=0;e>=p;++p)h[p]=f[q[p]];k.lastVisited=d;for(p=0;e>=p;++p)if(k=l[p],!(k.lastVisited>=d)){q=h[p];h[p]=b;var g=this.orient();if(h[p]=q,0>g)continue a;k.boundary?k.lastVisited=-d:k.lastVisited=d}return}return k};
b.addPeaks=function(b,d){var e=this.vertices.length-1,f=this.dimension,p=this.vertices,g=this.tuple,k=this.interior,q=this.simplices,v=[d];d.lastVisited=e;d.vertices[d.vertices.indexOf(-1)]=e;d.boundary=!1;k.push(d);for(var m=[];0<v.length;){d=v.pop();var A=d.vertices,C=d.adjacent,B=A.indexOf(e);if(!(0>B))for(var G=0;f>=G;++G)if(G!==B){var F=C[G];if(F.boundary&&!(F.lastVisited>=e)){var I=F.vertices;if(F.lastVisited!==-e){for(var D=0,H=0;f>=H;++H)0>I[H]?(D=H,g[H]=b):g[H]=p[I[H]];if(0<this.orient()){I[D]=
e;F.boundary=!1;k.push(F);v.push(F);F.lastVisited=e;continue}F.lastVisited=-e}var H=F.adjacent,I=A.slice(),K=C.slice(),D=new h(I,K,!0);q.push(D);var O=H.indexOf(d);if(!(0>O))for(H[O]=D,K[B]=F,I[G]=-1,K[G]=d,C[G]=D,D.flip(),H=0;f>=H;++H)if(F=I[H],!(0>F||F===e)){F=Array(f-1);for(O=K=0;f>=O;++O){var L=I[O];0>L||O===H||(F[K++]=L)}m.push(new c(F,D,H))}}}}m.sort(l);for(G=0;G+1<m.length;G+=2)e=m[G],f=m[G+1],p=f.index,0>e.index||0>p||(e.cell.adjacent[e.index]=f.cell,f.cell.adjacent[f.index]=e.cell)};b.insert=
function(b,c){var d=this.vertices;d.push(b);var e=this.walk(b,c);if(e){for(var f=this.dimension,h=this.tuple,k=0;f>=k;++k){var q=e.vertices[k];0>q?h[k]=b:h[k]=d[q]}d=this.orient(h);0>d||(0!==d||(e=this.handleBoundaryDegeneracy(e,b)))&&this.addPeaks(b,e)}};b.boundary=function(){for(var b=this.dimension,c=[],d=this.simplices,e=d.length,f=0;e>f;++f){var h=d[f];if(h.boundary){for(var k=Array(b),h=h.vertices,q=0,l=0,p=0;b>=p;++p)0<=h[p]?k[q++]=h[p]:l=1&p;l===(1&b)&&(h=k[0],k[0]=k[1],k[1]=h);c.push(k)}}return c}},
{"robust-orientation":195,"simplicial-complex":171}],169:[function(b,m,g){arguments[4][33][0].apply(g,arguments)},{dup:33}],170:[function(b,m,g){function h(b){this.roots=Array(b);this.ranks=Array(b);for(var h=0;b>h;++h)this.roots[h]=h,this.ranks[h]=0}"use restrict";m.exports=h;b=h.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var b=this.roots.length;return this.roots.push(b),this.ranks.push(0),b};b.find=function(b){for(var h=b,e=this.roots;e[b]!==
b;)b=e[b];for(;e[h]!==b;){var f=e[h];e[h]=b;h=f}return b};b.link=function(b,h){var e=this.find(b),f=this.find(h);if(e!==f){var g=this.ranks,d=this.roots,p=g[e],t=g[f];t>p?d[e]=f:p>t?d[f]=e:(d[f]=e,++g[e])}}},{}],171:[function(b,m,g){function h(b,c){var d=b.length,e=b.length-c.length,f=Math.min;if(e)return e;switch(d){case 0:return 0;case 1:return b[0]-c[0];case 2:return(d=b[0]+b[1]-c[0]-c[1])?d:f(b[0],b[1])-f(c[0],c[1]);case 3:var e=b[0]+b[1],k=c[0]+c[1];if(d=e+b[2]-(k+c[2]))return d;var h=f(b[0],
b[1]),l=f(c[0],c[1]);return(d=f(h,b[2])-f(l,c[2]))?d:f(h+b[2],e)-f(l+c[2],k);default:f=b.slice(0);f.sort();k=c.slice(0);k.sort();for(h=0;d>h;++h)if(e=f[h]-k[h])return e;return 0}}function c(b,c){return h(b[0],c[0])}function l(b,d){if(d){for(var e=b.length,f=Array(e),l=0;e>l;++l)f[l]=[b[l],d[l]];f.sort(c);for(l=0;e>l;++l)b[l]=f[l][0],d[l]=f[l][1];return b}return b.sort(h),b}function e(b){if(0===b.length)return[];for(var c=1,d=b.length,e=1;d>e;++e){var f=b[e];h(f,b[e-1])&&(e===c?c++:b[c++]=f)}return b.length=
c,b}function f(b,c){for(var d=0,e=b.length-1,f=-1;e>=d;){var k=d+e>>1,q=h(b[k],c);0>=q?(0===q&&(f=k),d=k+1):0<q&&(e=k-1)}return f}function v(b,c){for(var d=Array(b.length),e=0,l=d.length;l>e;++e)d[e]=[];for(var l=[],e=0,k=c.length;k>e;++e)for(var q=c[e],g=q.length,t=1,v=1<<g;v>t;++t){l.length=p.popCount(t);for(var m=0,B=0;g>B;++B)t&1<<B&&(l[m++]=q[B]);m=f(b,l);if(!(0>m))for(;!(d[m++].push(e),m>=b.length||0!==h(b[m],l)););}return d}function d(b,c){if(0>c)return[];for(var d=[],e=(1<<c+1)-1,f=0;f<b.length;++f)for(var k=
b[f],h=e;h<1<<k.length;h=p.nextCombination(h)){for(var g=Array(c+1),t=0,v=0;v<k.length;++v)h&1<<v&&(g[t++]=k[v]);d.push(g)}return l(d)}"use restrict";var p=b("bit-twiddle"),t=b("union-find");g.dimension=function(b){for(var c=0,d=Math.max,e=0,f=b.length;f>e;++e)c=d(c,b[e].length);return c-1};g.countVertices=function(b){for(var c=-1,d=Math.max,e=0,f=b.length;f>e;++e)for(var k=b[e],h=0,l=k.length;l>h;++h)c=d(c,k[h]);return c+1};g.cloneCells=function(b){for(var c=Array(b.length),d=0,e=b.length;e>d;++d)c[d]=
b[d].slice(0);return c};g.compareCells=h;g.normalize=l;g.unique=e;g.findCell=f;g.incidence=v;g.dual=function(b,c){if(!c)return v(e(d(b,0)),b,0);for(var f=Array(c),h=0;c>h;++h)f[h]=[];for(var h=0,l=b.length;l>h;++h)for(var k=b[h],q=0,p=k.length;p>q;++q)f[k[q]].push(h);return f};g.explode=function(b){for(var c=[],d=0,e=b.length;e>d;++d)for(var f=b[d],k=0|f.length,h=1,p=1<<k;p>h;++h){for(var g=[],t=0;k>t;++t)h>>>t&1&&g.push(f[t]);c.push(g)}return l(c)};g.skeleton=d;g.boundary=function(b){for(var c=[],
d=0,e=b.length;e>d;++d)for(var f=b[d],k=0,h=f.length;h>k;++k){for(var p=Array(f.length-1),g=0,t=0;h>g;++g)g!==k&&(p[t++]=f[g]);c.push(p)}return l(c)};g.connectedComponents=function(b,c){var h;if(c){h=new t(c);for(var p=0;p<b.length;++p)for(var g=b[p],k=0;k<g.length;++k)for(var q=k+1;q<g.length;++q)h.link(g[k],g[q]);g=[];k=h.ranks;for(p=0;p<k.length;++p)k[p]=-1;for(p=0;p<b.length;++p)q=h.find(b[p][0]),0>k[q]?(k[q]=g.length,g.push([b[p].slice(0)])):g[k[q]].push(b[p].slice(0));h=g}else{h=e(l(d(b,0)));
p=new t(h.length);for(g=0;g<b.length;++g)for(k=b[g],q=0;q<k.length;++q)for(var v=f(h,[k[q]]),m=q+1;m<k.length;++m)p.link(v,f(h,[k[m]]));k=[];q=p.ranks;for(g=0;g<q.length;++g)q[g]=-1;for(g=0;g<b.length;++g)v=p.find(f(h,[b[g][0]])),0>q[v]?(q[v]=k.length,k.push([b[g].slice(0)])):k[q[v]].push(b[g].slice(0));h=k}return h}},{"bit-twiddle":169,"union-find":170}],172:[function(b,m,g){m.exports=function(b){return!(null==b||!(b._isBuffer||b.constructor&&"function"==typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)))}},
{}],173:[function(b,m,g){m.exports=function(b,l){function e(b){var c=!1;return"altKey"in b&&(c=c||b.altKey!==q.alt,q.alt=!!b.altKey),"shiftKey"in b&&(c=c||b.shiftKey!==q.shift,q.shift=!!b.shiftKey),"ctrlKey"in b&&(c=c||b.ctrlKey!==q.control,q.control=!!b.ctrlKey),"metaKey"in b&&(c=c||b.metaKey!==q.meta,q.meta=!!b.metaKey),c}function f(b,c){var d=h.x(c),f=h.y(c);"buttons"in c&&(b=0|c.buttons);(b!==r||d!==y||f!==k||e(c))&&(r=0|b,y=d||0,k=f||0,l(r,y,k,q))}function g(b){f(0,b)}function d(){(r||y||k||
q.shift||q.alt||q.meta||q.control)&&(y=k=0,r=0,q.shift=q.alt=q.control=q.meta=!1,l(0,0,0,q))}function p(b){e(b)&&l(r,y,k,q)}function t(b){0===h.buttons(b)?f(0,b):f(r,b)}function x(b){f(r|h.buttons(b),b)}function w(b){f(r&~h.buttons(b),b)}function u(){z||(z=!0,b.addEventListener("mousemove",t),b.addEventListener("mousedown",x),b.addEventListener("mouseup",w),b.addEventListener("mouseleave",g),b.addEventListener("mouseenter",g),b.addEventListener("mouseout",g),b.addEventListener("mouseover",g),b.addEventListener("blur",
d),b.addEventListener("keyup",p),b.addEventListener("keydown",p),b.addEventListener("keypress",p),b!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}l||(l=b,b=window);var r=0,y=0,k=0,q={shift:!1,alt:!1,control:!1,meta:!1},z=!1;u();var m={element:b};return Object.defineProperties(m,{enabled:{get:function(){return z},set:function(b){b&&u()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},
x:{get:function(){return y},enumerable:!0},y:{get:function(){return k},enumerable:!0},mods:{get:function(){return q},enumerable:!0}}),m};var h=b("mouse-event")},{"mouse-event":174}],174:[function(b,m,g){function h(b){return b.target||b.srcElement||window}g.buttons=function(b){if("object"==typeof b){if("buttons"in b)return b.buttons;if("which"in b){b=b.which;if(2===b)return 4;if(3===b)return 2;if(0<b)return 1<<b-1}else if("button"in b){b=b.button;if(1===b)return 4;if(2===b)return 2;if(0<=b)return 1<<
b}}return 0};g.element=h;g.x=function(b){if("object"==typeof b){if("offsetX"in b)return b.offsetX;var l=h(b).getBoundingClientRect();return b.clientX-l.left}return 0};g.y=function(b){if("object"==typeof b){if("offsetY"in b)return b.offsetY;var l=h(b).getBoundingClientRect();return b.clientY-l.top}return 0}},{}],175:[function(b,m,g){m.exports=function(b,c){c||(c=[0,""]);b=String(b);var l=parseFloat(b,10);return c[0]=l,c[1]=b.match(/[\d.\-\+]*\s*(.*)/)[1]||"",c}},{}],176:[function(b,m,g){function h(b,
e){var d=l(getComputedStyle(b).getPropertyValue(e));return d[0]*c(d[1],b)}function c(b,c){switch(c=c||document.body,b=(b||"px").trim().toLowerCase(),(c===window||c===document)&&(c=document.body),b){case "%":return c.clientHeight/100;case "ch":case "ex":var d=b,l=c,g=document.createElement("div");g.style["font-size"]="128"+d;l.appendChild(g);d=h(g,"font-size")/128;return l.removeChild(g),d;case "em":return h(c,"font-size");case "rem":return h(document.body,"font-size");case "vw":return window.innerWidth/
100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return e;case "cm":return e/2.54;case "mm":return e/25.4;case "pt":return e/72;case "pc":return e/6}return 1}var l=b("parse-unit");m.exports=c;var e=96},{"parse-unit":175}],177:[function(b,m,g){var h=b("to-px");m.exports=function(b,l,e){"function"==typeof b&&(e=!!l,l=b,b=window);var f=h("ex",b);b.addEventListener("wheel",
function(b){e&&b.preventDefault();var c=b.deltaX||0,h=b.deltaY||0,g=b.deltaZ||0,x=1;switch(b.deltaMode){case 1:x=f;break;case 2:x=window.innerHeight}return c*=x,h*=x,g*=x,c||h||g?l(c,h,g):void 0})}},{"to-px":176}],178:[function(b,m,g){var h=b("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_=_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",
lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});m.exports=function(b,l){return h(b,l),b}},{"cwise/lib/wrapper":48}],179:[function(b,m,g){m.exports=function(b,f){switch(f.length){case 0:break;case 1:b[0]=1/f[0];break;case 4:h(b,f);break;case 9:c(b,f);break;case 16:l(b,f);break;default:throw Error("currently supports matrices up to 4x4");}return b};
var h=b("gl-mat2/invert"),c=b("gl-mat3/invert"),l=b("gl-mat4/invert")},{"gl-mat2/invert":180,"gl-mat3/invert":71,"gl-mat4/invert":78}],180:[function(b,m,g){m.exports=function(b,c){var l=c[0],e=c[1],f=c[2],g=c[3],d=l*g-f*e;return d?(d=1/d,b[0]=g*d,b[1]=-e*d,b[2]=-f*d,b[3]=l*d,b):null}},{}],181:[function(b,m,g){function h(b,c){var d=Math.floor(c),e=c-d,h=0<=d+1&&d+1<b.shape[0],l=0<=d&&d<b.shape[0]?+b.get(d):0,d=h?+b.get(d+1):0;return(1-e)*l+e*d}function c(b,c,d){var e=Math.floor(c);c-=e;var h=0<=e&&
e<b.shape[0],l=0<=e+1&&e+1<b.shape[0],g=Math.floor(d);d-=g;var u=0<=g&&g<b.shape[1],r=0<=g+1&&g+1<b.shape[1],y=h&&u?b.get(e,g):0,h=h&&r?b.get(e,g+1):0,u=l&&u?b.get(e+1,g):0;b=l&&r?b.get(e+1,g+1):0;return(1-d)*((1-c)*y+c*u)+d*((1-c)*h+c*b)}function l(b,c,d,e){var h=Math.floor(c);c-=h;var l=0<=h&&h<b.shape[0],g=0<=h+1&&h+1<b.shape[0],u=Math.floor(d);d-=u;var r=0<=u&&u<b.shape[1],y=0<=u+1&&u+1<b.shape[1],k=Math.floor(e);e-=k;var q=0<=k&&k<b.shape[2],z=0<=k+1&&k+1<b.shape[2],m=l&&r&&q?b.get(h,u,k):0,
A=l&&y&&q?b.get(h,u+1,k):0,C=g&&r&&q?b.get(h+1,u,k):0,q=g&&y&&q?b.get(h+1,u+1,k):0,B=l&&r&&z?b.get(h,u,k+1):0,l=l&&y&&z?b.get(h,u+1,k+1):0,r=g&&r&&z?b.get(h+1,u,k+1):0;b=g&&y&&z?b.get(h+1,u+1,k+1):0;return(1-e)*((1-d)*((1-c)*m+c*C)+d*((1-c)*A+c*q))+e*((1-d)*((1-c)*B+c*r)+d*((1-c)*l+c*b))}function e(b){var c,d,e=0|b.shape.length,h=Array(e),l=Array(e),g=Array(e),u=Array(e);for(c=0;e>c;++c)d=+arguments[c+1],h[c]=Math.floor(d),l[c]=d-h[c],g[c]=0<=h[c]&&h[c]<b.shape[c],u[c]=0<=h[c]+1&&h[c]+1<b.shape[c];
var r,y,k=0;c=0;a:for(;1<<e>c;++c){r=1;y=b.offset;for(d=0;e>d;++d)if(c&1<<d){if(!u[d])continue a;r*=l[d];y+=b.stride[d]*(h[d]+1)}else{if(!g[d])continue a;r*=1-l[d];y+=b.stride[d]*h[d]}k+=r*b.data[y]}return k}m.exports=function(b,g,d,p){switch(b.shape.length){case 0:return 0;case 1:return h(b,g);case 2:return c(b,g,d);case 3:return l(b,g,d,p);default:return e.apply(void 0,arguments)}};m.exports.d1=h;m.exports.d2=c;m.exports.d3=l},{}],182:[function(b,m,g){var h=b("ndarray-linear-interpolate"),c=b("cwise/lib/wrapper")({args:["index",
"array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_12_arg4_)}",args:[{name:"_inline_12_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_=_inline_13_arg3_.apply(void 0,this_warped)}",
args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),l=b("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},
body:{body:"{_inline_16_arg2_(this_warped,_inline_16_arg0_),_inline_16_arg1_=_inline_16_arg3_(_inline_16_arg4_,this_warped[0])}",args:[{name:"_inline_16_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,
funcName:"warp1D",blockSize:64}),e=b("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_19_arg2_(this_warped,_inline_19_arg0_),_inline_19_arg1_=_inline_19_arg3_(_inline_19_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_19_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_19_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg3_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),f=b("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_22_arg2_(this_warped,_inline_22_arg0_),_inline_22_arg1_=_inline_22_arg3_(_inline_22_arg4_,this_warped[0],this_warped[1],this_warped[2])}",
args:[{name:"_inline_22_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_22_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});m.exports=function(b,d,p){switch(d.shape.length){case 1:l(b,p,h.d1,d);break;case 2:e(b,p,h.d2,
d);break;case 3:f(b,p,h.d3,d);break;default:c(b,p,h.bind(void 0,d),d.shape.length)}return b}},{"cwise/lib/wrapper":48,"ndarray-linear-interpolate":181}],183:[function(b,m,g){var h=b("ndarray-warp"),c=b("gl-matrix-invert");m.exports=function(b,e,f){var g=e.dimension,d=c([],f);return h(b,e,function(b,c){for(var e=0;g>e;++e){b[e]=d[(g+1)*g+e];for(var f=0;g>f;++f)b[e]+=d[(g+1)*f+e]*c[f]}e=d[(g+1)*(g+1)-1];for(f=0;g>f;++f)e+=d[(g+1)*f+g]*c[f];f=1/e;for(e=0;g>e;++e)b[e]*=f;return b}),b}},{"gl-matrix-invert":179,
"ndarray-warp":182}],184:[function(b,m,g){function h(b){if(!b)return e;for(var c=0;c<b.args.length;++c){var d=b.args[c];0===c?b.args[c]={name:d,lvalue:!0,rvalue:!!b.rvalue,count:b.count||1}:b.args[c]={name:d,lvalue:!1,rvalue:!0,count:1}}return b.thisVars||(b.thisVars=[]),b.localVars||(b.localVars=[]),b}function c(b){for(var c=[],d=0;d<b.args.length;++d)c.push("a"+d);c=new Function("P",["return function ",b.funcName,"_ndarrayops(",c.join(","),") {P(",c.join(","),");return a0}"].join(""));b=l({args:b.args,
pre:h(b.pre),body:h(b.body),post:h(b.proc),funcName:b.funcName});return c(b)}var l=b("cwise-compiler"),e={body:"",args:[],thisVars:[],localVars:[]},f={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var b in f){var d=f[b];g[b]=c({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+d+"c"},funcName:b});g[b+"eq"]=c({args:["array","array"],body:{args:["a","b"],body:"a"+d+"=b"},rvalue:!0,funcName:b+"eq"});g[b+"s"]=
c({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+d+"s"},funcName:b+"s"});g[b+"seq"]=c({args:["array","scalar"],body:{args:["a","s"],body:"a"+d+"=s"},rvalue:!0,funcName:b+"seq"})}}();var v={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var b in v){var d=v[b];g[b]=c({args:["array","array"],body:{args:["a","b"],body:"a="+d+"b"},funcName:b});g[b+"eq"]=c({args:["array"],body:{args:["a"],body:"a="+d+"a"},rvalue:!0,count:2,funcName:b+"eq"})}}();var d={and:"&&",or:"||",eq:"===",
neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var b in d){var e=d[b];g[b]=c({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:b});g[b+"s"]=c({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:b+"s"});g[b+"eq"]=c({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:b+"eq"});g[b+"seq"]=c({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:b+"seq"})}}();
var p="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");!function(){for(var b=0;b<p.length;++b){var d=p[b];g[d]=c({args:["array","array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:d});g[d+"eq"]=c({args:["array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"eq"})}}();var t=["max","min","atan2","pow"];
!function(){for(var b=0;b<t.length;++b){var d=t[b];g[d]=c({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:d});g[d+"s"]=c({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:d+"s"});g[d+"eq"]=c({args:["array","array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},
body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"eq"});g[d+"seq"]=c({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"seq"})}}();var x=["atan2","pow"];!function(){for(var b=0;b<x.length;++b){var d=x[b];g[d+"op"]=c({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",
thisVars:["this_f"]},funcName:d+"op"});g[d+"ops"]=c({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:d+"ops"});g[d+"opeq"]=c({args:["array","array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"opeq"});g[d+"opseq"]=c({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},
body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"opseq"})}}();g.any=l({args:["array"],pre:e,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});g.all=l({args:["array"],pre:e,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},
funcName:"all"});g.sum=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});g.prod=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"prod"});g.norm2squared=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});g.norm2=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",
localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});g.norminf=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});g.norm1=l({args:["array"],pre:{args:[],localVars:[],
thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});g.sup=l({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",
args:[],thisVars:["this_h"],localVars:[]}});g.inf=l({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});g.argmin=l({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,
rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},
post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});g.argmax=l({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});g.random=c({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});g.assign=c({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});g.assigns=
c({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"});g.equals=l({args:["array","array"],pre:e,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":185}],185:[function(b,m,g){arguments[4][49][0].apply(g,arguments)},{"./lib/thunk.js":187,dup:49}],186:[function(b,m,g){arguments[4][50][0].apply(g,
arguments)},{dup:50,uniq:188}],187:[function(b,m,g){arguments[4][51][0].apply(g,arguments)},{"./compile.js":186,dup:51}],188:[function(b,m,g){arguments[4][52][0].apply(g,arguments)},{dup:52}],189:[function(b,m,g){function h(b,c){return b[0]-c[0]}function c(){var b,c=this.stride,d=Array(c.length);for(b=0;b<d.length;++b)d[b]=[Math.abs(c[b]),b];d.sort(h);c=Array(d.length);for(b=0;b<c.length;++b)c[b]=d[b][1];return c}function l(b,d){var e=["View",d,"d",b].join("");0>d&&(e="View_Nil"+b);var h="generic"===
b;if(-1===d){var l,e=new Function("function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+b+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+e+"(a){return new "+e+"(a);}");return e()}if(0===d)return e=new Function("TrivialArray","function "+
e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+b+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+e+"_get(){return "+(h?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+
e+"_set(v){return "+(h?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}"),e(p[b][0]);l=["'use strict'"];var g=f(d),k=g.map(function(b){return"i"+b}),q="this.offset+"+g.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),v=g.map(function(b){return"b"+b}).join(","),m=g.map(function(b){return"c"+b}).join(",");l.push("function "+e+"(a,"+v+","+m+",d){this.data=a","this.shape=["+v+"]","this.stride=["+m+"]","this.offset=d|0}",
"var proto="+e+".prototype","proto.dtype='"+b+"'","proto.dimension="+d);l.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+g.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})");1===d?l.push("proto.order=[0]"):(l.push("Object.defineProperty(proto,'order',{get:"),4>d?(l.push("function "+e+"_order(){"),2===d?l.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===d&&l.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):
l.push("ORDER})"));l.push("proto.set=function "+e+"_set("+k.join(",")+",v){");h?l.push("return this.data.set("+q+",v)}"):l.push("return this.data["+q+"]=v}");l.push("proto.get=function "+e+"_get("+k.join(",")+"){");h?l.push("return this.data.get("+q+")}"):l.push("return this.data["+q+"]}");l.push("proto.index=function "+e+"_index(",k.join(),"){return "+q+"}");l.push("proto.hi=function "+e+"_hi("+k.join(",")+"){return new "+e+"(this.data,"+g.map(function(b){return["(typeof i",b,"!=='number'||i",b,
"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+g.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");h=g.map(function(b){return"a"+b+"=this.shape["+b+"]"});q=g.map(function(b){return"c"+b+"=this.stride["+b+"]"});l.push("proto.lo=function "+e+"_lo("+k.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+q.join(","));for(h=0;d>h;++h)l.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");l.push("return new "+e+"(this.data,"+g.map(function(b){return"a"+
b}).join(",")+","+g.map(function(b){return"c"+b}).join(",")+",b)}");l.push("proto.step=function "+e+"_step("+k.join(",")+"){var "+g.map(function(b){return"a"+b+"=this.shape["+b+"]"}).join(",")+","+g.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(h=0;d>h;++h)l.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");l.push("return new "+e+"(this.data,"+g.map(function(b){return"a"+
b}).join(",")+","+g.map(function(b){return"b"+b}).join(",")+",c)}");q=Array(d);v=Array(d);for(h=0;d>h;++h)q[h]="a[i"+h+"]",v[h]="b[i"+h+"]";l.push("proto.transpose=function "+e+"_transpose("+k+"){"+k.map(function(b,c){return b+"=("+b+"===undefined?"+c+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+q.join(",")+","+v.join(",")+",this.offset)}");l.push("proto.pick=function "+e+"_pick("+k+"){var a=[],b=[],c=this.offset");for(h=0;d>h;++h)l.push("if(typeof i"+h+"==='number'&&i"+
h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");l.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");l.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+g.map(function(b){return"shape["+b+"]"}).join(",")+","+g.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");e=new Function("CTOR_LIST","ORDER",l.join("\n"));return e(p[b],c)}function e(b){if(v(b))return"buffer";if(d)switch(Object.prototype.toString.call(b)){case "[object Float64Array]":return"float64";
case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(b)?"array":"generic"}var f=b("iota-array"),v=b("is-buffer"),d="undefined"!=typeof Float64Array,p={float32:[],float64:[],int8:[],int16:[],
int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};m.exports=function(b,c,d,f){if(void 0===b){var h=p.array[0];return h([])}"number"==typeof b&&(b=[b]);void 0===c&&(c=[b.length]);h=c.length;if(void 0===d){d=Array(h);for(var g=h-1,k=1;0<=g;--g)d[g]=k,k*=c[g]}if(void 0===f)for(g=f=0;h>g;++g)0>d[g]&&(f-=(c[g]-1)*d[g]);g=e(b);for(k=p[g];k.length<=h+1;)k.push(l(g,k.length-1));h=k[h+1];return h(b,c,d,f)}},{"iota-array":190,"is-buffer":172}],190:[function(b,m,g){m.exports=
function(b){for(var c=Array(b),l=0;b>l;++l)c[l]=l;return c}},{}],191:[function(b,m,g){(function(b){m.exports=b.performance&&b.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],192:[function(b,m,g){function h(b){for(var f="robustLinearSolve"+b+"d",h=["function ",f,"(A,b){return ["],d=0;b>d;++d){h.push("det([");for(var l=0;b>l;++l){0<l&&h.push(",");
h.push("[");for(var g=0;b>g;++g)0<g&&h.push(","),g===d?h.push("+b[",l,"]"):h.push("+A[",l,"][",g,"]");h.push("]")}h.push("]),")}h.push("det(A)]}return ",f);return(new Function("det",h.join("")))(6>b?c[b]:c)}var c=b("robust-determinant"),l=[function(){return[0]},function(b,c){return[[c[0]],[b[0][0]]]}];(function(){for(;6>l.length;)l.push(h(l.length));for(var b=[],c=["function dispatchLinearSolve(A,b){switch(A.length){"],g=0;6>g;++g)b.push("s"+g),c.push("case ",g,":return s",g,"(A,b);");c.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve");
b.push("CACHE","g",c.join(""));b=Function.apply(void 0,b);m.exports=b.apply(void 0,l.concat([l,h]));for(g=0;6>g;++g)m.exports[g]=l[g]})()},{"robust-determinant":194}],193:[function(b,m,g){m.exports=function(b){for(var c=b.length,l=b[b.length-1],e=c,f=c-2;0<=f;--f){var g=l,d=b[f],l=g+d,g=l-g;(d-=g)&&(b[--e]=l,l=d)}for(var p=0,f=e;c>f;++f)g=b[f],d=l,l=g+d,g=l-g,(d-=g)&&(b[p++]=d);return b[p++]=l,b.length=p,b}},{}],194:[function(b,m,g){function h(b,c){for(var d=Array(b.length-1),e=1;e<b.length;++e)for(var f=
d[e-1]=Array(b.length-1),k=0,h=0;k<b.length;++k)k!==c&&(f[h++]=b[e][k]);return d}function c(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var d=b.length>>1;return["sum(",c(b.slice(0,d)),",",c(b.slice(d)),")"].join("")}function l(b){if(2===b.length)return["sum(prod(",b[0][0],",",b[1][1],"),prod(-",b[0][1],",",b[1][0],"))"].join("");for(var d=[],e=0;e<b.length;++e)d.push(["scale(",l(h(b,e)),",",1&e?"-":"",b[0][e],")"].join(""));return c(d)}function e(b){for(var c=
Function,e=Array(b),h=0;b>h;++h){e[h]=Array(b);for(var g=0;b>g;++g)e[h][g]=["m[",h,"][",g,"]"].join("")}return(new c("sum","scale","prod","compress",["function robustDeterminant",b,"(m){return compress(",l(e),")};return robustDeterminant",b].join("")))(v,d,f,p)}var f=b("two-product"),v=b("robust-sum"),d=b("robust-scale"),p=b("robust-compress"),t=[function(){return[0]},function(b){return[b[0][0]]}];(function(){for(;6>t.length;)t.push(e(t.length));for(var b=[],c=["function robustDeterminant(m){switch(m.length){"],
d=0;6>d;++d)b.push("det"+d),c.push("case ",d,":return det",d,"(m);");c.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant");b.push("CACHE","gen",c.join(""));b=Function.apply(void 0,b);m.exports=b.apply(void 0,t.concat([t,e]));for(d=0;d<t.length;++d)m.exports[d]=t[d]})()},{"robust-compress":193,"robust-scale":196,"robust-sum":198,"two-product":215}],195:[function(b,m,g){function h(b,c){for(var d=Array(b.length-1),e=1;e<b.length;++e)for(var f=
d[e-1]=Array(b.length-1),h=0,l=0;h<b.length;++h)h!==c&&(f[l++]=b[e][h]);return d}function c(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var d=b.length>>1;return["sum(",c(b.slice(0,d)),",",c(b.slice(d)),")"].join("")}function l(b){if(2===b.length)return[["sum(prod(",b[0][0],",",b[1][1],"),prod(-",b[0][1],",",b[1][0],"))"].join("")];for(var d=[],e=0;e<b.length;++e)d.push(["scale(",c(l(h(b,e))),",",1&e?"-":"",b[0][e],")"].join(""));return d}function e(b){for(var e=
[],f=[],q=Array(b),g=0;b>g;++g){q[g]=Array(b);for(var u=0;b>u;++u)q[g][u]=["m",u,"[",b-g-1,"]"].join("")}g=[];for(u=0;b>u;++u)0===(1&u)?e.push.apply(e,l(h(q,u))):f.push.apply(f,l(h(q,u))),g.push("m"+u);e=c(e);f=c(f);b="orientation"+b+"Exact";b=["function ",b,"(",g.join(),"){var p=",e,",n=",f,",d=sub(p,n);return d[d.length-1];};return ",b].join("");return(new Function("sum","prod","scale","sub",b))(d,v,p,t)}function f(b){var c=u[b.length];return c||(c=u[b.length]=e(b.length)),c.apply(void 0,b)}var v=
b("two-product"),d=b("robust-sum"),p=b("robust-scale"),t=b("robust-subtract"),x=e(3),w=e(4),u=[function(){return 0},function(){return 0},function(b,c){return c[0]-b[0]},function(b,c,d){var e;e=(b[1]-d[1])*(c[0]-d[0]);var f=(b[0]-d[0])*(c[1]-d[1]),h=e-f;if(0<e){if(0>=f)return h;e+=f}else{if(!(0>e)||0<=f)return h;e=-(e+f)}e*=3.3306690738754716E-16;return h>=e||-e>=h?h:x(b,c,d)},function(b,c,d,e){var f=b[0]-e[0],h=c[0]-e[0],l=d[0]-e[0],g=b[1]-e[1],p=c[1]-e[1],t=d[1]-e[1],v=b[2]-e[2],u=c[2]-e[2],x=d[2]-
e[2],m=h*t,K=l*p,l=l*g,t=f*t,f=f*p,g=h*g,h=v*(m-K)+u*(l-t)+x*(f-g),v=7.771561172376103E-16*((Math.abs(m)+Math.abs(K))*Math.abs(v)+(Math.abs(l)+Math.abs(t))*Math.abs(u)+(Math.abs(f)+Math.abs(g))*Math.abs(x));return h>v||-h>v?h:w(b,c,d,e)}];(function(){for(;5>=u.length;)u.push(e(u.length));for(var b=[],c=["slow"],d=0;5>=d;++d)b.push("a"+d),c.push("o"+d);for(var h=["function getOrientation(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;5>=d;++d)h.push("case ",d,":return o",d,"(",
b.slice(0,d).join(),");");h.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");c.push(h.join(""));b=Function.apply(void 0,c);m.exports=b.apply(void 0,[f].concat(u));for(d=0;5>=d;++d)m.exports[d]=u[d]})()},{"robust-scale":196,"robust-subtract":197,"robust-sum":198,"two-product":215}],196:[function(b,m,g){var h=b("two-product"),c=b("two-sum");m.exports=function(b,e){var f=b.length;if(1===f)return f=h(b[0],e),f[0]?f:
[f[1]];var g=Array(2*f),d=[.1,.1],p=[.1,.1],t=0;h(b[0],e,d);d[0]&&(g[t++]=d[0]);for(var x=1;f>x;++x){h(b[x],e,p);c(d[1],p[0],d);d[0]&&(g[t++]=d[0]);var w=p[1],u=d[1],r=w+u,w=u-(r-w);d[1]=r;w&&(g[t++]=w)}return d[1]&&(g[t++]=d[1]),0===t&&(g[t++]=0),g.length=t,g}},{"two-product":215,"two-sum":216}],197:[function(b,m,g){m.exports=function(b,c){var l=0|b.length,e=0|c.length;if(1===l&&1===e){var e=b[0],f=-c[0],l=e+f,g=l-e;return(e=e-(l-g)+(f-g))?[e,l]:[l]}var d,g=Array(l+e),p=0,t=0,x=0,w=Math.abs,u=b[t],
r=w(u),y=-c[x],k=w(y);k>r?(d=u,t+=1,l>t&&(u=b[t],r=w(u))):(d=y,x+=1,e>x&&(y=-c[x],k=w(y)));l>t&&k>r||x>=e?(f=u,t+=1,l>t&&(u=b[t],r=w(u))):(f=y,x+=1,e>x&&(y=-c[x],k=w(y)));var q,z,m,A;m=f+d;z=d-=m-f;for(A=m;l>t&&e>x;)k>r?(f=u,t+=1,l>t&&(u=b[t],r=w(u))):(f=y,x+=1,e>x&&(y=-c[x],k=w(y))),d=z,m=f+d,z=m-f,(d-=z)&&(g[p++]=d),d=A+m,q=d-A,z=d-q,m-=q,A-=z,z=A+m,A=d;for(;l>t;)f=u,d=z,m=f+d,z=m-f,(d-=z)&&(g[p++]=d),d=A+m,q=d-A,z=d-q,m-=q,A-=z,z=A+m,A=d,t+=1,l>t&&(u=b[t]);for(;e>x;)f=y,d=z,m=f+d,z=m-f,(d-=z)&&
(g[p++]=d),d=A+m,q=d-A,z=d-q,m-=q,A-=z,z=A+m,A=d,x+=1,e>x&&(y=-c[x]);return z&&(g[p++]=z),A&&(g[p++]=A),p||(g[p++]=0),g.length=p,g}},{}],198:[function(b,m,g){m.exports=function(b,c){var l=0|b.length,e=0|c.length;if(1===l&&1===e){var e=b[0],f=c[0],l=e+f,g=l-e;return(e=e-(l-g)+(f-g))?[e,l]:[l]}var d,g=Array(l+e),p=0,t=0,x=0,w=Math.abs,u=b[t],r=w(u),m=c[x],k=w(m);k>r?(d=u,t+=1,l>t&&(u=b[t],r=w(u))):(d=m,x+=1,e>x&&(m=c[x],k=w(m)));l>t&&k>r||x>=e?(f=u,t+=1,l>t&&(u=b[t],r=w(u))):(f=m,x+=1,e>x&&(m=c[x],
k=w(m)));var q,z,E,A;E=f+d;z=d-=E-f;for(A=E;l>t&&e>x;)k>r?(f=u,t+=1,l>t&&(u=b[t],r=w(u))):(f=m,x+=1,e>x&&(m=c[x],k=w(m))),d=z,E=f+d,z=E-f,(d-=z)&&(g[p++]=d),d=A+E,q=d-A,z=d-q,E-=q,A-=z,z=A+E,A=d;for(;l>t;)f=u,d=z,E=f+d,z=E-f,(d-=z)&&(g[p++]=d),d=A+E,q=d-A,z=d-q,E-=q,A-=z,z=A+E,A=d,t+=1,l>t&&(u=b[t]);for(;e>x;)f=m,d=z,E=f+d,z=E-f,(d-=z)&&(g[p++]=d),d=A+E,q=d-A,z=d-q,E-=q,A-=z,z=A+E,A=d,x+=1,e>x&&(m=c[x]);return z&&(g[p++]=z),A&&(g[p++]=A),p||(g[p++]=0),g.length=p,g}},{}],199:[function(b,m,g){m.exports=
function(b){return b.split("").map(function(b){return b in h?h[b]:""}).join("")};var h={" ":" ",0:"\u2070",1:"\u00b9",2:"\u00b2",3:"\u00b3",4:"\u2074",5:"\u2075",6:"\u2076",7:"\u2077",8:"\u2078",9:"\u2079","+":"\u207a","-":"\u207b",a:"\u1d43",b:"\u1d47",c:"\u1d9c",d:"\u1d48",e:"\u1d49",f:"\u1da0",g:"\u1d4d",h:"\u02b0",i:"\u2071",j:"\u02b2",k:"\u1d4f",l:"\u02e1",m:"\u1d50",n:"\u207f",o:"\u1d52",p:"\u1d56",r:"\u02b3",s:"\u02e2",t:"\u1d57",u:"\u1d58",v:"\u1d5b",w:"\u02b7",x:"\u02e3",y:"\u02b8",z:"\u1dbb"}},
{}],200:[function(b,m,g){function h(b,c,d){for(var e=0,f=0;b>f;++f)c&1<<f&&(e|=1<<d[f]);return e}function c(b,c,g,r,m,k){function q(b,c){F.push("for(","i"+m[b],"=",c,";","i"+m[b],"<","s"+m[b],";","++","i"+m[b],"){")}function z(b){for(var c=0;C>c;++c)F.push("p"+c,"+=","u"+c+"_"+m[b],";");F.push("}")}function E(){for(var b=1;1<<B>b;++b)F.push(t,"=","e"+b,";","e"+b,"=","y"+b,";","y"+b,"=",t,";")}function A(b,c){if(0>b){for(var d=0;C>d;++d)k[d]?F.push("c"+d+"_0","=","d"+d,".get(","p"+d,");"):F.push("c"+
d+"_0","=","d"+d,"[","p"+d,"];");for(var h=[],d=0;C>d;++d)h.push("c"+d+"_0");for(d=0;r>d;++d)h.push("x"+d);F.push("b0","=",f,"[",p,"]=phase(",h.join(),");");for(h=1;1<<B>h;++h)F.push("b"+h,"=",f,"[",p,"+","e"+h,"];");d=[];for(h=1;1<<B>h;++h)d.push("(b0!==b"+h+")");F.push("if(",d.join("||"),"){");for(var l=[],d=0;B>d;++d)l.push("i"+d);for(d=0;C>d;++d)for(l.push("c"+d+"_0"),h=1;1<<B>h;++h)k[d]?F.push("c"+d+"_"+h,"=","d"+d,".get(","p"+d,"+","d"+d+"_"+h,");"):F.push("c"+d+"_"+h,"=","d"+d,"[","p"+d,"+",
"d"+d+"_"+h,"];"),l.push("c"+d+"_"+h);for(d=0;1<<B>d;++d)l.push("b"+d);for(d=0;r>d;++d)l.push("x"+d);F.push("vertex(",l.join(),");","v0","=",e,"[",p,"]=",v,"++;");d=(1<<B)-1;l="b"+d;for(h=0;B>h;++h)if(0===(c&~(1<<h))){for(var g=d^1<<h,t="b"+g,u=[],x=g;0<x;x=x-1&g)u.push(e+"["+p+"+"+("e"+x)+"]");u.push("v0");for(x=0;C>x;++x)1&h?u.push("c"+x+"_"+d,"c"+x+"_"+g):u.push("c"+x+"_"+g,"c"+x+"_"+d);1&h?u.push(l,t):u.push(t,l);for(x=0;r>x;++x)u.push("x"+x);F.push("if(",l,"!==",t,"){","face(",u.join(),")}")}F.push("}",
p,"+=1;")}else{for(h=b-1;0<=h;--h)q(h,0);d=[];for(h=0;C>h;++h)k[h]?d.push("d"+h+".get("+("p"+h)+")"):d.push("d"+h+"["+("p"+h)+"]");for(h=0;r>h;++h)d.push("x"+h);F.push(f,"[",p,"++]=phase(",d.join(),");");for(h=0;b>h;++h)z(h);for(h=0;C>h;++h)F.push("p"+h,"+=","u"+h+"_"+m[b],";");F.push("if(","s"+m[b],">0){","i"+m[b],"=1;");A(b-1,c|1<<m[b]);for(h=0;C>h;++h)F.push("p"+h,"+=","u"+h+"_"+m[b],";");b===B-1&&(F.push(p,"=0;"),E());q(b,2);A(b-1,c);b===B-1&&(F.push("if(","i"+m[B-1],"&1){",p,"=0;}"),E());z(b);
F.push("}")}}var C=k.length,B=m.length;if(2>B)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var G="extractContour"+m.join("_"),F=[],I=[],D=[],H=0;C>H;++H)D.push("a"+H);for(H=0;r>H;++H)D.push("x"+H);for(H=0;B>H;++H)I.push("s"+H+"=a0.shape["+H+"]|0");for(H=0;C>H;++H){I.push("d"+H+"="+("a"+H)+".data","o"+H+"="+("a"+H)+".offset|0");for(var K=0;B>K;++K)I.push("t"+H+"_"+K+"="+("a"+H)+".stride["+K+"]|0")}for(H=0;C>H;++H)for(I.push("p"+H+"="+("o"+H)),I.push("c"+H+"_0"),K=1;1<<B>
K;++K){for(var O=[],L=0;B>L;++L)K&1<<L&&O.push("-"+("t"+H+"_"+L));I.push("d"+H+"_"+K+"=("+O.join("")+")|0");I.push("c"+H+"_"+K+"=0")}for(H=0;C>H;++H)for(K=0;B>K;++K)L=["t"+H+"_"+m[K]],0<K&&L.push("t"+H+"_"+m[K-1]+"*"+("s"+m[K-1])),I.push("u"+H+"_"+m[K]+"=("+L.join("-")+")|0");for(H=0;B>H;++H)I.push("i"+H+"=0");I.push(v+"=0");K=["2"];for(H=B-2;0<=H;--H)K.push("s"+m[H]);I.push(d+"=("+K.join("*")+")|0",f+"=mallocUint32("+d+")",e+"=mallocUint32("+d+")",p+"=0");I.push("b0=0");for(K=1;1<<B>K;++K){H=[];
O=[];for(L=0;B>L;++L)K&1<<L&&(0===O.length?H.push("1"):H.unshift(O.join("*"))),O.push("s"+m[L]);L="";0>H[0].indexOf("s"+m[B-2])&&(L="-");O=h(B,K,m);I.push("e"+O+"=(-"+H.join("-")+")|0","y"+O+"=("+L+H.join("-")+")|0","b"+O+"=0")}I.push("v0=0",t+"=0");A(B-1,0);F.push("freeUint32(",e,");freeUint32(",f,");");G=["'use strict';function ",G,"(",D.join(),"){var ",I.join(),";",F.join(""),"}return ",G].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",G))(b,c,g,l.mallocUint32,
l.freeUint32)}var l=b("typedarray-pool");m.exports=function(b){function d(b){throw Error("ndarray-extract-contour: "+b);}"object"!=typeof b&&d("Must specify arguments");var e=b.order;Array.isArray(e)||d("Must specify order");var f=b.arrayArguments||1;1>f&&d("Must have at least one array argument");var h=b.scalarArguments||0;0>h&&d("Scalar arg count must be > 0");"function"!=typeof b.vertex&&d("Must specify vertex creation function");"function"!=typeof b.cell&&d("Must specify cell creation function");
"function"!=typeof b.phase&&d("Must specify phase function");for(var k=b.getters||[],l=Array(f),g=0;f>g;++g)0<=k.indexOf(g)?l[g]=!0:l[g]=!1;return c(b.vertex,b.cell,b.phase,h,e,l)};var e="V",f="P",v="N",d="Q",p="X",t="T"},{"typedarray-pool":217}],201:[function(b,m,g){function h(b){if(0>b)return Number("0/0");for(var c=e[0],d=e.length-1;0<d;--d)c+=e[d]/(b+d);d=b+l+.5;return.5*Math.log(2*Math.PI)+(b+.5)*Math.log(d)-d+Math.log(c)-Math.log(b)}var c=[.9999999999998099,676.5203681218851,-1259.1392167224028,
771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],l=4.7421875,e=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];m.exports=function v(b){if(.5>b)return Math.PI/(Math.sin(Math.PI*
b)*v(1-b));if(100<b)return Math.exp(h(b));--b;for(var e=c[0],l=1;9>l;l++)e+=c[l]/(b+l);l=b+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(l,b+.5)*Math.exp(-l)*e};m.exports.log=h},{}],202:[function(b,m,g){m.exports=function(b){var e=b.length;if(h>e){for(var f=1,g=0;e>g;++g)for(var d=0;g>d;++d)if(b[g]<b[d])f=-f;else if(b[g]===b[d])return 0;return f}for(var p=c.mallocUint8(e),g=0;e>g;++g)p[g]=0;f=1;for(g=0;e>g;++g)if(!p[g]){var t=1;p[g]=1;for(d=b[g];d!==g;d=b[d]){if(p[d])return c.freeUint8(p),0;t+=1;p[d]=
1}1&t||(f=-f)}return c.freeUint8(p),f};var h=32,c=b("typedarray-pool")},{"typedarray-pool":217}],203:[function(b,m,g){var h=b("typedarray-pool"),c=b("invert-permutation");g.rank=function(b){var e=b.length;switch(e){case 0:case 1:return 0;case 2:return b[1]}var f,g=h.mallocUint32(e),d=h.mallocUint32(e),p=0;c(b,d);for(f=0;e>f;++f)g[f]=b[f];for(f=e-1;0<f;--f)e=d[f],b=g[f],g[f]=g[e],g[e]=b,d[f]=d[b],d[b]=e,p=(p+b)*f;return h.freeUint32(d),h.freeUint32(g),p};g.unrank=function(b,c,f){switch(b){case 0:return f?
f:[];case 1:return f?(f[0]=0,f):[0];case 2:return f?(c?(f[0]=0,f[1]=1):(f[0]=1,f[1]=0),f):c?[0,1]:[1,0]}f=f||Array(b);var h,d,g=1;f[0]=0;for(d=1;b>d;++d)f[d]=d,g=g*d|0;for(d=b-1;0<d;--d)b=c/g|0,c=c-b*g|0,g=g/d|0,h=0|f[d],f[d]=0|f[b],f[b]=0|h;return f}},{"invert-permutation":204,"typedarray-pool":217}],204:[function(b,m,g){m.exports=function(b,c){c=c||Array(b.length);for(var l=0;l<b.length;++l)c[b[l]]=l;return c}},{}],205:[function(b,m,g){m.exports=function(b){if(0>b)return[];if(0===b)return[[0]];
for(var f=0|Math.round(l(b+1)),g=[],d=0;f>d;++d){for(var p=h.unrank(b,d),t=[0],x=0,w=0;w<p.length;++w)x+=1<<p[w],t.push(x);1>c(p)&&(t[0]=x,t[b]=0);g.push(t)}return g};var h=b("permutation-rank"),c=b("permutation-parity"),l=b("gamma")},{gamma:201,"permutation-parity":202,"permutation-rank":203}],206:[function(b,m,g){m.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},
body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,
count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":207}],207:[function(b,m,g){arguments[4][49][0].apply(g,arguments)},{"./lib/thunk.js":209,dup:49}],208:[function(b,m,g){arguments[4][50][0].apply(g,arguments)},{dup:50,uniq:218}],209:[function(b,m,g){arguments[4][51][0].apply(g,arguments)},{"./compile.js":208,dup:51}],210:[function(b,
m,g){m.exports=function(b,l){var e=[];return l=+l||0,h(b.hi(b.shape[0]-1),e,l),e};var h=b("./lib/zc-core")},{"./lib/zc-core":206}],211:[function(b,m,g){function h(b,d){var e=b.length,f=["'use strict';"],h="surfaceNets"+b.join("_")+"d"+d;f.push("var contour=genContour({","order:[",b.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===d&&f.push("getters:[0],");for(var g=[],u=[],r=0;e>r;++r)g.push("d"+r),u.push("d"+r);for(r=0;1<<e>r;++r)g.push("v"+
r),u.push("v"+r);for(r=0;1<<e>r;++r)g.push("p"+r),u.push("p"+r);g.push("a","b","c");u.push("a","c");f.push("vertex:function vertexFunc(",g.join(),"){");g=[];for(r=0;1<<e>r;++r)g.push("(p"+r+"<<"+r+")");f.push("var m=(",g.join("+"),")|0;if(m===0||m===",(1<<(1<<e))-1,"){return}");var g=[],m=[];128>=1<<(1<<e)?(f.push("switch(m){"),m=f):f.push("switch(m>>>7){");for(r=0;1<<(1<<e)>r;++r){128<1<<(1<<e)&&0===r%128&&(0<g.length&&m.push("}}"),m="vExtra"+g.length,f.push("case ",r>>>7,":",m,"(m&0x7f,",u.join(),
");break;"),m=["function ",m,"(m,",u.join(),"){switch(m){"],g.push(m));m.push("case ",127&r,":");for(var k=Array(e),q=Array(e),z=Array(e),E=Array(e),A=0,C=0;e>C;++C)k[C]=[],q[C]=[],z[C]=0,E[C]=0;for(C=0;1<<e>C;++C)for(var B=0;e>B;++B){var G=C^1<<B;if(!(G>C)&&!(r&1<<G)!=!(r&1<<C)){var F=1;r&1<<G?q[B].push("v"+G+"-v"+C):(q[B].push("v"+C+"-v"+G),F=-F);0>F?(k[B].push("-v"+C+"-v"+G),z[B]+=2):(k[B].push("v"+C+"+v"+G),z[B]-=2);A+=1;for(F=0;e>F;++F)F!==B&&(G&1<<F?E[F]+=1:--E[F])}}C=[];for(B=0;e>B;++B)0===
k[B].length?C.push("d"+B+"-0.5"):(G="",0>z[B]?G=z[B]+"*c":0<z[B]&&(G="+"+z[B]+"*c"),C.push("d"+B+"-"+(.5+E[B]/A*.5)+"-"+k[B].length/A*.5+"*("+k[B].join("+")+G+")/("+q[B].join("+")+")"));m.push("a.push([",C.join(),"]);","break;")}f.push("}},");0<g.length&&m.push("}}");u=[];for(r=0;1<<e-1>r;++r)u.push("v"+r);u.push("c0","c1","p0","p1","a","b","c");f.push("cell:function cellFunc(",u.join(),"){");e=l(e-1);f.push("if(p0){b.push(",e.map(function(b){return"["+b.map(function(b){return"v"+b})+"]"}).join(),
")}else{b.push(",e.map(function(b){b=b.slice();return b.reverse(),"["+b.map(function(b){return"v"+b})+"]"}).join(),")}}});function ",h,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",h,";");for(r=0;r<g.length;++r)f.push(g[r].join(""));return(new Function("genContour",f.join("")))(c)}m.exports=function(b,c){if(0>=b.dimension)return{positions:[],cells:[]};if(1===b.dimension){for(var l=e(b,c),g=l.length,x=Array(g),w=Array(g),u=0;g>
u;++u)x[u]=[l[u]],w[u]=[u];return{positions:x,cells:w}}l=b.order.join()+"-"+b.dtype;g=f[l];c=+c||0;return g||(g=f[l]=h(b.order,b.dtype)),g(b,c)};var c=b("ndarray-extract-contour"),l=b("triangulate-hypercube"),e=b("zero-crossings"),f={}},{"ndarray-extract-contour":200,"triangulate-hypercube":205,"zero-crossings":210}],212:[function(b,m,g){(function(h){function c(b,h){var d=e[b];d||(d=e[b]={" ":{data:new Float32Array(0),shape:.2}});var g=d[h];if(!g)if(1>=h.length||!/\d/.test(h)){for(var t=l(h,{triangles:!0,
font:b,textAlign:"left",textBaseline:"alphabetic"}),g=t.cells,t=t.positions,x=new Float32Array(6*g.length),w=0,u=0,r=0;r<g.length;++r)for(var m=g[r],k=0;3>k;++k){var q=t[m[k]];x[w++]=q[0];x[w++]=q[1]+1.4;u=Math.max(q[0],u)}g=d[h]={data:x,shape:u}}else{w=h.split(/(\d|\s)/);g=Array(w.length);for(x=t=u=0;x<w.length;++x)g[x]=c(b,w[x]),u+=g[x].data.length,t+=g[x].shape,0<x&&(t+=.02);w=new Float32Array(u);u=0;r=-.5*t;for(x=0;x<g.length;++x){m=g[x].data;for(k=0;k<m.length;k+=2)w[u++]=m[k]+r,w[u++]=m[k+1];
r+=g[x].shape+.02}g=d[h]={data:w,shape:t}}return g}m.exports=c;var l=b("vectorize-text");h=window||h.global||{};var e=h.__TEXT_CACHE||{};h.__TEXT_CACHE={}}).call(this,b("_process"))},{_process:38,"vectorize-text":219}],213:[function(b,m,g){!function(){function b(c,d){if(c=c?c:"",d=d||{},c instanceof b)return c;if(!(this instanceof b))return new b(c,d);var e;e=c;var f={r:0,g:0,b:0},k=1,q=!1,g=!1;if("string"==typeof e)a:{e=e.replace(I,"").replace(D,"").toLowerCase();var p=!1;if(Q[e])e=Q[e],p=!0;else if("transparent"==
e){e={r:0,g:0,b:0,a:0,format:"name"};break a}var r;e=(r=R.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=R.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=R.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=R.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=R.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=R.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=R.hex8.exec(e))?{a:parseInt(r[1],16)/255,r:parseInt(r[2],16),g:parseInt(r[3],16),b:parseInt(r[4],16),format:p?"name":"hex8"}:(r=R.hex6.exec(e))?{r:parseInt(r[1],16),g:parseInt(r[2],
16),b:parseInt(r[3],16),format:p?"name":"hex"}:(r=R.hex3.exec(e))?{r:parseInt(r[1]+""+r[1],16),g:parseInt(r[2]+""+r[2],16),b:parseInt(r[3]+""+r[3],16),format:p?"name":"hex"}:!1}if("object"==typeof e){if(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b"))f=e.g,q=e.b,f={r:255*B(e.r,255),g:255*B(f,255),b:255*B(q,255)},q=!0,g="%"===String(e.r).substr(-1)?"prgb":"rgb";else if(e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")){e.s=F(e.s);e.v=F(e.v);var g=e.h,p=e.s,f=e.v,
g=6*B(g,360),p=B(p,100),f=B(f,100),q=K.floor(g),t=g-q,g=f*(1-p);r=f*(1-t*p);p=f*(1-(1-t)*p);q%=6;f={r:255*[f,r,g,g,p,f][q],g:255*[p,f,f,r,g,g][q],b:255*[g,g,p,f,f,r][q]};q=!0;g="hsv"}else e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=F(e.s),e.l=F(e.l),f=l(e.h,e.s,e.l),q=!0,g="hsl");e.hasOwnProperty("a")&&(k=e.a)}e=(k=C(k),{ok:q,format:e.format||g,r:L(255,P(f.r,0)),g:L(255,P(f.g,0)),b:L(255,P(f.b,0)),a:k});this._originalInput=c;this._r=e.r;this._g=e.g;this._b=e.b;this._a=
e.a;this._roundA=O(100*this._a)/100;this._format=d.format||e.format;this._gradientType=d.gradientType;1>this._r&&(this._r=O(this._r));1>this._g&&(this._g=O(this._g));1>this._b&&(this._b=O(this._b));this._ok=e.ok;this._tc_id=H++}function c(b,c,d){b=B(b,255);c=B(c,255);d=B(d,255);var e,f,k=P(b,c,d);f=L(b,c,d);var h=(k+f)/2;if(k==f)e=f=0;else{var l=k-f;switch(f=.5<h?l/(2-k-f):l/(k+f),k){case b:e=(c-d)/l+(d>c?6:0);break;case c:e=(d-b)/l+2;break;case d:e=(b-c)/l+4}e/=6}return{h:e,s:f,l:h}}function l(b,
c,d){function e(b,c,d){return 0>d&&(d+=1),1<d&&--d,1/6>d?b+6*(c-b)*d:.5>d?c:2/3>d?b+(c-b)*(2/3-d)*6:b}if(b=B(b,360),c=B(c,100),d=B(d,100),0===c)d=c=b=d;else{var f=.5>d?d*(1+c):d+c-d*c,k=2*d-f;d=e(k,f,b+1/3);c=e(k,f,b);b=e(k,f,b-1/3)}return{r:255*d,g:255*c,b:255*b}}function e(b,c,d){b=B(b,255);c=B(c,255);d=B(d,255);var e,f,k=P(b,c,d),h=L(b,c,d),l=k-h;if(f=0===k?0:l/k,k==h)e=0;else{switch(k){case b:e=(c-d)/l+(d>c?6:0);break;case c:e=(d-b)/l+2;break;case d:e=(b-c)/l+4}e/=6}return{h:e,s:f,v:k}}function f(b,
c,d,e){b=[G(O(b).toString(16)),G(O(c).toString(16)),G(O(d).toString(16))];return e&&b[0].charAt(0)==b[0].charAt(1)&&b[1].charAt(0)==b[1].charAt(1)&&b[2].charAt(0)==b[2].charAt(1)?b[0].charAt(0)+b[1].charAt(0)+b[2].charAt(0):b.join("")}function g(b,c,d,e){return[G(Math.round(255*parseFloat(e)).toString(16)),G(O(b).toString(16)),G(O(c).toString(16)),G(O(d).toString(16))].join("")}function d(c,d){d=0===d?0:d||10;var e=b(c).toHsl();return e.s-=d/100,e.s=L(1,P(0,e.s)),b(e)}function p(c,d){d=0===d?0:d||
10;var e=b(c).toHsl();return e.s+=d/100,e.s=L(1,P(0,e.s)),b(e)}function t(c){return b(c).desaturate(100)}function x(c,d){d=0===d?0:d||10;var e=b(c).toHsl();return e.l+=d/100,e.l=L(1,P(0,e.l)),b(e)}function w(c,d){d=0===d?0:d||10;var e=b(c).toRgb();return e.r=P(0,L(255,e.r-O(255*-(d/100)))),e.g=P(0,L(255,e.g-O(255*-(d/100)))),e.b=P(0,L(255,e.b-O(255*-(d/100)))),b(e)}function u(c,d){d=0===d?0:d||10;var e=b(c).toHsl();return e.l-=d/100,e.l=L(1,P(0,e.l)),b(e)}function r(c,d){var e=b(c).toHsl(),f=(O(e.h)+
d)%360;return e.h=0>f?360+f:f,b(e)}function y(c){c=b(c).toHsl();return c.h=(c.h+180)%360,b(c)}function k(c){var d=b(c).toHsl(),e=d.h;return[b(c),b({h:(e+120)%360,s:d.s,l:d.l}),b({h:(e+240)%360,s:d.s,l:d.l})]}function q(c){var d=b(c).toHsl(),e=d.h;return[b(c),b({h:(e+90)%360,s:d.s,l:d.l}),b({h:(e+180)%360,s:d.s,l:d.l}),b({h:(e+270)%360,s:d.s,l:d.l})]}function z(c){var d=b(c).toHsl(),e=d.h;return[b(c),b({h:(e+72)%360,s:d.s,l:d.l}),b({h:(e+216)%360,s:d.s,l:d.l})]}function E(c,d,e){d=d||6;e=e||30;var f=
b(c).toHsl();e=360/e;c=[b(c)];for(f.h=(f.h-(e*d>>1)+720)%360;--d;)f.h=(f.h+e)%360,c.push(b(f));return c}function A(c,d){d=d||6;for(var e=b(c).toHsv(),f=e.h,k=e.s,e=e.v,l=[],q=1/d;d--;)l.push(b({h:f,s:k,v:e})),e=(e+q)%1;return l}function C(b){return b=parseFloat(b),(isNaN(b)||0>b||1<b)&&(b=1),b}function B(b,c){var d=b;"string"==typeof d&&-1!=d.indexOf(".")&&1===parseFloat(d)&&(b="100%");d="string"==typeof b&&-1!=b.indexOf("%");return b=L(c,P(0,parseFloat(b))),d&&(b=parseInt(b*c,10)/100),1E-6>K.abs(b-
c)?1:b%c/parseFloat(c)}function G(b){return 1==b.length?"0"+b:""+b}function F(b){return 1>=b&&(b=100*b+"%"),b}var I=/^[\s,#]+/,D=/\s+$/,H=0,K=Math,O=K.round,L=K.min,P=K.max,M=K.random;b.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var b=this.toRgb();
return(299*b.r+587*b.g+114*b.b)/1E3},getLuminance:function(){var b,c,d,e,f,k,h=this.toRgb();return b=h.r/255,c=h.g/255,d=h.b/255,e=.03928>=b?b/12.92:Math.pow((b+.055)/1.055,2.4),f=.03928>=c?c/12.92:Math.pow((c+.055)/1.055,2.4),k=.03928>=d?d/12.92:Math.pow((d+.055)/1.055,2.4),.2126*e+.7152*f+.0722*k},setAlpha:function(b){return this._a=C(b),this._roundA=O(100*this._a)/100,this},toHsv:function(){var b=e(this._r,this._g,this._b);return{h:360*b.h,s:b.s,v:b.v,a:this._a}},toHsvString:function(){var b=e(this._r,
this._g,this._b),c=O(360*b.h),d=O(100*b.s),b=O(100*b.v);return 1==this._a?"hsv("+c+", "+d+"%, "+b+"%)":"hsva("+c+", "+d+"%, "+b+"%, "+this._roundA+")"},toHsl:function(){var b=c(this._r,this._g,this._b);return{h:360*b.h,s:b.s,l:b.l,a:this._a}},toHslString:function(){var b=c(this._r,this._g,this._b),d=O(360*b.h),e=O(100*b.s),b=O(100*b.l);return 1==this._a?"hsl("+d+", "+e+"%, "+b+"%)":"hsla("+d+", "+e+"%, "+b+"%, "+this._roundA+")"},toHex:function(b){return f(this._r,this._g,this._b,b)},toHexString:function(b){return"#"+
this.toHex(b)},toHex8:function(){return g(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:O(this._r),g:O(this._g),b:O(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+O(this._r)+", "+O(this._g)+", "+O(this._b)+")":"rgba("+O(this._r)+", "+O(this._g)+", "+O(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:O(100*B(this._r,255))+"%",g:O(100*B(this._g,255))+"%",b:O(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==
this._a?"rgb("+O(100*B(this._r,255))+"%, "+O(100*B(this._g,255))+"%, "+O(100*B(this._b,255))+"%)":"rgba("+O(100*B(this._r,255))+"%, "+O(100*B(this._g,255))+"%, "+O(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:T[f(this._r,this._g,this._b,!0)]||!1},toFilter:function(c){var d="#"+g(this._r,this._g,this._b,this._a),e=d,f=this._gradientType?"GradientType = 1, ":"";c&&(e=b(c).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+
f+"startColorstr="+d+",endColorstr="+e+")"},toString:function(b){var c=!!b;b=b||this._format;var d=!1,e=1>this._a&&0<=this._a;return c||!e||"hex"!==b&&"hex6"!==b&&"hex3"!==b&&"name"!==b?("rgb"===b&&(d=this.toRgbString()),"prgb"===b&&(d=this.toPercentageRgbString()),("hex"===b||"hex6"===b)&&(d=this.toHexString()),"hex3"===b&&(d=this.toHexString(!0)),"hex8"===b&&(d=this.toHex8String()),"name"===b&&(d=this.toName()),"hsl"===b&&(d=this.toHslString()),"hsv"===b&&(d=this.toHsvString()),d||this.toHexString()):
"name"===b&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(b,c){var d=b.apply(null,[this].concat([].slice.call(c)));return this._r=d._r,this._g=d._g,this._b=d._b,this.setAlpha(d._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(u,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(p,
arguments)},greyscale:function(){return this._applyModification(t,arguments)},spin:function(){return this._applyModification(r,arguments)},_applyCombination:function(b,c){return b.apply(null,[this].concat([].slice.call(c)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(z,arguments)},triad:function(){return this._applyCombination(k,
arguments)},tetrad:function(){return this._applyCombination(q,arguments)}};b.fromRatio=function(c,d){if("object"==typeof c){var e={},f;for(f in c)c.hasOwnProperty(f)&&("a"===f?e[f]=c[f]:e[f]=F(c[f]));c=e}return b(c,d)};b.equals=function(c,d){return c&&d?b(c).toRgbString()==b(d).toRgbString():!1};b.random=function(){return b.fromRatio({r:M(),g:M(),b:M()})};b.mix=function(c,d,e){e=0===e?0:e||50;var f;c=b(c).toRgb();d=b(d).toRgb();e/=100;f=2*e-1;var k=d.a-c.a;f=((-1==f*k?f:(f+k)/(1+f*k))+1)/2;k=1-f;
return b({r:d.r*f+c.r*k,g:d.g*f+c.g*k,b:d.b*f+c.b*k,a:d.a*e+c.a*(1-e)})};b.readability=function(c,d){var e=b(c),f=b(d);return(Math.max(e.getLuminance(),f.getLuminance())+.05)/(Math.min(e.getLuminance(),f.getLuminance())+.05)};b.isReadable=function(c,d,e){d=b.readability(c,d);c=!1;var f=e,k,l;e=(f=f||{level:"AA",size:"small"},k=(f.level||"AA").toUpperCase(),l=(f.size||"small").toLowerCase(),"AA"!==k&&"AAA"!==k&&(k="AA"),"small"!==l&&"large"!==l&&(l="small"),{level:k,size:l});switch(e.level+e.size){case "AAsmall":case "AAAlarge":c=
4.5<=d;break;case "AAlarge":c=3<=d;break;case "AAAsmall":c=7<=d}return c};b.mostReadable=function(c,d,e){var f,k,l,q,g=null,p=0;e=e||{};k=e.includeFallbackColors;l=e.level;q=e.size;for(var r=0;r<d.length;r++)f=b.readability(c,d[r]),f>p&&(p=f,g=b(d[r]));return b.isReadable(c,g,{level:l,size:q})||!k?g:(e.includeFallbackColors=!1,b.mostReadable(c,["#fff","#000"],e))};var Q=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",
blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",
darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",
ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",
mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",
papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",
turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=b.hexNames=function(b){var c={},d;for(d in b)b.hasOwnProperty(d)&&(c[b[d]]=d);return c}(Q),R={rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!=typeof m&&m.exports?m.exports=b:window.tinycolor=b}()},{}],214:[function(b,m,g){!function(){function b(c,
d){function e(b){var d,f=c.arcs[0>b?~b:b],k=f[0];return c.transform?(d=[0,0],f.forEach(function(b){d[0]+=b[0];d[1]+=b[1]})):d=f[f.length-1],0>b?[d,k]:[k,d]}function f(b,c){for(var d in b){var e=b[d];delete c[e.start];delete e.start;delete e.end;e.forEach(function(b){h[0>b?~b:b]=1});p.push(e)}}var h={},l={},g={},p=[],t=-1;return d.forEach(function(b,e){var f,k=c.arcs[0>b?~b:b];3>k.length&&!k[1][0]&&!k[1][1]&&(f=d[++t],d[t]=b,d[e]=f)}),d.forEach(function(b){var c;c=e(b);var d=c[0],f=c[1];(c=g[d])?(delete g[c.end],
c.push(b),c.end=f,b=l[f])?(delete l[b.start],d=b===c?c:c.concat(b),l[d.start=c.start]=g[d.end=b.end]=d):l[c.start]=g[c.end]=c:(c=l[f])?(delete l[c.start],c.unshift(b),c.start=d,b=g[d])?(delete g[b.end],d=b===c?c:b.concat(c),l[d.start=b.start]=g[d.end=c.end]=d):l[c.start]=g[c.end]=c:(c=[b],l[c.start=d]=g[c.end=f]=c)}),f(g,l),f(l,g),d.forEach(function(b){h[0>b?~b:b]||p.push([b])}),p}function c(c,d,e){function f(b){var c=0>b?~b:b;(v[c]||(v[c]=[])).push({i:b,g:u})}function l(b){b.forEach(f)}function g(b){b.forEach(l)}
function p(b){"GeometryCollection"===b.type?b.geometries.forEach(p):b.type in x&&(u=b,x[b.type](b.arcs))}var t=[];if(1<arguments.length){var u,v=[],x={LineString:l,MultiLineString:g,Polygon:g,MultiPolygon:function(b){b.forEach(g)}};p(d);v.forEach(3>arguments.length?function(b){t.push(b[0].i)}:function(b){e(b[0].g,b[b.length-1].g)&&t.push(b[0].i)})}else for(var w=0,m=c.arcs.length;m>w;++w)t.push(w);return{type:"MultiLineString",arcs:b(c,t)}}function l(c,d){function e(b){b.forEach(function(c){c.forEach(function(c){(g[c=
0>c?~c:c]||(g[c]=[])).push(b)})});p.push(b)}function l(b){b=f(c,{type:"Polygon",arcs:[b]}).coordinates[0];for(var d,e=-1,k=b.length,h=b[k-1],q=0;++e<k;)d=h,h=b[e],q+=d[0]*h[1]-d[1]*h[0];return 0<.5*q}var g={},p=[],t=[];return d.forEach(function(b){"Polygon"===b.type?e(b.arcs):"MultiPolygon"===b.type&&b.arcs.forEach(e)}),p.forEach(function(b){if(!b._){var c=[],d=[b];b._=1;for(t.push(c);b=d.pop();)c.push(b),b.forEach(function(b){b.forEach(function(b){g[0>b?~b:b].forEach(function(b){b._||(b._=1,d.push(b))})})})}}),
p.forEach(function(b){delete b._}),{type:"MultiPolygon",arcs:t.map(function(d){var e=[];if(d.forEach(function(b){b.forEach(function(b){b.forEach(function(b){2>g[0>b?~b:b].length&&e.push(b)})})}),e=b(c,e),1<(n=e.length)){var f;f=l(d[0][0]);for(d=0;d<n;++d)if(f===l(e[d])){f=e[0];e[0]=e[d];e[d]=f;break}}return e})}}function e(b,c){var d={type:"Feature",id:c.id,properties:c.properties||{},geometry:f(b,c)};return null==c.id&&delete d.id,d}function f(b,c){function d(b){return b=b.slice(),g(b,0),b}function e(b){for(var c=
[],d=0,f=b.length;f>d;++d){var k=b[d],h=c;h.length&&h.pop();for(var l=void 0,q=p[0>k?~k:k],r=0,t=q.length;t>r;++r)h.push(l=q[r].slice()),g(l,r);if(0>k)for(k=h,h=void 0,l=k.length,t=l-t;t<--l;)h=k[t],k[t++]=k[l],k[l]=h}return 2>c.length&&c.push(c[0].slice()),c}function f(b){for(b=e(b);4>b.length;)b.push(b[0].slice());return b}function h(b){return b.map(f)}function l(b){var c=b.type;return"GeometryCollection"===c?{type:c,geometries:b.geometries.map(l)}:c in u?{type:c,coordinates:u[c](b)}:null}var g=
t(b.transform),p=b.arcs,u={Point:function(b){return d(b.coordinates)},MultiPoint:function(b){return b.coordinates.map(d)},LineString:function(b){return e(b.arcs)},MultiLineString:function(b){return b.arcs.map(e)},Polygon:function(b){return h(b.arcs)},MultiPolygon:function(b){return b.arcs.map(h)}};return l(c)}function g(b,c){for(var d=0,e=b.length;e>d;){var f=d+e>>>1;b[f]<c?d=f+1:e=f}return d}function d(b){var c=b[0],d=b[1];b=b[2];return Math.abs((c[0]-b[0])*(d[1]-c[1])-(c[0]-d[0])*(b[1]-c[1]))}function p(){function b(c,
d){for(;0<d;){var f=(d+1>>1)-1,k=e[f];if(0<=c[1][2]-k[1][2])break;e[k._=d]=k;e[c._=d=f]=c}}function c(b,d){for(;;){var k=d+1<<1,h=k-1,l=d,g=e[l];if(f>h&&0>e[h][1][2]-g[1][2]&&(g=e[l=h]),f>k&&0>e[k][1][2]-g[1][2]&&(g=e[l=k]),l===d)break;e[g._=d]=g;e[b._=d=l]=b}}var d={},e=[],f=0;return d.push=function(c){return b(e[c._=f]=c,f++),f},d.pop=function(){if(!(0>=f)){var b,d=e[0];return 0<--f&&(b=e[f],c(e[b._=0]=b,0)),d}},d.remove=function(d){var k,h=d._;if(e[h]===d)return h!==--f&&(k=e[f],(0>k[1][2]-d[1][2]?
b:c)(e[k._=h]=k,h)),h},d}function t(b){if(!b)return w;var c,d,e=b.scale[0],f=b.scale[1],h=b.translate[0],l=b.translate[1];return function(b,g){g||(c=d=0);b[0]=(c+=b[0])*e+h;b[1]=(d+=b[1])*f+l}}function x(b){if(!b)return w;var c,d,e=b.scale[0],f=b.scale[1],h=b.translate[0],l=b.translate[1];return function(b,g){g||(c=d=0);var p=(b[0]-h)/e|0,r=(b[1]-l)/f|0;b[0]=p-c;b[1]=r-d;c=p;d=r}}function w(){}var u={version:"1.6.19",mesh:function(b){return f(b,c.apply(this,arguments))},meshArcs:c,merge:function(b){return f(b,
l.apply(this,arguments))},mergeArcs:l,feature:function(b,c){return"GeometryCollection"===c.type?{type:"FeatureCollection",features:c.geometries.map(function(c){return e(b,c)})}:e(b,c)},neighbors:function(b){function c(b,d){b.forEach(function(b){0>b&&(b=~b);var c=f[b];c?c.push(d):f[b]=[d]})}function d(b,e){b.forEach(function(b){c(b,e)})}function e(b,c){"GeometryCollection"===b.type?b.geometries.forEach(function(b){e(b,c)}):b.type in l&&l[b.type](b.arcs,c)}var f={},h=b.map(function(){return[]}),l={LineString:c,
MultiLineString:d,Polygon:d,MultiPolygon:function(b,c){b.forEach(function(b){d(b,c)})}};b.forEach(e);for(var p in f){b=f[p];for(var t=b.length,u=0;t>u;++u)for(var x=u+1;t>x;++x){var w,m=b[u],H=b[x];(w=h[m])[p=g(w,H)]!==H&&w.splice(p,0,H);(w=h[H])[p=g(w,m)]!==m&&w.splice(p,0,m)}}return h},presimplify:function(b,c){function e(b){l.remove(b);b[1][2]=c(b);l.push(b)}var f=t(b.transform),h=x(b.transform),l=p();return c||(c=d),b.arcs.forEach(function(b){for(var d,g=[],p=0,r=0,t=b.length;t>r;++r)d=b[r],f(b[r]=
[d[0],d[1],1/0],r);r=1;for(t=b.length-1;t>r;++r)d=b.slice(r-1,r+2),d[1][2]=c(d),g.push(d),l.push(d);r=0;for(t=g.length;t>r;++r)d=g[r],d.previous=g[r-1],d.next=g[r+1];for(;d=l.pop();)g=d.previous,r=d.next,d[1][2]<p?d[1][2]=p:p=d[1][2],g&&(g.next=r,g[2]=d[2],e(g)),r&&(r.previous=g,r[0]=d[0],e(r));b.forEach(h)}),b}};"object"==typeof m&&m.exports?m.exports=u:this.topojson=u}()},{}],215:[function(b,m,g){m.exports=function(b,l,e){var f=b*l,g=h*b,g=g-(g-b);b-=g;var d=h*l,d=d-(d-l);l-=d;l=b*l-(f-g*d-b*d-
g*l);return e?(e[0]=l,e[1]=f,e):[l,f]};var h=+(Math.pow(2,27)+1)},{}],216:[function(b,m,g){m.exports=function(b,c,l){var e=b+c,f=e-b;c-=f;b-=e-f;return l?(l[0]=b+c,l[1]=e,l):[b+c,e]}},{}],217:[function(b,m,g){(function(h,c){function l(b){if(b){var c=q.log2(b.length||b.byteLength);C[c].push(b)}}function e(b){b=q.nextPow2(b);var c=q.log2(b),c=C[c];return 0<c.length?c.pop():new ArrayBuffer(b)}function f(b){return new Uint8Array(e(b),0,b)}function v(b){return new Uint16Array(e(2*b),0,b)}function d(b){return new Uint32Array(e(4*
b),0,b)}function p(b){return new Int8Array(e(b),0,b)}function t(b){return new Int16Array(e(2*b),0,b)}function x(b){return new Int32Array(e(4*b),0,b)}function w(b){return new Float32Array(e(4*b),0,b)}function u(b){return new Float64Array(e(8*b),0,b)}function r(b){return E?new Uint8ClampedArray(e(b),0,b):f(b)}function m(b){return new DataView(e(b),0,b)}function k(b){b=q.nextPow2(b);var d=q.log2(b),d=B[d];return 0<d.length?d.pop():new c(b)}var q=b("bit-twiddle"),z=b("dup");h.__TYPEDARRAY_POOL||(h.__TYPEDARRAY_POOL=
{UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var E="undefined"!=typeof Uint8ClampedArray,A=h.__TYPEDARRAY_POOL;A.UINT8C||(A.UINT8C=z([32,0]));A.BUFFER||(A.BUFFER=z([32,0]));var C=A.DATA,B=A.BUFFER;g.free=function(b){if(c.isBuffer(b))B[q.log2(b.length)].push(b);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(b)&&(b=b.buffer),b){var d=0|q.log2(b.length||
b.byteLength);C[d].push(b)}};g.freeUint8=g.freeUint16=g.freeUint32=g.freeInt8=g.freeInt16=g.freeInt32=g.freeFloat32=g.freeFloat=g.freeFloat64=g.freeDouble=g.freeUint8Clamped=g.freeDataView=function(b){l(b.buffer)};g.freeArrayBuffer=l;g.freeBuffer=function(b){B[q.log2(b.length)].push(b)};g.malloc=function(b,c){if(void 0===c||"arraybuffer"===c)return e(b);switch(c){case "uint8":return f(b);case "uint16":return v(b);case "uint32":return d(b);case "int8":return p(b);case "int16":return t(b);case "int32":return x(b);
case "float":case "float32":return w(b);case "double":case "float64":return u(b);case "uint8_clamped":return r(b);case "buffer":return k(b);case "data":case "dataview":return m(b);default:return null}};g.mallocArrayBuffer=e;g.mallocUint8=f;g.mallocUint16=v;g.mallocUint32=d;g.mallocInt8=p;g.mallocInt16=t;g.mallocInt32=x;g.mallocFloat32=g.mallocFloat=w;g.mallocFloat64=g.mallocDouble=u;g.mallocUint8Clamped=r;g.mallocDataView=m;g.mallocBuffer=k;g.clearCache=function(){for(var b=0;32>b;++b)A.UINT8[b].length=
0,A.UINT16[b].length=0,A.UINT32[b].length=0,A.INT8[b].length=0,A.INT16[b].length=0,A.INT32[b].length=0,A.FLOAT[b].length=0,A.DOUBLE[b].length=0,A.UINT8C[b].length=0,C[b].length=0,B[b].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":33,buffer:34,dup:55}],218:[function(b,m,g){arguments[4][52][0].apply(g,arguments)},{dup:52}],219:[function(b,m,g){m.exports=function(b,f){return("object"!=typeof f||
null===f)&&(f={}),h(b,f.canvas||c,f.context||l,f)};var h=b("./lib/vtext"),c=null,l=null;"undefined"!=typeof document&&(c=document.createElement("canvas"),c.width=8192,c.height=1024,l=c.getContext("2d"))},{"./lib/vtext":220}],220:[function(b,m,g){function h(b,c,d){for(var e=c.textAlign||"start",f=c.textBaseline||"alphabetic",k=[1073741824,1073741824],h=[0,0],l=b.length,g=0;l>g;++g)for(var p=b[g],t=0;2>t;++t)k[t]=0|Math.min(k[t],p[t]),h[t]=0|Math.max(h[t],p[t]);var v=0;switch(e){case "center":v=-.5*
(k[0]+h[0]);break;case "right":case "end":v=-h[0];break;case "left":case "start":v=-k[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+e+"'");}var m=0;switch(f){case "hanging":case "top":m=-k[1];break;case "middle":m=-.5*(k[1]+h[1]);break;case "alphabetic":case "ideographic":m=-3*d;break;case "bottom":m=-h[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+f+"'");}var F=1/d;return"lineHeight"in c?F*=+c.lineHeight:"width"in c?F=c.width/(h[0]-k[0]):
"height"in c&&(F=c.height/(h[1]-k[1])),b.map(function(b){return[F*(b[0]+v),F*(b[1]+m)]})}function c(b,c,f,l){b=e(b,128);l=l?v(b.cells,b.positions,.25):{edges:b.cells,positions:b.positions};f=h(l.positions,c,f);b=l.edges;l="ccw"===c.orientation;if(d(f,b),c.polygons||c.polygon||c.polyline){c=t(b,f);b=Array(c.length);for(var g=0;g<c.length;++g){for(var k=c[g],q=Array(k.length),m=0;m<k.length;++m){for(var E=k[m],A=Array(E.length),C=0;C<E.length;++C)A[C]=f[E[C]].slice();l&&A.reverse();q[m]=A}b[g]=q}return b}return c.triangles||
c.triangulate||c.triangle?{cells:p(f,b,{delaunay:!1,exterior:!1,interior:!0}),positions:f}:{edges:b,positions:f}}function l(b,d,e){try{return c(b,d,e,!0)}catch(f){}try{return c(b,d,e,!1)}catch(f){}return d.polygons||d.polyline||d.polygon?[]:d.triangles||d.triangulate||d.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}m.exports=function(b,c,d,e){var h=e.size||64;d.font=h+"px "+(e.font||"normal");d.textAlign="start";d.textBaseline="alphabetic";d.direction="ltr";var k;k=0|Math.ceil(d.measureText(b).width+
2*h);if(8192<k)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var q=3*h;c.height<q&&(c.height=q);d.fillStyle="#000";d.fillRect(0,0,c.width,c.height);d.fillStyle="#fff";d.fillText(b,h,2*h);b=d.getImageData(0,0,k,q);k=f(b.data,[q,k,4]).pick(-1,-1,0).transpose(1,0);return l(k,e,h)};m.exports.processPixels=l;var e=b("surface-nets"),f=b("ndarray"),v=b("simplify-planar-graph"),d=b("clean-pslg"),p=b("cdt2d"),t=b("planar-graph-to-polyline")},{cdt2d:221,"clean-pslg":228,
ndarray:189,"planar-graph-to-polyline":274,"simplify-planar-graph":278,"surface-nets":211}],221:[function(b,m,g){function h(b){return[Math.min(b[0],b[1]),Math.max(b[0],b[1])]}function c(b,c){return b[0]-c[0]||b[1]-c[1]}function l(b,c,d){return c in b?b[c]:d}var e=b("./lib/monotone"),f=b("./lib/triangulation"),v=b("./lib/delaunay"),d=b("./lib/filter");m.exports=function(b,g,x){Array.isArray(g)?(x=x||{},g=g||[]):(x=g||{},g=[]);var w=!!l(x,"delaunay",!0),u=!!l(x,"interior",!0),r=!!l(x,"exterior",!0);
x=!!l(x,"infinity",!1);if(!u&&!r||0===b.length)return[];var m=e(b,g);if(w||u!==r||x){g=f(b.length,g.map(h).sort(c));for(var k=0;k<m.length;++k){var q=m[k];g.addTriangle(q[0],q[1],q[2])}return w&&v(b,g),r?u?x?d(g,0,x):g.cells():d(g,1,x):d(g,-1)}return m}},{"./lib/delaunay":222,"./lib/filter":223,"./lib/monotone":224,"./lib/triangulation":225}],222:[function(b,m,g){function h(b,e,f,h,d,g){var t=e.opposite(h,d);if(!(0>t)){if(h>d){var x=h;h=d;d=x;x=g;g=t;t=x}e.isConstraint(h,d)||0>c(b[h],b[d],b[g],b[t])&&
f.push(h,d)}}var c=b("robust-in-sphere")[4];b("binary-search-bounds");m.exports=function(b,e){for(var f=[],g=b.length,d=e.stars,p=0;g>p;++p)for(var t=d[p],x=1;x<t.length;x+=2){var w=t[x];if(!(p>w||e.isConstraint(p,w))){for(var u=t[x-1],r=-1,m=1;m<t.length;m+=2)if(t[m-1]===w){r=t[m];break}0>r||0>c(b[p],b[w],b[u],b[r])&&f.push(p,w)}}for(;0<f.length;){w=f.pop();p=f.pop();r=u=-1;t=d[p];for(g=1;g<t.length;g+=2)x=t[g-1],m=t[g],x===w?r=m:m===w&&(u=x);0>u||0>r||0<=c(b[p],b[w],b[u],b[r])||(e.flip(p,w),h(b,
e,f,u,p,r),h(b,e,f,p,r,u),h(b,e,f,r,w,u),h(b,e,f,w,u,r))}}},{"binary-search-bounds":226,"robust-in-sphere":227}],223:[function(b,m,g){function h(b,c,h,d,l,g,x){this.cells=b;this.neighbor=c;this.flags=d;this.constraint=h;this.active=l;this.next=g;this.boundary=x}function c(b,c){return b[0]-c[0]||b[1]-c[1]||b[2]-c[2]}var l=b("binary-search-bounds");m.exports=function(b,f,l){for(var d=b.cells(),g=d.length,t=0;g>t;++t){var x=d[t],w=x[0],u=x[1],r=x[2];r>u?w>u&&(x[0]=u,x[1]=r,x[2]=w):w>r&&(x[0]=r,x[1]=
w,x[2]=u)}d.sort(c);for(var m=Array(g),t=0;t<m.length;++t)m[t]=0;var k=[],q=[],z=Array(3*g),E=Array(3*g),A=null;l&&(A=[]);r=new h(d,z,E,m,k,q,A);for(t=0;g>t;++t)for(var x=d[t],C=0;3>C;++C){var w=x[C],u=x[(C+1)%3],B=z[3*t+C]=r.locate(u,w,b.opposite(u,w)),G=E[3*t+C]=b.isConstraint(w,u);0>B&&(G?q.push(t):(k.push(t),m[t]=1),l&&A.push([u,w,-1]))}if(0===f)return l?r.cells.concat(r.boundary):r.cells;g=1;t=r.active;x=r.next;b=r.flags;d=r.cells;w=r.constraint;for(u=r.neighbor;0<t.length||0<x.length;){for(;0<
t.length;)if(m=t.pop(),b[m]!==-g)for(b[m]=g,k=(d[m],0);3>k;++k)q=u[3*m+k],0<=q&&0===b[q]&&(w[3*m+k]?x.push(q):(t.push(q),b[q]=g));m=x;x=t;t=m;x.length=0;g=-g}for(t=g=0;t<d.length;++t)b[t]===f&&(d[g++]=d[t]);f=(d.length=g,d);return l?f.concat(r.boundary):f};h.prototype.locate=function(){var b=[0,0,0];return function(f,h,d){var g=f,t=h,x=d;return d>h?f>h&&(g=h,t=d,x=f):f>d&&(g=d,t=f,x=h),0>g?-1:(b[0]=g,b[1]=t,b[2]=x,l.eq(this.cells,b,c))}}()},{"binary-search-bounds":226}],224:[function(b,m,g){function h(b,
c,d,e,f){this.a=b;this.b=c;this.idx=d;this.lowerIds=e;this.upperIds=f}function c(b,c,d,e){this.a=b;this.b=c;this.type=d;this.idx=e}function l(b,c){var e=b.a[0]-c.a[0]||b.a[1]-c.a[1]||b.type-c.type;return e?e:b.type!==p&&(e=d(b.a,b.b,c.b))?e:b.idx-c.idx}function e(b,c){return d(b.a,b.b,c)}function f(b,c){var e;return(e=b.a[0]<c.a[0]?d(b.a,b.b,c.a):d(c.b,c.a,b.a))?e:(e=c.b[0]<b.b[0]?d(b.a,b.b,c.b):d(c.b,c.a,b.b),e||b.idx-c.idx)}var v=b("binary-search-bounds"),d=b("robust-orientation")[3],p=0;m.exports=
function(b,g){for(var w=b.length,u=g.length,r=[],m=0;w>m;++m)r.push(new c(b[m],null,p,m));for(m=0;u>m;++m){var k=g[m],w=b[k[0]],k=b[k[1]];w[0]<k[0]?r.push(new c(w,k,2,m),new c(k,w,1,m)):w[0]>k[0]&&r.push(new c(k,w,2,m),new c(w,k,1,m))}r.sort(l);m=r[0].a[0]-(1+Math.abs(r[0].a[0]))*Math.pow(2,-52);u=[new h([m,1],[m,0],-1,[],[],[],[])];w=[];m=0;for(k=r.length;k>m;++m){var q=r[m],z=q.type;if(z===p)for(var z=w,E=u,A=b,C=q.a,q=q.idx,B=v.lt(E,C,e),G=v.gt(E,C,e);G>B;++B){for(var F=E[B],I=F.lowerIds,D=I.length;1<
D&&0<d(A[I[D-2]],A[I[D-1]],C);)z.push([I[D-1],I[D-2],q]),--D;I.length=D;I.push(q);F=F.upperIds;for(D=F.length;1<D&&0>d(A[F[D-2]],A[F[D-1]],C);)z.push([F[D-2],F[D-1],q]),--D;F.length=D;F.push(q)}else 2===z?(z=u,E=q,A=v.le(z,E,f),C=z[A],q=C.upperIds,G=q[q.length-1],C.upperIds=[G],z.splice(A+1,0,new h(E.a,E.b,E.idx,[G],q))):(z=u,E=q,A=E.a,E.a=E.b,E.b=A,E=v.eq(z,E,f),z[E-1].upperIds=z[E].upperIds,z.splice(E,1))}return w}},{"binary-search-bounds":226,"robust-orientation":195}],225:[function(b,m,g){function h(b,
c){this.stars=b;this.edges=c}function c(b,c,h){for(var d=1,l=b.length;l>d;d+=2)if(b[d-1]===c&&b[d]===h)return b[d-1]=b[l-2],b[d]=b[l-1],void(b.length=l-2)}var l=b("binary-search-bounds");m.exports=function(b,c){for(var l=Array(b),d=0;b>d;++d)l[d]=[];return new h(l,c)};b=h.prototype;b.isConstraint=function(){function b(c,d){return c[0]-d[0]||c[1]-d[1]}var c=[0,0];return function(h,d){return c[0]=Math.min(h,d),c[1]=Math.max(h,d),0<=l.eq(this.edges,c,b)}}();b.removeTriangle=function(b,f,h){var d=this.stars;
c(d[b],f,h);c(d[f],h,b);c(d[h],b,f)};b.addTriangle=function(b,c,h){var d=this.stars;d[b].push(c,h);d[c].push(h,b);d[h].push(b,c)};b.opposite=function(b,c){for(var h=this.stars[c],d=1,l=h.length;l>d;d+=2)if(h[d]===b)return h[d-1];return-1};b.flip=function(b,c){var h=this.opposite(b,c),d=this.opposite(c,b);this.removeTriangle(b,c,h);this.removeTriangle(c,b,d);this.addTriangle(b,d,h);this.addTriangle(c,h,d)};b.edges=function(){for(var b=this.stars,c=[],h=0,d=b.length;d>h;++h)for(var l=b[h],g=0,x=l.length;x>
g;g+=2)c.push([l[g],l[g+1]]);return c};b.cells=function(){for(var b=this.stars,c=[],h=0,d=b.length;d>h;++h)for(var l=b[h],g=0,x=l.length;x>g;g+=2){var w=l[g],u=l[g+1];h<Math.min(w,u)&&c.push([h,w,u])}return c}},{"binary-search-bounds":226}],226:[function(b,m,g){arguments[4][105][0].apply(g,arguments)},{dup:105}],227:[function(b,m,g){function h(b,c){for(var d=Array(b.length-1),e=1;e<b.length;++e)for(var f=d[e-1]=Array(b.length-1),h=0,l=0;h<b.length;++h)h!==c&&(f[l++]=b[e][h]);return d}function c(b){if(1===
b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var d=b.length>>1;return["sum(",c(b.slice(0,d)),",",c(b.slice(d)),")"].join("")}function l(b,c){if("m"===b.charAt(0)){if("w"===c.charAt(0)){var d=b.split("[");return["w",c.substr(1),"m",d[0].substr(1)].join("")}return["prod(",b,",",c,")"].join("")}return l(c,b)}function e(b){if(2===b.length)return[["diff(",l(b[0][0],b[1][1]),",",l(b[1][0],b[0][1]),")"].join("")];for(var d=[],f=0;f<b.length;++f)d.push(["scale(",c(e(h(b,
f))),",",f&1?"-":"",b[0][f],")"].join(""));return d}function f(b,d){for(var e=[],f=0;d-2>f;++f)e.push(["prod(m",b,"[",f,"],m",b,"[",f,"])"].join(""));return c(e)}function v(b){for(var d=[],k=[],l=Array(b),g=0;b>g;++g){l[g]=Array(b);for(var u=0;b>u;++u)l[g][u]=["m",u,"[",b-g-2,"]"].join("")}for(g=0;b>g;++g)l[0][g]="1",l[b-1][g]="w"+g;for(g=0;b>g;++g)0===(1&g)?d.push.apply(d,e(h(l,g))):k.push.apply(k,e(h(l,g)));d=c(d);k=c(k);l="exactInSphere"+b;u=[];for(g=0;b>g;++g)u.push("m"+g);u=["function ",l,"(",
u.join(),"){"];for(g=0;b>g;++g){u.push("var w",g,"=",f(g,b),";");for(var v=0;b>v;++v)v!==g&&u.push("var w",g,"m",v,"=scale(w",g,",m",v,"[0]);")}u.push("var p=",d,",n=",k,",d=diff(p,n);return d[d.length-1];}return ",l);return(new Function("sum","diff","prod","scale",u.join("")))(t,x,p,w)}function d(b){var c=u[b.length];return c||(c=u[b.length]=v(b.length)),c.apply(void 0,b)}var p=b("two-product"),t=b("robust-sum"),x=b("robust-subtract"),w=b("robust-scale"),u=[function(){return 0},function(){return 0},
function(){return 0}];(function(){for(;6>=u.length;)u.push(v(u.length));for(var b=[],c=["slow"],e=0;6>=e;++e)b.push("a"+e),c.push("o"+e);for(var f=["function testInSphere(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],e=2;6>=e;++e)f.push("case ",e,":return o",e,"(",b.slice(0,e).join(),");");f.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");c.push(f.join(""));b=Function.apply(void 0,c);m.exports=
b.apply(void 0,[d].concat(u));for(e=0;6>=e;++e)m.exports[e]=u[e]})()},{"robust-scale":196,"robust-subtract":197,"robust-sum":198,"two-product":215}],228:[function(b,m,g){function h(b){var c=y(b);b=r(u(c),b);return 0>b?[c,q(c,1/0)]:0<b?[q(c,-(1/0)),c]:[c,c]}function c(b,c,d){var e=[];return x(d,function(d,f){var k=c[d],h=c[f];k[0]!==h[0]&&k[0]!==h[1]&&k[1]!==h[0]&&k[1]!==h[1]&&w(b[k[0]],b[k[1]],b[h[0]],b[h[1]])&&e.push([d,f])}),e}function l(b,c,d,e){var f=[];return x(d,e,function(d,e){var k=c[d];if(k[0]!==
e&&k[1]!==e){var h=b[e];w(b[k[0]],b[k[1]],h,h)&&f.push([d,e])}}),f}function e(b,c,d,e,f){function h(c){if(c>=b.length)return l[c-b.length];c=b[c];return[u(c[0]),u(c[1])]}for(var l=[],g=0;g<d.length;++g){var q=d[g],p=q[0],q=q[1],t=c[p],v=c[q];if(t=z(k(b[t[0]]),k(b[t[1]]),k(b[v[0]]),k(b[v[1]])))v=l.length+b.length,l.push(t),e.push([p,v],[q,v])}e.sort(function(b,c){if(b[0]!==c[0])return b[0]-c[0];var d=h(b[1]),e=h(c[1]);return r(d[0],e[0])||r(d[1],e[1])});for(g=e.length-1;0<=g;--g){q=e[g];p=q[0];t=c[p];
v=t[0];d=t[1];var x=b[v],w=b[d];0>(x[0]-w[0]||x[1]-w[1])&&(x=v,v=d,d=x);t[0]=v;var m,v=t[1]=q[1];for(f&&(m=t[2]);0<g&&e[g-1][0]===p;)q=e[--g],q=q[1],f?c.push([v,q,m]):c.push([v,q]),v=q;f?c.push([v,d,m]):c.push([v,d])}return l}function f(b,c,d){for(var e=b.length+c.length,f=new t(e),k=0;k<c.length;++k){var l=c[k],g=h(l[0]),q=h(l[1]);d.push([g[0],q[0],g[1],q[1]]);b.push([y(l[0]),y(l[1])])}x(d,function(b,c){f.link(b,c)});c=0;d=!0;l=Array(e);for(k=0;e>k;++k)f.find(k)===k?(l[k]=c,b[c++]=b[k]):(d=!1,l[k]=
-1);if(b.length=c,d)return null;for(k=0;e>k;++k)0>l[k]&&(l[k]=l[f.find(k)]);return l}function v(b,c){return b[0]-c[0]||b[1]-c[1]}function d(b,c){var d=b[0]-c[0]||b[1]-c[1];return d?d:b[2]<c[2]?-1:b[2]>c[2]?1:0}function p(b,k,h){for(var g=Array(k.length),q=0;q<k.length;++q){var p=k[q],r=b[p[0]],p=b[p[1]];g[q]=[Math.min(r[0],p[0]),Math.min(r[1],p[1]),Math.max(r[0],p[0]),Math.max(r[1],p[1])]}q=c(b,k,g);r=Array(b.length);for(p=0;p<b.length;++p){var t=b[p];r[p]=[t[0],t[1],t[0],t[1]]}g=l(b,k,g,r);p=e(b,
k,q,g,h);b=f(b,p,r);if(0!==k.length){if(b)for(r=0;r<k.length;++r){var p=k[r],t=b[p[0]],u=b[p[1]];p[0]=Math.min(t,u);p[1]=Math.max(t,u)}else for(r=0;r<k.length;++r)p=k[r],t=p[0],u=p[1],p[0]=Math.min(t,u),p[1]=Math.max(t,u);h?k.sort(d):k.sort(v);for(r=p=1;r<k.length;++r)t=k[r-1],u=k[r],(u[0]!==t[0]||u[1]!==t[1]||h&&u[2]!==t[2])&&(k[p++]=u);k.length=p}return b?!0:0<q.length||0<g.length}m.exports=function(b,c,d){var e,f=!1;if(d){e=c;for(var k=Array(c.length),h=0;h<c.length;++h){var l=c[h];k[h]=[l[0],
l[1],d[h]]}c=k}for(;p(b,c,!!d);)f=!0;if(d&&f)for(e.length=0,h=d.length=0;h<c.length;++h)l=c[h],e.push([l[0],l[1]]),d.push(l[2]);return f};var t=b("union-find"),x=b("box-intersect"),w=(b("compare-cell"),b("robust-segment-intersect")),u=b("big-rat"),r=b("big-rat/cmp"),y=b("big-rat/to-float"),k=b("rat-vec"),q=b("nextafter"),z=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":229,"big-rat":233,"big-rat/cmp":231,"big-rat/to-float":246,"box-intersect":247,"compare-cell":41,nextafter:255,"rat-vec":257,
"robust-segment-intersect":260,"union-find":261}],229:[function(b,m,g){function h(b,d){return e(c(b[0],d[1]),c(b[1],d[0]))}m.exports=function(b,c,e,g){c=v(c,b);var r=v(g,e);g=h(c,r);if(0===f(g))return null;e=v(b,e);e=h(r,e);e=l(e,g);return d(b,p(c,e))};var c=b("big-rat/mul"),l=b("big-rat/div"),e=b("big-rat/sub"),f=b("big-rat/sign"),v=b("rat-vec/sub"),d=b("rat-vec/add"),p=b("rat-vec/muls");b("big-rat/to-float")},{"big-rat/div":232,"big-rat/mul":242,"big-rat/sign":244,"big-rat/sub":245,"big-rat/to-float":246,
"rat-vec/add":256,"rat-vec/muls":258,"rat-vec/sub":259}],230:[function(b,m,g){var h=b("./lib/rationalize");m.exports=function(b,l){return h(b[0].mul(l[1]).add(l[0].mul(b[1])),b[1].mul(l[1]))}},{"./lib/rationalize":240}],231:[function(b,m,g){m.exports=function(b,c){return b[0].mul(c[1]).cmp(c[0].mul(b[1]))}},{}],232:[function(b,m,g){var h=b("./lib/rationalize");m.exports=function(b,l){return h(b[0].mul(l[1]),b[1].mul(l[0]))}},{"./lib/rationalize":240}],233:[function(b,m,g){function h(b,g){if(c(b))return g?
d(b,h(g)):[b[0].clone(),b[1].clone()];var x,w,u=0;if(l(b))x=b.clone();else if("string"==typeof b)x=f(b);else{if(0===b)return[e(0),e(1)];if(b!==Math.floor(b))for(;b!==Math.floor(b);)b*=Math.pow(2,256),u-=256;x=e(b)}if(c(g))x.mul(g[1]),w=g[0].clone();else if(l(g))w=g.clone();else if("string"==typeof g)w=f(g);else if(g){if(g!==Math.floor(g))for(;g!==Math.floor(g);)g*=Math.pow(2,256),u+=256;w=e(g)}else w=e(1);return 0<u?x=x.shln(u):0>u&&(w=w.shln(-u)),v(x,w)}var c=b("./is-rat"),l=b("./lib/is-bn"),e=b("./lib/num-to-bn"),
f=b("./lib/str-to-bn"),v=b("./lib/rationalize"),d=b("./div");m.exports=h},{"./div":232,"./is-rat":234,"./lib/is-bn":238,"./lib/num-to-bn":239,"./lib/rationalize":240,"./lib/str-to-bn":241}],234:[function(b,m,g){var h=b("./lib/is-bn");m.exports=function(b){return Array.isArray(b)&&2===b.length&&h(b[0])&&h(b[1])}},{"./lib/is-bn":238}],235:[function(b,m,g){var h=b("bn.js");m.exports=function(b){return b.cmp(new h(0))}},{"bn.js":243}],236:[function(b,m,g){m.exports=function(b){var c=b.length,l=b.words,
e=0;if(1===c)e=l[0];else if(2===c)e=l[0]+67108864*l[1];else for(var f=e=0;c>f;f++)e+=l[f]*Math.pow(67108864,f);return b.sign?-e:e}},{}],237:[function(b,m,g){var h=b("double-bits"),c=b("bit-twiddle").countTrailingZeros;m.exports=function(b){var e=c(h.lo(b));if(32>e)return e;b=c(h.hi(b));return 20<b?52:b+32}},{"bit-twiddle":33,"double-bits":254}],238:[function(b,m,g){b("bn.js");m.exports=function(b){return b&&"object"==typeof b&&Boolean(b.words)}},{"bn.js":243}],239:[function(b,m,g){var h=b("bn.js"),
c=b("double-bits");m.exports=function(b){var e=c.exponent(b);return 52>e?new h(b):(new h(b*Math.pow(2,52-e))).shln(e-52)}},{"bn.js":243,"double-bits":254}],240:[function(b,m,g){var h=b("./num-to-bn"),c=b("./bn-sign");m.exports=function(b,e){var f=c(b),g=c(e);if(0===f)return[h(0),h(1)];if(0===g)return[h(0),h(0)];0>g&&(b=b.neg(),e=e.neg());f=b.gcd(e);return f.cmpn(1)?[b.div(f),e.div(f)]:[b,e]}},{"./bn-sign":235,"./num-to-bn":239}],241:[function(b,m,g){var h=b("bn.js");m.exports=function(b){return new h(b)}},
{"bn.js":243}],242:[function(b,m,g){var h=b("./lib/rationalize");m.exports=function(b,l){return h(b[0].mul(l[0]),b[1].mul(l[1]))}},{"./lib/rationalize":240}],243:[function(b,m,g){!function(b,c){function l(b,c){if(!b)throw Error(c||"Assertion failed");}function e(b,c){b.super_=c;var d=function(){};d.prototype=c.prototype;b.prototype=new d;b.prototype.constructor=b}function f(b,c,d){return null!==b&&"object"==typeof b&&Array.isArray(b.words)?b:(this.sign=!1,this.words=null,this.length=0,this.red=null,
("le"===c||"be"===c)&&(d=c,c=10),void(null!==b&&this._init(b||0,c||10,d||"be")))}function g(b,c,d){var e=0;for(d=Math.min(b.length,d);d>c;c++)var f=b.charCodeAt(c)-48,e=e<<4,e=e|(49<=f&&54>=f?f-49+10:17<=f&&22>=f?f-17+10:15&f);return e}function d(b,c,d,e){var f=0;for(d=Math.min(b.length,d);d>c;c++)var k=b.charCodeAt(c)-48,f=f*e,f=f+(49<=k?k-49+10:17<=k?k-17+10:k);return f}function p(b,c){this.name=b;this.p=new f(c,16);this.n=this.p.bitLength();this.k=(new f(1)).ishln(this.n).isub(this.p);this.tmp=
this._tmp()}function t(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function u(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function r(b){"string"==typeof b?(b=f._prime(b),this.m=b.p,this.prime=b):(this.m=b,this.prime=
null)}function m(b){r.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new f(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"==typeof b?b.exports=f:c.BN=f;f.BN=f;f.wordSize=26;f.prototype._init=function(b,c,d){if("number"==typeof b)return this._initNumber(b,c,d);if("object"==typeof b)return this._initArray(b,
c,d);"hex"===c&&(c=16);l(c===(0|c)&&2<=c&&36>=c);b=b.toString().replace(/\s+/g,"");var e=0;"-"===b[0]&&e++;16===c?this._parseHex(b,e):this._parseBase(b,c,e);"-"===b[0]&&(this.sign=!0);this.strip();"le"===d&&this._initArray(this.toArray(),c,d)};f.prototype._initNumber=function(b,c,d){0>b&&(this.sign=!0,b=-b);67108864>b?(this.words=[67108863&b],this.length=1):4503599627370496>b?(this.words=[67108863&b,b/67108864&67108863],this.length=2):(l(9007199254740992>b),this.words=[67108863&b,b/67108864&67108863,
1],this.length=3);"le"===d&&this._initArray(this.toArray(),c,d)};f.prototype._initArray=function(b,c,d){if(l("number"==typeof b.length),0>=b.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(c=0;c<this.length;c++)this.words[c]=0;var e=0;if("be"===d)for(c=b.length-1,d=0;0<=c;c-=3){var f=b[c]|b[c-1]<<8|b[c-2]<<16;this.words[d]|=f<<e&67108863;this.words[d+1]=f>>>26-e&67108863;e+=24;26<=e&&(e-=26,d++)}else if("le"===d)for(d=c=0;c<b.length;c+=
3)f=b[c]|b[c+1]<<8|b[c+2]<<16,this.words[d]|=f<<e&67108863,this.words[d+1]=f>>>26-e&67108863,e+=24,26<=e&&(e-=26,d++);return this.strip()};f.prototype._parseHex=function(b,c){this.length=Math.ceil((b.length-c)/6);this.words=Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;for(var e=0,d=b.length-6,f=0;d>=c;d-=6){var k=g(b,d,d+6);this.words[f]|=k<<e&67108863;this.words[f+1]|=k>>>26-e&4194303;e+=24;26<=e&&(e-=26,f++)}d+6!==c&&(k=g(b,c,d+6),this.words[f]|=k<<e&67108863,this.words[f+1]|=
k>>>26-e&4194303);this.strip()};f.prototype._parseBase=function(b,c,e){this.words=[0];this.length=1;for(var f=0,k=1;67108863>=k;k*=c)f++;f--;for(var k=k/c|0,h=b.length-e,l=h%f,g=Math.min(h,h-l)+e,h=0;g>e;e+=f)h=d(b,e,e+f,c),this.imuln(k),67108864>this.words[0]+h?this.words[0]+=h:this._iaddn(h);if(0!==l){f=1;h=d(b,e,b.length,c);for(e=0;l>e;e++)f*=c;this.imuln(f);67108864>this.words[0]+h?this.words[0]+=h:this._iaddn(h)}};f.prototype.copy=function(b){b.words=Array(this.length);for(var c=0;c<this.length;c++)b.words[c]=
this.words[c];b.length=this.length;b.sign=this.sign;b.red=this.red};f.prototype.clone=function(){var b=new f(null);return this.copy(b),b};f.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};f.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this};f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var k=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
q=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(b,c){if(b=b||10,16===b||"hex"===b){var d="",e=0;c=0|c||1;for(var f=0,h=0;h<this.length;h++){var g=
this.words[h],p=(16777215&(g<<e|f)).toString(16),f=g>>>24-e&16777215,d=0!==f||h!==this.length-1?k[6-p.length]+p+d:p+d,e=e+2;26<=e&&(e-=26,h--)}for(0!==f&&(d=f.toString(16)+d);0!==d.length%c;)d="0"+d;return this.sign&&(d="-"+d),d}if(b===(0|b)&&2<=b&&36>=b){e=q[b];f=z[b];d="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)g=h.modn(f).toString(b),h=h.idivn(f),d=0!==h.cmpn(0)?k[e-g.length]+g+d:g+d;return 0===this.cmpn(0)&&(d="0"+d),this.sign&&(d="-"+d),d}l(!1,"Base should be between 2 and 36")};f.prototype.toJSON=
function(){return this.toString(16)};f.prototype.toArray=function(b){this.strip();var c=Array(this.byteLength());c[0]=0;var d=this.clone();if("le"!==b)for(b=0;0!==d.cmpn(0);b++){var e=d.andln(255);d.ishrn(8);c[c.length-b-1]=e}else for(b=0;0!==d.cmpn(0);b++)e=d.andln(255),d.ishrn(8),c[b]=e;return c};Math.clz32?f.prototype._countBits=function(b){return 32-Math.clz32(b)}:f.prototype._countBits=function(b){var c=0;return 4096<=b&&(c+=13,b>>>=13),64<=b&&(c+=7,b>>>=7),8<=b&&(c+=4,b>>>=4),2<=b&&(c+=2,b>>>=
2),c+b};f.prototype._zeroBits=function(b){if(0===b)return 26;var c=0;return 0===(8191&b)&&(c+=13,b>>>=13),0===(127&b)&&(c+=7,b>>>=7),0===(15&b)&&(c+=4,b>>>=4),0===(3&b)&&(c+=2,b>>>=2),0===(1&b)&&c++,c};f.prototype.bitLength=function(){var b=0,b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};f.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var b=0,c=0;c<this.length;c++){var d=this._zeroBits(this.words[c]);if(b+=d,26!==d)break}return b};f.prototype.byteLength=
function(){return Math.ceil(this.bitLength()/8)};f.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var b=this.clone();return b.sign=!this.sign,b};f.prototype.ior=function(b){for(this.sign=this.sign||b.sign;this.length<b.length;)this.words[this.length++]=0;for(var c=0;c<b.length;c++)this.words[c]|=b.words[c];return this.strip()};f.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};f.prototype.iand=function(b){this.sign=this.sign&&b.sign;var c;
c=this.length>b.length?b:this;for(var d=0;d<c.length;d++)this.words[d]&=b.words[d];return this.length=c.length,this.strip()};f.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};f.prototype.ixor=function(b){this.sign=this.sign||b.sign;var c,d;this.length>b.length?(c=this,d=b):(c=b,d=this);for(b=0;b<d.length;b++)this.words[b]=c.words[b]^d.words[b];if(this!==c)for(;b<c.length;b++)this.words[b]=c.words[b];return this.length=c.length,this.strip()};f.prototype.xor=
function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)};f.prototype.setn=function(b,c){l("number"==typeof b&&0<=b);for(var d=b/26|0,e=b%26;this.length<=d;)this.words[this.length++]=0;return c?this.words[d]|=1<<e:this.words[d]&=~(1<<e),this.strip()};f.prototype.iadd=function(b){if(this.sign&&!b.sign){this.sign=!1;var c=this.isub(b);return this.sign=!this.sign,this._normSign()}if(!this.sign&&b.sign)return b.sign=!1,c=this.isub(b),b.sign=!0,c._normSign();var d,e;this.length>
b.length?(d=this,e=b):(d=b,e=this);for(b=c=0;b<e.length;b++)c=d.words[b]+e.words[b]+c,this.words[b]=67108863&c,c>>>=26;for(;0!==c&&b<d.length;b++)c=d.words[b]+c,this.words[b]=67108863&c,c>>>=26;if(this.length=d.length,0!==c)this.words[this.length]=c,this.length++;else if(d!==this)for(;b<d.length;b++)this.words[b]=d.words[b];return this};f.prototype.add=function(b){if(b.sign&&!this.sign){b.sign=!1;var c=this.sub(b);return b.sign=!0,c}return!b.sign&&this.sign?(this.sign=!1,c=b.sub(this),this.sign=!0,
c):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)};f.prototype.isub=function(b){if(b.sign){b.sign=!1;var c=this.iadd(b);return b.sign=!0,c._normSign()}if(this.sign)return this.sign=!1,this.iadd(b),this.sign=!0,this._normSign();c=this.cmp(b);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var d,e;0<c?(d=this,e=b):(d=b,e=this);for(var f=b=0;f<e.length;f++)c=d.words[f]-e.words[f]+b,b=c>>26,this.words[f]=67108863&c;for(;0!==b&&f<d.length;f++)c=d.words[f]+b,b=c>>26,this.words[f]=
67108863&c;if(0===b&&f<d.length&&d!==this)for(;f<d.length;f++)this.words[f]=d.words[f];return this.length=Math.max(this.length,f),d!==this&&(this.sign=!0),this.strip()};f.prototype.sub=function(b){return this.clone().isub(b)};f.prototype._smallMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var d=0,e=0;e<c.length-1;e++){for(var f=d>>>26,d=67108863&d,k=Math.min(e,b.length-1),h=Math.max(0,e-this.length+1);k>=h;h++)var l=(0|this.words[e-h])*(0|b.words[h]),g=67108863&l,
f=f+(l/67108864|0)|0,g=g+d|0,d=67108863&g,f=f+(g>>>26)|0;c.words[e]=d;d=f}return 0!==d?c.words[e]=d:c.length--,c.strip()};f.prototype._bigMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var d=0,e=0,f=0;f<c.length-1;f++){for(var k=e,e=0,d=67108863&d,h=Math.min(f,b.length-1),l=Math.max(0,f-this.length+1);h>=l;l++)var g=(0|this.words[f-l])*(0|b.words[l]),q=67108863&g,k=k+(g/67108864|0)|0,q=q+d|0,d=67108863&q,k=k+(q>>>26)|0,e=e+(k>>>26),k=k&67108863;c.words[f]=d;d=k}return 0!==
d?c.words[f]=d:c.length--,c.strip()};f.prototype.mulTo=function(b,c){return 63>this.length+b.length?this._smallMulTo(b,c):this._bigMulTo(b,c)};f.prototype.mul=function(b){var c=new f(null);return c.words=Array(this.length+b.length),this.mulTo(b,c)};f.prototype.imul=function(b){if(0===this.cmpn(0)||0===b.cmpn(0))return this.words[0]=0,this.length=1,this;var c=this.length,d=b.length;this.sign=b.sign!==this.sign;this.length+=b.length;this.words[this.length-1]=0;for(var e=this.length-2;0<=e;e--){for(var f=
0,k=0,h=Math.min(e,d-1),l=Math.max(0,e-c+1);h>=l;l++)var g=e-l,g=this.words[g]*b.words[l],q=67108863&g,f=f+(g/67108864|0),q=q+k,k=67108863&q,f=f+(q>>>26);this.words[e]=k;this.words[e+1]+=f}f=0;for(g=1;g<this.length;g++)b=this.words[g]+f,this.words[g]=67108863&b,f=b>>>26;return this.strip()};f.prototype.imuln=function(b){l("number"==typeof b);for(var c=0,d=0;d<this.length;d++){var e=this.words[d]*b,f=(67108863&e)+(67108863&c),c=c>>26,c=c+(e/67108864|0),c=c+(f>>>26);this.words[d]=67108863&f}return 0!==
c&&(this.words[d]=c,this.length++),this};f.prototype.muln=function(b){return this.clone().imuln(b)};f.prototype.sqr=function(){return this.mul(this)};f.prototype.isqr=function(){return this.mul(this)};f.prototype.ishln=function(b){l("number"==typeof b&&0<=b);var c=b%26;b=(b-c)/26;var d=67108863>>>26-c<<26-c;if(0!==c){for(var e=0,f=0;f<this.length;f++){var k=this.words[f]&d;this.words[f]=this.words[f]-k<<c|e;e=k>>>26-c}e&&(this.words[f]=e,this.length++)}if(0!==b){for(f=this.length-1;0<=f;f--)this.words[f+
b]=this.words[f];for(f=0;b>f;f++)this.words[f]=0;this.length+=b}return this.strip()};f.prototype.ishrn=function(b,c,d){l("number"==typeof b&&0<=b);c=c?(c-c%26)/26:0;var e=b%26,f=Math.min((b-e)/26,this.length);b=67108863^67108863>>>e<<e;if(c-=f,c=Math.max(0,c),d){for(var k=0;f>k;k++)d.words[k]=this.words[k];d.length=f}if(0!==f)if(this.length>f)for(this.length-=f,k=0;k<this.length;k++)this.words[k]=this.words[k+f];else this.words[0]=0,this.length=1;f=0;for(k=this.length-1;0<=k&&(0!==f||k>=c);k--){var h=
this.words[k];this.words[k]=f<<26-e|h>>>e;f=h&b}return d&&0!==f&&(d.words[d.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),this};f.prototype.shln=function(b){return this.clone().ishln(b)};f.prototype.shrn=function(b){return this.clone().ishrn(b)};f.prototype.testn=function(b){l("number"==typeof b&&0<=b);var c=b%26;b=(b-c)/26;return this.length<=b?!1:!!(this.words[b]&1<<c)};f.prototype.imaskn=function(b){l("number"==typeof b&&0<=b);var c=b%26;b=(b-c)/26;if(l(!this.sign,
"imaskn works only with positive numbers"),0!==c&&b++,this.length=Math.min(b,this.length),0!==c)this.words[this.length-1]&=67108863^67108863>>>c<<c;return this.strip()};f.prototype.maskn=function(b){return this.clone().imaskn(b)};f.prototype.iaddn=function(b){return l("number"==typeof b),0>b?this.isubn(-b):this.sign?1===this.length&&this.words[0]<b?(this.words[0]=b-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(b),this.sign=!0,this):this._iaddn(b)};f.prototype._iaddn=function(b){this.words[0]+=
b;for(b=0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this};f.prototype.isubn=function(b){if(l("number"==typeof b),0>b)return this.iaddn(-b);if(this.sign)return this.sign=!1,this.iaddn(b),this.sign=!0,this;this.words[0]-=b;for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};f.prototype.addn=function(b){return this.clone().iaddn(b)};
f.prototype.subn=function(b){return this.clone().isubn(b)};f.prototype.iabs=function(){return this.sign=!1,this};f.prototype.abs=function(){return this.clone().iabs()};f.prototype._ishlnsubmul=function(b,c,d){var e,f=b.length+d;if(this.words.length<f){var k=Array(f);for(e=0;e<this.length;e++)k[e]=this.words[e];this.words=k}else e=this.length;for(this.length=Math.max(this.length,f);e<this.length;e++)this.words[e]=0;for(e=k=0;e<b.length;e++)f=this.words[e+d]+k,k=b.words[e]*c,f-=67108863&k,k=(f>>26)-
(k/67108864|0),this.words[e+d]=67108863&f;for(;e<this.length-d;e++)f=this.words[e+d]+k,k=f>>26,this.words[e+d]=67108863&f;if(0===k)return this.strip();l(-1===k);for(e=k=0;e<this.length;e++)f=-this.words[e]+k,k=f>>26,this.words[e]=67108863&f;return this.sign=!0,this.strip()};f.prototype._wordDiv=function(b,c){var d=this.length-b.length,e=this.clone(),k=b,h=k.words[k.length-1],d=26-this._countBits(h);0!==d&&(k=k.shln(d),e.ishln(d),h=k.words[k.length-1]);var l,g=e.length-k.length;if("mod"!==c){l=new f(null);
l.length=g+1;l.words=Array(l.length);for(var q=0;q<l.length;q++)l.words[q]=0}q=e.clone()._ishlnsubmul(k,1,g);q.sign||(e=q,l&&(l.words[g]=1));for(--g;0<=g;g--){q=67108864*e.words[k.length+g]+e.words[k.length+g-1];q=Math.min(q/h|0,67108863);for(e._ishlnsubmul(k,q,g);e.sign;)q--,e.sign=!1,e._ishlnsubmul(k,1,g),0!==e.cmpn(0)&&(e.sign=!e.sign);l&&(l.words[g]=q)}return l&&l.strip(),e.strip(),"div"!==c&&0!==d&&e.ishrn(d),{div:l?l:null,mod:e}};f.prototype.divmod=function(b,c){if(l(0!==b.cmpn(0)),this.sign&&
!b.sign){var d,e,k=this.neg().divmod(b,c);return"mod"!==c&&(d=k.div.neg()),"div"!==c&&(e=0===k.mod.cmpn(0)?k.mod:b.sub(k.mod)),{div:d,mod:e}}return!this.sign&&b.sign?(k=this.divmod(b.neg(),c),"mod"!==c&&(d=k.div.neg()),{div:d,mod:k.mod}):this.sign&&b.sign?this.neg().divmod(b.neg(),c):b.length>this.length||0>this.cmp(b)?{div:new f(0),mod:this}:1===b.length?"div"===c?{div:this.divn(b.words[0]),mod:null}:"mod"===c?{div:null,mod:new f(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new f(this.modn(b.words[0]))}:
this._wordDiv(b,c)};f.prototype.div=function(b){return this.divmod(b,"div").div};f.prototype.mod=function(b){return this.divmod(b,"mod").mod};f.prototype.divRound=function(b){var c=this.divmod(b);if(0===c.mod.cmpn(0))return c.div;var d=c.div.sign?c.mod.isub(b):c.mod,e=b.shrn(1);b=b.andln(1);d=d.cmp(e);return 0>d||1===b&&0===d?c.div:c.div.sign?c.div.isubn(1):c.div.iaddn(1)};f.prototype.modn=function(b){l(67108863>=b);for(var c=67108864%b,d=0,e=this.length-1;0<=e;e--)d=(c*d+this.words[e])%b;return d};
f.prototype.idivn=function(b){l(67108863>=b);for(var c=0,d=this.length-1;0<=d;d--)c=this.words[d]+67108864*c,this.words[d]=c/b|0,c%=b;return this.strip()};f.prototype.divn=function(b){return this.clone().idivn(b)};f.prototype.egcd=function(b){l(!b.sign);l(0!==b.cmpn(0));var c=this,d=b.clone(),c=c.sign?c.mod(b):c.clone();b=new f(1);for(var e=new f(0),k=new f(0),h=new f(1),g=0;c.isEven()&&d.isEven();)c.ishrn(1),d.ishrn(1),++g;for(var q=d.clone(),p=c.clone();0!==c.cmpn(0);){for(;c.isEven();)c.ishrn(1),
b.isEven()&&e.isEven()?(b.ishrn(1),e.ishrn(1)):(b.iadd(q).ishrn(1),e.isub(p).ishrn(1));for(;d.isEven();)d.ishrn(1),k.isEven()&&h.isEven()?(k.ishrn(1),h.ishrn(1)):(k.iadd(q).ishrn(1),h.isub(p).ishrn(1));0<=c.cmp(d)?(c.isub(d),b.isub(k),e.isub(h)):(d.isub(c),k.isub(b),h.isub(e))}return{a:k,b:h,gcd:d.ishln(g)}};f.prototype._invmp=function(b){l(!b.sign);l(0!==b.cmpn(0));var c=this,d=b.clone(),c=c.sign?c.mod(b):c.clone();b=new f(1);for(var e=new f(0),k=d.clone();0<c.cmpn(1)&&0<d.cmpn(1);){for(;c.isEven();)c.ishrn(1),
b.isEven()?b.ishrn(1):b.iadd(k).ishrn(1);for(;d.isEven();)d.ishrn(1),e.isEven()?e.ishrn(1):e.iadd(k).ishrn(1);0<=c.cmp(d)?(c.isub(d),b.isub(e)):(d.isub(c),e.isub(b))}return 0===c.cmpn(1)?b:e};f.prototype.gcd=function(b){if(0===this.cmpn(0))return b.clone();if(0===b.cmpn(0))return this.clone();var c=this.clone();b=b.clone();c.sign=!1;b.sign=!1;for(var d=0;c.isEven()&&b.isEven();d++)c.ishrn(1),b.ishrn(1);for(;;){for(;c.isEven();)c.ishrn(1);for(;b.isEven();)b.ishrn(1);var e=c.cmp(b);if(0>e)e=c,c=b,b=
e;else if(0===e||0===b.cmpn(1))break;c.isub(b)}return b.ishln(d)};f.prototype.invm=function(b){return this.egcd(b).a.mod(b)};f.prototype.isEven=function(){return 0===(1&this.words[0])};f.prototype.isOdd=function(){return 1===(1&this.words[0])};f.prototype.andln=function(b){return this.words[0]&b};f.prototype.bincn=function(b){l("number"==typeof b);var c=b%26;b=(b-c)/26;var d=1<<c;if(this.length<=b){for(c=this.length;b+1>c;c++)this.words[c]=0;return this.words[b]|=d,this.length=b+1,this}for(c=b;0!==
d&&c<this.length;c++)b=this.words[c],b+=d,d=b>>>26,b&=67108863,this.words[c]=b;return 0!==d&&(this.words[c]=d,this.length++),this};f.prototype.cmpn=function(b){var c=0>b;if(c&&(b=-b),this.sign&&!c)return-1;if(!this.sign&&c)return 1;b&=67108863;this.strip();1<this.length?b=1:(c=this.words[0],b=c===b?0:b>c?-1:1);return this.sign&&(b=-b),b};f.prototype.cmp=function(b){if(this.sign&&!b.sign)return-1;if(!this.sign&&b.sign)return 1;b=this.ucmp(b);return this.sign?-b:b};f.prototype.ucmp=function(b){if(this.length>
b.length)return 1;if(this.length<b.length)return-1;for(var c=0,d=this.length-1;0<=d;d--){var e=this.words[d],f=b.words[d];if(e!==f){f>e?c=-1:e>f&&(c=1);break}}return c};f.red=function(b){return new r(b)};f.prototype.toRed=function(b){return l(!this.red,"Already a number in reduction context"),l(!this.sign,"red works only with positives"),b.convertTo(this)._forceRed(b)};f.prototype.fromRed=function(){return l(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)};
f.prototype._forceRed=function(b){return this.red=b,this};f.prototype.forceRed=function(b){return l(!this.red,"Already a number in reduction context"),this._forceRed(b)};f.prototype.redAdd=function(b){return l(this.red,"redAdd works only with red numbers"),this.red.add(this,b)};f.prototype.redIAdd=function(b){return l(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,b)};f.prototype.redSub=function(b){return l(this.red,"redSub works only with red numbers"),this.red.sub(this,b)};f.prototype.redISub=
function(b){return l(this.red,"redISub works only with red numbers"),this.red.isub(this,b)};f.prototype.redShl=function(b){return l(this.red,"redShl works only with red numbers"),this.red.shl(this,b)};f.prototype.redMul=function(b){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.mul(this,b)};f.prototype.redIMul=function(b){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.imul(this,b)};f.prototype.redSqr=function(){return l(this.red,
"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)};f.prototype.redISqr=function(){return l(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)};f.prototype.redSqrt=function(){return l(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)};f.prototype.redInvm=function(){return l(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)};f.prototype.redNeg=function(){return l(this.red,
"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)};f.prototype.redPow=function(b){return l(this.red&&!b.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,b)};var E={k256:null,p224:null,p192:null,p25519:null};p.prototype._tmp=function(){var b=new f(null);return b.words=Array(Math.ceil(this.n/13)),b};p.prototype.ireduce=function(b){var c;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),c=b.bitLength();while(c>this.n);c=c<this.n?-1:b.ucmp(this.p);
return 0===c?(b.words[0]=0,b.length=1):0<c?b.isub(this.p):b.strip(),b};p.prototype.split=function(b,c){b.ishrn(this.n,0,c)};p.prototype.imulK=function(b){return b.imul(this.k)};e(t,p);t.prototype.split=function(b,c){for(var d=Math.min(b.length,9),e=0;d>e;e++)c.words[e]=b.words[e];if(c.length=d,9>=b.length)return b.words[0]=0,void(b.length=1);d=b.words[9];c.words[c.length++]=d&4194303;for(e=10;e<b.length;e++){var f=b.words[e];b.words[e-10]=(f&4194303)<<4|d>>>22;d=f}b.words[e-10]=d>>>22;b.length-=9};
t.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var c,d=0,e=0;e<b.length;e++){var f=b.words[e];c=64*f;d+=977*f;c+=d/67108864|0;d&=67108863;b.words[e]=d;d=c}return 0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--),b};e(x,p);e(w,p);e(u,p);u.prototype.imulK=function(b){for(var c=0,d=0;d<b.length;d++){var c=19*b.words[d]+c,e=67108863&c,c=c>>>26;b.words[d]=e}return 0!==c&&(b.words[b.length++]=c),b};f._prime=function(b){if(E[b])return E[b];
var c;if("k256"===b)c=new t;else if("p224"===b)c=new x;else if("p192"===b)c=new w;else{if("p25519"!==b)throw Error("Unknown prime "+b);c=new u}return E[b]=c,c};r.prototype._verify1=function(b){l(!b.sign,"red works only with positives");l(b.red,"red works only with red numbers")};r.prototype._verify2=function(b,c){l(!b.sign&&!c.sign,"red works only with positives");l(b.red&&b.red===c.red,"red works only with red numbers")};r.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):
b.mod(this.m)._forceRed(this)};r.prototype.neg=function(b){b=b.clone();return b.sign=!b.sign,b.iadd(this.m)._forceRed(this)};r.prototype.add=function(b,c){this._verify2(b,c);var d=b.add(c);return 0<=d.cmp(this.m)&&d.isub(this.m),d._forceRed(this)};r.prototype.iadd=function(b,c){this._verify2(b,c);var d=b.iadd(c);return 0<=d.cmp(this.m)&&d.isub(this.m),d};r.prototype.sub=function(b,c){this._verify2(b,c);var d=b.sub(c);return 0>d.cmpn(0)&&d.iadd(this.m),d._forceRed(this)};r.prototype.isub=function(b,
c){this._verify2(b,c);var d=b.isub(c);return 0>d.cmpn(0)&&d.iadd(this.m),d};r.prototype.shl=function(b,c){return this._verify1(b),this.imod(b.shln(c))};r.prototype.imul=function(b,c){return this._verify2(b,c),this.imod(b.imul(c))};r.prototype.mul=function(b,c){return this._verify2(b,c),this.imod(b.mul(c))};r.prototype.isqr=function(b){return this.imul(b,b)};r.prototype.sqr=function(b){return this.mul(b,b)};r.prototype.sqrt=function(b){if(0===b.cmpn(0))return b.clone();var c=this.m.andln(3);if(l(1===
c%2),3===c){var c=this.m.add(new f(1)).ishrn(2),d=this.pow(b,c);return d}for(var e=this.m.subn(1),k=0;0!==e.cmpn(0)&&0===e.andln(1);)k++,e.ishrn(1);l(0!==e.cmpn(0));for(var c=(new f(1)).toRed(this),d=c.redNeg(),h=this.m.subn(1).ishrn(1),g=this.m.bitLength(),g=(new f(2*g*g)).toRed(this);0!==this.pow(g,h).cmp(d);)g.redIAdd(d);h=this.pow(g,e);d=this.pow(b,e.addn(1).ishrn(1));b=this.pow(b,e);for(e=k;0!==b.cmp(c);){g=b;for(k=0;0!==g.cmp(c);k++)g=g.redSqr();l(e>k);h=this.pow(h,(new f(1)).ishln(e-k-1));
d=d.redMul(h);h=h.redSqr();b=b.redMul(h);e=k}return d};r.prototype.invm=function(b){b=b._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)};r.prototype.pow=function(b,c){var d=[];if(0===c.cmpn(0))return new f(1);for(var e=c.clone();0!==e.cmpn(0);)d.push(e.andln(1)),e.ishrn(1);for(var k=b,h=0;h<d.length&&0===d[h];h++,k=this.sqr(k));if(++h<d.length)for(e=this.sqr(k);h<d.length;h++,e=this.sqr(e))0!==d[h]&&(k=this.mul(k,e));return k};r.prototype.convertTo=function(b){var c=b.mod(this.m);
return c===b?c.clone():c};r.prototype.convertFrom=function(b){b=b.clone();return b.red=null,b};f.mont=function(b){return new m(b)};e(m,r);m.prototype.convertTo=function(b){return this.imod(b.shln(this.shift))};m.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));return b.red=null,b};m.prototype.imul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return b.words[0]=0,b.length=1,b;var d=b.imul(c),e=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=d=d.isub(e).ishrn(this.shift);
return 0<=d.cmp(this.m)?e=d.isub(this.m):0>d.cmpn(0)&&(e=d.iadd(this.m)),e._forceRed(this)};m.prototype.mul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return(new f(0))._forceRed(this);var d=b.mul(c),e=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=d=d.isub(e).ishrn(this.shift);return 0<=d.cmp(this.m)?e=d.isub(this.m):0>d.cmpn(0)&&(e=d.iadd(this.m)),e._forceRed(this)};m.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}}("undefined"==
typeof m||m,this)},{}],244:[function(b,m,g){var h=b("./lib/bn-sign");m.exports=function(b){return h(b[0])*h(b[1])}},{"./lib/bn-sign":235}],245:[function(b,m,g){var h=b("./lib/rationalize");m.exports=function(b,l){return h(b[0].mul(l[1]).sub(b[1].mul(l[0])),b[1].mul(l[1]))}},{"./lib/rationalize":240}],246:[function(b,m,g){var h=b("./lib/bn-to-num"),c=b("./lib/ctz");m.exports=function(b){var e=b[0];b=b[1];if(0===e.cmpn(0))return 0;var f=e.divmod(b),e=h(f.div),f=f.mod;if(0===f.cmpn(0))return e;if(e){var g=
c(e)+4;b=h(f.shln(g).divRound(b));return 0>e&&(b=-b),e+b*Math.pow(2,-g)}e=b.bitLength()-f.bitLength()+53;b=h(f.shln(e).divRound(b));return 1023>e?b*Math.pow(2,-e):(b*=Math.pow(2,-1023),b*Math.pow(2,1023-e))}},{"./lib/bn-to-num":236,"./lib/ctz":237}],247:[function(b,m,g){function h(b,c,d,e){for(var f=0,h=0,l=0,k=b.length;k>l;++l){var g=b[l],v;a:{for(v=0;c>v;++v)if(!(g[v]<=g[v+c])){v=!0;break a}v=!1}if(!v){for(v=0;2*c>v;++v)d[f++]=g[v];e[h++]=l}}return h}function c(b,c,e,l){var g=b.length,r=c.length;
if(!(0>=g||0>=r)){var m=b[0].length>>>1;if(!(0>=m)){var k,q=f.mallocDouble(2*m*g),z=f.mallocInt32(g);if(g=h(b,m,q,z),0<g){if(1===m&&l)v.init(g),k=v.sweepComplete(m,e,0,g,q,z,0,g,q,z);else{b=f.mallocDouble(2*m*r);var E=f.mallocInt32(r),r=h(c,m,b,E);0<r&&(v.init(g+r),k=1===m?v.sweepBipartite(m,e,0,g,q,z,0,r,b,E):d(m,e,l,g,q,z,r,b,E),f.free(b),f.free(E))}f.free(q);f.free(z)}return k}}}function l(b,c){e.push([b,c])}m.exports=function(b,d,f){switch(arguments.length){case 1:return e=[],c(b,b,l,!0),e;case 2:return"function"==
typeof d?c(b,b,d,!0):(e=[],c(b,d,l,!1),e);case 3:return c(b,d,f,!1);default:throw Error("box-intersect: Invalid arguments");}};var e,f=b("typedarray-pool"),v=b("./lib/sweep"),d=b("./lib/intersect")},{"./lib/intersect":249,"./lib/sweep":253,"typedarray-pool":217}],248:[function(b,m,g){function h(b){function h(f,g){var B;B="bruteForce"+(f?"Red":"Blue")+(g?"Flip":"")+(b?"Full":"");var G=["function ",B,"(",A.join(),"){","var ",v,"=2*",c,";"],I="for(var i="+d+","+w+"="+v+"*"+d+";i<"+p+";++i,"+w+"+="+v+
"){var x0="+t+"["+l+"+"+w+"],x1="+t+"["+l+"+"+w+"+"+c+"],xi="+x+"[i];",M="for(var j="+u+","+q+"="+v+"*"+u+";j<"+r+";++j,"+q+"+="+v+"){var y0="+y+"["+l+"+"+q+"],"+(b?"y1="+y+"["+l+"+"+q+"+"+c+"],":"")+"yi="+k+"[j];";B=(f?G.push(I,E,":",M):G.push(M,E,":",I),b?G.push("if(y1<x0||x1<y0)continue;"):g?G.push("if(y0<=x0||x1<y0)continue;"):G.push("if(y0<x0||x1<y0)continue;"),G.push("for(var k="+l+"+1;k<"+c+";++k){var r0="+t+"[k+"+w+"],r1="+t+"[k+"+c+"+"+w+"],b0="+y+"[k+"+q+"],b1="+y+"[k+"+c+"+"+q+"];if(r1<b0||b1<r0)continue "+
E+";}var "+z+"="+e+"("),g?G.push("yi,xi"):G.push("xi,yi"),G.push(");if("+z+"!==void 0)return "+z+";}}}"),{name:B,code:G.join("")});m.push(B.code);D.push("return "+B.name+"("+A.join()+");")}var g="bruteForce"+(b?"Full":"Partial"),m=[],I=A.slice();b||I.splice(3,0,f);var D=["function "+g+"("+I.join()+"){"];D.push("if("+p+"-"+d+">"+r+"-"+u+"){");b?(h(!0,!1),D.push("}else{"),h(!1,!1)):(D.push("if("+f+"){"),h(!0,!0),D.push("}else{"),h(!0,!1),D.push("}}else{if("+f+"){"),h(!1,!0),D.push("}else{"),h(!1,!1),
D.push("}"));D.push("}}return "+g);g=m.join("")+D.join("");return(new Function(g))()}var c="d",l="ax",e="vv",f="fp",v="es",d="rs",p="re",t="rb",x="ri",w="rp",u="bs",r="be",y="bb",k="bi",q="bp",z="rv",E="Q",A=[c,l,e,d,p,t,x,u,r,y,k];g.partial=h(!1);g.full=h(!0)},{}],249:[function(b,m,g){function h(b,c,d,e,f,k,h,l,g){var q=z*b;A[q]=c;A[q+1]=d;A[q+2]=e;A[q+3]=f;A[q+4]=k;A[q+5]=h;b*=E;C[b]=l;C[b+1]=g}m.exports=function(b,g,m,I,D,H,K,O,L){var P=8*l.log2(I+K+1)*(b+1)|0,M=l.nextPow2(z*P);A.length<M&&(c.free(A),
A=c.mallocInt32(M));P=l.nextPow2(E*P);P>C&&(c.free(C),C=c.mallocDouble(P));var Q,P=0,M=2*b;h(P++,0,0,I,0,K,m?16:0,-(1/0),1/0);for(m||h(P++,0,0,K,0,I,1,-(1/0),1/0);0<P;){--P;m=P*z;var T=A[m];K=A[m+1];var R=A[m+2],S=A[m+3],X=A[m+4];m=A[m+5];I=P*E;var V=C[I],Y=C[I+1],W=1&m,Z=!!(16&m),U=D,ea=H,ga=O;I=L;if(W&&(U=O,ea=L,ga=D,I=H),!(2&m&&(R=r(b,T,K,R,U,ea,Y),K>=R)||4&m&&(K=y(b,T,K,R,U,ea,V),K>=R))){m=R-K;var ia=X-S;if(Z){if(x>b*m*(m+ia)){if(Q=v.scanComplete(b,T,g,K,R,U,ea,S,X,ga,I),void 0!==Q)return Q;continue}}else{if(b*
Math.min(m,ia)<p){if(Q=e(b,T,g,W,K,R,U,ea,S,X,ga,I),void 0!==Q)return Q;continue}if(t>b*m*ia){if(Q=v.scanBipartite(b,T,g,W,K,R,U,ea,S,X,ga,I),void 0!==Q)return Q;continue}}m=w(b,T,K,R,U,ea,V,Y);if(m>K)if(p>b*(m-K)){if(Q=f(b,T+1,g,K,m,U,ea,S,X,ga,I),void 0!==Q)return Q}else if(T===b-2){if(Q=W?v.sweepBipartite(b,g,S,X,ga,I,K,m,U,ea):v.sweepBipartite(b,g,K,m,U,ea,S,X,ga,I),void 0!==Q)return Q}else h(P++,T+1,K,m,S,X,W,-(1/0),1/0),h(P++,T+1,S,X,K,m,1^W,-(1/0),1/0);if(R>m){K=d(b,T,S,X,ga,I);var ha=ga[M*
K+T],ia=u(b,T,K,X,ga,I,ha);if(X>ia&&h(P++,T,m,R,ia,X,(4|W)+(Z?16:0),ha,Y),K>S&&h(P++,T,m,R,S,K,(2|W)+(Z?16:0),V,ha),K+1===ia){if(Z)a:{S=b;X=g;I=I[K];W=2*S;K*=W;V=ga[K+T];Y=m;m*=W;b:for(;R>Y;++Y,m+=W)if(Z=ea[Y],Z!==I&&(ia=U[m+T],ha=U[m+T+S],!(ia>V||V>ha))){for(var na=T+1;S>na;++na){var ia=U[m+na],ha=U[m+na+S],sa=ga[K+na+S];if(ga[K+na]>ha||ia>sa)continue b}Z=X(Z,I);if(void 0!==Z){m=Z;break a}}m=void 0}else a:{S=b;X=g;I=I[K];V=2*S;K*=V;Y=ga[K+T];Z=m;m*=V;b:for(;R>Z;++Z,m+=V)if(ia=U[m+T],ha=U[m+T+S],
!(ia>Y||Y>ha||W&&Y===ia)){na=ea[Z];for(sa=T+1;S>sa;++sa){var ia=U[m+sa],ha=U[m+sa+S],ra=ga[K+sa+S];if(ga[K+sa]>ha||ia>ra)continue b}var ya;if(ya=W?X(I,na):X(na,I),void 0!==ya){m=ya;break a}}m=void 0}if(Q=m,void 0!==Q)return Q}else if(ia>K){var fa;if(Z){if(fa=k(b,T,m,R,U,ea,ha),fa>m)if(R=u(b,T,m,fa,U,ea,ha),T===b-2){if(R>m&&(Q=v.sweepComplete(b,g,m,R,U,ea,K,ia,ga,I),void 0!==Q)||fa>R&&(Q=v.sweepBipartite(b,g,R,fa,U,ea,K,ia,ga,I),void 0!==Q))return Q}else R>m&&h(P++,T+1,m,R,K,ia,16,-(1/0),1/0),fa>R&&
(h(P++,T+1,R,fa,K,ia,0,-(1/0),1/0),h(P++,T+1,K,ia,R,fa,1,-(1/0),1/0))}else fa=W?q(b,T,m,R,U,ea,ha):k(b,T,m,R,U,ea,ha),fa>m&&(T===b-2?Q=W?v.sweepBipartite(b,g,K,ia,ga,I,m,fa,U,ea):v.sweepBipartite(b,g,m,fa,U,ea,K,ia,ga,I):(h(P++,T+1,m,fa,K,ia,W,-(1/0),1/0),h(P++,T+1,K,ia,m,fa,1^W,-(1/0),1/0)))}}}}};var c=b("typedarray-pool"),l=b("bit-twiddle");m=b("./brute");var e=m.partial,f=m.full,v=b("./sweep"),d=b("./median");b=b("./partition");var p=128,t=4194304,x=4194304,w=b("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),
u=b("lo===p0",["p0"]),r=b("lo<p0",["p0"]),y=b("hi<=p0",["p0"]),k=b("lo<=p0&&p0<=hi",["p0"]),q=b("lo<p0&&p0<=hi",["p0"]),z=6,E=2,A=c.mallocInt32(1024),C=c.mallocDouble(1024)},{"./brute":248,"./median":250,"./partition":251,"./sweep":253,"bit-twiddle":33,"typedarray-pool":217}],250:[function(b,m,g){m.exports=function(b,e,f,g,d,p){if(f+1>=g)return f;var t=f,x=g;g=g+f>>>1;for(var w=2*b,u=g,r=d[w*g+e];x>t;){if(c>x-t){for(var u=e,r=d,m=p,k=2*b,q=k*(t+1)+u,z=t+1;x>z;++z,q+=k)for(var E=r[q],A=z,C=k*(z-1);A>
t&&r[C+u]>E;--A,C-=k){for(var B=C,G=C+k,F=0;k>F;++F,++B,++G){var I=r[B];r[B]=r[G];r[G]=I}B=m[A];m[A]=m[A-1];m[A-1]=B}break}E=x-t;m=Math.random()*E+t|0;k=d[w*m+e];q=Math.random()*E+t|0;z=d[w*q+e];E=Math.random()*E+t|0;A=d[w*E+e];z>=k?A>=z?(u=q,r=z):k>=A?(u=m,r=k):(u=E,r=A):z>=A?(u=q,r=z):A>=k?(u=m,r=k):(u=E,r=A);m=w*(x-1);k=w*u;for(q=0;w>q;++q,++m,++k)z=d[m],d[m]=d[k],d[k]=z;m=p[x-1];p[x-1]=p[u];p[u]=m;u=h(b,e,t,x-1,d,p,r);m=w*(x-1);k=w*u;for(q=0;w>q;++q,++m,++k)z=d[m],d[m]=d[k],d[k]=z;m=p[x-1];if(p[x-
1]=p[u],p[u]=m,u>g){for(x=u-1;x>t&&d[w*(x-1)+e]===r;)--x;x+=1}else{if(!(g>u))break;for(t=u+1;x>t&&d[w*t+e]===r;)t+=1}}return h(b,e,f,g,d,p,d[w*g+e])};var h=b("./partition")("lo<p0",["p0"]),c=8},{"./partition":251}],251:[function(b,m,g){m.exports=function(b,l){var e="abcdef".split("").concat(l),f=[];return 0<=b.indexOf("lo")&&f.push("lo=e[k+n]"),0<=b.indexOf("hi")&&f.push("hi=e[k+o]"),e.push(h.replace("_",f.join()).replace("$",b)),Function.apply(void 0,e)};var h="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},
{}],252:[function(b,m,g){function h(b,c,d){for(var e=2*(b+1),f=b+1;c>=f;++f){for(var h=d[e++],k=d[e++],l=f,g=e-2;l-- >b;){var p=d[g-2],v=d[g-1];if(h>p)break;if(p===h&&k>v)break;d[g]=p;d[g+1]=v;g-=2}d[g]=h;d[g+1]=k}}function c(b,c,d){b*=2;c*=2;var e=d[b],f=d[b+1];d[b]=d[c];d[b+1]=d[c+1];d[c]=e;d[c+1]=f}function l(b,c,d){b*=2;c*=2;d[b]=d[c];d[b+1]=d[c+1]}function e(b,c,d,e,f){b*=2;c*=2;f[b]=f[c];f[c]=d;f[b+1]=f[c+1];f[c+1]=e}function f(b,c,d){b*=2;c*=2;var e=d[b],f=d[c];return f>e?!1:e===f?d[b+1]>d[c+
1]:!0}function v(b,c,d,e){b*=2;var f=e[b];return c>f?!0:f===c?e[b+1]<d:!1}function d(b,g,m){var u=(g-b+1)/6|0,r=b+u,y=g-u,k=b+g>>1,q=k-u,z=k+u,E=r,A=q,C=k,B=z,G=y,u=b+1,F=g-1,I=0;f(E,A,m)&&(I=E,E=A,A=I);f(B,G,m)&&(I=B,B=G,G=I);f(E,C,m)&&(I=E,E=C,C=I);f(A,C,m)&&(I=A,A=C,C=I);f(E,B,m)&&(I=E,E=B,B=I);f(C,B,m)&&(I=C,C=B,B=I);f(A,G,m)&&(I=A,A=G,G=I);f(A,C,m)&&(I=A,A=C,C=I);f(B,G,m)&&(I=B,B=G,G=I);for(var I=m[2*A],A=m[2*A+1],D=m[2*B],B=m[2*B+1],E=2*E,C=2*C,G=2*G,r=2*r,k=2*k,y=2*y,H=0;2>H;++H){var K=m[C+
H],O=m[G+H];m[r+H]=m[E+H];m[k+H]=K;m[y+H]=O}l(q,b,m);l(z,g,m);for(q=u;F>=q;++q)if(v(q,I,A,m))q!==u&&c(q,u,m),++u;else if(!v(q,D,B,m))for(;;){if(v(F,D,B,m)){v(F,I,A,m)?(z=q,y=u,k=F,E=m,z*=2,y*=2,k*=2,r=E[z],C=E[z+1],E[z]=E[y],E[z+1]=E[y+1],E[y]=E[k],E[y+1]=E[k+1],E[k]=r,E[k+1]=C,++u):c(q,F,m);--F;break}if(--F<q)break}e(b,u-1,I,A,m);e(g,F+1,D,B,m);p>=u-2-b?h(b,u-2,m):d(b,u-2,m);p>=g-(F+2)?h(F+2,g,m):d(F+2,g,m);p>=F-u?h(u,F,m):d(u,F,m)}m.exports=function(b,c){4*p>=c?h(0,c-1,b):d(0,c-1,b)};var p=32},
{}],253:[function(b,m,g){function h(b,c,d,e){e=c[e];d=b[d-1];b[e]=d;c[d]=e}m.exports={init:function(b){b=l.nextPow2(b);v.length<b&&(c.free(v),v=c.mallocInt32(b));d.length<b&&(c.free(d),d=c.mallocInt32(b));p.length<b&&(c.free(p),p=c.mallocInt32(b));t.length<b&&(c.free(t),t=c.mallocInt32(b));x.length<b&&(c.free(x),x=c.mallocInt32(b));w.length<b&&(c.free(w),w=c.mallocInt32(b));b*=8;u.length<b&&(c.free(u),u=c.mallocDouble(b))},sweepBipartite:function(b,c,k,l,g,x,m,w,B,G){var F=0,I=2*b;--b;for(var D=I-
1;l>k;++k){var H=x[k],K=I*k;u[F++]=g[K+b];u[F++]=-(H+1);u[F++]=g[K+D];u[F++]=H}for(k=m;w>k;++k)H=G[k]+f,l=I*k,u[F++]=B[l+b],u[F++]=-H,u[F++]=B[l+D],u[F++]=H;w=F>>>1;e(u,w);for(k=G=B=0;w>k;++k)if(F=0|u[2*k+1],F>=f)F=F-f|0,h(p,t,G--,F);else if(0<=F)h(v,d,B--,F);else{if(-f>=F){F=-F-f|0;for(I=0;B>I;++I)if(l=c(v[I],F),void 0!==l)return l;I=t;l=G++;p[l]=F}else{F=-F-1|0;for(I=0;G>I;++I)if(l=c(F,p[I]),void 0!==l)return l;I=d;l=B++;v[l]=F}I[F]=l}},sweepComplete:function(b,c,f,l,g,m,A,C,B,G){var F=0,I=2*b;
--b;for(var D=I-1;l>f;++f){var H=m[f]+1<<1,K=I*f;u[F++]=g[K+b];u[F++]=-H;u[F++]=g[K+D];u[F++]=H}for(f=A;C>f;++f)H=G[f]+1<<1,l=I*f,u[F++]=B[l+b],u[F++]=1|-H,u[F++]=B[l+D],u[F++]=1|H;C=F>>>1;e(u,C);for(f=F=G=B=0;C>f;++f)if(I=0|u[2*f+1],l=1&I,C-1>f&&I>>1===u[2*f+3]>>1&&(l=2,f+=1),0>I){I=-(I>>1)-1;for(g=0;F>g;++g)if(m=c(x[g],I),void 0!==m)return m;if(0!==l)for(g=0;B>g;++g)if(m=c(v[g],I),void 0!==m)return m;if(1!==l)for(g=0;G>g;++g)if(m=c(p[g],I),void 0!==m)return m;0===l?(l=d,g=B++,v[g]=I,l[I]=g):1===
l?(l=t,g=G++,p[g]=I,l[I]=g):2===l&&(l=w,g=F++,x[g]=I,l[I]=g)}else I=(I>>1)-1,0===l?h(v,d,B--,I):1===l?h(p,t,G--,I):2===l&&h(x,w,F--,I)},scanBipartite:function(b,c,k,l,g,p,t,x,m,w,F,I){var D=0,H=2*b,K=c+b,O=1,L=1;for(l?L=f:O=f;p>g;++g){var P=g+O,M=H*g;u[D++]=t[M+c];u[D++]=-P;u[D++]=t[M+K];u[D++]=P}for(g=m;w>g;++g)P=g+L,p=H*g,u[D++]=F[p+c],u[D++]=-P;w=D>>>1;e(u,w);for(g=D=0;w>g;++g)if(P=0|u[2*g+1],0>P)if(P=-P,L=!1,P>=f?(L=!l,P-=f):(L=!!l,--P),L)L=d,p=D++,v[p]=P,L[P]=p;else a:for(L=I[P],P*=H,p=F[P+c+
1],m=F[P+c+1+b],K=0;D>K;++K){var M=v[K],Q=H*M;if(!(m<t[Q+c+1]||t[Q+c+1+b]<p)){for(var T=c+2;b>T;++T)if(F[P+T+b]<t[Q+T]||t[Q+T+b]<F[P+T])continue a;var R,M=x[M];if(R=l?k(L,M):k(M,L),void 0!==R)return R}}else h(v,d,D--,P-O)},scanComplete:function(b,c,d,h,l,g,p,t,x,m,w){for(var I=0,D=2*b,H=c+b;l>h;++h){var K=h+f,O=D*h;u[I++]=g[O+c];u[I++]=-K;u[I++]=g[O+H];u[I++]=K}for(h=t;x>h;++h)K=h+1,l=D*h,u[I++]=m[l+c],u[I++]=-K;x=I>>>1;e(u,x);for(h=I=0;x>h;++h)if(l=0|u[2*h+1],0>l)if(K=-l,K>=f)v[I++]=K-f;else a:for(--K,
l=w[K],K*=D,H=m[K+c+1],O=m[K+c+1+b],t=0;I>t;++t){var L=v[t],P=p[L];if(P===l)break;L*=D;if(!(O<g[L+c+1]||g[L+c+1+b]<H)){for(var M=c+2;b>M;++M)if(m[K+M+b]<g[L+M]||g[L+M+b]<m[K+M])continue a;P=d(P,l);if(void 0!==P)return P}}else{K=l-f;for(t=I-1;0<=t;--t)if(v[t]===K){for(M=t+1;I>M;++M)v[M-1]=v[M];break}--I}}};var c=b("typedarray-pool"),l=b("bit-twiddle"),e=b("./sort"),f=268435456,v=c.mallocInt32(1024),d=c.mallocInt32(1024),p=c.mallocInt32(1024),t=c.mallocInt32(1024),x=c.mallocInt32(1024),w=c.mallocInt32(1024),
u=c.mallocDouble(8192)},{"./sort":252,"bit-twiddle":33,"typedarray-pool":217}],254:[function(b,m,g){(function(b){function c(b,c){return r[0]=b,r[1]=c,u[0]}function l(b){return u[0]=b,r[0]}function e(b){return u[0]=b,r[1]}function f(b,c){return r[1]=b,r[0]=c,u[0]}function g(b){return u[0]=b,r[1]}function d(b){return u[0]=b,r[0]}function p(b,c){return y.writeUInt32LE(b,0,!0),y.writeUInt32LE(c,4,!0),y.readDoubleLE(0,!0)}function t(b){return y.writeDoubleLE(b,0,!0),y.readUInt32LE(0,!0)}function x(b){return y.writeDoubleLE(b,
0,!0),y.readUInt32LE(4,!0)}var w=!1;if("undefined"!=typeof Float64Array){var u=new Float64Array(1),r=new Uint32Array(u.buffer);u[0]=1;w=!0;1072693248===r[1]?(m.exports=function(b){return u[0]=b,[r[0],r[1]]},m.exports.pack=c,m.exports.lo=l,m.exports.hi=e):1072693248===r[0]?(m.exports=function(b){return u[0]=b,[r[1],r[0]]},m.exports.pack=f,m.exports.lo=g,m.exports.hi=d):w=!1}if(!w){var y=new b(8);m.exports=function(b){return y.writeDoubleLE(b,0,!0),[y.readUInt32LE(0,!0),y.readUInt32LE(4,!0)]};m.exports.pack=
p;m.exports.lo=t;m.exports.hi=x}m.exports.sign=function(b){return m.exports.hi(b)>>>31};m.exports.exponent=function(b){return(m.exports.hi(b)<<1>>>21)-1023};m.exports.fraction=function(b){var c=m.exports.lo(b);b=m.exports.hi(b);var d=1048575&b;return 2146435072&b&&(d+=1048576),[c,d]};m.exports.denormalized=function(b){return!(2146435072&m.exports.hi(b))}}).call(this,b("buffer").Buffer)},{buffer:34}],255:[function(b,m,g){var h=b("double-bits"),c=Math.pow(2,-1074);m.exports=function(b,e){if(isNaN(b)||
isNaN(e))return NaN;if(b===e)return b;if(0===b)return 0>e?-c:c;var f=h.hi(b),g=h.lo(b);return e>b==0<b?4294967295===g?(f+=1,g=0):g+=1:0===g?(g=4294967295,--f):--g,h.pack(g,f)}},{"double-bits":254}],256:[function(b,m,g){var h=b("big-rat/add");m.exports=function(b,l){for(var e=b.length,f=Array(e),g=0;e>g;++g)f[g]=h(b[g],l[g]);return f}},{"big-rat/add":230}],257:[function(b,m,g){m.exports=function(b){for(var l=Array(b.length),e=0;e<b.length;++e)l[e]=h(b[e]);return l};var h=b("big-rat")},{"big-rat":233}],
258:[function(b,m,g){var h=b("big-rat"),c=b("big-rat/mul");m.exports=function(b,e){for(var f=h(e),g=b.length,d=Array(g),p=0;g>p;++p)d[p]=c(b[p],f);return d}},{"big-rat":233,"big-rat/mul":242}],259:[function(b,m,g){var h=b("big-rat/sub");m.exports=function(b,l){for(var e=b.length,f=Array(e),g=0;e>g;++g)f[g]=h(b[g],l[g]);return f}},{"big-rat/sub":245}],260:[function(b,m,g){m.exports=function(b,l,e,f){var g=h(b,e,f),d=h(l,e,f);if(0<g&&0<d||0>g&&0>d)return!1;var p=h(e,b,l),t=h(f,b,l);if(0<p&&0<t||0>p&&
0>t)b=!1;else if(0===g&&0===d&&0===p&&0===t)a:{for(g=0;2>g;++g){var d=b[g],p=l[g],t=Math.max(d,p),x=e[g],m=f[g],u=Math.min(x,m);if(Math.min(d,p)>Math.max(x,m)||u>t){b=!1;break a}}b=!0}else b=!0;return b};var h=b("robust-orientation")[3]},{"robust-orientation":195}],261:[function(b,m,g){arguments[4][170][0].apply(g,arguments)},{dup:170}],262:[function(b,m,g){m.exports=function(b,l){for(var e=h(b,l.length),f=Array(l.length),g=Array(l.length),d=[],p=0;p<l.length;++p){var t=e[p].length;g[p]=t;f[p]=!0;
1>=t&&d.push(p)}for(;0<d.length;)for(t=d.pop(),f[t]=!1,t=e[t],p=0;p<t.length;++p){var x=t[p];0===--g[x]&&d.push(x)}e=Array(l.length);g=[];for(p=0;p<l.length;++p)f[p]?(t=g.length,e[p]=t,g.push(l[p])):e[p]=-1;d=[];for(p=0;p<b.length;++p)t=b[p],f[t[0]]&&f[t[1]]&&d.push([e[t[0]],e[t[1]]]);return[d,g]};var h=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":263}],263:[function(b,m,g){m.exports=function(b,g){var e=b.length;if("number"!=typeof g){for(var f=g=0;e>f;++f){var v=b[f];g=Math.max(g,v[0],
v[1])}g=(0|g)+1}g|=0;for(var d=Array(g),f=0;g>f;++f)d[f]=[];for(f=0;e>f;++f)v=b[f],d[v[0]].push(v[1]),d[v[1]].push(v[0]);for(e=0;g>e;++e)h(d[e],function(b,c){return b-c});return d};var h=b("uniq")},{uniq:218}],264:[function(b,m,g){m.exports=function(b,g){function e(b,c){var d=t[c][b[c]];d.splice(d.indexOf(b),1)}function f(b,c,d){var f,p,r;for(p=0;2>p;++p)if(0<t[p][c].length){f=t[p][c][0];r=p;break}p=f[1^r];for(var u=0;2>u;++u)for(var v=t[u][c],x=0;x<v.length;++x){var m=v[x],w=m[1^u];0<h(g[b],g[c],
g[p],g[w])&&(f=m,p=w,r=u)}return d?p:(f&&e(f,r),p)}function v(b,c){var d=t[c][b][0],p=[b];e(d,c);for(d=d[1^c];;){for(;d!==b;)p.push(d),d=f(p[p.length-2],d,!1);if(0===t[0][b].length+t[1][b].length)break;var d=p[p.length-1],r=b,u=p[1],v=f(d,r,!0);if(0>h(g[d],g[r],g[u],g[v]))break;p.push(b);d=f(d,r)}return p}for(var d=0|g.length,p=b.length,t=[Array(d),Array(d)],x=0;d>x;++x)t[0][x]=[],t[1][x]=[];for(x=0;p>x;++x){var m=b[x];t[0][m[0]].push(m);t[1][m[1]].push(m)}p=[];for(x=0;d>x;++x)0===t[0][x].length+
t[1][x].length&&p.push([x]);for(x=0;d>x;++x)for(m=0;2>m;++m){for(var u=[];0<t[m][x].length;){var r=(t[0][x].length,v(x,m));r[1]===r[r.length-1]?u.push.apply(u,r):(0<u.length&&p.push(u),u=r)}0<u.length&&p.push(u)}return p};var h=b("compare-angle")},{"compare-angle":265}],265:[function(b,m,g){function h(b,c,h){var g=e(b[0],-c[0]);b=e(b[1],-c[1]);var l=e(h[0],-c[0]);c=e(h[1],-c[1]);g=v(f(g,l),f(b,c));return 0<=g[g.length-1]}m.exports=function(b,e,f,g){var v=c(e,f,g);if(0===v){var v=l(c(b,e,f)),u=l(c(b,
e,g));return v===u?0===v?(f=h(b,e,f),b=h(b,e,g),f===b?0:f?1:-1):0:0===u?0<v?-1:h(b,e,g)?-1:1:0===v?0<u?1:h(b,e,f)?1:-1:l(u-v)}u=c(b,e,f);return 0<u?0<v&&0<c(b,e,g)?1:-1:0>u?0<v||0<c(b,e,g)?1:-1:0<c(b,e,g)?1:h(b,e,f)?1:-1};var c=b("robust-orientation"),l=b("signum"),e=b("two-sum"),f=b("robust-product"),v=b("robust-sum")},{"robust-orientation":195,"robust-product":266,"robust-sum":198,signum:267,"two-sum":216}],266:[function(b,m,g){var h=b("robust-sum"),c=b("robust-scale");m.exports=function(b,e){if(1===
b.length)return c(e,b[0]);if(1===e.length)return c(b,e[0]);if(0===b.length||0===e.length)return[0];var f=[0];if(b.length<e.length)for(var g=0;g<b.length;++g)f=h(f,c(e,b[g]));else for(g=0;g<e.length;++g)f=h(f,c(b,e[g]));return f}},{"robust-scale":196,"robust-sum":198}],267:[function(b,m,g){m.exports=function(b){return 0>b?-1:0<b?1:0}},{}],268:[function(b,m,g){arguments[4][4][0].apply(g,arguments)},{dup:4}],269:[function(b,m,g){function h(b,c,d,e,f){this.mid=b;this.left=c;this.right=d;this.leftPoints=
e;this.rightPoints=f;this.count=(c?c.count:0)+(d?d.count:0)+e.length}function c(b,c){b.mid=c.mid;b.left=c.left;b.right=c.right;b.leftPoints=c.leftPoints;b.rightPoints=c.rightPoints;b.count=c.count}function l(b,c){var d=w(c);b.mid=d.mid;b.left=d.left;b.right=d.right;b.leftPoints=d.leftPoints;b.rightPoints=d.rightPoints;b.count=d.count}function e(b,c){var d=b.intervals([]),e=d.indexOf(c);return 0>e?y:(d.splice(e,1),l(b,d),k)}function f(b,c,d){for(var e=0;e<b.length&&b[e][0]<=c;++e){var f=d(b[e]);if(f)return f}}
function v(b,c,d){for(var e=b.length-1;0<=e&&b[e][1]>=c;--e){var f=d(b[e]);if(f)return f}}function d(b,c){for(var d=0;d<b.length;++d){var e=c(b[d]);if(e)return e}}function p(b,c){return b-c}function t(b,c){var d=b[0]-c[0];return d?d:b[1]-c[1]}function x(b,c){var d=b[1]-c[1];return d?d:b[0]-c[0]}function w(b){if(0===b.length)return null;for(var c=[],d=0;d<b.length;++d)c.push(b[d][0],b[d][1]);c.sort(p);for(var c=c[c.length>>1],e=[],f=[],k=[],d=0;d<b.length;++d){var g=b[d];g[1]<c?e.push(g):c<g[0]?f.push(g):
k.push(g)}b=k.slice();return k.sort(t),b.sort(x),new h(c,w(e),w(f),k,b)}function u(b){this.root=b}var r=b("binary-search-bounds"),y=0,k=1;m.exports=function(b){return new u(b&&0!==b.length?w(b):null)};b=h.prototype;b.intervals=function(b){return b.push.apply(b,this.leftPoints),this.left&&this.left.intervals(b),this.right&&this.right.intervals(b),b};b.insert=function(b){var c=this.count-this.leftPoints.length;if(this.count+=1,b[1]<this.mid)this.left?4*(this.left.count+1)>3*(c+1)?(c=this.intervals([]),
c.push(b),l(this,c)):this.left.insert(b):this.left=w([b]);else if(b[0]>this.mid)this.right?4*(this.right.count+1)>3*(c+1)?(c=this.intervals([]),c.push(b),l(this,c)):this.right.insert(b):this.right=w([b]);else{var c=r.ge(this.leftPoints,b,t),d=r.ge(this.rightPoints,b,x);this.leftPoints.splice(c,0,b);this.rightPoints.splice(d,0,b)}};b.remove=function(b){var d=this.count-this.leftPoints;if(b[1]<this.mid){if(!this.left)return y;if(4*(this.right?this.right.count:0)>3*(d-1))return e(this,b);d=this.left.remove(b);
return 2===d?(this.left=null,--this.count,k):(d===k&&--this.count,d)}if(b[0]>this.mid){if(!this.right)return y;if(4*(this.left?this.left.count:0)>3*(d-1))return e(this,b);d=this.right.remove(b);return 2===d?(this.right=null,--this.count,k):(d===k&&--this.count,d)}if(1===this.count)return this.leftPoints[0]===b?2:y;if(1===this.leftPoints.length&&this.leftPoints[0]===b){if(this.left&&this.right){b=this;for(var f=this.left;f.right;)b=f,f=f.right;if(b===this)f.right=this.right;else{var h=this.left,d=
this.right;b.count-=f.count;b.right=f.left;f.left=h;f.right=d}c(this,f);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?c(this,this.left):c(this,this.right);return k}for(h=r.ge(this.leftPoints,b,t);h<this.leftPoints.length&&this.leftPoints[h][0]===b[0];++h)if(this.leftPoints[h]===b)for(--this.count,this.leftPoints.splice(h,1),d=r.ge(this.rightPoints,b,x);d<this.rightPoints.length&&this.rightPoints[d][1]===b[1];++d)if(this.rightPoints[d]===
b)return this.rightPoints.splice(d,1),k;return y};b.queryPoint=function(b,c){if(b<this.mid){if(this.left){var e=this.left.queryPoint(b,c);if(e)return e}return f(this.leftPoints,b,c)}return b>this.mid?this.right&&(e=this.right.queryPoint(b,c))?e:v(this.rightPoints,b,c):d(this.leftPoints,c)};b.queryInterval=function(b,c,e){if(b<this.mid&&this.left){var k=this.left.queryInterval(b,c,e);if(k)return k}return c>this.mid&&this.right&&(k=this.right.queryInterval(b,c,e))?k:c<this.mid?f(this.leftPoints,c,e):
b>this.mid?v(this.rightPoints,b,e):d(this.leftPoints,e)};b=u.prototype;b.insert=function(b){this.root?this.root.insert(b):this.root=new h(b[0],null,null,[b],[b])};b.remove=function(b){return this.root?(b=this.root.remove(b),2===b&&(this.root=null),b!==y):!1};b.queryPoint=function(b,c){return this.root?this.root.queryPoint(b,c):void 0};b.queryInterval=function(b,c,d){return c>=b&&this.root?this.root.queryInterval(b,c,d):void 0};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:
0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":268}],270:[function(b,m,g){function h(b,e){var f,h;if(e[0][0]<e[1][0])f=e[0],h=e[1];else{if(!(e[0][0]>e[1][0])){f=Math.min(b[0][1],b[1][1]);h=Math.max(b[0][1],b[1][1]);var d=Math.min(e[0][1],e[1][1]),g=Math.max(e[0][1],e[1][1]);return d>h?h-d:f>g?f-g:h-g}f=e[1];h=e[0]}b[0][1]<b[1][1]?(g=b[0],d=b[1]):(g=b[1],d=b[0]);return(g=c(h,f,g))?g:(g=c(h,f,d),g?g:d-h)}m.exports=function(b,
e){var f,g;if(e[0][0]<e[1][0])f=e[0],g=e[1];else{if(!(e[0][0]>e[1][0]))return h(e,b);f=e[1];g=e[0]}var d,p;if(b[0][0]<b[1][0])d=b[0],p=b[1];else{if(!(b[0][0]>b[1][0]))return-h(b,e);d=b[1];p=b[0]}var t=c(f,g,p),x=c(f,g,d);if(0>t){if(0>=x)return t}else if(0<t){if(0<=x)return t}else if(x)return x;if(t=c(p,d,g),x=c(p,d,f),0>t){if(0>=x)return t}else if(0<t){if(0<=x)return t}else if(x)return x;return g[0]-p[0]};var c=b("robust-orientation")},{"robust-orientation":195}],271:[function(b,m,g){function h(b,
c,d,e,f,h){this._color=b;this.key=c;this.value=d;this.left=e;this.right=f;this._count=h}function c(b){return new h(b._color,b.key,b.value,b.left,b.right,b._count)}function l(b,c){return new h(b,c.key,c.value,c.left,c.right,c._count)}function e(b){b._count=1+(b.left?b.left._count:0)+(b.right?b.right._count:0)}function f(b,c){this._compare=b;this.root=c}function v(b,c){if(c.left){var d=v(b,c.left);if(d)return d}return(d=b(c.key,c.value))?d:c.right?v(b,c.right):void 0}function d(b,c,e,f){if(0>=c(b,f.key)){if(f.left){var h=
d(b,c,e,f.left);if(h)return h}if(h=e(f.key,f.value))return h}return f.right?d(b,c,e,f.right):void 0}function p(b,c,d,e,f){var h,g=d(b,f.key),l=d(c,f.key);return 0>=g&&(f.left&&(h=p(b,c,d,e,f.left))||0<l&&(h=e(f.key,f.value)))?h:0<l&&f.right?p(b,c,d,e,f.right):void 0}function t(b,c){this.tree=b;this._stack=c}function x(b,c){b.key=c.key;b.value=c.value;b.left=c.left;b.right=c.right;b._color=c._color;b._count=c._count}function w(b){for(var d,f,h,g,p=b.length-1;0<=p;--p){if(d=b[p],0===p)return void(d._color=
y);if(f=b[p-1],f.left===d){if(h=f.right,h.right&&h.right._color===r){if(h=f.right=c(h),g=h.right=c(h.right),f.right=h.left,h.left=f,h.right=g,h._color=f._color,d._color=y,f._color=y,g._color=y,e(f),e(h),1<p){var t=b[p-2];t.left===f?t.left=h:t.right=h}return void(b[p-1]=h)}if(h.left&&h.left._color===r){if(h=f.right=c(h),g=h.left=c(h.left),f.right=g.left,h.left=g.right,g.left=f,g.right=h,g._color=f._color,f._color=y,h._color=y,d._color=y,e(f),e(h),e(g),1<p)t=b[p-2],t.left===f?t.left=g:t.right=g;return void(b[p-
1]=g)}if(h._color===y){if(f._color===r)return f._color=y,void(f.right=l(r,h));f.right=l(r,h)}else{if(h=c(h),f.right=h.left,h.left=f,h._color=f._color,f._color=r,e(f),e(h),1<p)t=b[p-2],t.left===f?t.left=h:t.right=h;b[p-1]=h;b[p]=f;p+1<b.length?b[p+1]=d:b.push(d);p+=2}}else{if(h=f.left,h.left&&h.left._color===r){if(h=f.left=c(h),g=h.left=c(h.left),f.left=h.right,h.right=f,h.left=g,h._color=f._color,d._color=y,f._color=y,g._color=y,e(f),e(h),1<p)t=b[p-2],t.right===f?t.right=h:t.left=h;return void(b[p-
1]=h)}if(h.right&&h.right._color===r){if(h=f.left=c(h),g=h.right=c(h.right),f.left=g.right,h.right=g.left,g.right=f,g.left=h,g._color=f._color,f._color=y,h._color=y,d._color=y,e(f),e(h),e(g),1<p)t=b[p-2],t.right===f?t.right=g:t.left=g;return void(b[p-1]=g)}if(h._color===y){if(f._color===r)return f._color=y,void(f.left=l(r,h));f.left=l(r,h)}else{if(h=c(h),f.left=h.right,h.right=f,h._color=f._color,f._color=r,e(f),e(h),1<p)t=b[p-2],t.right===f?t.right=h:t.left=h;b[p-1]=h;b[p]=f;p+1<b.length?b[p+1]=
d:b.push(d);p+=2}}}}function u(b,c){return c>b?-1:b>c?1:0}m.exports=function(b){return new f(b||u,null)};var r=0,y=1;b=f.prototype;Object.defineProperty(b,"keys",{get:function(){var b=[];return this.forEach(function(c,d){b.push(c)}),b}});Object.defineProperty(b,"values",{get:function(){var b=[];return this.forEach(function(c,d){b.push(d)}),b}});Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(b,c){for(var d=this._compare,g=this.root,p=[],t=
[];g;){var u=d(b,g.key);p.push(g);t.push(u);g=0>=u?g.left:g.right}p.push(new h(r,b,c,null,null,1));for(u=p.length-2;0<=u;--u)g=p[u],0>=t[u]?p[u]=new h(g._color,g.key,g.value,p[u+1],g.right,g._count+1):p[u]=new h(g._color,g.key,g.value,g.left,p[u+1],g._count+1);for(u=p.length-1;1<u;--u){t=p[u-1];g=p[u];if(t._color===y||g._color===y)break;var v=p[u-2];if(v.left===t){if(t.left===g){var x=v.right;if(!x||x._color!==r){if(v._color=r,v.left=t.right,t._color=y,t.right=v,p[u-2]=t,p[u-1]=g,e(v),e(t),3<=u)u=
p[u-3],u.left===v?u.left=t:u.right=t;break}}else if(x=v.right,!x||x._color!==r){if(t.right=g.left,v._color=r,v.left=g.right,g._color=y,g.left=t,g.right=v,p[u-2]=g,p[u-1]=t,e(v),e(t),e(g),3<=u)u=p[u-3],u.left===v?u.left=g:u.right=g;break}t._color=y;v.right=l(y,x)}else{if(t.right===g){if(x=v.left,!x||x._color!==r){if(v._color=r,v.right=t.left,t._color=y,t.left=v,p[u-2]=t,p[u-1]=g,e(v),e(t),3<=u)u=p[u-3],u.right===v?u.right=t:u.left=t;break}}else if(x=v.left,!x||x._color!==r){if(t.left=g.right,v._color=
r,v.right=g.left,g._color=y,g.right=t,g.left=v,p[u-2]=g,p[u-1]=t,e(v),e(t),e(g),3<=u)u=p[u-3],u.right===v?u.right=g:u.left=g;break}t._color=y;v.left=l(y,x)}v._color=r;--u}return p[0]._color=y,new f(d,p[0])};b.forEach=function(b,c,e){if(this.root)switch(arguments.length){case 1:return v(b,this.root);case 2:return d(c,this._compare,b,this.root);case 3:if(0<=this._compare(c,e))break;return p(c,e,this._compare,b,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var b=[],c=this.root;c;)b.push(c),
c=c.left;return new t(this,b)}});Object.defineProperty(b,"end",{get:function(){for(var b=[],c=this.root;c;)b.push(c),c=c.right;return new t(this,b)}});b.at=function(b){if(0>b)return new t(this,[]);for(var c=this.root,d=[];;){if(d.push(c),c.left){if(b<c.left._count){c=c.left;continue}b-=c.left._count}if(!b)return new t(this,d);if(--b,!c.right)break;if(b>=c.right._count)break;c=c.right}return new t(this,[])};b.ge=function(b){for(var c=this._compare,d=this.root,e=[],f=0;d;){var h=c(b,d.key);e.push(d);
0>=h&&(f=e.length);d=0>=h?d.left:d.right}return e.length=f,new t(this,e)};b.gt=function(b){for(var c=this._compare,d=this.root,e=[],f=0;d;){var h=c(b,d.key);e.push(d);0>h&&(f=e.length);d=0>h?d.left:d.right}return e.length=f,new t(this,e)};b.lt=function(b){for(var c=this._compare,d=this.root,e=[],f=0;d;){var h=c(b,d.key);e.push(d);0<h&&(f=e.length);d=0>=h?d.left:d.right}return e.length=f,new t(this,e)};b.le=function(b){for(var c=this._compare,d=this.root,e=[],f=0;d;){var h=c(b,d.key);e.push(d);0<=
h&&(f=e.length);d=0>h?d.left:d.right}return e.length=f,new t(this,e)};b.find=function(b){for(var c=this._compare,d=this.root,e=[];d;){var f=c(b,d.key);if(e.push(d),0===f)return new t(this,e);d=0>=f?d.left:d.right}return new t(this,[])};b.remove=function(b){return(b=this.find(b))?b.remove():this};b.get=function(b){for(var c=this._compare,d=this.root;d;){var e=c(b,d.key);if(0===e)return d.value;d=0>=e?d.left:d.right}};b=t.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});
Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new t(this.tree,this._stack.slice())};b.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var c=Array(b.length),d=b[b.length-1];c[c.length-1]=new h(d._color,d.key,d.value,d.left,d.right,d._count);for(var e=b.length-2;0<=e;--e)d=b[e],d.left===b[e+1]?c[e]=new h(d._color,d.key,d.value,c[e+1],d.right,d._count):c[e]=new h(d._color,
d.key,d.value,d.left,c[e+1],d._count);if(d=c[c.length-1],d.left&&d.right){b=c.length;for(d=d.left;d.right;)c.push(d),d=d.right;e=c[b-1];c.push(new h(d._color,e.key,e.value,d.left,d.right,d._count));c[b-1].key=d.key;c[b-1].value=d.value;for(e=c.length-2;e>=b;--e)d=c[e],c[e]=new h(d._color,d.key,d.value,d.left,c[e+1],d._count);c[b-1].left=c[b]}if(d=c[c.length-1],d._color===r){e=c[c.length-2];e.left===d?e.left=null:e.right===d&&(e.right=null);c.pop();for(e=0;e<c.length;++e)c[e]._count--;return new f(this.tree._compare,
c[0])}if(d.left||d.right){d.left?x(d,d.left):d.right&&x(d,d.right);d._color=y;for(e=0;e<c.length-1;++e)c[e]._count--;return new f(this.tree._compare,c[0])}if(1===c.length)return new f(this.tree._compare,null);for(e=0;e<c.length;++e)c[e]._count--;e=c[c.length-2];return w(c),e.left===d?e.left=null:e.right=null,new f(this.tree._compare,c[0])};Object.defineProperty(b,"key",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1].key:void 0},enumerable:!0});Object.defineProperty(b,
"value",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1].value:void 0},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var b=0,c=this._stack;if(0===c.length)return(b=this.tree.root)?b._count:0;c[c.length-1].left&&(b=c[c.length-1].left._count);for(var d=c.length-2;0<=d;--d)c[d+1]===c[d].right&&(++b,c[d].left&&(b+=c[d].left._count));return b},enumerable:!0});b.next=function(){var b=this._stack;if(0!==b.length){var c=b[b.length-1];if(c.right)for(c=c.right;c;)b.push(c),
c=c.left;else for(b.pop();0<b.length&&b[b.length-1].right===c;)c=b[b.length-1],b.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var c=b.length-1;0<c;--c)if(b[c-1].left===b[c])return!0;return!1}});b.update=function(b){var c=this._stack;if(0===c.length)throw Error("Can't update empty node!");var d=Array(c.length),e=c[c.length-1];d[d.length-1]=new h(e._color,e.key,b,e.left,e.right,e._count);for(b=c.length-2;0<=
b;--b)e=c[b],e.left===c[b+1]?d[b]=new h(e._color,e.key,e.value,d[b+1],e.right,e._count):d[b]=new h(e._color,e.key,e.value,e.left,d[b+1],e._count);return new f(this.tree._compare,d[0])};b.prev=function(){var b=this._stack;if(0!==b.length){var c=b[b.length-1];if(c.left)for(c=c.left;c;)b.push(c),c=c.right;else for(b.pop();0<b.length&&b[b.length-1].left===c;)c=b[b.length-1],b.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;
for(var c=b.length-1;0<c;--c)if(b[c-1].right===b[c])return!0;return!1}})},{}],272:[function(b,m,g){function h(b,c,d){this.slabs=b;this.coordinates=c;this.horizontal=d}function c(b,c){return b.y-c}function l(b,c){for(var d=null;b;){var e,f,k=b.key;k[0][0]<k[1][0]?(e=k[0],f=k[1]):(e=k[1],f=k[0]);var h=p(e,f,c);if(0>h)b=b.left;else if(0<h)if(c[0]!==k[1][0])d=b,b=b.right;else{if(k=l(b.right,c))return k;b=b.left}else{if(c[0]!==k[1][0])return b;if(k=l(b.right,c))return k;b=b.left}}return d}function e(b,
c,d,e){this.y=b;this.index=c;this.start=d;this.closed=e}function f(b,c,d,e){this.x=b;this.segment=c;this.create=d;this.index=e}m.exports=function(b){for(var c=b.length,g=2*c,l=Array(g),p=0;c>p;++p){var k=b[p],q=k[0][0]<k[1][0];l[2*p]=new f(k[0][0],k,q,p);l[2*p+1]=new f(k[1][0],k,!q,p)}l.sort(function(b,c){var d=b.x-c.x;return d?d:(d=b.create-c.create,d?d:Math.min(b.segment[0][1],b.segment[1][1])-Math.min(c.segment[0][1],c.segment[1][1]))});b=d(t);c=[];k=[];q=[];for(p=0;g>p;){for(var v=l[p].x,m=[];g>
p;){var A=l[p];if(A.x!==v)break;p+=1;A.segment[0][0]===A.x&&A.segment[1][0]===A.x?A.create&&(A.segment[0][1]<A.segment[1][1]?(m.push(new e(A.segment[0][1],A.index,!0,!0)),m.push(new e(A.segment[1][1],A.index,!1,!1))):(m.push(new e(A.segment[1][1],A.index,!0,!1)),m.push(new e(A.segment[0][1],A.index,!1,!0)))):b=A.create?b.insert(A.segment,A.index):b.remove(A.segment)}c.push(b.root);k.push(v);q.push(m)}return new h(c,k,q)};var v=b("binary-search-bounds"),d=b("functional-red-black-tree"),p=b("robust-orientation"),
t=b("./lib/order-segments");h.prototype.castUp=function(b){var d=v.le(this.coordinates,b[0]);if(0>d)return-1;var e=(this.slabs[d],l(this.slabs[d],b)),f=-1;if(e&&(f=e.value),this.coordinates[d]===b[0]){var h=null;(e&&(h=e.key),0<d)&&(e=l(this.slabs[d-1],b))&&(h?0<t(e.key,h)&&(h=e.key,f=e.value):(f=e.value,h=e.key));e=this.horizontal[d];if(0<e.length){var k=v.ge(e,b[1],c);if(k<e.length){d=e[k];if(b[1]===d.y){if(d.closed)return d.index;for(;k<e.length-1&&e[k+1].y===b[1];)if(k+=1,d=e[k],d.closed)return d.index;
if(d.y===b[1]&&!d.start){if(k+=1,k>=e.length)return f;d=e[k]}}d.start?h?(b=p(h[0],h[1],[b[0],d.y]),h[0][0]>h[1][0]&&(b=-b),0<b&&(f=d.index)):f=d.index:d.y!==b[1]&&(f=d.index)}}}return f}},{"./lib/order-segments":270,"binary-search-bounds":268,"functional-red-black-tree":271,"robust-orientation":195}],273:[function(b,m,g){function h(){return!0}function c(b){return function(c,d){var e=b[c];return e?!!e.queryPoint(d,h):!1}}function l(b){for(var d={},e=0;e<b.length;++e){var f=b[e],h=f[0][0],g=f[0][1],
f=f[1][1],g=[Math.min(g,f),Math.max(g,f)];h in d?d[h].push(g):d[h]=[g]}b={};h=Object.keys(d);for(e=0;e<h.length;++e)b[h[e]]=x(d[h[e]]);return c(b)}function e(b,c){return function(d){var e=w.le(c,d[0]);if(0>e)return 1;var f=b[e];if(!f){if(!(0<e&&c[e]===d[0]))return 1;f=b[e-1]}for(e=1;f;){var h=f.key,g=p(d,h[0],h[1]);if(h[0][0]<h[1][0])if(0>g)f=f.left;else{if(!(0<g))return 0;e=-1;f=f.right}else if(0<g)f=f.left;else{if(!(0>g))return 0;e=1;f=f.right}}return e}}function f(b){return 1}function v(b){return function(c){return b(c[0],
c[1])?0:1}}function d(b,c){return function(d){return b(d[0],d[1])?0:c(d)}}m.exports=function(b){for(var c=b.length,h=[],k=[],g=0;c>g;++g)for(var p=b[g],m=p.length,x=m-1,w=0;m>w;x=w++){var x=p[x],B=p[w];x[0]===B[0]?k.push([x,B]):h.push([x,B])}if(0===h.length)return 0===k.length?f:v(l(k));b=t(h);b=e(b.slabs,b.coordinates);return 0===k.length?b:d(l(k),b)};var p=b("robust-orientation")[3],t=b("slab-decomposition"),x=b("interval-tree-1d"),w=b("binary-search-bounds")},{"binary-search-bounds":268,"interval-tree-1d":269,
"robust-orientation":195,"slab-decomposition":272}],274:[function(b,m,g){function h(b,c){for(var d=Array(b),e=0;b>e;++e)d[e]=c;return d}function c(b){for(var c=Array(b),d=0;b>d;++d)c[d]=[];return c}m.exports=function(b,g){function u(b){for(var c=b.length,d=0;c>d;++d)if(!K[b[d]])return!1;return!0}var r=t(b,g);b=r[0];g=r[1];for(var m=g.length,k=(b.length,l(b,g.length)),q=0;m>q;++q)if(1===k[q].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var k=e(b,g),k=k.filter(function(b){for(var c=
b.length,e=[0],f=0;c>f;++f)var k=g[b[f]],h=g[b[(f+1)%c]],l=v(-k[0],k[1]),p=v(-k[0],h[1]),k=v(h[0],k[1]),h=v(h[0],h[1]),e=d(e,d(d(l,p),d(k,h)));return 0<e[e.length-1]}),r=k.length,z=Array(r),E=Array(r),q=0;r>q;++q){z[q]=q;var A=Array(r),C=k[q].map(function(b){return g[b]}),B=f([C]),G=0,F=0;a:for(;r>F;++F)if(A[F]=0,q!==F){for(var C=k[F],I=C.length,D=0;I>D;++D){var H=B(g[C[D]]);if(0!==H){0>H&&(A[F]=1,G+=1);continue a}}A[F]=1;G+=1}E[q]=[G,q,A]}E.sort(function(b,c){return c[0]-b[0]});for(q=0;r>q;++q)for(A=
E[q],C=A[1],I=A[2],F=0;r>F;++F)I[F]&&(z[F]=C);E=c(r);for(q=0;r>q;++q)E[q].push(z[q]),E[z[q]].push(q);for(var A={},K=h(m,!1),q=0;r>q;++q)for(C=k[q],I=C.length,F=0;I>F;++F)m=C[F],B=C[(F+1)%I],G=Math.min(m,B)+":"+Math.max(m,B),G in A?(G=A[G],E[G].push(q),E[q].push(G),K[m]=K[B]=!0):A[G]=q;F=[];m=h(r,-1);for(q=0;r>q;++q)z[q]!==q||u(k[q])?m[q]=-1:(F.push(q),m[q]=0);for(r=[];0<F.length;){q=F.pop();z=E[q];p(z,function(b,c){return b-c});var O,I=z.length,A=m[q];0===A&&(C=k[q],O=[C]);for(q=0;I>q;++q)C=z[q],
0<=m[C]||(m[C]=1^A,F.push(C),0!==A)||(C=k[C],u(C)||(C.reverse(),O.push(C)));0===A&&r.push(O)}return r};var l=b("edges-to-adjacency-list"),e=b("planar-dual"),f=b("point-in-big-polygon"),v=b("two-product"),d=b("robust-sum"),p=b("uniq"),t=b("./lib/trim-leaves")},{"./lib/trim-leaves":262,"edges-to-adjacency-list":263,"planar-dual":264,"point-in-big-polygon":273,"robust-sum":198,"two-product":215,uniq:218}],275:[function(b,m,g){arguments[4][33][0].apply(g,arguments)},{dup:33}],276:[function(b,m,g){function h(b){this.roots=
Array(b);this.ranks=Array(b);for(var h=0;b>h;++h)this.roots[h]=h,this.ranks[h]=0}"use restrict";m.exports=h;h.prototype.length=function(){return this.roots.length};h.prototype.makeSet=function(){var b=this.roots.length;return this.roots.push(b),this.ranks.push(0),b};h.prototype.find=function(b){for(var h=this.roots;h[b]!==b;){var e=h[b];h[b]=h[e];b=e}return b};h.prototype.link=function(b,h){var e=this.find(b),f=this.find(h);if(e!==f){var g=this.ranks,d=this.roots,p=g[e],t=g[f];t>p?d[e]=f:p>t?d[f]=
e:(d[f]=e,++g[e])}}},{}],277:[function(b,m,g){arguments[4][171][0].apply(g,arguments)},{"bit-twiddle":275,dup:171,"union-find":276}],278:[function(b,m,g){m.exports=function(b,e,f){function g(b){if(A[b])return 1/0;var c=q[b],d=z[b];0>c||0>d?b=1/0:(c=e[c],d=e[d],b=Math.abs(h(e[b],c,d))/Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)));return b}function d(b,c){var d=F[b],e=F[c];F[b]=e;F[c]=d;I[d]=c;I[e]=b}function p(b){for(var c=E[F[b]];;){var e=c,f=2*b+1,k=2*(b+1),h=b;if(D>f){var g=E[F[f]];e>
g&&(h=f,e=g)}D>k&&e>E[F[k]]&&(h=k);if(h===b)return b;d(b,h);b=h}}function t(b){for(var c=E[F[b]];0<b;){var e=1&b?b-1>>1:(b>>1)-1;if(0<=e&&E[F[e]]>c)d(b,e),b=e;else return b}}function m(){if(0<D){var b=F[0];return d(0,D-1),--D,p(0),b}return-1}function w(b,c){var d=F[b];return E[d]===c?b:(E[d]=-(1/0),t(b),m(),E[d]=c,D+=1,t(D-1))}function u(b){if(!A[b]){A[b]=!0;var c=q[b];b=z[b];0<=q[b]&&(q[b]=c);0<=z[c]&&(z[c]=b);0<=I[c]&&w(I[c],g(c));0<=I[b]&&w(I[b],g(b))}}function r(b,c){if(0>b[c])return c;var d=
c,e=c;do{var f=b[e];if(!A[e]||0>f||f===e)break;if(e=f,f=b[e],!A[e]||0>f||f===e)break;e=f;d=b[d]}while(d!==e);for(d=c;d!==e;d=b[d])b[d]=e;return e}for(var y=e.length,k=b.length,q=Array(y),z=Array(y),E=Array(y),A=Array(y),C=0;y>C;++C)q[C]=z[C]=-1,E[C]=1/0,A[C]=!1;for(C=0;k>C;++C){var B=b[C];if(2!==B.length)throw Error("Input must be a graph");var G=B[1],B=B[0];-1!==z[B]?z[B]=-2:z[B]=G;-1!==q[G]?q[G]=-2:q[G]=B}for(var F=[],I=Array(y),C=0;y>C;++C)1/0>(E[C]=g(C))?(I[C]=F.length,F.push(C)):I[C]=-1;for(var D=
F.length,C=D>>1;0<=C;--C)p(C);for(;;){C=m();if(0>C||E[C]>f)break;u(C)}f=[];for(C=0;y>C;++C)A[C]||(I[C]=f.length,f.push(e[C].slice()));var H=(f.length,[]);return b.forEach(function(b){var c=r(q,b[0]);b=r(z,b[1]);0<=c&&0<=b&&c!==b&&(c=I[c],b=I[b],c!==b&&H.push([c,b]))}),c.unique(c.normalize(H)),{positions:f,edges:H}};var h=b("robust-orientation"),c=b("simplicial-complex")},{"robust-orientation":195,"simplicial-complex":277}],279:[function(b,m,g){m.exports={name:"plotly.js",version:"1.3.0",description:"The open source javascript graphing library that powers plotly",
license:"MIT",main:"./src/index.js",webpack:"./dist/plotly.min.js",repository:{type:"git",url:"https://github.com/plotly/plotly.js.git"},bugs:{url:"https://github.com/plotly/plotly.js/issues"},author:"Plotly, Inc.",keywords:["graphing","plotting","data","visualization","plotly"],scripts:{preprocess:"node tasks/preprocess.js",postinstall:"npm run preprocess",bundle:"node tasks/bundle.js",header:"node tasks/header.js",build:"npm run preprocess && npm run bundle && npm run header",cibuild:"node tasks/cibundle.js",
watch:"node tasks/watch_plotly.js",lint:"cd src && jshint . || true","test-jasmine":"karma start test/jasmine/karma.conf.js","citest-jasmine":"karma start test/jasmine/karma.ciconf.js","test-image":"./tasks/test_image.sh",test:"npm run test-jasmine && npm test-image","start-test_dashboard":"node devtools/test_dashboard/server.js","start-image_viewer":"node devtools/image_viewer/server.js",baseline:"./tasks/baseline.sh",version:"npm run build && git add -A dist",postversion:"git push && git push --tags"},
dependencies:{"3d-view":"^2.0.0","alpha-shape":"^1.0.0",arraytools:"^1.0.0","convex-hull":"^1.0.3",d3:"3.5.6","delaunay-triangulate":"^1.1.6","es6-promise":"^3.0.2","fast-isnumeric":"^1.1.1","fs-extra":"^0.26.2","gl-error2d":"^1.0.0","gl-error3d":"^1.0.0","gl-line2d":"^1.2.1","gl-line3d":"^1.0.1","gl-mat4":"^1.1.2","gl-mesh3d":"^1.0.4","gl-plot2d":"^1.1.6","gl-plot3d":"^1.3.0","gl-scatter2d":"^1.0.5","gl-scatter2d-fancy":"^1.1.1","gl-scatter3d":"^1.0.4","gl-select-box":"^1.0.1","gl-spikes2d":"^1.0.1",
"gl-surface3d":"^1.0.6","mouse-change":"^1.1.1","mouse-wheel":"^1.0.2",ndarray:"^1.0.16","ndarray-fill":"^1.0.1","ndarray-homography":"^1.0.0","ndarray-ops":"^1.2.2","node-sass":"^3.4.1","right-now":"^1.0.0","robust-orientation":"^1.1.3","sane-topojson":"^1.2.0","superscript-text":"^1.0.0",tinycolor2:"1.1.2",topojson:"^1.6.19",xml2js:"^0.4.15"},devDependencies:{brfs:"^1.4.1",browserify:"^12.0.1","browserify-transform-tools":"^1.5.0",ecstatic:"^1.2.0","jasmine-core":"^2.3.4",jshint:"^2.8.0",karma:"^0.13.15",
"karma-browserify":"^4.4.1","karma-chrome-launcher":"^0.2.1","karma-coverage":"^0.5.3","karma-firefox-launcher":"^0.1.6","karma-jasmine":"^0.3.6",open:"0.0.5","prepend-file":"^1.3.0",prettysize:"0.0.3",through2:"^2.0.0","uglify-js":"^2.5.0",watchify:"^3.6.0"}}},{}],280:[function(b,m,g){m.exports=["",{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",
backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0},{path:"M2,2V-2H-2V2Z",backoff:0}]},{}],281:[function(b,m,g){g=b("../../plotly");var h=b("./arrow_paths"),c=b("../../plots/font_attributes");b=b("../../lib/extend").extendFlat;m.exports={_isLinkedToArray:!0,text:{valType:"string"},textangle:{valType:"angle",dflt:0},font:b({},c,{}),opacity:{valType:"number",min:0,max:1,dflt:1},align:{valType:"enumerated",values:["left",
"center","right"],dflt:"center"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)"},borderpad:{valType:"number",min:0,dflt:1},borderwidth:{valType:"number",min:0,dflt:1},showarrow:{valType:"boolean",dflt:!0},arrowcolor:{valType:"color"},arrowhead:{valType:"integer",min:0,max:h.length,dflt:1},arrowsize:{valType:"number",min:.3,dflt:1},arrowwidth:{valType:"number",min:.1},ax:{valType:"number",dflt:-10},ay:{valType:"number",dflt:-30},xref:{valType:"enumerated",
values:["paper",g.Plots.subplotsRegistry.cartesian.idRegex.x.toString()]},x:{valType:"number"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yref:{valType:"enumerated",values:["paper",g.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},y:{valType:"number"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"},_deprecated:{ref:{valType:"string"}}}},{"../../lib/extend":328,"../../plotly":348,"../../plots/font_attributes":354,"./arrow_paths":280}],
282:[function(b,m,g){function h(b,c){function f(c,k){return e.Lib.coerce(b,h,d.layoutAttributes,c,k)}var h={};f("opacity");f("align");f("bgcolor");var g=f("bordercolor"),l=e.Color.opacity(g);f("borderpad");var v=f("borderwidth");(g=f("showarrow"))&&(f("arrowcolor",l?h.bordercolor:e.Color.defaultLine),f("arrowhead"),f("arrowsize"),f("arrowwidth",2*(l&&v||1)),f("ax"),f("ay"),e.Lib.noneOrAll(b,h,["ax","ay"]));f("text",g?"&nbsp;":"new text");f("textangle");e.Lib.coerceFont(f,"font",c.font);l=["x","y"];
for(v=0;2>v;v++){var k=l[v],q={_fullLayout:c},m=e.Axes.coerceRef(b,h,q,k),E=.5;if("paper"!==m&&(q=e.Axes.getFromId(q,m),E=q.range[0]+E*(q.range[1]-q.range[0]),-1!==["date","category"].indexOf(q.type)&&"string"==typeof b[k])){var A;"date"===q.type?(A=e.Lib.dateTime2ms(b[k]),!1!==A&&(b[k]=A)):(q._categories||[]).length&&(A=q._categories.indexOf(b[k]),-1!==A&&(b[k]=A))}f(k,E);g||f(k+"anchor")}return e.Lib.noneOrAll(b,h,["x","y"]),h}function c(b){b._fullLayout.annotations.forEach(function(c){var d=e.Axes.getFromId(b,
c.xref),f=e.Axes.getFromId(b,c.yref);if(d||f){var h=(c._xsize||0)/2,g=c._xshift||0,l=(c._ysize||0)/2,k=c._yshift||0,q=h-g,h=h+g,g=l-k,l=l+k;c.showarrow&&(k=3*c.arrowsize*c.arrowwidth,q=Math.max(q,k),h=Math.max(h,k),g=Math.max(g,k),l=Math.max(l,k));d&&d.autorange&&e.Axes.expand(d,[d.l2c(c.x)],{ppadplus:h,ppadminus:q});f&&f.autorange&&e.Axes.expand(f,[f.l2c(c.y)],{ppadplus:l,ppadminus:g})}})}function l(b,c,d,e,f,h,g,k){d-=b;var l=f-b;f=g-f;e-=c;g=h-c;k-=h;h=d*k-f*e;if(0===h)return null;k=(l*k-f*g)/
h;l=(l*e-d*g)/h;return 0>l||1<l||0>k||1<k?null:{x:b+d*k,y:c+e*k}}var e=b("../../plotly"),f=b("d3"),v=b("fast-isnumeric"),d=m.exports={};d.ARROWPATHS=b("./arrow_paths");d.layoutAttributes=b("./attributes");d.supplyLayoutDefaults=function(b,c){for(var d=b.annotations||[],e=c.annotations=[],f=0;f<d.length;f++)e.push(h(d[f]||{},c))};d.drawAll=function(b){var c=b._fullLayout;c._infolayer.selectAll(".annotation").remove();for(var f=0;f<c.annotations.length;f++)d.draw(b,f);return e.Plots.previousPromises(b)};
d.add=function(b){e.relayout(b,"annotations["+b._fullLayout.annotations.length+"]","add")};d.draw=function(b,c,g,m){function u(b){return b.call(e.Drawing.font,Y).attr({"text-anchor":{left:"start",right:"end"}[K.align]||"middle"}),e.util.convertToTspans(b,r),b}function r(){W.selectAll("tspan.line").attr({y:0,x:0});var k=R.select(".annotation-math-group"),h=!k.empty(),g=e.Drawing.bBox((h?k:W).node()),r=g.width,u=g.height,v=Math.round(r+2*X),m=Math.round(u+2*X);K._w=r;K._h=u;var x=!1;if(["x","y"].forEach(function(c){var d,
f=e.Axes.getFromId(b,K[c+"ref"]||c),k=(M+("x"===c?0:90))*Math.PI/180,k=v*Math.abs(Math.cos(k))+m*Math.abs(Math.sin(k)),h=K[c+"anchor"];if(f){if(!f.autorange&&0<(K[c]-f.range[0])*(K[c]-f.range[1]))return void(x=!0);P[c]=f._offset+f.l2p(K[c]);d=.5}else d=K[c],"y"===c&&(d=1-d),P[c]="x"===c?C.l+C.w*d:C.t+C.h*d;var g=0;K.showarrow?d=K["a"+c]:(d=("auto"===h&&(h=1/3>d?"left":d>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[h]),d*=k);g=d;P[c]+=g;K["_"+c+"type"]=f&&f.type;K["_"+
c+"size"]=k;K["_"+c+"shift"]=g}),x)return void R.remove();var w,z;K.showarrow&&(w=e.Lib.constrain(P.x-K.ax,1,q.width-1),z=e.Lib.constrain(P.y-K.ay,1,q.height-1));P.x=e.Lib.constrain(P.x,1,q.width-1);P.y=e.Lib.constrain(P.y,1,q.height-1);r=X-g.top;g=X-g.left;h?k.select("svg").attr({x:X-1,y:X}):(W.attr({x:g,y:r}),W.selectAll("tspan.line").attr({y:r,x:g}));V.call(e.Drawing.setRect,S/2,S/2,v-S,m-S);R.call(e.Drawing.setRect,Math.round(P.x-v/2),Math.round(P.y-m/2),v,m);var y="annotations["+c+"]",A=function(k,
h){f.select(b).selectAll('.annotation-arrow-g[data-index="'+c+'"]').remove();var g=P.x+k,q=P.y+h,r=e.Lib.rotationXYMatrix(M,g,q),u=e.Lib.apply2DTransform(r),r=e.Lib.apply2DTransform2(r),v=V.attr("width")/2,m=V.attr("height")/2,r=[[g-v,q-m,g-v,q+m],[g-v,q+m,g+v,q+m],[g+v,q+m,g+v,q-m],[g+v,q-m,g-v,q-m]].map(r);if(!r.reduce(function(b,c){return b^!!l(w,z,w+1E6,z+1E6,c[0],c[1],c[2],c[3])},!1)){r.forEach(function(b){(b=l(g,q,w,z,b[0],b[1],b[2],b[3]))&&(g=b.x,q=b.y)});var r=K.arrowwidth,v=K.arrowcolor,
x=Q.append("g").style({opacity:e.Color.opacity(v)}).classed("annotation-arrow-g",!0).attr("data-index",String(c)),v=x.append("path").attr("d","M"+g+","+q+"L"+w+","+z).style("stroke-width",r+"px").call(e.Color.stroke,e.Color.rgb(v));d.arrowhead(v,K.arrowhead,"end",K.arrowsize);r=x.append("path").classed("annotation",!0).classed("anndrag",!0).attr({"data-index":String(c),d:"M3,3H-3V-3H3ZM0,0L"+(g-w)+","+(q-z),transform:"translate("+w+","+z+")"}).style("stroke-width",r+6+"px").call(e.Color.stroke,"rgba(0,0,0,0)").call(e.Color.fill,
"rgba(0,0,0,0)");if(b._context.editable){var A,B,G;e.Fx.dragElement({element:r.node(),prepFn:function(){B=Number(R.attr("x"));G=Number(R.attr("y"));A={};O&&O.autorange&&(A[O._name+".autorange"]=!0);L&&L.autorange&&(A[L._name+".autorange"]=!0)},moveFn:function(b,c){x.attr("transform","translate("+b+","+c+")");var d=u(B,G),f=d[0]+b,d=d[1]+c;R.call(e.Drawing.setPosition,f,d);A[y+".x"]=O?K.x+b/O._m:(w+b-C.l)/C.w;A[y+".y"]=L?K.y+c/L._m:1-(z+c-C.t)/C.h;T.attr({transform:"rotate("+M+","+f+","+d+")"})},doneFn:function(c){c&&
(e.relayout(b,A),(c=document.querySelector(".js-notes-box-panel"))&&c.redraw(c.selectedObj))}})}}};K.showarrow&&A(0,0);var k=e.Lib.rotationXYMatrix(M,P.x,P.y),B=e.Lib.apply2DTransform(k);if(b._context.editable){var G,F,E;e.Fx.dragElement({element:R.node(),prepFn:function(){G=Number(R.attr("x"));F=Number(R.attr("y"));E={}},moveFn:function(b,c){R.call(e.Drawing.setPosition,G+b,F+c);var d="pointer";if(K.showarrow)E[y+".ax"]=K.ax+b,E[y+".ay"]=K.ay+c,A(b,c);else{if(O)E[y+".x"]=K.x+b/O._m;else{var f=K._xsize/
C.w;E[y+".x"]=e.Fx.dragAlign(K.x+K._xshift/C.w-f/2+b/C.w,f,0,1,K.xanchor)}L?E[y+".y"]=K.y+c/L._m:(f=K._ysize/C.h,E[y+".y"]=e.Fx.dragAlign(K.y-K._yshift/C.h-f/2-c/C.h,f,0,1,K.yanchor));O&&L||(d=e.Fx.dragCursors(O?.5:E[y+".x"],L?.5:E[y+".y"],K.xanchor,K.yanchor))}var k=B(G,F),f=k[0]+b,k=k[1]+c;R.call(e.Drawing.setPosition,f,k);T.attr({transform:"rotate("+M+","+f+","+k+")"});e.Fx.setCursor(R,d)},doneFn:function(c){if(e.Fx.setCursor(R),c)e.relayout(b,E),(c=document.querySelector(".js-notes-box-panel"))&&
c.redraw(c.selectedObj)}})}}var y,k=b.layout,q=b._fullLayout;if(!v(c)||-1===c){if(!c&&Array.isArray(m))return k.annotations=m,d.supplyLayoutDefaults(k,q),void d.drawAll(b);if("remove"===m)return delete k.annotations,q.annotations=[],void d.drawAll(b);if(g&&"add"!==m){for(y=0;y<q.annotations.length;y++)d.draw(b,y,g,m);return}c=q.annotations.length;q.annotations.push({})}if(!g&&m){if("remove"===m){q._infolayer.selectAll('.annotation[data-index="'+c+'"]').remove();q.annotations.splice(c,1);k.annotations.splice(c,
1);for(y=c;y<q.annotations.length;y++)q._infolayer.selectAll('.annotation[data-index="'+(y+1)+'"]').attr("data-index",String(y)),d.draw(b,y);return}if("add"===m||e.Lib.isPlainObject(m))for(q.annotations.splice(c,0,{}),y=e.Lib.isPlainObject(m)?e.Lib.extendFlat({},m):{text:"New text"},k.annotations?k.annotations.splice(c,0,y):k.annotations=[y],y=q.annotations.length-1;y>c;y--)q._infolayer.selectAll('.annotation[data-index="'+(y-1)+'"]').attr("data-index",String(y)),d.draw(b,y)}q._infolayer.selectAll('.annotation[data-index="'+
c+'"]').remove();var z=k.annotations[c],k=q.annotations[c];if(z){var E={xref:z.xref,yref:z.yref},A={};"string"==typeof g&&g?A[g]=m:e.Lib.isPlainObject(g)&&(A=g);g=Object.keys(A);for(y=0;y<g.length;y++)m=g[y],e.Lib.nestedProperty(z,m).set(A[m]);var C=q._size;g=["x","y"];for(y=0;2>y;y++)if(m=g[y],void 0===A[m]&&void 0!==z[m]){var B=e.Axes.getFromId(b,e.Axes.coerceRef(E,{},b,m)),G=e.Axes.getFromId(b,e.Axes.coerceRef(z,{},b,m)),F=z[m],I=k["_"+m+"type"];if(void 0!==A[m+"ref"]){var D="auto"===z[m+"anchor"],
H=(k["_"+m+"size"]||0)/(2*("x"===m?C.w:C.h));if(B&&G)F=(F-B.range[0])/(B.range[1]-B.range[0]),F=G.range[0]+F*(G.range[1]-G.range[0]);else if(B){if(F=(F-B.range[0])/(B.range[1]-B.range[0]),F=B.domain[0]+F*(B.domain[1]-B.domain[0]),D)D=F+H,H=F-H,2/3>F+H?F=H:F+D>4/3&&(F=D)}else G&&(D&&(1/3>F?F+=H:F>2/3&&(F-=H)),F=(F-G.domain[0])/(G.domain[1]-G.domain[0]),F=G.range[0]+F*(G.range[1]-G.range[0]))}G&&G===B&&I&&("log"===I&&"log"!==G.type?F=Math.pow(10,F):"log"!==I&&"log"===G.type&&(F=0<F?Math.log(F)/Math.LN10:
void 0));z[m]=F}var K=h(z,q);q.annotations[c]=K;var O=e.Axes.getFromId(b,K.xref),L=e.Axes.getFromId(b,K.yref),P={x:0,y:0},M=+K.textangle||0,Q=q._infolayer.append("g").classed("annotation",!0).attr("data-index",String(c)).style("opacity",K.opacity).on("click",function(){b._dragging=!1;b.emit("plotly_clickannotation",{index:c,annotation:z,fullAnnotation:K})}),T=Q.append("g").classed("annotation-text-g",!0).attr("data-index",String(c)),R=T.append("svg").call(e.Drawing.setPosition,0,0),S=K.borderwidth,
X=S+K.borderpad,V=R.append("rect").attr("class","bg").style("stroke-width",S+"px").call(e.Color.stroke,K.bordercolor).call(e.Color.fill,K.bgcolor),Y=K.font,W=R.append("text").classed("annotation",!0).attr("data-unformatted",K.text).text(K.text);b._context.editable?W.call(e.util.makeEditable,R).call(u).on("edit",function(d){K.text=d;this.attr({"data-unformatted":K.text});this.call(u);d={};d["annotations["+c+"].text"]=K.text;O&&O.autorange&&(d[O._name+".autorange"]=!0);L&&L.autorange&&(d[L._name+".autorange"]=
!0);e.relayout(b,d)}):W.call(u);T.attr({transform:"rotate("+M+","+P.x+","+P.y+")"}).call(e.Drawing.setPosition,P.x,P.y)}};d.arrowhead=function(b,c,h,g){v(g)||(g=1);var l=b.node(),r=d.ARROWPATHS[c||0];if(r){"string"==typeof h&&h||(h="end");var m,k,q,z,E=(e.Drawing.getPx(b,"stroke-width")||1)*g,A=b.style("stroke")||e.Color.defaultLine,C=b.style("stroke-opacity")||1;g=0<=h.indexOf("start");h=0<=h.indexOf("end");var B=r.backoff*E;if("line"===l.nodeName){if(m={x:+b.attr("x1"),y:+b.attr("y1")},k={x:+b.attr("x2"),
y:+b.attr("y2")},q=Math.atan2(m.y-k.y,m.x-k.x),z=q+Math.PI,B){var G=B*Math.cos(q),B=B*Math.sin(q);g&&(m.x-=G,m.y-=B,b.attr({x1:m.x,y1:m.y}));h&&(k.x+=G,k.y+=B,b.attr({x2:k.x,y2:k.y}))}}else if("path"===l.nodeName){var G=l.getTotalLength(),F="";g&&(m=l.getPointAtLength(0),q=l.getPointAtLength(.1),q=Math.atan2(m.y-q.y,m.x-q.x),m=l.getPointAtLength(Math.min(B,G)),B&&(F="0px,"+B+"px,"));if(h){if(k=l.getPointAtLength(G),z=l.getPointAtLength(G-.1),z=Math.atan2(k.y-z.y,k.x-z.x),k=l.getPointAtLength(Math.max(0,
G-B)),B)F+=G-(F?2*B:B)+"px,"+G+"px"}else F&&(F+=G+"px");F&&b.style("stroke-dasharray",F)}B=function(d,e){5<c&&(e=0);f.select(l.parentElement).append("path").attr({"class":b.attr("class"),d:r.path,transform:"translate("+d.x+","+d.y+")rotate("+180*e/Math.PI+")scale("+E+")"}).style({fill:A,opacity:C,"stroke-width":0})};g&&B(m,q);h&&B(k,z)}};d.calcAutorange=function(b){var f=b._fullLayout.annotations;if(f.length&&b._fullData.length){var h={};f.forEach(function(b){h[b.xref]=!0;h[b.yref]=!0});if(e.Axes.list(b).filter(function(b){return b.autorange&&
h[b._id]}).length)return e.Lib.syncOrAsync([d.drawAll,c],b)}}},{"../../plotly":348,"./arrow_paths":280,"./attributes":281,d3:53,"fast-isnumeric":58}],283:[function(b,m,g){g.defaults="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");g.defaultLine="#444";g.lightLine="#eee";g.background="#fff"},{}],284:[function(b,m,g){function h(b){if(l(b)||"string"!=typeof b)return b;var c=b.trim();if("rgb"!==c.substr(0,3))return b;var d=c.match(/^rgba?\s*\(([^()]*)\)$/);
if(!d)return b;d=d[1].trim().split(/\s*[\s,]\s*/);c="a"===c.charAt(3)&&4===d.length;if(!c&&3!==d.length)return b;for(var e=0;e<d.length;e++){if(!(d[e].length&&(d[e]=Number(d[e]),0<=d[e])))return b;if(3===e)1<d[e]&&(d[e]=1);else if(1<=d[e])return b}b=Math.round(255*d[0])+", "+Math.round(255*d[1])+", "+Math.round(255*d[2]);return c?"rgba("+b+", "+d[3]+")":"rgb("+b+")"}var c=b("tinycolor2"),l=b("fast-isnumeric"),e=m.exports={};b=b("./attributes");e.defaults=b.defaults;e.defaultLine=b.defaultLine;e.lightLine=
b.lightLine;e.background=b.background;e.tinyRGB=function(b){b=b.toRgb();return"rgb("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+")"};e.rgb=function(b){return e.tinyRGB(c(b))};e.opacity=function(b){return b?c(b).getAlpha():0};e.addOpacity=function(b,e){var d=c(b).toRgb();return"rgba("+Math.round(d.r)+", "+Math.round(d.g)+", "+Math.round(d.b)+", "+e+")"};e.combine=function(b,h){var d=c(b).toRgb();if(1===d.a)return c(b).toRgbString();var g=c(h||e.background).toRgb(),g=1===g.a?g:{r:255*
(1-g.a)+g.r*g.a,g:255*(1-g.a)+g.g*g.a,b:255*(1-g.a)+g.b*g.a};return c({r:g.r*(1-d.a)+d.r*d.a,g:g.g*(1-d.a)+d.g*d.a,b:g.b*(1-d.a)+d.b*d.a}).toRgbString()};e.stroke=function(b,h){var d=c(h);b.style({stroke:e.tinyRGB(d),"stroke-opacity":d.getAlpha()})};e.fill=function(b,h){var d=c(h);b.style({fill:e.tinyRGB(d),"fill-opacity":d.getAlpha()})};e.clean=function(b){if(b&&"object"==typeof b){var c,d,g,l,m=Object.keys(b);for(c=0;c<m.length;c++)if(g=m[c],l=b[g],"color"===g.substr(g.length-5))if(Array.isArray(l))for(d=
0;d<l.length;d++)l[d]=h(l[d]);else b[g]=h(l);else if("colorscale"===g.substr(g.length-10)&&Array.isArray(l))for(d=0;d<l.length;d++)Array.isArray(l[d])&&(l[d][1]=h(l[d][1]));else if(Array.isArray(l)){if(d=l[0],!Array.isArray(d)&&d&&"object"==typeof d)for(d=0;d<l.length;d++)e.clean(l[d])}else l&&"object"==typeof l&&e.clean(l)}}},{"./attributes":283,"fast-isnumeric":58,tinycolor2:213}],285:[function(b,m,g){g=b("../../plots/cartesian/layout_attributes");var h=b("../../plots/font_attributes");b=b("../../lib/extend").extendFlat;
m.exports={thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],
dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:g.linecolor,outlinewidth:g.linewidth,bordercolor:g.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:b({},g.ticks,{dflt:""}),ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:g.tickfont,tickangle:g.tickangle,tickformat:g.tickformat,
tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,exponentformat:g.exponentformat,showexponent:g.showexponent,title:{valType:"string",dflt:"Click to enter colorscale title"},titlefont:b({},h,{}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},{"../../lib/extend":328,"../../plots/cartesian/layout_attributes":353,"../../plots/font_attributes":354}],286:[function(b,m,g){var h=b("../../plots/cartesian/axes"),c=
b("../../lib"),l=b("./attributes");m.exports=function(b,f,g){function d(b,d){return c.coerce(t,p,l,b,d)}var p=f.colorbar={},t=b.colorbar||{};b=d("thicknessmode");d("thickness","fraction"===b?30/(g.width-g.margin.l-g.margin.r):30);b=d("lenmode");d("len","fraction"===b?1:g.height-g.margin.t-g.margin.b);d("x");d("xanchor");d("xpad");d("y");d("yanchor");d("ypad");c.noneOrAll(t,p,["x","y"]);d("outlinecolor");d("outlinewidth");d("bordercolor");d("borderwidth");d("bgcolor");h.handleTickValueDefaults(t,p,
d,"linear");h.handleTickDefaults(t,p,d,"linear",{outerTicks:!1,font:g.font,noHover:!0});d("title");c.coerceFont(d,"titlefont",g.font);d("titleside")}},{"../../lib":332,"../../plots/cartesian/axes":351,"./attributes":285}],287:[function(b,m,g){var h=b("d3"),c=b("../../plotly"),l=b("./attributes");m.exports=function(b,f){function g(){function l(b,d){return c.Lib.coerce(P,M,c.Axes.layoutAttributes,b,d)}var t=b._fullLayout;if("function"!=typeof d.fillcolor&&"function"!=typeof d.line.color)return void t._infolayer.selectAll("g."+
f).remove();var m,w=h.extent(("function"==typeof d.fillcolor?d.fillcolor:d.line.color).domain()),u=[],r=[],y="function"==typeof d.line.color?d.line.color:function(){return d.line.color},k="function"==typeof d.fillcolor?d.fillcolor:function(){return d.fillcolor},q=d.levels.end+d.levels.size/100,z=d.levels.size,E=1.001*w[0]-.001*w[1],A=1.001*w[1]-.001*w[0];for(m=d.levels.start;0>(m-q)*z;m+=z)m>E&&A>m&&u.push(m);if("function"==typeof d.fillcolor)if(d.filllevels)for(q=d.filllevels.end+d.filllevels.size/
100,z=d.filllevels.size,m=d.filllevels.start;0>(m-q)*z;m+=z)m>w[0]&&m<w[1]&&r.push(m);else r=u.map(function(b){return b-d.levels.size/2}),r.push(r[r.length-1]+d.levels.size);else d.fillcolor&&"string"==typeof d.fillcolor&&(r=[0]);0>d.levels.size&&(u.reverse(),r.reverse());var C;m=t.height-t.margin.t-t.margin.b;var q=t.width-t.margin.l-t.margin.r,B=Math.round(d.thickness*("fraction"===d.thicknessmode?q:1)),G=B/t._size.w,z=Math.round(d.len*("fraction"===d.lenmode?m:1)),F=z/t._size.h,q=d.xpad/t._size.w,
I=(d.borderwidth+d.outlinewidth)/2;m=d.ypad/t._size.h;var D=Math.round(d.x*t._size.w+d.xpad),H=d.x-G*({middle:.5,right:1}[d.xanchor]||0),K=d.y+F*(({top:-.5,bottom:.5}[d.yanchor]||0)-.5),O=Math.round(t._size.h*(1-K)),L=O-z,P={type:"linear",range:w,tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:d.ticks,ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,tickfont:d.tickfont,tickangle:d.tickangle,
tickformat:d.tickformat,exponentformat:d.exponentformat,showexponent:d.showexponent,showtickprefix:d.showtickprefix,tickprefix:d.tickprefix,showticksuffix:d.showticksuffix,ticksuffix:d.ticksuffix,title:d.title,titlefont:d.titlefont,anchor:"free",position:1},M={},z={letter:"y",font:t.font,noHover:!0};if(c.Axes.handleAxisDefaults(P,M,l,z),c.Axes.handleAxisPositioningDefaults(P,M,l,z),M._id="y"+f,M._td=b,M.position=d.x+q+G,g.axis=M,-1!==["top","bottom"].indexOf(d.titleside)&&(M.titleside=d.titleside,
M.titlex=d.x+q,M.titley=K+("top"===d.titleside?F-m:m)),d.line.color&&"auto"===d.tickmode)M.tickmode="linear",M.tick0=d.levels.start,q=d.levels.size,z=c.Lib.constrain((O-L)/50,4,15)+1,z=(w[1]-w[0])/((d.nticks||z)*q),1<z&&(E=Math.pow(10,Math.floor(Math.log(z)/Math.LN10)),q=q*E*c.Lib.roundUp(z/E,[2,5,10]),2E-6>(Math.abs(d.levels.start)/d.levels.size+1E-6)%1&&(M.tick0=0)),M.dtick=q;M.domain=[K+m,K+F-m];M.setScale();var Q=t._infolayer.selectAll("g."+f).data([0]);Q.enter().append("g").classed(f,!0).each(function(){var b=
h.select(this);b.append("rect").classed("cbbg",!0);b.append("g").classed("cbfills",!0);b.append("g").classed("cblines",!0);b.append("g").classed("cbaxis",!0).classed("crisp",!0);b.append("g").classed("cbtitleunshift",!0).append("g").classed("cbtitle",!0);b.append("rect").classed("cboutline",!0)});Q.attr("transform","translate("+Math.round(t._size.l)+","+Math.round(t._size.t)+")");var T=Q.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(t._size.l)+",-"+Math.round(t._size.t)+")");
M._axislayer=Q.select(".cbaxis");var R=0;-1!==["top","bottom"].indexOf(d.titleside)&&c.Titles.draw(b,M._id+"title");m=c.Lib.syncOrAsync([c.Plots.previousPromises,function(){if(-1!==["top","bottom"].indexOf(d.titleside)){var f=Q.select(".cbtitle"),g=f.select("text"),l=[-d.outlinewidth/2,d.outlinewidth/2],q=f.select(".h"+M._id+"title-math-group").node(),p=15.6;if(g.node()&&(p=1.3*parseInt(g.style("font-size"),10)),q?(R=c.Drawing.bBox(q).height,R>p&&(l[1]-=(R-p)/2)):g.node()&&!g.classed("js-placeholder")&&
(R=c.Drawing.bBox(f.node()).height),R)(R+=5,"top"===d.titleside)?(M.domain[1]-=R/t._size.h,l[1]*=-1):(M.domain[0]+=R/t._size.h,g=Math.max(1,g.selectAll("tspan.line").size()),l[1]+=(1-g)*p),f.attr("transform","translate("+l+")"),M.setScale()}Q.selectAll(".cbfills,.cblines,.cbaxis").attr("transform","translate(0,"+Math.round(t._size.h*(1-M.domain[1]))+")");f=Q.select(".cbfills").selectAll("rect.cbfill").data(r);f.enter().append("rect").classed("cbfill",!0).style("stroke","none");f.exit().remove();f.each(function(b,
c){var d=[0===c?w[0]:(r[c]+r[c-1])/2,c===r.length-1?w[1]:(r[c]+r[c+1])/2].map(M.c2p).map(Math.round);c!==r.length-1&&(d[1]+=d[1]>d[0]?1:-1);h.select(this).attr({x:D,width:Math.max(B,2),y:h.min(d),height:Math.max(h.max(d)-h.min(d),2)}).style("fill",k(b))});f=Q.select(".cblines").selectAll("path.cbline").data(d.line.color&&d.line.width?u:[]);return f.enter().append("path").classed("cbline",!0),f.exit().remove(),f.each(function(b){h.select(this).attr("d","M"+D+","+(Math.round(M.c2p(b))+d.line.width/
2%1)+"h"+B).call(c.Drawing.lineGroupStyle,d.line.width,y(b),d.line.dash)}),M._axislayer.selectAll("g."+M._id+"tick,path").remove(),M._pos=D+B+(d.outlinewidth||0)/2-("outside"===d.ticks?1:0),M.side="right",c.Axes.doTicks(b,M)},c.Plots.previousPromises,function(){var k=B+d.outlinewidth/2+c.Drawing.bBox(M._axislayer.node()).width;if(C=T.select("text"),C.node()&&!C.classed("js-placeholder")){var h;h=(h=T.select(".h"+M._id+"title-math-group").node())&&-1!==["top","bottom"].indexOf(d.titleside)?c.Drawing.bBox(h).width:
c.Drawing.bBox(T.node()).right-D-t._size.l;k=Math.max(k,h)}k=2*d.xpad+k+d.borderwidth+d.outlinewidth/2;h=O-L;Q.select(".cbbg").attr({x:D-d.xpad-(d.borderwidth+d.outlinewidth)/2,y:L-I,width:Math.max(k,2),height:Math.max(h+2*I,2)}).call(c.Color.fill,d.bgcolor).call(c.Color.stroke,d.bordercolor).style({"stroke-width":d.borderwidth});Q.selectAll(".cboutline").attr({x:D,y:L+d.ypad+("top"===d.titleside?R:0),width:Math.max(B,2),height:Math.max(h-2*d.ypad-R,2)}).call(c.Color.stroke,d.outlinecolor).style({fill:"None",
"stroke-width":d.outlinewidth});Q.attr("transform","translate("+(t._size.l-({center:.5,right:1}[d.xanchor]||0)*k)+","+t._size.t+")");c.Plots.autoMargin(b,f,{x:d.x,y:d.y,l:k*({right:1,center:.5}[d.xanchor]||0),r:k*({left:1,center:.5}[d.xanchor]||0),t:h*({bottom:1,middle:.5}[d.yanchor]||0),b:h*({top:1,middle:.5}[d.yanchor]||0)})}],b);if(m&&m.then&&(b._promises||[]).push(m),b._context.editable){var S,X,V;c.Fx.dragElement({element:Q.node(),prepFn:function(){S=Q.attr("transform");c.Fx.setCursor(Q)},moveFn:function(f,
k){var h=b._fullLayout._size;Q.attr("transform",S+" translate("+f+","+k+")");X=c.Fx.dragAlign(H+f/h.w,G,0,1,d.xanchor);V=c.Fx.dragAlign(K-k/h.h,F,0,1,d.yanchor);h=c.Fx.dragCursors(X,V,d.xanchor,d.yanchor);c.Fx.setCursor(Q,h)},doneFn:function(d){if(c.Fx.setCursor(Q),d&&void 0!==X&&void 0!==V){var k,h=f.substr(2);b._fullData.some(function(b){return b.uid===h?(k=b.index,!0):void 0});c.restyle(b,{"colorbar.x":X,"colorbar.y":V},k)}}})}return m}var d={};return Object.keys(l).forEach(function(b){d[b]=null}),
d.fillcolor=null,d.line={color:null,width:null,dash:null},d.levels={start:null,end:null,size:null},d.filllevels=null,Object.keys(d).forEach(function(b){g[b]=function(e){return arguments.length?(d[b]=c.Lib.isPlainObject(d[b])?c.Lib.extendFlat(d[b],e):e,g):d[b]}}),g.options=function(b){return Object.keys(b).forEach(function(c){"function"==typeof g[c]&&g[c](b[c])}),g},g._opts=d,g}},{"../../plotly":348,"./attributes":285,d3:53}],288:[function(b,m,g){m.exports=function(b){return"object"==typeof b.colorbar&&
null!==b.colorbar}},{}],289:[function(b,m,g){g.attributes=b("./attributes");g.supplyDefaults=b("./defaults");g.draw=b("./draw");g.hasColorbar=b("./has_colorbar")},{"./attributes":285,"./defaults":286,"./draw":287,"./has_colorbar":288}],290:[function(b,m,g){m.exports={zauto:{valType:"boolean",dflt:!0},zmin:{valType:"number",dflt:null},zmax:{valType:"number",dflt:null},colorscale:{valType:"colorscale"},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1},showscale:{valType:"boolean",
dflt:!0},_deprecated:{scl:{valType:"colorscale"},reversescl:{valType:"boolean"}}}},{}],291:[function(b,m,g){var h=b("../../lib"),c=b("./scales"),l=b("./flip_scale");m.exports=function(b,f,g,d){var p,t;g?(p=h.nestedProperty(b,g).get(),t=h.nestedProperty(b._input,g).get()):(p=b,t=b._input);b=p[d+"auto"];g=p[d+"min"];var m=p[d+"max"],w=p.colorscale;!1===b&&void 0!==g||(g=h.aggNums(Math.min,null,f));!1===b&&void 0!==m||(m=h.aggNums(Math.max,null,f));g===m&&(g-=.5,m+=.5);p[d+"min"]=g;p[d+"max"]=m;t[d+
"min"]=g;t[d+"max"]=m;p.autocolorscale&&(w=0>g*m?c.RdBu:0<=g?c.Reds:c.Blues,t.colorscale=w,p.reversescale&&(w=l(w)),p.colorscale=w)}},{"../../lib":332,"./flip_scale":294,"./scales":301}],292:[function(b,m,g){b=b("./scales");m.exports=b.RdBu},{"./scales":301}],293:[function(b,m,g){var h=b("fast-isnumeric"),c=b("../../lib"),l=b("../colorbar/has_colorbar"),e=b("../colorbar/defaults"),f=b("./is_valid_scale"),v=b("./flip_scale");m.exports=function(b,g,t,m,w){var u=w.prefix;w=w.cLetter;var r=u.slice(0,
u.length-1);b=u?c.nestedProperty(b,r).get()||{}:b;g=u?c.nestedProperty(g,r).get()||{}:g;var y=b[w+"min"],k=b[w+"max"],r=b.colorscale,y=h(y)&&h(k)&&k>y;m(u+w+"auto",!y);m(u+w+"min");m(u+w+"max");var q;void 0!==r&&(q=!f(r));m(u+"autocolorscale",q);q=m(u+"colorscale");if(m(u+"reversescale")&&(g.colorscale=v(q)),"marker.line."!==u){var z;u&&(z=l(b));m(u+"showscale",z)&&e(b,g,t)}}},{"../../lib":332,"../colorbar/defaults":286,"../colorbar/has_colorbar":288,"./flip_scale":294,"./is_valid_scale":298,"fast-isnumeric":58}],
294:[function(b,m,g){m.exports=function(b){var c;c=b.length;for(var g=Array(c),e=c-1,f=0;0<=e;e--,f++)c=b[e],g[f]=[1-c[0],c[1]];return g}},{}],295:[function(b,m,g){var h=b("./scales"),c=b("./default_scale"),l=b("./is_valid_scale_array");m.exports=function(b,f){function g(){try{b=h[b]||JSON.parse(b)}catch(c){b=f}}return f||(f=c),b?("string"==typeof b&&(g(),"string"==typeof b&&g()),l(b)?b:f):f}},{"./default_scale":292,"./is_valid_scale_array":299,"./scales":301}],296:[function(b,m,g){var h=b("fast-isnumeric"),
c=b("../../lib"),l=b("./is_valid_scale");m.exports=function(b,f){var g=f?c.nestedProperty(b,f).get()||{}:b,d=g.color,p=!1;if(Array.isArray(d))for(var t=0;t<d.length;t++)if(h(d[t])){p=!0;break}return"object"==typeof g&&null!==g&&(p||!0===g.showscale||h(g.cmin)&&h(g.cmax)||l(g.colorscale)||"object"==typeof g.colorbar&&null!==g.colorbar)}},{"../../lib":332,"./is_valid_scale":298,"fast-isnumeric":58}],297:[function(b,m,g){g.scales=b("./scales");g.defaultScale=b("./default_scale");g.attributes=b("./attributes");
g.handleDefaults=b("./defaults");g.calc=b("./calc");g.hasColorscale=b("./has_colorscale");g.isValidScale=b("./is_valid_scale");g.getScale=b("./get_scale");g.flipScale=b("./flip_scale");g.makeScaleFunction=b("./make_scale_function")},{"./attributes":290,"./calc":291,"./default_scale":292,"./defaults":293,"./flip_scale":294,"./get_scale":295,"./has_colorscale":296,"./is_valid_scale":298,"./make_scale_function":300,"./scales":301}],298:[function(b,m,g){var h=b("./scales"),c=b("./is_valid_scale_array");
m.exports=function(b){return void 0!==h[b]?!0:c(b)}},{"./is_valid_scale_array":299,"./scales":301}],299:[function(b,m,g){var h=b("tinycolor2");m.exports=function(b){var g,e=!0,f=0;if(Array.isArray(b)){if(0!==+b[0][0]||1!==+b[b.length-1][0])return!1;for(var v=0;v<b.length;v++){if(g=b[v],2!==g.length||+g[0]<f||!h(g[1]).isValid()){e=!1;break}f=+g[0]}return e}return!1}},{tinycolor2:213}],300:[function(b,m,g){var h=b("d3"),c=b("tinycolor2"),l=b("fast-isnumeric"),e=b("../color");m.exports=function(b,g,
d){for(var p,t=b.length,m=Array(t),w=Array(t),u=0;t>u;u++)p=b[u],m[u]=g+p[0]*(d-g),w[u]=p[1];var r=h.scale.linear().domain(m).interpolate(h.interpolateRgb).range(w);return function(b){return l(b)?r(b):c(b).isValid()?b:e.defaultLine}}},{"../color":284,d3:53,"fast-isnumeric":58,tinycolor2:213}],301:[function(b,m,g){m.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YIGnBu:[[0,"rgb(8, 29, 88)"],[.125,"rgb(37, 52, 148)"],[.25,"rgb(34, 94, 168)"],[.375,"rgb(29, 145, 192)"],[.5,"rgb(65, 182, 196)"],
[.625,"rgb(127, 205, 187)"],[.75,"rgb(199, 233, 180)"],[.875,"rgb(237, 248, 217)"],[1,"rgb(255, 255, 217)"]],Greens:[[0,"rgb(0, 68, 27)"],[.125,"rgb(0, 109, 44)"],[.25,"rgb(35, 139, 69)"],[.375,"rgb(65, 171, 93)"],[.5,"rgb(116, 196, 118)"],[.625,"rgb(161, 217, 155)"],[.75,"rgb(199, 233, 192)"],[.875,"rgb(229, 245, 224)"],[1,"rgb(247, 252, 245)"]],YIOrRd:[[0,"rgb(128, 0, 38)"],[.125,"rgb(189, 0, 38)"],[.25,"rgb(227, 26, 28)"],[.375,"rgb(252, 78, 42)"],[.5,"rgb(253, 141, 60)"],[.625,"rgb(254, 178, 76)"],
[.75,"rgb(254, 217, 118)"],[.875,"rgb(255, 237, 160)"],[1,"rgb(255, 255, 204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5, 10, 172)"],[.35,"rgb(106, 137, 247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220, 170, 132)"],[.7,"rgb(230, 145, 90)"],[1,"rgb(178, 10, 28)"]],Reds:[[0,"rgb(220, 220, 220)"],[.2,"rgb(245, 195, 157)"],[.4,"rgb(245, 160, 105)"],[1,"rgb(178, 10, 28)"]],Blues:[[0,"rgb(5, 10, 172)"],[.35,"rgb(40, 60, 190)"],[.5,"rgb(70, 100, 245)"],[.6,"rgb(90, 120, 245)"],[.7,"rgb(106, 137, 247)"],
[1,"rgb(220, 220, 220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0, 0, 200)"],[.25,"rgb(0, 25, 255)"],[.375,"rgb(0, 152, 255)"],[.5,"rgb(44, 255, 150)"],[.625,"rgb(151, 255, 0)"],[.75,"rgb(255, 234, 0)"],[.875,"rgb(255, 111, 0)"],[1,"rgb(255, 0, 0)"]],
Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],
[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,
"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]]}},{}],302:[function(b,m,g){function h(b,c,d,e){var f=b[0]-c[0],h=b[1]-c[1],g=d[0]-c[0],p=d[1]-c[1];d=Math.pow(f*f+h*h,t/2);b=Math.pow(g*g+p*p,t/2);f=(b*b*f-d*d*g)*e;e*=b*b*h-d*d*p;h=3*b*(d+b);d=3*d*(d+b);return[[l.round(c[0]+(h&&f/h),2),l.round(c[1]+(h&&e/h),2)],[l.round(c[0]-(d&&f/d),2),l.round(c[1]-
(d&&e/d),2)]]}var c=b("../../plotly"),l=b("d3"),e=b("fast-isnumeric"),f=m.exports={};f.font=function(b,d,e,f){d&&d.family&&(f=d.color,e=d.size,d=d.family);d&&b.style("font-family",d);e+1&&b.style("font-size",e+"px");f&&b.call(c.Color.fill,f)};f.setPosition=function(b,c,d){b.attr("x",c).attr("y",d)};f.setSize=function(b,c,d){b.attr("width",c).attr("height",d)};f.setRect=function(b,c,d,e,h){b.call(f.setPosition,c,d).call(f.setSize,e,h)};f.translatePoints=function(b,c,d){b.each(function(b){var f=b.xp||
c.c2p(b.x);b=b.yp||d.c2p(b.y);var h=l.select(this);e(f)&&e(b)?"text"===this.nodeName?h.attr("x",f).attr("y",b):h.attr("transform","translate("+f+","+b+")"):h.remove()})};f.getPx=function(b,c){return Number(b.style(c).replace(/px$/,""))};f.crispRound=function(b,c,d){return c&&e(c)?b._context.staticPlot?c:1>c?1:Math.round(c):d||0};f.lineGroupStyle=function(b,d,e,h){b.style("fill","none").each(function(b){b=(((b||[])[0]||{}).trace||{}).line||{};var g=d||b.width||0,p=h||b.dash||"";l.select(this).call(c.Color.stroke,
e||b.color).call(f.dashLine,p,g)})};f.dashLine=function(b,c,d){var e=Math.max(d,3);"solid"===c?c="":"dot"===c?c=e+"px,"+e+"px":"dash"===c?c=3*e+"px,"+3*e+"px":"longdash"===c?c=5*e+"px,"+5*e+"px":"dashdot"===c?c=3*e+"px,"+e+"px,"+e+"px,"+e+"px":"longdashdot"===c&&(c=5*e+"px,"+2*e+"px,"+e+"px,"+2*e+"px");b.style({"stroke-dasharray":c,"stroke-width":d+"px"})};f.fillGroupStyle=function(b){b.style("stroke-width",0).each(function(d){var e=l.select(this);try{e.call(c.Color.fill,d[0].trace.fillcolor)}catch(f){console.log(f,
b),e.remove()}})};var v=b("./symbol_defs");f.symbolNames=[];f.symbolFuncs=[];f.symbolNeedLines={};f.symbolNoDot={};f.symbolList=[];Object.keys(v).forEach(function(b){var c=v[b];f.symbolList=f.symbolList.concat([c.n,b,c.n+100,b+"-open"]);f.symbolNames[c.n]=b;f.symbolFuncs[c.n]=c.f;c.needLine&&(f.symbolNeedLines[c.n]=!0);c.noDot?f.symbolNoDot[c.n]=!0:f.symbolList=f.symbolList.concat([c.n+200,b+"-dot",c.n+300,b+"-open-dot"])});var d=f.symbolNames.length;f.symbolNumber=function(b){if("string"==typeof b){var c=
0;0<b.indexOf("-open")&&(c=100,b=b.replace("-open",""));0<b.indexOf("-dot")&&(c+=200,b=b.replace("-dot",""));b=f.symbolNames.indexOf(b);0<=b&&(b+=c)}return b%100>=d||400<=b?0:Math.floor(Math.max(b,0))};f.pointStyle=function(b,d){if(b.size()){var e=d.marker,h=e.line;if(c.Plots.traceIs(d,"symbols")){var g=c.Scatter.getBubbleSizeFn(d);b.attr("d",function(b){var h;h="various"===b.ms||"various"===e.size?3:c.Scatter.isBubble(d)?g(b.ms):(e.size||6)/2;b.mrc=h;var l=f.symbolNumber(b.mx||e.symbol)||0;return b.om=
100<=l%200,f.symbolFuncs[l%100](h)+(200<=l?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}).style("opacity",function(b){return(b.mo+1||e.opacity+1)-1})}var p=(d._input||{}).marker||{},t=f.tryColorscale(e,p,""),u=f.tryColorscale(e,p,"line.");b.each(function(b){var d,f,g;b.so?(g=h.outlierwidth,f=h.outliercolor,d=e.outliercolor):(g=(b.mlw+1||h.width+1||(b.trace?b.trace.marker.line.width:0)+1)-1,f="mlc"in b?b.mlcc=u(b.mlc):Array.isArray(h.color)?c.Color.defaultLine:h.color,d="mc"in b?b.mcc=t(b.mc):Array.isArray(e.color)?
c.Color.defaultLine:e.color||"rgba(0,0,0,0)");var p=l.select(this);b.om?p.call(c.Color.stroke,d).style({"stroke-width":(g||1)+"px",fill:"none"}):(p.style("stroke-width",g+"px").call(c.Color.fill,d),g&&p.call(c.Color.stroke,f))})}};f.tryColorscale=function(b,d,f){var h=c.Lib.nestedProperty(b,f+"color").get(),g=c.Lib.nestedProperty(b,f+"colorscale").get(),l=c.Lib.nestedProperty(b,f+"cauto").get(),p=c.Lib.nestedProperty(b,f+"cmin");b=c.Lib.nestedProperty(b,f+"cmax");var t=p.get(),u=b.get();return g&&
Array.isArray(h)?(!l&&e(t)&&e(u)||(t=1/0,u=-(1/0),h.forEach(function(b){e(b)&&(t>b&&(t=+b),b>u&&(u=+b))}),t>u&&(t=0,u=1),p.set(t),b.set(u),c.Lib.nestedProperty(d,f+"cmin").set(t),c.Lib.nestedProperty(d,f+"cmax").set(u)),c.Colorscale.makeScaleFunction(g,t,u)):c.Lib.identity};var p={start:1,end:-1,middle:0,bottom:1,top:-1};f.textPointStyle=function(b,d){b.each(function(b){var h=l.select(this),g=b.tx||d.text;if(!g||Array.isArray(g))return void h.remove();var r=b.tp||d.textposition,t=-1!==r.indexOf("top")?
"top":-1!==r.indexOf("bottom")?"bottom":"middle",r=-1!==r.indexOf("left")?"end":-1!==r.indexOf("right")?"start":"middle",u=b.ts||d.textfont.size,v=b.mrc?b.mrc/.8+1:0,u=e(u)&&0<u?u:0;h.call(f.font,b.tf||d.textfont.family,u,b.tc||d.textfont.color).attr("text-anchor",r).text(g).call(c.util.convertToTspans);b=l.select(this.parentNode);var g=h.selectAll("tspan.line"),m=1.3*((g[0].length||1)-1)+1;b.attr("transform","translate("+p[r]*v+","+(.75*u+p[t]*v+(p[t]-1)*m*u/2)+")");1<m&&g.attr({x:h.attr("x"),y:h.attr("y")})})};
var t=.5;f.smoothopen=function(b,c){if(3>b.length)return"M"+b.join("L");var d,e="M"+b[0],f=[];for(d=1;d<b.length-1;d++)f.push(h(b[d-1],b[d],b[d+1],c));e+="Q"+f[0][0]+" "+b[1];for(d=2;d<b.length-1;d++)e+="C"+f[d-2][1]+" "+f[d-1][0]+" "+b[d];return e+("Q"+f[b.length-3][1]+" "+b[b.length-1])};f.smoothclosed=function(b,c){if(3>b.length)return"M"+b.join("L")+"Z";var d,e="M"+b[0],f=b.length-1,g=[h(b[f],b[0],b[1],c)];for(d=1;f>d;d++)g.push(h(b[d-1],b[d],b[d+1],c));g.push(h(b[f-1],b[f],b[0],c));for(d=1;f>=
d;d++)e+="C"+g[d-1][1]+" "+g[d][0]+" "+b[d];return e+("C"+g[f][1]+" "+g[0][0]+" "+b[0]+"Z")};var x={hv:function(b,c){return"H"+l.round(c[0],2)+"V"+l.round(c[1],2)},vh:function(b,c){return"V"+l.round(c[1],2)+"H"+l.round(c[0],2)},hvh:function(b,c){return"H"+l.round((b[0]+c[0])/2,2)+"V"+l.round(c[1],2)+"H"+l.round(c[0],2)},vhv:function(b,c){return"V"+l.round((b[1]+c[1])/2,2)+"H"+l.round(c[0],2)+"V"+l.round(c[1],2)}},w=function(b,c){return"L"+l.round(c[0],2)+","+l.round(c[1],2)};f.steps=function(b){var c=
x[b]||w;return function(b){for(var d="M"+l.round(b[0][0],2)+","+l.round(b[0][1],2),e=1;e<b.length;e++)d+=c(b[e-1],b[e]);return d}};f.makeTester=function(b){var c=l.select("body").selectAll("#js-plotly-tester").data([0]);c.enter().append("svg").attr({id:"js-plotly-tester",xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink"}).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px"});var d=c.selectAll(".js-reference-point").data([0]);
d.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"});c.node()._cache||(c.node()._cache={});b._tester=c;b._testref=d};var u=[];f.bBox=function(b){var d=b.attributes["data-bb"];if(d&&d.value)return c.Lib.extendFlat({},u[d.value]);var e=l.select("#js-plotly-tester"),d=e.node(),f=b.cloneNode(!0);d.appendChild(f);l.select(f).attr({x:0,y:0,transform:""});var h=f.getBoundingClientRect(),e=e.select(".js-reference-point").node().getBoundingClientRect();
d.removeChild(f);d={height:h.height,width:h.width,left:h.left-e.left,top:h.top-e.top,right:h.right-e.left,bottom:h.bottom-e.top};return 1E4<=u.length&&(l.selectAll("[data-bb]").attr("data-bb",null),u=[]),b.setAttribute("data-bb",u.length),u.push(d),c.Lib.extendFlat({},d)};f.setClipUrl=function(b,c){if(!c)return void b.attr("clip-path",null);var d="#"+c,e=l.select("base");e.size()&&e.attr("href")&&(d=window.location.href+d);b.attr("clip-path","url("+d+")")}},{"../../plotly":348,"./symbol_defs":303,
d3:53,"fast-isnumeric":58}],303:[function(b,m,g){var h=b("d3");m.exports={circle:{n:0,f:function(b){b=h.round(b,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(b){b=h.round(b,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(b){b=h.round(1.3*b,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(b){var g=h.round(.4*b,2);b=h.round(1.2*b,2);return"M"+b+","+g+"H"+g+"V"+b+"H-"+g+"V"+g+"H-"+b+"V-"+g+"H-"+g+"V-"+b+
"H"+g+"V-"+g+"H"+b+"Z"}},x:{n:4,f:function(b){b=h.round(.8*b/Math.sqrt(2),2);var g="l"+b+","+b,e="l"+b+",-"+b,f="l-"+b+",-"+b,v="l-"+b+","+b;return"M0,"+b+g+e+f+e+f+v+f+v+g+v+g+"Z"}},"triangle-up":{n:5,f:function(b){var g=h.round(2*b/Math.sqrt(3),2),e=h.round(b/2,2);b=h.round(b,2);return"M-"+g+","+e+"H"+g+"L0,-"+b+"Z"}},"triangle-down":{n:6,f:function(b){var g=h.round(2*b/Math.sqrt(3),2),e=h.round(b/2,2);b=h.round(b,2);return"M-"+g+",-"+e+"H"+g+"L0,"+b+"Z"}},"triangle-left":{n:7,f:function(b){var g=
h.round(2*b/Math.sqrt(3),2),e=h.round(b/2,2);b=h.round(b,2);return"M"+e+",-"+g+"V"+g+"L-"+b+",0Z"}},"triangle-right":{n:8,f:function(b){var g=h.round(2*b/Math.sqrt(3),2),e=h.round(b/2,2);b=h.round(b,2);return"M-"+e+",-"+g+"V"+g+"L"+b+",0Z"}},"triangle-ne":{n:9,f:function(b){var g=h.round(.6*b,2);b=h.round(1.2*b,2);return"M-"+b+",-"+g+"H"+g+"V"+b+"Z"}},"triangle-se":{n:10,f:function(b){var g=h.round(.6*b,2);b=h.round(1.2*b,2);return"M"+g+",-"+b+"V"+g+"H-"+b+"Z"}},"triangle-sw":{n:11,f:function(b){var g=
h.round(.6*b,2);b=h.round(1.2*b,2);return"M"+b+","+g+"H-"+g+"V-"+b+"Z"}},"triangle-nw":{n:12,f:function(b){var g=h.round(.6*b,2);b=h.round(1.2*b,2);return"M-"+g+","+b+"V-"+g+"H"+b+"Z"}},pentagon:{n:13,f:function(b){var g=h.round(.951*b,2),e=h.round(.588*b,2),f=h.round(-b,2),v=h.round(-.309*b,2);b=h.round(.809*b,2);return"M"+g+","+v+"L"+e+","+b+"H-"+e+"L-"+g+","+v+"L0,"+f+"Z"}},hexagon:{n:14,f:function(b){var g=h.round(b,2),e=h.round(b/2,2);b=h.round(b*Math.sqrt(3)/2,2);return"M"+b+",-"+e+"V"+e+"L0,"+
g+"L-"+b+","+e+"V-"+e+"L0,-"+g+"Z"}},hexagon2:{n:15,f:function(b){var g=h.round(b,2),e=h.round(b/2,2);b=h.round(b*Math.sqrt(3)/2,2);return"M-"+e+","+b+"H"+e+"L"+g+",0L"+e+",-"+b+"H-"+e+"L-"+g+",0Z"}},octagon:{n:16,f:function(b){var g=h.round(.924*b,2);b=h.round(.383*b,2);return"M-"+b+",-"+g+"H"+b+"L"+g+",-"+b+"V"+b+"L"+b+","+g+"H-"+b+"L-"+g+","+b+"V-"+b+"Z"}},star:{n:17,f:function(b){var g=1.4*b;b=h.round(.225*g,2);var e=h.round(.951*g,2),f=h.round(.363*g,2),v=h.round(.588*g,2),d=h.round(-g,2),p=
h.round(-.309*g,2),t=h.round(.118*g,2),m=h.round(.809*g,2),g=h.round(.382*g,2);return"M"+b+","+p+"H"+e+"L"+f+","+t+"L"+v+","+m+"L0,"+g+"L-"+v+","+m+"L-"+f+","+t+"L-"+e+","+p+"H-"+b+"L0,"+d+"Z"}},hexagram:{n:18,f:function(b){var g=h.round(.66*b,2),e=h.round(.38*b,2);b=h.round(.76*b,2);return"M-"+b+",0l-"+e+",-"+g+"h"+b+"l"+e+",-"+g+"l"+e+","+g+"h"+b+"l-"+e+","+g+"l"+e+","+g+"h-"+b+"l-"+e+","+g+"l-"+e+",-"+g+"h-"+b+"Z"}},"star-triangle-up":{n:19,f:function(b){var g=h.round(b*Math.sqrt(3)*.8,2),e=h.round(.8*
b,2),f=h.round(1.6*b,2);b=h.round(4*b,2);b="A "+b+","+b+" 0 0 1 ";return"M-"+g+","+e+b+g+","+e+b+"0,-"+f+b+"-"+g+","+e+"Z"}},"star-triangle-down":{n:20,f:function(b){var g=h.round(b*Math.sqrt(3)*.8,2),e=h.round(.8*b,2),f=h.round(1.6*b,2);b=h.round(4*b,2);b="A "+b+","+b+" 0 0 1 ";return"M"+g+",-"+e+b+"-"+g+",-"+e+b+"0,"+f+b+g+",-"+e+"Z"}},"star-square":{n:21,f:function(b){var g=h.round(1.1*b,2);b=h.round(2*b,2);b="A "+b+","+b+" 0 0 1 ";return"M-"+g+",-"+g+b+"-"+g+","+g+b+g+","+g+b+g+",-"+g+b+"-"+g+
",-"+g+"Z"}},"star-diamond":{n:22,f:function(b){var g=h.round(1.4*b,2);b=h.round(1.9*b,2);b="A "+b+","+b+" 0 0 1 ";return"M-"+g+",0"+b+"0,"+g+b+g+",0"+b+"0,-"+g+b+"-"+g+",0Z"}},"diamond-tall":{n:23,f:function(b){var g=h.round(.7*b,2);b=h.round(1.4*b,2);return"M0,"+b+"L"+g+",0L0,-"+b+"L-"+g+",0Z"}},"diamond-wide":{n:24,f:function(b){var g=h.round(1.4*b,2);b=h.round(.7*b,2);return"M0,"+b+"L"+g+",0L0,-"+b+"L-"+g+",0Z"}},hourglass:{n:25,f:function(b){b=h.round(b,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+
b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(b){b=h.round(b,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(b){b=h.round(b,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(b){var g=h.round(b,2);b=h.round(b/Math.sqrt(2),2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z"},
needLine:!0,noDot:!0},"square-cross":{n:29,f:function(b){b=h.round(b,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(b){b=h.round(b,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(b){b=h.round(1.3*b,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(b){var g=
h.round(1.3*b,2);b=h.round(.65*b,2);return"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM-"+b+",-"+b+"L"+b+","+b+"M-"+b+","+b+"L"+b+",-"+b},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(b){b=h.round(1.4*b,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0},"x-thin":{n:34,f:function(b){b=h.round(b,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0},asterisk:{n:35,f:function(b){var g=h.round(1.2*b,2);b=h.round(.85*b,2);return"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+b+
","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0},hash:{n:36,f:function(b){var g=h.round(b/2,2);b=h.round(b,2);return"M"+g+","+b+"V-"+b+"m-"+b+",0V"+b+"M"+b+","+g+"H-"+b+"m0,-"+b+"H"+b},needLine:!0},"y-up":{n:37,f:function(b){var g=h.round(1.2*b,2),e=h.round(1.6*b,2);b=h.round(.8*b,2);return"M-"+g+","+b+"L0,0M"+g+","+b+"L0,0M0,-"+e+"L0,0"},needLine:!0,noDot:!0},"y-down":{n:38,f:function(b){var g=h.round(1.2*b,2),e=h.round(1.6*b,2);b=h.round(.8*b,2);return"M-"+g+",-"+b+"L0,0M"+g+
",-"+b+"L0,0M0,"+e+"L0,0"},needLine:!0,noDot:!0},"y-left":{n:39,f:function(b){var g=h.round(1.2*b,2),e=h.round(1.6*b,2);b=h.round(.8*b,2);return"M"+b+","+g+"L0,0M"+b+",-"+g+"L0,0M-"+e+",0L0,0"},needLine:!0,noDot:!0},"y-right":{n:40,f:function(b){var g=h.round(1.2*b,2),e=h.round(1.6*b,2);b=h.round(.8*b,2);return"M-"+b+","+g+"L0,0M-"+b+",-"+g+"L0,0M"+e+",0L0,0"},needLine:!0,noDot:!0},"line-ew":{n:41,f:function(b){b=h.round(1.4*b,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0},"line-ns":{n:42,f:function(b){b=
h.round(1.4*b,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0},"line-ne":{n:43,f:function(b){b=h.round(b,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0},"line-nw":{n:44,f:function(b){b=h.round(b,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0}}},{d3:53}],304:[function(b,m,g){m.exports={visible:{valType:"boolean"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"]},symmetric:{valType:"boolean"},array:{valType:"data_array"},arrayminus:{valType:"data_array"},value:{valType:"number",
min:0,dflt:10},valueminus:{valType:"number",min:0,dflt:10},traceref:{valType:"integer",min:0,dflt:0},tracerefminus:{valType:"integer",min:0,dflt:0},copy_ystyle:{valType:"boolean"},copy_zstyle:{valType:"boolean"},color:{valType:"color"},thickness:{valType:"number",min:0,dflt:2},width:{valType:"number",min:0},_deprecated:{opacity:{valType:"number"}}}},{}],305:[function(b,m,g){function h(b,d,h,g){var l=d["error_"+g]||{};d=[];if(l.visible&&-1!==["linear","log"].indexOf(h.type)){for(var l=f(l),m=0;m<b.length;m++){var u=
b[m],r=u[g];if(c(h.c2l(r))){var y=l(r,m);if(c(y[0])&&c(y[1])){var k=u[g+"s"]=r-y[0],u=u[g+"h"]=r+y[1];d.push(k,u)}}}e.expand(h,d,{padded:!0})}}var c=b("fast-isnumeric"),l=b("../../plots/plots"),e=b("../../plots/cartesian/axes"),f=b("./compute_error");m.exports=function(b){for(var c=b.calcdata,f=0;f<c.length;f++){var g=c[f],m=g[0].trace;if(l.traceIs(m,"errorBarsOK")){var w=e.getFromId(b,m.xaxis),u=e.getFromId(b,m.yaxis);h(g,m,w,"x");h(g,m,u,"y")}}}},{"../../plots/cartesian/axes":351,"../../plots/plots":382,
"./compute_error":306,"fast-isnumeric":58}],306:[function(b,m,g){function h(b,h){return"percent"===b?function(b){return Math.abs(b*h/100)}:"constant"===b?function(){return Math.abs(h)}:"sqrt"===b?function(b){return Math.sqrt(Math.abs(b))}:void 0}m.exports=function(b){var g=b.type,e=b.symmetric;if("data"===g){var f=b.array,v=b.arrayminus;return e||void 0===v?function(b,c){var d=+f[c];return[d,d]}:function(b,c){return[+v[c],+f[c]]}}var d=h(g,b.value),p=h(g,b.valueminus);return e||void 0===b.valueminus?
function(b){b=d(b);return[b,b]}:function(b){return[p(b),d(b)]}}},{}],307:[function(b,m,g){var h=b("fast-isnumeric"),c=b("../../plots/plots"),l=b("../../lib"),e=b("./attributes");m.exports=function(b,g,d,p){function t(b,c){return l.coerce(u,w,e,b,c)}var m="error_"+p.axis,w=g[m]={},u=b[m]||{};!1!==t("visible",void 0!==u.array||void 0!==u.value||"sqrt"===u.type)&&(b=t("type","array"in u?"data":"percent"),m=!0,("sqrt"!==b&&(m=t("symmetric",!(("data"===b?"arrayminus":"valueminus")in u))),"data"===b)?(t("array")||
(w.array=[]),t("traceref"),m)||(t("arrayminus")||(w.arrayminus=[]),t("tracerefminus")):("percent"===b||"constant"===b)&&(t("value"),m||t("valueminus")),b="copy_"+p.inherit+"style",p.inherit&&(g["error_"+p.inherit]||{}).visible&&t(b,!(u.color||h(u.thickness)||h(u.width))),p.inherit&&w[b]||(t("color",d),t("thickness"),t("width",c.traceIs(g,"gl3d")?0:4)))}},{"../../lib":332,"../../plots/plots":382,"./attributes":304,"fast-isnumeric":58}],308:[function(b,m,g){var h=b("../../plotly"),c=b("d3"),l=b("fast-isnumeric"),
e=m.exports={};e.attributes=b("./attributes");e.supplyDefaults=b("./defaults");e.calc=b("./calc");e.calcFromTrace=function(b,c){for(var d=b.x||[],h=b.y,g=d.length||h.length,l=Array(g),m=0;g>m;m++)l[m]={x:d[m],y:h[m]};return l[0].trace=b,e.calc({calcdata:[l],_fullLayout:c}),l};e.plot=function(b,e,d){var g=e.x(),t=e.y();e.plot.select(".errorlayer").selectAll("g.errorbars").remove();var m;e.plot.select(".errorlayer").selectAll("g.errorbars").data(d).enter().append("g").attr("class","errorbars").each(function(b){b=
b[0].trace;var d=b.error_x,e=b.error_y,f=h.Scatter.hasMarkers(b)&&0<b.marker.maxdisplayed;(e.visible||d.visible)&&c.select(this).selectAll("g").data(h.Lib.identity).enter().append("g").each(function(b){var h={x:g.c2p(b.x),y:t.c2p(b.y)};m=(void 0!==b.yh&&(h.yh=t.c2p(b.yh),h.ys=t.c2p(b.ys),l(h.ys)||(h.noYS=!0,h.ys=t.c2p(b.ys,!0))),void 0!==b.xh&&(h.xh=g.c2p(b.xh),h.xs=g.c2p(b.xs),l(h.xs)||(h.noXS=!0,h.xs=g.c2p(b.xs,!0))),h);h=c.select(this);if(!f||b.vis){if(e.visible&&l(m.x)&&l(m.yh)&&l(m.ys)){var v=
e.width;b="M"+(m.x-v)+","+m.yh+"h"+2*v+"m-"+v+",0V"+m.ys;m.noYS||(b+="m-"+v+",0h"+2*v);h.append("path").classed("yerror",!0).attr("d",b)}d.visible&&l(m.y)&&l(m.xh)&&l(m.xs)&&(v=(d.copy_ystyle?e:d).width,b="M"+m.xh+","+(m.y-v)+"v"+2*v+"m0,-"+v+"H"+m.xs,m.noXS||(b+="m0,-"+v+"v"+2*v),h.append("path").classed("xerror",!0).attr("d",b))}})})};e.style=function(b){c.select(b).selectAll("g.errorbars").each(function(b){var d=c.select(this),e=b[0].trace;b=e.error_y||{};e=e.error_x||{};d.selectAll("g path.yerror").style("stroke-width",
b.thickness+"px").call(h.Color.stroke,b.color);e.copy_ystyle&&(e=b);d.selectAll("g path.xerror").style("stroke-width",e.thickness+"px").call(h.Color.stroke,e.color)})};e.hoverInfo=function(b,c,d){c.error_y.visible&&(d.yerr=b.yh-b.y,c.error_y.symmetric||(d.yerrneg=b.y-b.ys));c.error_x.visible&&(d.xerr=b.xh-b.x,c.error_x.symmetric||(d.xerrneg=b.x-b.xs))}},{"../../plotly":348,"./attributes":304,"./calc":305,"./defaults":307,d3:53,"fast-isnumeric":58}],309:[function(b,m,g){g=b("../../plots/font_attributes");
var h=b("../color/attributes");b=b("../../lib/extend").extendFlat;m.exports={bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:h.defaultLine},borderwidth:{valType:"number",min:0,dflt:0},font:b({},g,{}),traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"]},tracegroupgap:{valType:"number",min:0,dflt:10},x:{valType:"number",min:-2,max:3,dflt:1.02},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:1},
yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"}}},{"../../lib/extend":328,"../../plots/font_attributes":354,"../color/attributes":283}],310:[function(b,m,g){function h(b){return-1!==(b.traceorder||"").indexOf("grouped")}function c(b){return-1!==(b.traceorder||"").indexOf("reversed")}var l=b("../../plotly"),e=b("d3"),f=m.exports={};f.layoutAttributes=b("./attributes");f.supplyLayoutDefaults=function(b,d,e){function g(b,c){return l.Lib.coerce(w,u,f.layoutAttributes,
b,c)}for(var m,w=b.legend||{},u=d.legend={},r=0,y="normal",k=0;k<e.length;k++)m=e[k],m.visible&&l.Plots.traceIs(m,"showLegend")&&(r++,l.Plots.traceIs(m,"pie")&&r++),(l.Plots.traceIs(m,"bar")&&"stack"===d.barmode||-1!==["tonextx","tonexty"].indexOf(m.fill))&&(y=h({traceorder:y})?"grouped+reversed":"reversed"),void 0!==m.legendgroup&&""!==m.legendgroup&&(y=c({traceorder:y})?"reversed+grouped":"grouped");!1!==l.Lib.coerce(b,d,l.Plots.layoutAttributes,"showlegend",1<r)&&(g("bgcolor",d.paper_bgcolor),
g("bordercolor"),g("borderwidth"),l.Lib.coerceFont(g,"font",d.font),g("traceorder",y),h(d.legend)&&g("tracegroupgap"),g("x"),g("xanchor"),g("y"),g("yanchor"),l.Lib.noneOrAll(w,u,["x","y"]))};f.lines=function(b){var c=b[0].trace,f=c.visible&&c.fill&&"none"!==c.fill,c=l.Scatter.hasLines(c),f=e.select(this).select(".legendfill").selectAll("path").data(f?[b]:[]);f.enter().append("path").classed("js-fill",!0);f.exit().remove();f.attr("d","M5,0h30v6h-30z").call(l.Drawing.fillGroupStyle);b=e.select(this).select(".legendlines").selectAll("path").data(c?
[b]:[]);b.enter().append("path").classed("js-line",!0).attr("d","M5,0h30");b.exit().remove();b.call(l.Drawing.lineGroupStyle)};f.points=function(b){function c(b,d,e){b=l.Lib.nestedProperty(u,b).get();d=Array.isArray(b)&&d?d(b):b;if(e){if(d<e[0])return e[0];if(d>e[1])return e[1]}return d}function f(b){return b[0]}var h,g,m=b[0],u=m.trace;b=l.Scatter.hasMarkers(u);var r=l.Scatter.hasText(u),y=l.Scatter.hasLines(u);if(b||r||y)h={},g={},b&&(h.mc=c("marker.color",f),h.mo=c("marker.opacity",l.Lib.mean,
[.2,1]),h.ms=c("marker.size",l.Lib.mean,[2,16]),h.mlc=c("marker.line.color",f),h.mlw=c("marker.line.width",l.Lib.mean,[0,5]),g.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),y&&(g.line={width:c("line.width",f,[0,10])}),r&&(h.tx="Aa",h.tp=c("textposition",f),h.ts=10,h.tc=c("textfont.color",f),h.tf=c("textfont.family",f)),h=[l.Lib.minExtend(m,h)],g=l.Lib.minExtend(u,g);m=e.select(this).select("g.legendpoints");y=m.selectAll("path.scatterpts").data(b?h:[]);y.enter().append("path").classed("scatterpts",
!0).attr("transform","translate(20,0)");y.exit().remove();y.call(l.Drawing.pointStyle,g);b&&(h[0].mrc=3);h=m.selectAll("g.pointtext").data(r?h:[]);h.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)");h.exit().remove();h.selectAll("text").call(l.Drawing.textPointStyle,g)};f.bars=function(b){var c=b[0].trace,f=c.marker||{},h=f.line||{};b=e.select(this).select("g.legendpoints").selectAll("path.legendbar").data(l.Plots.traceIs(c,"bar")?[b]:[]);b.enter().append("path").classed("legendbar",
!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");b.exit().remove();b.each(function(b){var c=(b.mlw+1||h.width+1)-1,d=e.select(this);d.style("stroke-width",c+"px").call(l.Color.fill,b.mc||f.color);c&&d.call(l.Color.stroke,b.mlc||h.color)})};f.boxes=function(b){var c=b[0].trace;b=e.select(this).select("g.legendpoints").selectAll("path.legendbox").data(l.Plots.traceIs(c,"box")&&c.visible?[b]:[]);b.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",
"translate(20,0)");b.exit().remove();b.each(function(b){var f=(b.lw+1||c.line.width+1)-1,h=e.select(this);h.style("stroke-width",f+"px").call(l.Color.fill,b.fc||c.fillcolor);f&&h.call(l.Color.stroke,b.lc||c.line.color)})};f.pie=function(b){var c=b[0].trace,f=e.select(this).select("g.legendpoints").selectAll("path.legendpie").data(l.Plots.traceIs(c,"pie")&&c.visible?[b]:[]);f.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");f.exit().remove();
f.size()&&f.call(l.Pie.styleOne,b[0],c)};f.style=function(b){b.each(function(b){var c=e.select(this);c.selectAll("g.legendfill").data([b]).enter().append("g").classed("legendfill",!0);c.selectAll("g.legendlines").data([b]).enter().append("g").classed("legendlines",!0);c=c.selectAll("g.legendsymbols").data([b]);c.enter().append("g").classed("legendsymbols",!0);c.style("opacity",b[0].trace.opacity);c.selectAll("g.legendpoints").data([b]).enter().append("g").classed("legendpoints",!0)}).each(f.bars).each(f.boxes).each(f.pie).each(f.lines).each(f.points)};
f.texts=function(b,c,h,g,m){function w(b){l.util.convertToTspans(b,function(){c.firstRender&&f.repositionLegend(c,m)});b.selectAll("tspan.line").attr({x:b.attr("x")})}g=c._fullLayout;var u=h[0].trace,r=l.Plots.traceIs(u,"pie"),y=u.index;h=r?h[0].label:u.name;b=e.select(b).selectAll("text.legendtext").data([0]);b.enter().append("text").classed("legendtext",!0);b.attr({x:40,y:0}).style("text-anchor","start").call(l.Drawing.font,g.legend.font).text(h).attr({"data-unformatted":h});c._context.editable&&
!r?b.call(l.util.makeEditable).call(w).on("edit",function(b){this.attr({"data-unformatted":b});this.text(b).call(w);this.text()||(b="    ");l.restyle(c,"name",b,y)}):b.call(w)};f.getLegendData=function(b,d){function e(b,c){if(""!==b&&h(d))-1===z.indexOf(b)?(z.push(b),E=!0,q[b]=[[c]]):q[b].push([c]);else{var f="~~i"+C;z.push(f);q[f]=[[c]];C++}}var f,g,m,u,r,y,k,q={},z=[],E=!1,A={},C=0;for(r=0;r<b.length;r++)if(f=b[r],g=f[0],m=g.trace,u=m.legendgroup,m.visible&&l.Plots.traceIs(m,"showLegend")&&m.showlegend)if(l.Plots.traceIs(m,
"pie"))for(A[u]||(A[u]={}),y=0;y<f.length;y++)k=f[y].label,A[u][k]||(e(u,{label:k,color:f[y].color,i:f[y].i,trace:m}),A[u][k]=!0);else e(u,g);if(!z.length)return[];m=z.length;if(E&&h(d))for(g=Array(m),r=0;m>r;r++)f=q[z[r]],g[r]=c(d)?f.reverse():f;else{g=[Array(m)];for(r=0;m>r;r++)f=q[z[r]][0],g[0][c(d)?m-r-1:r]=f;m=1}return d._lgroupsLength=m,g};f.draw=function(b){var c=b._fullLayout;if(c._infolayer&&b.calcdata){var g=c.legend,t=c.showlegend&&f.getLegendData(b.calcdata,g),m=c.hiddenlabels||[];if(!c.showlegend||
!t.length)return c._infolayer.selectAll(".legend").remove(),void l.Plots.autoMargin(b,"legend");"undefined"==typeof b.firstRender?b.firstRender=!0:b.firstRender&&(b.firstRender=!1);var w=c._infolayer.selectAll("svg.legend").data([0]);w.enter(0).append("svg").attr("class","legend");c=w.selectAll("rect.bg").data([0]);c.enter(0).append("rect").attr("class","bg");c.call(l.Color.stroke,g.bordercolor).call(l.Color.fill,g.bgcolor).style("stroke-width",g.borderwidth+"px");t=w.selectAll("g.groups").data(t);
t.enter().append("g").attr("class","groups");t.exit().remove();h(g)&&t.attr("transform",function(b,c){return"translate(0,"+c*g.tracegroupgap+")"});var u=t.selectAll("g.traces").data(l.Lib.identity);if(u.enter().append("g").attr("class","traces"),u.exit().remove(),u.call(f.style).style("opacity",function(b){var c=b[0].trace;return l.Plots.traceIs(c,"pie")?-1!==m.indexOf(b[0].label)?.5:1:"legendonly"===c.visible?.5:1}).each(function(c,d){f.texts(this,b,c,d,u);var h=e.select(this).selectAll("rect").data([0]);
h.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(l.Color.fill,"rgba(0,0,0,0)");h.on("click",function(){if(!b._dragged){var d,e=b._fullData,f=c[0].trace,h=f.legendgroup,k=[];if(l.Plots.traceIs(f,"pie"))k=c[0].label,d=m.slice(),e=d.indexOf(k),-1===e?d.push(k):d.splice(e,1),l.relayout(b,"hiddenlabels",d);else{if(""===h)k=[f.index];else for(var g=0;g<e.length;g++)d=e[g],d.legendgroup===h&&k.push(d.index);d=!0===f.visible?"legendonly":!0;l.restyle(b,
"visible",d,k)}}})}),f.repositionLegend(b,u),b._context.editable){var r,y,k,q,z,E;l.Fx.dragElement({element:w.node(),prepFn:function(){k=Number(w.attr("x"));q=Number(w.attr("y"));z=Number(w.attr("width"));E=Number(w.attr("height"));l.Fx.setCursor(w)},moveFn:function(c,d){var e=b._fullLayout._size;w.call(l.Drawing.setPosition,k+c,q+d);r=l.Fx.dragAlign(k+c,z,e.l,e.l+e.w,g.xanchor);y=l.Fx.dragAlign(q+d+E,-E,e.t+e.h,e.t,g.yanchor);e=l.Fx.dragCursors(r,y,g.xanchor,g.yanchor);l.Fx.setCursor(w,e)},doneFn:function(c){l.Fx.setCursor(w);
c&&void 0!==r&&void 0!==y&&l.relayout(b,{"legend.x":r,"legend.y":y})}})}}};f.repositionLegend=function(b,c){var f=b._fullLayout,g=f._size,m=f.legend,w=m.borderwidth,u=0,r=0;c.each(function(b){var c,d,f=b[0].trace;b=e.select(this);var h=b.selectAll(".legendtoggle"),k=b.selectAll(".legendtext"),g=b.selectAll(".legendtext>tspan");d=1.3*m.font.size;var q=g[0].length||1,p=k.node()&&l.Drawing.bBox(k.node()).width;c=b.select("g[class*=math-group]");if(!f.showlegend)return void b.remove();c.node()?(p=l.Drawing.bBox(c.node()),
d=p.height,p=p.width,c.attr("transform","translate(0,"+d/4+")")):(c=d*(.3+(1-q)/2),k.attr("y",c),g.attr("y",c));d=Math.max(d*q,16)+3;b.attr("transform","translate("+w+","+(5+w+r+d/2)+")");h.attr({x:0,y:-d/2,height:d});r+=d;u=Math.max(u,p||0)});h(m)&&(r+=(m._lgroupsLength-1)*m.tracegroupgap);c.selectAll(".legendtoggle").attr("width",(b._context.editable?0:u)+40);var u=u+(45+2*w),r=r+(10+2*w),y=g.l+g.w*m.x,g=g.t+g.h*(1-m.y),k="left";"right"===m.xanchor||"auto"===m.xanchor&&m.x>=2/3?(y-=u,k="right"):
("center"===m.xanchor||"auto"===m.xanchor&&m.x>1/3)&&(y-=u/2,k="center");var q="top";"bottom"===m.yanchor||"auto"===m.yanchor&&m.y<=1/3?(g-=r,q="bottom"):("middle"===m.yanchor||"auto"===m.yanchor&&m.y<2/3)&&(g-=r/2,q="middle");u=Math.ceil(u);r=Math.ceil(r);y=Math.round(y);g=Math.round(g);f._infolayer.selectAll("svg.legend").call(l.Drawing.setRect,y,g,u,r);f._infolayer.selectAll("svg.legend .bg").call(l.Drawing.setRect,w/2,w/2,u-w,r-w);l.Plots.autoMargin(b,"legend",{x:m.x,y:m.y,l:u*({right:1,center:.5}[k]||
0),r:u*({left:1,center:.5}[k]||0),b:r*({top:1,middle:.5}[q]||0),t:r*({bottom:1,middle:.5}[q]||0)})}},{"../../plotly":348,"./attributes":309,d3:53}],311:[function(b,m,g){function h(b,c){var d=c.currentTarget,e=d.getAttribute("data-attr"),f=d.getAttribute("data-val")||!0,h=b._fullLayout,k={};if("zoom"===e){var g,l,p;g="in"===f?.5:2;for(var d=(1+g)/2,m=(1-g)/2,C=v.Axes.list(b,null,!0),B=0;B<C.length;B++)g=C[B],g.fixedrange||(l=g._name,"auto"===f?k[l+".autorange"]=!0:"reset"===f?void 0===g._rangeInitial?
k[l+".autorange"]=!0:k[l+".range"]=g._rangeInitial.slice():(p=g.range,k[l+".range"]=[d*p[0]+m*p[1],d*p[1]+m*p[0]]))}else"hovermode"!==e||"x"!==f&&"y"!==f||(f=h._isHoriz?"y":"x",d.setAttribute("data-val",f)),k[e]=f;v.relayout(b,k).then(function(){"dragmode"===e&&(h._hasCartesian&&v.Fx.setCursor(h._paper.select(".nsewdrag"),{pan:"move",zoom:"crosshair"}[f]),v.Fx.supplyLayoutDefaults(b.layout,h,b._fullData))})}function c(b,c){var d=c.currentTarget,e=d.getAttribute("data-attr"),d=d.getAttribute("data-val")||
!0,f={};f[e]=d;v.relayout(b,f)}function l(b,c){for(var d=c.currentTarget.getAttribute("data-attr"),e=b.layout,f=b._fullLayout,h=v.Plots.getSubplotIds(f,"gl3d"),k=0;k<h.length;k++){var g=h[k],l=e[g],g=f[g]._scene;l&&"resetDefault"!==d?"resetLastSave"===d&&((l=l.camera)?g.setCamera(l):g.setCameraToDefault()):g.setCameraToDefault()}}function e(b,c){for(var d=c.currentTarget,e=d.getAttribute("data-attr"),d=d.getAttribute("data-val")||!0,f=b._fullLayout,h=v.Plots.getSubplotIds(f,"geo"),k=0;k<h.length;k++){var g=
f[h[k]]._geo;if("zoom"===e){var l=g.projection.scale(),l="in"===d?2*l:.5*l;g.projection.scale(l);g.zoom.scale(l);g.render()}else"reset"===e?g.zoomReset():"hovermode"===e&&(g.showHover=!g.showHover)}}function f(b){v.relayout(b,"hovermode",b._fullLayout.hovermode?!1:"closest")}var v=b("../../plotly"),d=b("../../lib"),p=b("../../snapshot");b=b("../../../build/ploticon");m=m.exports={};m.toImage={name:"toImage",title:"Download plot as a png",icon:b.camera,click:function(b){if(d.isIE())return void d.notifier("Snapshotting is unavailable in Internet Explorer. Consider exporting your images using the Plotly Cloud",
"long");if(b._snapshotInProgress)return void d.notifier("Snapshotting is still in progress - please hold","long");b._snapshotInProgress=!0;d.notifier("Taking snapshot - this may take a few seconds","long");var c=p.toImage(b,{format:"png"}),e=b.fn||"newplot",e=e+".png";c.once("success",function(d){b._snapshotInProgress=!1;var f=document.createElement("a");f.href=d;f.download=e;document.body.appendChild(f);f.click();document.body.removeChild(f);c.clean()});c.once("error",function(e){b._snapshotInProgress=
!1;d.notifier("Sorry there was a problem downloading your png","long");console.error(e);c.clean()})}};m.sendDataToCloud={name:"sendDataToCloud",title:"Save and edit plot in cloud",icon:b.disk,click:function(b){v.Plots.sendDataToCloud(b)}};m.zoom2d={name:"zoom2d",title:"Zoom",attr:"dragmode",val:"zoom",icon:b.zoombox,click:h};m.pan2d={name:"pan2d",title:"Pan",attr:"dragmode",val:"pan",icon:b.pan,click:h};m.zoomIn2d={name:"zoomIn2d",title:"Zoom in",attr:"zoom",val:"in",icon:b.zoom_plus,click:h};m.zoomOut2d=
{name:"zoomOut2d",title:"Zoom out",attr:"zoom",val:"out",icon:b.zoom_minus,click:h};m.autoScale2d={name:"autoScale2d",title:"Autoscale",attr:"zoom",val:"auto",icon:b.autoscale,click:h};m.resetScale2d={name:"resetScale2d",title:"Reset axes",attr:"zoom",val:"reset",icon:b.home,click:h};m.hoverClosestCartesian={name:"hoverClosestCartesian",title:"Show closest data on hover",attr:"hovermode",val:"closest",icon:b.tooltip_basic,gravity:"ne",click:h};m.hoverCompareCartesian={name:"hoverCompareCartesian",
title:"Compare data on hover",attr:"hovermode",val:function(b){return b._fullLayout._isHoriz?"y":"x"},icon:b.tooltip_compare,gravity:"ne",click:h};m.zoom3d={name:"zoom3d",title:"Zoom",attr:"dragmode",val:"zoom",icon:b.zoombox,click:c};m.pan3d={name:"pan3d",title:"Pan",attr:"dragmode",val:"pan",icon:b.pan,click:c};m.orbitRotation={name:"orbitRotation",title:"orbital rotation",attr:"dragmode",val:"orbit",icon:b["3d_rotate"],click:c};m.tableRotation={name:"tableRotation",title:"turntable rotation",attr:"dragmode",
val:"turntable",icon:b["z-axis"],click:c};m.resetCameraDefault3d={name:"resetCameraDefault3d",title:"Reset camera to default",attr:"resetDefault",icon:b.home,click:l};m.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:"Reset camera to last save",attr:"resetLastSave",icon:b.movie,click:l};m.hoverClosest3d={name:"hoverClosest3d",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:function(b,c){var d=c.currentTarget,e=JSON.parse(d.getAttribute("data-val"))||
!1,f=b._fullLayout,h=v.Plots.getSubplotIds(f,"gl3d"),k=["xaxis","yaxis","zaxis"],g=["showspikes","spikesides","spikethickness","spikecolor"],l={},p={},m={};if(e)m=e,d.setAttribute("data-val",JSON.stringify(null));else{m={"allaxes.showspikes":!1};for(e=0;e<h.length;e++)for(var p=h[e],C=f[p],B=l[p]={},G=0;3>G;G++)for(var F=k[G],p=B[F]={},I=0;I<g.length;I++){var D=g[I];p[D]=C[F][D]}d.setAttribute("data-val",JSON.stringify(l))}v.relayout(b,m)}};m.zoomInGeo={name:"zoomInGeo",title:"Zoom in",attr:"zoom",
val:"in",icon:b.zoom_plus,click:e};m.zoomOutGeo={name:"zoomOutGeo",title:"Zoom in",attr:"zoom",val:"out",icon:b.zoom_minus,click:e};m.resetGeo={name:"resetGeo",title:"Reset",attr:"reset",val:null,icon:b.autoscale,click:e};m.hoverClosestGeo={name:"hoverClosestGeo",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:e};m.hoverClosestGl2d={name:"hoverClosestGl2d",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,
icon:b.tooltip_basic,gravity:"ne",click:f};m.hoverClosestPie={name:"hoverClosestPie",title:"Toggle show closest data on hover",attr:"hovermode",val:"closest",icon:b.tooltip_basic,gravity:"ne",click:f}},{"../../../build/ploticon":2,"../../lib":332,"../../plotly":348,"../../snapshot":389}],312:[function(b,m,g){function h(b){this.container=b.container;this.element=document.createElement("div");this.update(b.graphInfo,b.buttons);this.container.appendChild(this.element)}var c=b("../../plotly"),l=b("d3"),
e=b("../../../build/ploticon");b=h.prototype;b.update=function(b,c){this.graphInfo=b;var d=this.graphInfo._context;"hover"===d.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var e=!this.hasButtons(c),h=this.hasLogo!==d.displaylogo;(e||h)&&(this.removeAllButtons(),this.updateButtons(c),d.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0));this.updateActiveButton()};b.updateButtons=function(b){var c=this;this.buttons=b;this.buttonElements=
[];this.buttonsNames=[];this.buttons.forEach(function(b){var e=c.createGroup();b.forEach(function(b){var d=b.name;if(!d)throw Error("must provide button 'name' in button config");if(-1!==c.buttonsNames.indexOf(d))throw Error("button name '"+d+"' is taken");c.buttonsNames.push(d);b=c.createButton(b);c.buttonElements.push(b);e.appendChild(b)});c.element.appendChild(e)})};b.createGroup=function(){var b=document.createElement("div");return b.className="modebar-group",b};b.createButton=function(b){var c=
this,d=document.createElement("a");d.setAttribute("rel","tooltip");d.className="modebar-btn";var h=b.title;void 0===h&&(h=b.name);(h||0===h)&&d.setAttribute("data-title",h);void 0!==b.attr&&d.setAttribute("data-attr",b.attr);h=b.val;void 0!==h&&("function"==typeof h&&(h=h(this.graphInfo)),d.setAttribute("data-val",h));if("function"!=typeof b.click)throw Error("must provide button 'click' function in button config");return d.addEventListener("click",function(d){b.click(c.graphInfo,d);c.updateActiveButton(d.currentTarget)}),
d.setAttribute("data-toggle",b.toggle||!1),b.toggle&&d.classList.add("active"),d.appendChild(this.createIcon(b.icon||e.question)),d.setAttribute("data-gravity",b.gravity||"n"),d};b.createIcon=function(b){var c=b.ascent-b.descent,d=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("height","1em"),d.setAttribute("width",b.width/c+"em"),d.setAttribute("viewBox",[0,0,b.width,c].join(" ")),e.setAttribute("d",
b.path),e.setAttribute("transform","matrix(1 0 0 -1 0 "+b.ascent+")"),d.appendChild(e),d};b.updateActiveButton=function(b){var c=this.graphInfo._fullLayout,d=void 0!==b?b.getAttribute("data-attr"):null;this.buttonElements.forEach(function(b){var e=b.getAttribute("data-val")||!0,f=b.getAttribute("data-attr"),h="true"===b.getAttribute("data-toggle");b=l.select(b);h?f===d&&b.classed("active",!b.classed("active")):b.classed("active",c[f]===e)})};b.hasButtons=function(b){var c=this.buttons;if(!c||b.length!==
c.length)return!1;for(var d=0;d<b.length;++d){if(b[d].length!==c[d].length)return!1;for(var e=0;e<b[d].length;e++)if(b[d][e].name!==c[d][e].name)return!1}return!0};b.getLogo=function(){var b=this.createGroup(),c=document.createElement("a");return c.href="https://plot.ly/",c.target="_blank",c.setAttribute("data-title","Produced with Plotly"),c.className="modebar-btn plotlyjsicon modebar-btn--logo",c.appendChild(this.createIcon(e.plotlylogo)),b.appendChild(c),b};b.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);
this.hasLogo=!1};b.destroy=function(){c.Lib.removeElement(this.container.querySelector(".modebar"))};m.exports=function(b,c){var d=b._fullLayout,e=new h({graphInfo:b,container:d._paperdiv.node(),buttons:c});return d._privateplot&&l.select(e.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),e}},{"../../../build/ploticon":2,"../../plotly":348,d3:53}],313:[function(b,m,g){function h(b,d,e){function h(b){for(var c=[],e=0;e<b.length;e++){var l=b[e];-1===d.indexOf(l)&&c.push(f[l])}g.push(c)}
var g=[];h(["toImage","sendDataToCloud"]);b._hasGL3D&&(h(["zoom3d","pan3d","orbitRotation","tableRotation"]),h(["resetCameraDefault3d","resetCameraLastSave3d"]),h(["hoverClosest3d"]));b._hasGeo&&(h(["zoomInGeo","zoomOutGeo","resetGeo"]),h(["hoverClosestGeo"]));var l=b._hasCartesian,u=b._hasGL2D,r=c(b);if(!l&&!u||r||(h(["zoom2d","pan2d"]),h(["zoomIn2d","zoomOut2d","autoScale2d","resetScale2d"])),l&&h(["hoverClosestCartesian","hoverCompareCartesian"]),u&&h(["hoverClosestGl2d"]),b._hasPie&&h(["hoverClosestPie"]),
e.length)if(Array.isArray(e[0]))for(b=0;b<e.length;b++)g.push(e[b]);else g.push(e);return g}function c(b){b=l.Axes.list({_fullLayout:b},null,!0);for(var c=!0,e=0;e<b.length;e++)if(!b[e].fixedrange){c=!1;break}return c}var l=b("../../plotly"),e=b("./"),f=b("./buttons");m.exports=function(b){var c=b._fullLayout,g=b._context,l=c._modeBar;if(!g.displayModeBar)return void(l&&(l.destroy(),delete c._modeBar));if(!Array.isArray(g.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");
if(!Array.isArray(g.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var m;m=g.modeBarButtons;if(Array.isArray(m)&&m.length)for(g=0;g<m.length;g++)for(var w=m[g],u=0;u<w.length;u++){var r=w[u];if("string"==typeof r){if(void 0===f[r])throw Error("*modeBarButtons* configuration options invalid button name");m[g][u]=f[r]}}else m=h(c,g.modeBarButtonsToRemove,g.modeBarButtonsToAdd);l?l.update(b,m):c._modeBar=e(b,m)}},{"../../plotly":348,"./":312,"./buttons":311}],
314:[function(b,m,g){g=b("../annotations/attributes");var h=b("../../traces/scatter/attributes");b=b("../../lib/extend").extendFlat;h=h.line;m.exports={_isLinkedToArray:!0,type:{valType:"enumerated",values:["circle","rect","path","line"]},xref:b({},g.xref,{}),x0:{valType:"any"},x1:{valType:"any"},yref:b({},g.yref,{}),y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string"},opacity:{valType:"number",min:0,max:1,dflt:1},line:{color:h.color,width:h.width,dash:h.dash},fillcolor:{valType:"color",
dflt:"rgba(0,0,0,0)"}}},{"../../lib/extend":328,"../../traces/scatter/attributes":455,"../annotations/attributes":281}],315:[function(b,m,g){function h(b,c){function d(c,f){return v.Lib.coerce(b,e,p.layoutAttributes,c,f)}var e={};d("opacity");d("fillcolor");d("line.color");d("line.width");d("line.dash");for(var f=d("type",b.path?"path":"rect"),h=["x","y"],g=0;2>g;g++){var l=h[g],r={_fullLayout:c},t=v.Axes.coerceRef(b,e,r,l);if("path"!==f){var u=.25,m=.75;"paper"!==t&&(r=v.Axes.getFromId(r,t),t="category"===
r.type?r.l2c:r.l2d,u=t(r.range[0]+u*(r.range[1]-r.range[0])),m=t(r.range[0]+m*(r.range[1]-r.range[0])));d(l+"0",u);d(l+"1",m)}}return"path"===f?d("path"):v.Lib.noneOrAll(b,e,["x0","x1","y0","y1"]),e}function c(b){return"category"===b.type?b.c2l:b.d2l}function l(b){return function(c){return b(c.replace("_"," "))}}function e(b,d){var e,f,h,g,r=d.type,t=v.Axes.getFromId(b,d.xref),u=v.Axes.getFromId(b,d.yref),m=b._fullLayout._size;if(t?(e=c(t),f=function(b){return t._offset+t.l2p(e(b,!0))}):f=function(b){return m.l+
m.w*b},u?(h=c(u),g=function(b){return u._offset+u.l2p(h(b,!0))}):g=function(b){return m.t+m.h*(1-b)},"path"===r)return t&&"date"===t.type&&(f=l(f)),u&&"date"===u.type&&(g=l(g)),p.convertPath(d.path,f,g);var x=f(d.x0),w=f(d.x1);f=g(d.y0);g=g(d.y1);if("line"===r)return"M"+x+","+f+"L"+w+","+g;if("rect"===r)return"M"+x+","+f+"H"+w+"V"+g+"H"+x+"Z";r=(x+w)/2;g=(f+g)/2;x=Math.abs(r-x);f=Math.abs(g-f);w="A"+x+","+f;x=r+x+","+g;return"M"+x+w+" 0 1,1 "+(r+","+(g-f))+w+" 0 0,1 "+x+"Z"}function f(b,c,d,e,f){var h=
"category"===b.type?Number:b.d2c;if(void 0!==c)return[h(c),h(d)];if(e){var g,p,r;c=1/0;d=-(1/0);e=e.match(t);"date"===b.type&&(h=l(h));for(b=0;b<e.length;b++)g=e[b],g=f[g.charAt(0)].drawn,void 0!==g&&(p=e[b].substr(1).match(x),!p||p.length<g||(r=h(p[g]),c>r&&(c=r),r>d&&(d=r)));return d>=c?[c,d]:void 0}}var v=b("../../plotly"),d=b("fast-isnumeric"),p=m.exports={};p.layoutAttributes=b("./attributes");p.supplyLayoutDefaults=function(b,c){for(var d=b.shapes||[],e=c.shapes=[],f=0;f<d.length;f++)e.push(h(d[f]||
{},c))};p.drawAll=function(b){var c=b._fullLayout;c._shapelayer.selectAll("path").remove();for(var d=0;d<c.shapes.length;d++)p.draw(b,d)};p.add=function(b){v.relayout(b,"shapes["+b._fullLayout.shapes.length+"]","add")};p.draw=function(b,f,g,l){var r,t=b.layout,u=b._fullLayout;if(!d(f)||-1===f){if(!f&&Array.isArray(l))return t.shapes=l,p.supplyLayoutDefaults(t,u),void p.drawAll(b);if("remove"===l)return delete t.shapes,u.shapes=[],void p.drawAll(b);if(g&&"add"!==l){for(r=0;r<u.shapes.length;r++)p.draw(b,
r,g,l);return}f=u.shapes.length;u.shapes.push({})}if(!g&&l){if("remove"===l){u._shapelayer.selectAll('[data-index="'+f+'"]').remove();u.shapes.splice(f,1);t.shapes.splice(f,1);for(r=f;r<u.shapes.length;r++)u._shapelayer.selectAll('[data-index="'+(r+1)+'"]').attr("data-index",String(r)),p.draw(b,r);return}if("add"===l||v.Lib.isPlainObject(l))for(u.shapes.splice(f,0,{}),r=v.Lib.isPlainObject(l)?v.Lib.extendFlat({},l):{text:"New text"},t.shapes?t.shapes.splice(f,0,r):t.shapes=[r],r=u.shapes.length-1;r>
f;r--)u._shapelayer.selectAll('[data-index="'+(r-1)+'"]').attr("data-index",String(r)),p.draw(b,r)}u._shapelayer.selectAll('[data-index="'+f+'"]').remove();if(t=t.shapes[f]){var m={xref:t.xref,yref:t.yref},x={};"string"==typeof g&&g?x[g]=l:v.Lib.isPlainObject(g)&&(x=g);g=Object.keys(x);for(r=0;r<x.length;r++)l=g[r],v.Lib.nestedProperty(t,l).set(x[l]);g=["x0","x1","y0","y1"];for(r=0;4>r;r++)if(l=g[r],void 0===x[l]&&void 0!==t[l]){var w,I=l.charAt(0),D=v.Axes.getFromId(b,v.Axes.coerceRef(m,{},b,I)),
H=v.Axes.getFromId(b,v.Axes.coerceRef(t,{},b,I)),K=t[l];void 0!==x[I+"ref"]&&(D?(w=c(D)(K),K=(w-D.range[0])/(D.range[1]-D.range[0])):K=(K-H.domain[0])/(H.domain[1]-H.domain[0]),H?(w=H.range[0]+K*(H.range[1]-H.range[0]),K=("category"===H.type?H.l2c:H.l2d)(w)):K=D.domain[0]+K*(D.domain[1]-D.domain[0]));t[l]=K}w=h(t,u);u.shapes[f]=w;f={"data-index":String(f),"fill-rule":"evenodd",d:e(b,w)};b=(w.xref+w.yref).replace(/paper/g,"");r=w.line.width?w.line.color:"rgba(0,0,0,0)";f=u._shapelayer.append("path").attr(f).style("opacity",
w.opacity).call(v.Color.stroke,r).call(v.Color.fill,w.fillcolor).call(v.Drawing.dashLine,w.line.dash,w.line.width);b&&f.call(v.Drawing.setClipUrl,"clip"+u._uid+b)}};var t=/[MLHVQCTSZ][^MLHVQCTSZ]*/g,x=/[^\s,]+/g,w={M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},u={M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,
drawn:5},Z:{}},r={M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0};p.convertPath=function(b,c,d){return b.replace(t,function(b){var e=0,f=b.charAt(0),h=w[f],g=u[f],l=r[f],p=b.substr(1).replace(x,function(b){return h[e]?b=c(b):g[e]&&(b=d(b)),e++,e>l&&(b="X"),b});return e>l&&(p=p.replace(/[\s,]*X.*/,""),console.log("ignoring extra params in segment "+b)),f+p})};p.calcAutorange=function(b){var c,d,e,h,g,l=b._fullLayout.shapes;if(l.length&&b._fullData.length)for(c=0;c<l.length;c++)d=l[c],e=d.line.width/2,"paper"!==
d.xref&&(h=v.Axes.getFromId(b,d.xref),g=f(h,d.x0,d.x1,d.path,w),g&&v.Axes.expand(h,g,{ppad:e})),"paper"!==d.yref&&(h=v.Axes.getFromId(b,d.yref),g=f(h,d.y0,d.y1,d.path,u),g&&v.Axes.expand(h,g,{ppad:e}))}},{"../../plotly":348,"./attributes":314,"fast-isnumeric":58}],316:[function(b,m,g){var h=b("../../plotly"),c=b("d3"),l=b("fast-isnumeric"),e=h.Plots,f=m.exports={};f.draw=function(b,d){function g(b){h.Lib.syncOrAsync([t,m],b)}function t(d){return d.attr("transform",P?"rotate("+[P.rotate,y.x,y.y]+") translate(0, "+
P.offset+")":null),d.style({"font-family":K,"font-size":c.round(O,2)+"px",fill:h.Color.rgb(L),opacity:T*h.Color.opacity(L),"font-weight":e.fontWeight}).attr(y).call(h.util.convertToTspans).attr(y),d.selectAll("tspan.line").attr(y),e.previousPromises(b)}function m(b){b=c.select(b.node().parentNode);if(M&&M.selection&&M.side&&S){b.attr("transform",null);var d=0,e={left:"right",right:"left",top:"bottom",bottom:"top"}[M.side],f=-1!==["left","top"].indexOf(M.side)?-1:1,g=l(M.pad)?M.pad:2,q=h.Drawing.bBox(b.node()),
p={left:0,top:0,right:k.width,bottom:k.height},p=E?k.width:(p[M.side]-q[M.side])*("left"===M.side||"top"===M.side?-1:1);(0>p?d=p:(q.left-=M.offsetLeft,q.right-=M.offsetLeft,q.top-=M.offsetTop,q.bottom-=M.offsetTop,M.selection.each(function(){var b=h.Drawing.bBox(this);h.Lib.bBoxIntersect(q,b,g)&&(d=Math.max(d,f*(b[M.side]-q[e])+g))}),d=Math.min(p,d)),0<d||0>p)&&b.attr("transform","translate("+{left:[-d,0],right:[d,0],top:[0,-d],bottom:[0,d]}[M.side]+")")}}function w(){T=0;R=!0;S=X;k._infolayer.select("."+
d).attr({"data-unformatted":S}).text(S).on("mouseover.opacity",function(){c.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){c.select(this).transition().duration(1E3).style("opacity",0)})}if(!d)return h.Axes.listIds(b).forEach(function(c){f.draw(b,c+"title")}),void f.draw(b,"gtitle");var u,r,y,k=b._fullLayout,q=k._size,z=d.charAt(0),E="cb"===d.substr(1,2);if(E){var A=d.substr(3).replace("title","");b._fullData.some(function(c,d){return c.uid===A?(u=d,r=
b.calcdata[d][0].t.cb.axis,!0):void 0})}else r=k[h.Axes.id2name(d.replace("title",""))]||k;var C,B,G,F,I,D=r===k?"title":r._name+".title",H=E?"colorscale":(r._id||z).toUpperCase()+" axis",K=r.titlefont.family,O=r.titlefont.size,L=r.titlefont.color,P="",M={selection:c.select(b).selectAll("g."+r._id+"tick"),side:r.side},Q=E?0:1.5;E?(M.offsetLeft=q.l,M.offsetTop=q.t):M.selection.size()&&(I=c.select(M.selection.node().parentNode).attr("transform").match(/translate\(([-\.\d]+),([-\.\d]+)\)/),I&&(M.offsetLeft=
+I[1],M.offsetTop=+I[2]));E&&r.titleside?(C=q.l+r.titlex*q.w,B=q.t+(1-r.titley)*q.h+("top"===r.titleside?3+.75*O:-3-.25*O),y={x:C,y:B,"text-anchor":"start"},M={},d="h"+d):"x"===z?(G=r,F="free"===G.anchor?{_offset:q.t+(1-(G.position||0))*q.h,_length:0}:h.Axes.getFromId(b,G.anchor),C=G._offset+G._length/2,B=F._offset+("top"===G.side?-10-O*(Q+(G.showticklabels?1:0)):F._length+10+O*(Q+(G.showticklabels?1.5:.5))),y={x:C,y:B,"text-anchor":"middle"},M.side||(M.side="bottom")):"y"===z?(F=r,G="free"===F.anchor?
{_offset:q.l+(F.position||0)*q.w,_length:0}:h.Axes.getFromId(b,F.anchor),B=F._offset+F._length/2,C=G._offset+("right"===F.side?G._length+10+O*(Q+(F.showticklabels?1:.5)):-10-O*(Q+(F.showticklabels?.5:0))),y={x:C,y:B,"text-anchor":"middle"},P={rotate:"-90",offset:0},M.side||(M.side="left")):(H="Plot",O=k.titlefont.size,C=k.width/2,B=k._size.t/2,y={x:C,y:B,"text-anchor":"middle"},M={});var T=1,R=!1,S=r.title.trim();""===S&&(T=0);S.match(/Click to enter .+ title/)&&(T=.2,R=!0);E?(q=c.select(b).selectAll("."+
r._id.substr(1)+" .cbtitle"),z="h"===d.charAt(0)?d.substr(1):"h"+d,q.selectAll("."+z+",."+z+"-math-group").remove()):(q=k._infolayer.selectAll(".g-"+d).data([0]),q.enter().append("g").classed("g-"+d,!0));q=q.selectAll("text").data([0]);q.enter().append("text");q.text(S).attr("class",d);q.attr({"data-unformatted":S}).call(g);var X="Click to enter "+H.replace(/\d+/,"")+" title";b._context.editable?(S||w(),q.call(h.util.makeEditable).on("edit",function(c){E?e.traceIs(b._fullData[u],"markerColorscale")?
h.restyle(b,"marker.colorbar.title",c,u):h.restyle(b,"colorbar.title",c,u):h.relayout(b,D,c)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(g)}).on("input",function(b){this.text(b||" ").attr(y).selectAll("tspan.line").attr(y)})):(!S||S.match(/Click to enter .+ title/))&&q.remove();q.classed("js-placeholder",R)}},{"../../plotly":348,d3:53,"fast-isnumeric":58}],317:[function(b,m,g){m.exports={DZA:"algeria",AGO:"angola",EGY:"egypt",BGD:"bangladesh|^(?=.*east).*paki?stan",NER:"\\bniger(?!ia)",
LIE:"liechtenstein",NAM:"namibia",BGR:"bulgaria",BOL:"bolivia",GHA:"ghana|gold.?coast",CCK:"\\bcocos|keeling",PAK:"^(?!.*east).*paki?stan",CPV:"verde",JOR:"jordan",LBR:"liberia",LBY:"libya",MYS:"malaysia",IOT:"british.?indian.?ocean",PRI:"puerto.?rico",MYT:"mayotte",PRK:"^(?=.*democrat).*\\bkorea|^(?=.*people).*\\bkorea|^(?=.*north).*\\bkorea|\\bd\\.?p\\.?r\\.?k",PSE:"palestin|\\bgaza|west.?bank",TZA:"tanzania",BWA:"botswana|bechuana",KHM:"cambodia|kampuchea|khmer|^p\\.?r\\.?k\\.?$",UMI:"minor.?outlying.?is",
TTO:"trinidad|tobago",PRY:"paraguay",HKG:"hong.?kong",SAU:"\\bsa\\w*.?arabia",LBN:"lebanon",SVN:"slovenia",BFA:"burkina|\\bfaso|upper.?volta",SVK:"^(?!.*cze).*slovak",MRT:"mauritania",HRV:"croatia",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai).*china|^p\\.?r\\.?c\\.?$",KNA:"kitts|\\bnevis",JAM:"jamaica",SMR:"san.?marino",GIB:"gibraltar",DJI:"djibouti",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",FIN:"finland",URY:"uruguay",VAT:"holy.?see|vatican|papal.?st",STP:"\\bs(a|\u00e3)o.?tom(e|\u00e9)",
SYC:"seychell",NPL:"nepal",CXR:"christmas",LAO:"\\blaos?\\b",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",BVT:"bouvet",ZAF:"\\bs\\w*.?africa",KIR:"kiribati",PHL:"philippines",SXM:"^(?!.*martin)(?!.*saba).*maarten",ROU:"r(o|u|ou)mania",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",SYR:"syria",MAC:"maca(o|u)",NFK:"norfolk",NIC:"nicaragua",MLT:"\\bmalta",KAZ:"kazak",TCA:"turks",PYF:"french.?polynesia|tahiti",NIU:"niue",DMA:"dominica(?!n)",
GBR:"united.?kingdom|britain|^u\\.?k\\.?$",BEN:"benin|dahome",GUF:"^(?=.*french).*guiana",BEL:"^(?!.*luxem).*belgium",MSR:"montserrat",TGO:"togo",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GUM:"\\bguam",LKA:"sri.?lanka|ceylon",SSD:"\\bs\\w*.?sudan",FLK:"falkland|malvinas",PCN:"pitcairn",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",GUY:"guyana|british.?guiana",CRI:"costa.?rica",COK:"\\bcook",MAR:"morocco|\\bmaroc",MNP:"mariana",LSO:"lesotho|basuto",HUN:"^(?!.*austr).*hungary",
TKM:"turkmen",SUR:"surinam|dutch.?guiana",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",BMU:"bermuda",HMD:"heard.*mcdonald",TCD:"\\bchad",GEO:"^(?!.*south).*georgia",MNE:"^(?!.*serbia).*montenegro",MNG:"mongolia",MHL:"marshall",MTQ:"martinique",CSK:"czechoslovakia",BLZ:"belize|^(?=.*british).*honduras",DDR:"german.?democratic.?republic|^(d|g)\\.?d\\.?r\\.?$|^(?=.*east).*germany",MMR:"myanmar|burma",AFG:"afghan",BDI:"burundi",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",
BLR:"belarus|byelo",BLM:"barth(e|\u00e9)lemy",GRD:"grenada",TKL:"tokelau",GRC:"greece|hellenic|hellas",GRL:"greenland",SHN:"helena",AND:"andorra",MOZ:"mozambique",TJK:"tajik",THA:"thailand|\\bsiam",HTI:"haiti",MEX:"\\bmexic",ANT:"^(?=.*\\bant).*(nether|dutch)",ZWE:"zimbabwe|^(?!.*northern).*rhodesia",LCA:"\\blucia",IND:"india(?!.*ocea)",LVA:"latvia",BTN:"bhutan",VCT:"vincent",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",NOR:"norway",CZE:"^(?=.*rep).*czech|czechia|bohemia",ATF:"french.?southern|\\bfr.*\\bso.*\\ban.*\\b\\bt",
ATG:"antigua",FJI:"fiji",HND:"^(?!.*brit).*honduras",MUS:"mauritius",DOM:"dominican",LUX:"^(?!.*belg).*luxem",ISR:"israel",YUG:"yugoslavia",FSM:"micronesia",PER:"peru",REU:"r(e|\u00e9)union",IDN:"indonesia",VUT:"vanuatu|new.?hebrides",MKD:"macedonia|^f\\.?y\\.?r\\.?o\\.?m\\.?$",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bdr|\\bdr.*congo|\\bd\\.?r\\.?c|\\bd\\.?r\\.?o\\.?c|\\br\\.?d\\.?c|belgian.?congo|congo.?free.?state|kinshasa|zaire|l\\w{1,2}opoldville",COG:"^(?!.*\\bdem)(?!.*\\bdr)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l\\w{1,2}opoldville)(?!.*free).*\\bcongo",
ISL:"iceland",GLP:"guadeloupe",ETH:"ethiopia|abyssinia",COM:"comoro",COL:"colombia",NGA:"nigeria",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TWN:"taiwan|taipei|formosa",PRT:"portugal",MDA:"moldov|b(a|e)ssarabia",GGY:"guernsey",MDG:"madagascar|malagasy",ATA:"antarctica",ECU:"ecuador",SEN:"senegal",ESH:"sahara",MDV:"maldive",ASM:"^(?=.*americ).*samoa",SPM:"miquelon",CUW:"^(?!.*bonaire).*\\bcura(c|\u00e7)ao",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",LTU:"lithuania",RWA:"rwanda",
ZMB:"zambia|northern.?rhodesia",GMB:"gambia",WLF:"futuna|wallis",JEY:"jersey",FRO:"faroe|faeroe",GTM:"guatemala",DNK:"denmark",IMN:"^(?=.*isle).*\\bman",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baust.*\\bemp",SJM:"svalbard",VEN:"venezuela",PLW:"palau",KEN:"kenya|british.?east.?africa|east.?africa.?prot",TUR:"turkey",ALB:"albania",OMN:"\\boman|trucial",TUV:"tuvalu",ALA:"\\b(a|\u00e5)land",BRN:"brunei",
TUN:"tunisia",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",BRB:"barbados",BRA:"brazil",CIV:"ivoire|ivory",SRB:"^(?!.*monte).*serbia",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",USA:"^(?!.*islands).*united.?states|^u\\.?s\\.?a\\.?$|^u\\.?s\\.?$",QAT:"qatar",WSM:"^(?!.*amer).*samoa",AZE:"azerbaijan",GNB:"bissau|^(?=.*portu).*guinea",SWZ:"swaziland",TON:"tonga",CAN:"canada",UKR:"ukrain",KOR:"^(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea|\\br\\.?o\\.?k\\b",AIA:"anguill?a",
CAF:"\\bcen.*\\baf|^c\\.?a\\.?r\\.?$",CHE:"switz|swiss",CYP:"cyprus",BIH:"herzegovina|bosnia",SGP:"singapore",SGS:"south.?georgia|sandwich",SOM:"somali",UZB:"uzbek",CMR:"cameroon",POL:"poland",EAZ:"zanz",KWT:"kuwait",ERI:"eritrea",GAB:"gabon",CYM:"cayman",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",EST:"estonia",MWI:"malawi|nyasa",ESP:"spain",IRQ:"\\biraq|mesopotamia",SLV:"el.?salvador",MLI:"\\bmali\\b",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",
IRL:"ireland",IRN:"\\biran|persia",ABW:"^(?!.*bonaire).*\\baruba",SLE:"sierra",PAN:"panama",SDN:"^(?!.*\\bs(?!u)).*sudan",SLB:"solomon",NZL:"new.?zealand",MCO:"monaco",ITA:"italy",JPN:"japan",KGZ:"kyrgyz|kirghiz",UGA:"uganda",NCL:"new.?caledonia",PNG:"papua|\\bp.*\\bn.*\\bguin.*|^p\\.?n\\.?g\\.?$|new.?guinea",ARG:"argentin",SWE:"sweden",BHS:"bahamas",BHR:"bahrain",ARM:"armenia",NRU:"nauru",CUB:"\\bcuba"}},{}],318:[function(b,m,g){b=m.exports={};b.projNames={equirectangular:"equirectangular",mercator:"mercator",
orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa"};b.axesNames=
["lonaxis","lataxis"];b.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};b.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};b.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,80],
projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};b.clipPad=
.001;b.precision=.1;b.landColor="#F0DC82";b.waterColor="#3399FF";b.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};b.sphereSVG={type:"Sphere"};b.fillLayers=["ocean","land","lakes"];b.lineLayers=["subunits","countries","coastlines","rivers","frame"];b.baseLayers="ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame".split(" ");b.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",
rivers:"river",frame:"frame"};b.baseLayersOverChoropleth=["rivers","lakes"]},{}],319:[function(b,m,g){m.exports={solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},{}],320:[function(b,m,g){m.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],321:[function(b,m,g){m.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",
cross:"+",x:"\u274c"}},{}],322:[function(b,m,g){"undefined"!=typeof MathJax?(g.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):g.MathJax=!1},{}],323:[function(b,m,g){m=b("./plotly");g.version=b("../package.json").version;g.plot=m.plot;g.newPlot=m.newPlot;g.restyle=m.restyle;g.relayout=m.relayout;g.redraw=m.redraw;g.extendTraces=m.extendTraces;g.prependTraces=m.prependTraces;g.addTraces=
m.addTraces;g.deleteTraces=m.deleteTraces;g.moveTraces=m.moveTraces;g.setPlotConfig=b("./plot_api/set_plot_config");g.Icons=b("../build/ploticon");g.Plots=m.Plots;g.Fx=m.Fx;g.Snapshot=m.Snapshot;g.PlotSchema=m.PlotSchema;g.Queue=m.Queue;g.d3=b("d3")},{"../build/ploticon":2,"../package.json":279,"./plot_api/set_plot_config":347,"./plotly":348,d3:53}],324:[function(b,m,g){m.exports=function(b,c,g,e){Array.isArray(b)&&(c[g]=b[e])}},{}],325:[function(b,m,g){var h=b("fast-isnumeric"),c=b("tinycolor2"),
l=b("./nested_property"),e=b("../components/colorscale/get_scale");Object.keys(b("../components/colorscale/scales"));g.valObjects={data_array:{coerceFunction:function(b,c,d){Array.isArray(b)?c.set(b):void 0!==d&&c.set(d)}},enumerated:{coerceFunction:function(b,c,d,e){e.coerceNumber&&(b=+b);-1===e.values.indexOf(b)?c.set(d):c.set(b)}},"boolean":{coerceFunction:function(b,c,d){!0===b||!1===b?c.set(b):c.set(d)}},number:{coerceFunction:function(b,c,d,e){!h(b)||void 0!==e.min&&b<e.min||void 0!==e.max&&
b>e.max?c.set(d):c.set(+b)}},integer:{coerceFunction:function(b,c,d,e){b%1||!h(b)||void 0!==e.min&&b<e.min||void 0!==e.max&&b>e.max?c.set(d):c.set(+b)}},string:{coerceFunction:function(b,c,d,e){if(!0===e.strict&&"string"!=typeof b)return void c.set(d);var h=String(b);void 0===b||!0===e.noBlank&&!h?c.set(d):c.set(h)}},color:{coerceFunction:function(b,e,d){c(b).isValid()?e.set(b):e.set(d)}},colorscale:{coerceFunction:function(b,c,d){c.set(e(b,d))}},angle:{coerceFunction:function(b,c,d){"auto"===b?c.set("auto"):
h(b)?(180<Math.abs(b)&&(b-=360*Math.round(b/360)),c.set(+b)):c.set(d)}},axisid:{coerceFunction:function(b,c,d){if("string"==typeof b&&b.charAt(0)===d){var e=Number(b.substr(1));if(0===e%1&&1<e)return void c.set(b)}c.set(d)}},sceneid:{coerceFunction:function(b,c,d){if("string"==typeof b&&b.substr(0,5)===d){var e=Number(b.substr(5));if(0===e%1&&1<e)return void c.set(b)}c.set(d)}},geoid:{coerceFunction:function(b,c,d){if("string"==typeof b&&b.substr(0,3)===d){var e=Number(b.substr(3));if(0===e%1&&1<
e)return void c.set(b)}c.set(d)}},flaglist:{coerceFunction:function(b,c,d,e){if("string"!=typeof b)return void c.set(d);if(-1!==e.extras.indexOf(b))return void c.set(b);b=b.split("+");for(var h=0;h<b.length;){var g=b[h];-1===e.flags.indexOf(g)||b.indexOf(g)<h?b.splice(h,1):h++}b.length?c.set(b.join("+")):c.set(d)}},any:{coerceFunction:function(b,c,d){void 0===b?c.set(d):c.set(b)}},info_array:{coerceFunction:function(b,c,d,e){if(!Array.isArray(b))return void c.set(d);e=e.items;var h=[];d=Array.isArray(d)?
d:[];for(var l=0;l<e.length;l++)g.coerce(b,h,e,"["+l+"]",d[l]);c.set(h)}}};g.coerce=function(b,c,d,e,h){d=l(d,e).get();b=l(b,e);c=l(c,e);e=b.get();return void 0===h&&(h=d.dflt),d.arrayOk&&Array.isArray(e)?(c.set(e),e):(g.valObjects[d.valType].coerceFunction(e,c,h,d),c.get())};g.coerce2=function(b,c,d,e,h){var m=l(b,e);b=g.coerce(b,c,d,e,h);return m.get()?b:!1};g.coerceFont=function(b,c,d){var e={};return d=d||{},e.family=b(c+".family",d.family),e.size=b(c+".size",d.size),e.color=b(c+".color",d.color),
e}},{"../components/colorscale/get_scale":295,"../components/colorscale/scales":301,"./nested_property":335,"fast-isnumeric":58,tinycolor2:213}],326:[function(b,m,g){function h(b,c){return String(b+Math.pow(10,c)).substr(1)}var c=b("d3"),l=b("fast-isnumeric");g.dateTime2ms=function(b){try{if(b.getTime)return+b}catch(c){return!1}var d,e,f,h,k=String(b).split(" ");if(2<k.length)return!1;var g=k[0].split("-");if(3<g.length||3!==g.length&&k[1])return!1;if(4===g[0].length)d=Number(g[0]);else{if(2!==g[0].length)return!1;
d=(new Date).getFullYear();d=((Number(g[0])-d+70)%100+200)%100+d-70}return l(d)?1===g.length?(new Date(d,0,1)).getTime():(e=Number(g[1])-1,2<g[1].length||!(0<=e&&11>=e)?!1:2===g.length?(new Date(d,e,1)).getTime():(f=Number(g[2]),2<g[2].length||!(1<=f&&31>=f)?!1:(f=(new Date(d,e,f)).getTime(),k[1]?(g=k[1].split(":"),3<g.length?!1:(h=Number(g[0]),2<g[0].length||!(0<=h&&23>=h)?!1:(f+=36E5*h,1===g.length?f:(e=Number(g[1]),2<g[1].length||!(0<=e&&59>=e)?!1:(f+=6E4*e,2===g.length?f:(b=Number(g[2]),0<=b&&
60>b?f+1E3*b:!1)))))):f))):!1};g.isDateTime=function(b){return!1!==g.dateTime2ms(b)};g.ms2DateTime=function(b,d){if("undefined"==typeof c)return void console.log("d3 is not defined");d||(d=0);var e=new Date(b),f=c.time.format("%Y-%m-%d")(e);return 7776E6>d?(f+=" "+h(e.getHours(),2),432E6>d&&(f+=":"+h(e.getMinutes(),2),108E5>d&&(f+=":"+h(e.getSeconds(),2),3E5>d&&(f+="."+h(e.getMilliseconds(),3)))),f.replace(/([:\s]00)*\.?[0]*$/,"")):f};var e={H:["%H:%M:%S~%L","%H:%M:%S","%H:%M"],I:["%I:%M:%S~%L%p",
"%I:%M:%S%p","%I:%M%p"],D:["%H","%I%p","%Hh"]},f={Y:["%Y~%m~%d","%Y%m%d","%y%m%d","%m~%d~%Y","%d~%m~%Y"],Yb:["%b~%d~%Y","%d~%b~%Y","%Y~%d~%b","%Y~%b~%d"],y:["%m~%d~%y","%d~%m~%y","%y~%m~%d"],yb:["%b~%d~%y","%d~%b~%y","%y~%d~%b","%y~%b~%d"]},v=c.time.format.utc,d={Y:{H:["%Y~%m~%dT%H:%M:%S","%Y~%m~%dT%H:%M:%S~%L"].map(v),I:[],D:["%Y%m%d%H%M%S","%Y~%m","%m~%Y"].map(v)},Yb:{H:[],I:[],D:["%Y~%b","%b~%Y"].map(v)},y:{H:[],I:[],D:[]},yb:{H:[],I:[],D:[]}};["Y","Yb","y","yb"].forEach(function(b){f[b].forEach(function(c){d[b].D.push(v(c));
["H","I","D"].forEach(function(f){e[f].forEach(function(e){var h=d[b][f];h.push(v(c+"~"+e));h.push(v(e+"~"+c))})})})});var p=/[a-z]*/g,t=function(b){return b.substr(0,3)},x=/(mon|tue|wed|thu|fri|sat|sun|the|of|st|nd|rd|th)/g,w=/[\s,\/\-\.\(\)]+/g,u=/~?([ap])~?m(~|$)/,r=function(b,c){return c+"m "},y=/\d\d\d\d/,k=/(^|~)[a-z]{3}/,q=/[ap]m/,z=/:/,E=/q([1-4])/,A=["31~mar","30~jun","30~sep","31~dec"],C=function(b,c){return A[c-1]},B=/ ?([+\-]\d\d:?\d\d|Z)$/;g.parseDate=function(b){if(b.getTime)return b;
if("string"!=typeof b)return!1;b=b.toLowerCase().replace(p,t).replace(x,"").replace(w,"~").replace(u,r).replace(E,C).trim().replace(B,"");var c,e,f=null;c=b;c=(e=y.test(c)?"Y":"y",e+(k.test(c)?"b":""));e=b;e=z.test(e)?q.test(e)?"I":"H":"D";c=d[c][e];e=c.length;for(var h=0;e>h&&!(f=c[h].parse(b));h++);if(!(f instanceof Date))return!1;b=f.getTimezoneOffset();return f.setTime(f.getTime()+6E4*b),f}},{d3:53,"fast-isnumeric":58}],327:[function(b,m,g){var h=b("events").EventEmitter;m.exports={init:function(b){if(b._ev instanceof
h)return b;var g=new h;return b._ev=g,b.on=g.on.bind(g),b.once=g.once.bind(g),b.removeListener=g.removeListener.bind(g),b.removeAllListeners=g.removeAllListeners.bind(g),b.emit=function(e,f){"undefined"!=typeof $&&$(b).trigger(e,f);g.emit(e,f)},b},triggerHandler:function(b,h,e){var f,g;"undefined"!=typeof $&&(f=$(b).triggerHandler(h,e));b=b._ev;if(!b)return f;h=b._events[h];if(!h)return f;"function"==typeof h&&(h=[h]);b=h.pop();for(var d=0;d<h.length;d++)h[d](e);return g=b(e),void 0!==f?f:g}}},{events:57}],
328:[function(b,m,g){function h(b,f,g){for(var d,p,t,m,w,u,r=b[0],y=b.length,k=1;y>k;k++)for(p in d=b[k],d)t=r[p],m=d[p],f&&m&&(c(m)||(w=l(m)))?(w?(w=!1,u=t&&l(t)?t:[]):u=t&&c(t)?t:{},r[p]=h([u,m],f,g)):("undefined"!=typeof m||g)&&(r[p]=m);return r}var c=b("./is_plain_object.js"),l=Array.isArray;g.extendFlat=function(){return h(arguments,!1,!1)};g.extendDeep=function(){return h(arguments,!0,!1)};g.extendDeepAll=function(){return h(arguments,!0,!0)}},{"./is_plain_object.js":333}],329:[function(b,m,
g){m=m.exports={};g=b("../plotly");var h=b("../constants/country-name_to_iso3.json"),c=Object.keys(h),l={"ISO-3":g.Lib.identity,"USA-states":g.Lib.identity,"country names":function(b){for(var f,g,d=0;d<c.length;d++)if(f=c[d],g=new RegExp(h[f]),g.test(b.toLowerCase()))return f;console.warn("unrecognized country name: "+b+".")}};m.locationToFeature=function(b,c,h){var d;b=(0,l[b])(c);for(c=0;c<h.length;c++)if(d=h[c],d.id===b)return d;console.warn(["location with id",b,"does not have a matching topojson feature at this resolution."].join(" "))}},
{"../constants/country-name_to_iso3.json":317,"../plotly":348}],330:[function(b,m,g){function h(b,c){var e=d(b);return e[3]*=c,e}function c(b){return f(b).isValid()?b:p}function l(b){return v(b)?b:t}var e=b("../plotly"),f=b("tinycolor2"),v=b("fast-isnumeric"),d=b("./str2rgbarray"),p=b("../components/color/attributes").defaultLine,t=1;m.exports=function(b,d,f){var g,m,k,q,v=b.color;k=Array.isArray(v);q=Array.isArray(d);var E=[];if(g=void 0!==b.colorscale?e.Colorscale.makeScaleFunction(b.colorscale,
b.cmin,b.cmax):c,b=k?function(b,c){return void 0===b[c]?p:g(b[c])}:c,m=q?function(b,c){return void 0===b[c]?t:l(b[c])}:l,k||q)for(var A=0;f>A;A++)k=b(v,A),q=m(d,A),E[A]=h(k,q);else E=h(v,d);return E}},{"../components/color/attributes":283,"../plotly":348,"./str2rgbarray":341,"fast-isnumeric":58,tinycolor2:213}],331:[function(b,m,g){var h=b("superscript-text"),c={mu:"\u03bc",amp:"&",lt:"<",gt:">"};m.exports=function(b){b=b.replace(/\<br\>/g,"\n");for(var e=0;0<=(e=b.indexOf("<sup>",e));){var f=b.indexOf("</sup>",
e);if(e>f)break;b=b.slice(0,e)+h(b.slice(e+5,f))+b.slice(f+6)}b=b.replace(/\<.*\>/g,"");for(e=0;0<=(e=b.indexOf("&",e));)if(f=b.indexOf(";",e),e>f)e+=1;else{var g=c[b.slice(e+1,f)];b=g?b.slice(0,e)+g+b.slice(f+1):b.slice(0,e)+b.slice(f+1)}return""+b}},{"superscript-text":199}],332:[function(b,m,g){var h=b("d3"),c=m.exports={};c.nestedProperty=b("./nested_property");c.isPlainObject=b("./is_plain_object");m=b("./coerce");c.valObjects=m.valObjects;c.coerce=m.coerce;c.coerce2=m.coerce2;c.coerceFont=m.coerceFont;
m=b("./dates");c.dateTime2ms=m.dateTime2ms;c.isDateTime=m.isDateTime;c.ms2DateTime=m.ms2DateTime;c.parseDate=m.parseDate;m=b("./search");c.findBin=m.findBin;c.sorterAsc=m.sorterAsc;c.distinctVals=m.distinctVals;c.roundUp=m.roundUp;m=b("./stats");c.aggNums=m.aggNums;c.len=m.len;c.mean=m.mean;c.variance=m.variance;c.stdev=m.stdev;c.interp=m.interp;m=b("./matrix");c.init2dArray=m.init2dArray;c.transposeRagged=m.transposeRagged;c.dot=m.dot;c.translationMatrix=m.translationMatrix;c.rotationMatrix=m.rotationMatrix;
c.rotationXYMatrix=m.rotationXYMatrix;c.apply2DTransform=m.apply2DTransform;c.apply2DTransform2=m.apply2DTransform2;m=b("./extend");c.extendFlat=m.extendFlat;c.extendDeep=m.extendDeep;c.extendDeepAll=m.extendDeepAll;c.notifier=b("./notifier");c.swapAttrs=function(b,e,f,h){f||(f="x");h||(h="y");for(var d=0;d<e.length;d++){var g=e[d],t=c.nestedProperty(b,g.replace("?",f)),g=c.nestedProperty(b,g.replace("?",h)),m=t.get();t.set(g.get());g.set(m)}};c.pauseEvent=function(b){return b.stopPropagation&&b.stopPropagation(),
b.preventDefault&&b.preventDefault(),b.cancelBubble=!0,!1};c.VERBOSE=!1;c.TIMER=(new Date).getTime();c.log=function(){c.VERBOSE&&console.log.apply(console,arguments)};c.markTime=function(b){if(c.VERBOSE){var e=(new Date).getTime();console.log(b,e-c.TIMER,"(msec)");"trace"===c.VERBOSE&&console.trace();c.TIMER=e}};c.constrain=function(b,c,f){return c>f?Math.max(f,Math.min(c,b)):Math.max(c,Math.min(f,b))};c.bBoxIntersect=function(b,c,f){return f=f||0,b.left<=c.right+f&&c.left<=b.right+f&&b.top<=c.bottom+
f&&c.top<=b.bottom+f};c.identity=function(b){return b};c.randstr=function e(b,c,d){if(d||(d=16),void 0===c&&(c=24),0>=c)return"0";var h,g,m,w=Math.log(Math.pow(2,c))/Math.log(d),u="";for(h=2;w===1/0;h*=2)w=Math.log(Math.pow(2,c/h))/Math.log(d)*h;var r=w-Math.floor(w);for(h=0;h<Math.floor(w);h++)m=Math.floor(Math.random()*d).toString(d),u=m+u;r&&(g=Math.pow(d,r),m=Math.floor(Math.random()*g).toString(d),u=m+u);h=parseInt(u,d);return b&&-1<b.indexOf(u)||h!==1/0&&h>=Math.pow(2,c)?e(b,c,d):u};c.OptionControl=
function(b,c){b||(b={});c||(c="opt");var h={};return h.optionList=[],h._newoption=function(d){d[c]=b;h[d.name]=d;h.optionList.push(d)},h["_"+c]=b,h};c.smooth=function(b,c){if(c=Math.round(c)||0,2>c)return b;var h,d,g,t,m=b.length,w=2*m,u=2*c-1,r=Array(u),y=Array(m);for(h=0;u>h;h++)r[h]=(1-Math.cos(Math.PI*(h+1)/c))/(2*c);for(h=0;m>h;h++){for(d=t=0;u>d;d++)g=h+d+1-c,-m>g?g-=w*Math.round(g/w):g>=w&&(g-=w*Math.floor(g/w)),0>g?g=-1-g:g>=m&&(g=w-1-g),t+=b[g]*r[d];y[h]=t}return y};c.promiseError=function(b){console.log(b,
b.stack)};c.syncOrAsync=function(b,f,h){function d(){return c.markTime("async done "+t.name),c.syncOrAsync(b,f,h)}for(var g,t;b.length;){if(t=b.splice(0,1)[0],g=t(f),g&&g.then)return g.then(d).then(void 0,c.promiseError);c.markTime("sync done "+t.name)}return h&&h(f)};c.stripTrailingSlash=function(b){return"/"===b.substr(-1)?b.substr(0,b.length-1):b};c.noneOrAll=function(b,c,h){if(b){var d,g,t=!1,m=!0;for(d=0;d<h.length;d++)g=b[h[d]],void 0!==g&&null!==g?t=!0:m=!1;if(t&&!m)for(d=0;d<h.length;d++)b[h[d]]=
c[h[d]]}};c.mergeArray=function(b,c,h){if(Array.isArray(b))for(var d=Math.min(b.length,c.length),g=0;d>g;g++)c[g][h]=b[g]};c.minExtend=function(b,f){var h={};"object"!=typeof f&&(f={});var d,g,t,m=Object.keys(b);for(d=0;d<m.length;d++)g=m[d],t=b[g],"_"!==g.charAt(0)&&"function"!=typeof t&&("module"===g?h[g]=t:Array.isArray(t)?h[g]=t.slice(0,3):t&&"object"==typeof t?h[g]=c.minExtend(b[g],f[g]):h[g]=t);m=Object.keys(f);for(d=0;d<m.length;d++)g=m[d],t=f[g],"object"==typeof t&&g in h&&"object"==typeof h[g]||
(h[g]=t);return h};c.titleCase=function(b){return b.charAt(0).toUpperCase()+b.substr(1)};c.containsAny=function(b,c){for(var h=0;h<c.length;h++)if(-1!==b.indexOf(c[h]))return!0;return!1};c.getPlotDiv=function(b){for(;b&&b.removeAttribute;b=b.parentNode)if(c.isPlotDiv(b))return b};c.isPlotDiv=function(b){b=h.select(b);return b.size()&&b.classed("js-plotly-plot")};c.removeElement=function(b){var c=b&&b.parentNode;c&&c.removeChild(b)};c.addStyleRule=function(b,f){if(!c.styleSheet){var h=document.createElement("style");
h.appendChild(document.createTextNode(""));document.head.appendChild(h);c.styleSheet=h.sheet}h=c.styleSheet;h.insertRule?h.insertRule(b+"{"+f+"}",0):h.addRule?h.addRule(b,f,0):console.warn("addStyleRule failed")};c.isIE=function(){return"undefined"!=typeof window.navigator.msSaveBlob}},{"./coerce":325,"./dates":326,"./extend":328,"./is_plain_object":333,"./matrix":334,"./nested_property":335,"./notifier":336,"./search":338,"./stats":340,d3:53}],333:[function(b,m,g){m.exports=function(b){return"[object Object]"===
Object.prototype.toString.call(b)&&Object.getPrototypeOf(b)===Object.prototype}},{}],334:[function(b,m,g){g.init2dArray=function(b,c){for(var g=Array(b),e=0;b>e;e++)g[e]=Array(c);return g};g.transposeRagged=function(b){var c,g,e=0,f=b.length;for(c=0;f>c;c++)e=Math.max(e,b[c].length);var m=Array(e);for(c=0;e>c;c++)for(m[c]=Array(f),g=0;f>g;g++)m[c][g]=b[g][c];return m};g.dot=function(b,c){if(!b.length||!c.length||b.length!==c.length)return null;var l,e,f=b.length;if(b[0].length)for(l=Array(f),e=0;f>
e;e++)l[e]=g.dot(b[e],c);else if(c[0].length)for(f=g.transposeRagged(c),l=Array(f.length),e=0;e<f.length;e++)l[e]=g.dot(b,f[e]);else for(e=l=0;f>e;e++)l+=b[e]*c[e];return l};g.translationMatrix=function(b,c){return[[1,0,b],[0,1,c],[0,0,1]]};g.rotationMatrix=function(b){b=b*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]};g.rotationXYMatrix=function(b,c,l){return g.dot(g.dot(g.translationMatrix(c,l),g.rotationMatrix(b)),g.translationMatrix(-c,-l))};g.apply2DTransform=
function(b){return function(){var c=arguments;3===c.length&&(c=c[0]);c=1===arguments.length?c[0]:[c[0],c[1]];return g.dot(b,[c[0],c[1],1]).slice(0,2)}};g.apply2DTransform2=function(b){var c=g.apply2DTransform(b);return function(b){return c(b.slice(0,2)).concat(c(b.slice(2,4)))}}},{}],335:[function(b,m,g){function h(b,c){return function(){var d,e,f,g,l=b;for(f=0;f<c.length-1;f++){if(d=c[f],-1===d){d=!0;e=[];for(g=0;g<l.length;g++)e[g]=h(l[g],c.slice(f+1))(),e[g]!==e[0]&&(d=!1);return d?e[0]:e}if("number"==
typeof d&&!Array.isArray(l)||(l=l[d],"object"!=typeof l||null===l))return}return"object"!=typeof l||null===l?void 0:(e=l[c[f]],null===e?void 0:e)}}function c(b,c){var d=-1===["annotations","shapes","range","domain"].indexOf(c);return Array.isArray(b)&&d}function l(b,d){return function(h){var g,u,r=b,m=[b],k=f(h)&&!c(h,d[d.length-1]);for(u=0;u<d.length-1;u++){if(g=d[u],"number"==typeof g&&!Array.isArray(r))throw"array index but container is not an array";if(-1===g){g=r;for(var k=d.slice(u+1),q=h,v=
void 0,E=Array.isArray(q),A=!0,C=q,B=E?!1:f(q),G=k[0],v=0;v<g.length;v++)E&&(C=q[v%q.length],B=f(C)),B&&(A=!1),e(g,v,G,B)&&l(g[v],k)(C);if(k=!A)break;return}if(!e(r,g,d[u+1],k))break;if(r=r[g],"object"!=typeof r||null===r)throw"container is not an object";m.push(r)}if(k){u===d.length-1&&delete r[d[u]];a:{var F;for(h=m.length-1;0<=h;h--){if(F=m[h],g=!1,Array.isArray(F))for(u=F.length-1;0<=u;u--)f(F[u])?g?F[u]=void 0:F.pop():g=!0;else if("object"==typeof F&&null!==F)for(r=Object.keys(F),g=!1,u=r.length-
1;0<=u;u--)f(F[r[u]])&&!c(F[r[u]],r[u])?delete F[r[u]]:g=!0;if(g)break a}}}else r[d[u]]=h}}function e(b,c,d,e){if(void 0===b[c]){if(e)return!1;"number"==typeof d?b[c]=[]:b[c]={}}return!0}function f(b){return void 0===b||null===b?!0:"object"!=typeof b?!1:Array.isArray(b)?!b.length:!Object.keys(b).length}function v(b,c,d){return{set:function(){throw"bad container";},get:function(){},astr:c,parts:d,obj:b}}var d=b("fast-isnumeric");m.exports=function(b,c){if(d(c))c=String(c);else if("string"!=typeof c||
"[-1]"===c.substr(c.length-4))throw"bad property string";for(var e,f,g=0,r=c.split(".");g<r.length;){if(e=String(r[g]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(e[1])r[g]=e[1];else{if(0!==g)throw"bad property string";r.splice(0,1)}e=e[2].substr(1,e[2].length-2).split("][");for(f=0;f<e.length;f++)g++,r.splice(g,0,Number(e[f]))}g++}return"object"!=typeof b?v(b,c,r):{set:l(b,r),get:h(b,r),astr:c,parts:r,obj:b}}},{"fast-isnumeric":58}],336:[function(b,m,g){var h=b("d3"),c=b("fast-isnumeric"),l=[];m.exports=
function(b,f){function g(b){b.duration(700).style("opacity",0).each("end",function(b){b=l.indexOf(b);-1!==b&&l.splice(b,1);h.select(this).remove()})}if(-1===l.indexOf(b)){l.push(b);var d=1E3;c(f)?d=f:"long"===f&&(d=3E3);var p=h.select("body").selectAll(".plotly-notifier").data([0]);p.enter().append("div").classed("plotly-notifier",!0);p.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(b){var c=h.select(this);c.append("button").classed("notifier-close",
!0).html("&times;").on("click",function(){c.transition().call(g)});c.append("p").html(b);c.transition().duration(700).style("opacity",1).transition().delay(d).call(g)})}}},{d3:53,"fast-isnumeric":58}],337:[function(b,m,g){var h=b("../plotly"),c={add:function(b,c,f,h,d){var g,t;return b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},t=b.undoQueue.index,b.autoplay?void(b.undoQueue.inSequence||(b.autoplay=!1)):(!b.undoQueue.sequence||b.undoQueue.beginSequence?(g={undo:{calls:[],args:[]},redo:{calls:[],
args:[]}},b.undoQueue.queue.splice(t,b.undoQueue.queue.length-t,g),b.undoQueue.index+=1):g=b.undoQueue.queue[t-1],b.undoQueue.beginSequence=!1,g.undo.calls.unshift(c),g.undo.args.unshift(f),g.redo.calls.push(h),void g.redo.args.push(d))},startSequence:function(b){b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1};b.undoQueue.sequence=!0;b.undoQueue.beginSequence=!0},stopSequence:function(b){b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1};b.undoQueue.sequence=!1;b.undoQueue.beginSequence=
!1},undo:function(b){var e,f;if(b.framework&&b.framework.isPolar)return void b.framework.undo();if(!(void 0===b.undoQueue||isNaN(b.undoQueue.index)||0>=b.undoQueue.index)){b.undoQueue.index--;e=b.undoQueue.queue[b.undoQueue.index];b.undoQueue.inSequence=!0;for(f=0;f<e.undo.calls.length;f++)c.plotDo(b,e.undo.calls[f],e.undo.args[f]);b.undoQueue.inSequence=!1;b.autoplay=!1}},redo:function(b){var e,f;if(b.framework&&b.framework.isPolar)return void b.framework.redo();if(!(void 0===b.undoQueue||isNaN(b.undoQueue.index)||
b.undoQueue.index>=b.undoQueue.queue.length)){e=b.undoQueue.queue[b.undoQueue.index];b.undoQueue.inSequence=!0;for(f=0;f<e.redo.calls.length;f++)c.plotDo(b,e.redo.calls[f],e.redo.args[f]);b.undoQueue.inSequence=!1;b.autoplay=!1;b.undoQueue.index++}},plotDo:function(b,c,f){b.autoplay=!0;for(var g,d=[],p=0;p<f.length;p++)g=f[p],g===b?d[p]=g:"object"==typeof g?d[p]=Array.isArray(g)?h.Lib.extendDeep([],g):h.Lib.extendDeepAll({},g):d[p]=g;c.apply(null,d)}};m.exports=c},{"../plotly":348}],338:[function(b,
m,g){function h(b,c){return c>b}function c(b,c){return c>=b}function l(b,c){return b>c}function e(b,c){return b>=c}var f=b("fast-isnumeric");g.findBin=function(b,d,g){if(f(d.start))return g?Math.ceil((b-d.start)/d.size)-1:Math.floor((b-d.start)/d.size);var t,m=0,w=d.length,u=0;for(t=d[d.length-1]>=d[0]?g?h:c:g?e:l;w>m&&100>u++;)g=Math.floor((m+w)/2),t(d[g],b)?m=g+1:w=g;return 90<u&&console.log("Long binary search..."),m-1};g.sorterAsc=function(b,c){return b-c};g.distinctVals=function(b){b=b.slice();
b.sort(g.sorterAsc);for(var c=b.length-1,e=b[c]-b[0]||1,f=e/(c||1)/1E4,h=[b[0]],l=0;c>l;l++)b[l+1]>b[l]+f&&(e=Math.min(e,b[l+1]-b[l]),h.push(b[l+1]));return{vals:h,minDiff:e}};g.roundUp=function(b,c,e){for(var f=0,h=c.length-1,g=0,l=e?0:1,r=e?1:0,m=e?Math.ceil:Math.floor;h>f&&100>g++;)e=m((f+h)/2),c[e]<=b?f=e+l:h=e-r;return c[f]}},{"fast-isnumeric":58}],339:[function(b,m,g){var h=b("../plotly");m.exports=function(b){var g=function(){},e;for(e in b)"function"==typeof b[e]&&(b[e]=g);b.destroy=function(){b.container.parentNode.removeChild(b.container)};
g=document.createElement("div");return g.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",g.style.cursor="pointer",g.style.fontSize="24px",g.style.color=h.Color.defaults[0],b.container.appendChild(g),b.container.style.background="#FFFFFF",b.container.onclick=function(){window.open("http://get.webgl.org")},!1}},{"../plotly":348}],340:[function(b,m,g){var h=b("fast-isnumeric");g.aggNums=function(b,l,e,f){var m,d;if(f||(f=e.length),h(l)||(l=!1),Array.isArray(e[0])){d=
Array(f);for(m=0;f>m;m++)d[m]=g.aggNums(b,l,e[m]);e=d}for(m=0;f>m;m++)h(l)?h(e[m])&&(l=b(+l,+e[m])):l=e[m];return l};g.len=function(b){return g.aggNums(function(b){return b+1},0,b)};g.mean=function(b,h){return h||(h=g.len(b)),g.aggNums(function(b,c){return b+c},0,b)/h};g.variance=function(b,l,e){return l||(l=g.len(b)),h(e)||(e=g.mean(b,l)),g.aggNums(function(b,c){return b+Math.pow(c-e,2)},0,b)/l};g.stdev=function(b,h,e){return Math.sqrt(g.variance(b,h,e))};g.interp=function(b,g){if(!h(g))throw"n should be a finite number";
if(g=g*b.length-.5,0>g)return b[0];if(g>b.length-1)return b[b.length-1];var e=g%1;return e*b[Math.ceil(g)]+(1-e)*b[Math.floor(g)]}},{"fast-isnumeric":58}],341:[function(b,m,g){var h=b("tinycolor2"),c=b("arraytools");m.exports=function(b){return b=h(b),c.str2RgbaArray(b.toRgbString())}},{arraytools:32,tinycolor2:213}],342:[function(b,m,g){function h(b,c,d){var h="math-output-"+e.Lib.randstr([],64),g=f.select("body").append("div").attr({id:h}).style({visibility:"hidden",position:"absolute"}).style({"font-size":c.fontSize+
"px"}).text(b.replace(/(<|&lt;|&#60;)/g,"\\lt ").replace(/(>|&gt;|&#62;)/g,"\\gt "));MathJax.Hub.Queue(["Typeset",MathJax.Hub,g.node()],function(){var c=f.select("body").select("#MathJax_SVG_glyphs");if(g.select(".MathJax_SVG").empty()||!g.select("svg").node())console.log("There was an error in the tex syntax.",b),d();else{var e=g.select("svg").node().getBoundingClientRect();d(g.select(".MathJax_SVG"),c,e)}g.remove()})}function c(b){var c=e.util.html_entity_decode(b).split(/(<[^<>]*>)/).map(function(b){var c=
b.match(/<(\/?)([^ >]*)\s*(.*)>/i),f=c&&c[2].toLowerCase(),h=v[f];if(void 0!==h){b=c[1];var c=c[3],g=c.match(/^style\s*=\s*"([^"]+)"\s*/i);if("a"===f){if(b)return"</a>";if("href"!==c.substr(0,4).toLowerCase())return"<a>";f=document.createElement("a");return f.href=c.substr(4).replace(/["'=]/g,""),-1===d.indexOf(f.protocol)?"<a>":'<a xlink:show="new" xlink:href'+c.substr(4)+">"}if("br"===f)return"<br>";if(b)return"sup"===f?'</tspan><tspan dy="0.42em">&#x200b;</tspan>':"sub"===f?'</tspan><tspan dy="-0.21em">&#x200b;</tspan>':
"</tspan>";b="<tspan";return("sup"===f||"sub"===f)&&(b="&#x200b;"+b),g&&(g=g[1].replace(/(^|;)\s*color:/,"$1 fill:"),h=(h?h+";":"")+g),b+(h?' style="'+h+'"':"")+">"}return e.util.xml_entity_encode(b).replace(/</g,"&lt;")});b=[];for(var f=c.indexOf("<br>");0<f;f=c.indexOf("<br>",f+1))b.push(f);var h=0;b.forEach(function(b){b+=h;for(var d=c.slice(0,b),e="",f=d.length-1;0<=f;f--){var g=d[f].match(/<(\/?).*>/i);if(g&&"<br>"!==d[f]){g[1]||(e=d[f]);break}}e&&(c.splice(b+1,0,e),c.splice(b,0,"</tspan>"),
h+=2)});b=c.join("").split(/<br>/gi);return 1<b.length&&(c=b.map(function(b,c){return'<tspan class="line" dy="'+1.3*c+'em">'+b+"</tspan>"})),c.join("")}function l(b,c,d){var e,f,h,g=d.horizontalAlign;d=d.verticalAlign||"top";var l=b.node().getBoundingClientRect(),p=c.node().getBoundingClientRect();return f="bottom"===d?function(){return l.bottom-e.height}:"middle"===d?function(){return l.top+(l.height-e.height)/2}:function(){return l.top},h="right"===g?function(){return l.right-e.width}:"center"===
g?function(){return l.left+(l.width-e.width)/2}:function(){return l.left},function(){return e=this.node().getBoundingClientRect(),this.style({top:f()-p.top+"px",left:h()-p.left+"px","z-index":1E3}),this}}var e=b("../plotly"),f=b("d3");b=m.exports={};f.selection.prototype.appendSVG=function(b){b='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+b+"</svg>";b=(new DOMParser).parseFromString(b,"application/xml");for(var c=b.documentElement.firstChild;c;)this.node().appendChild(this.node().ownerDocument.importNode(c,
!0)),c=c.nextSibling;return b.querySelector("parsererror")?(console.log(b.querySelector("parsererror div").textContent),null):f.select(this.node().lastChild)};b.html_entity_decode=function(b){var c=f.select("body").append("div").style({display:"none"}).html("");b=b.replace(/(&[^;]*;)/gi,function(b){return"&lt;"===b?"&#60;":"&rt;"===b?"&#62;":c.html(b).text()});return c.remove(),b};b.xml_entity_encode=function(b){return b.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")};b.convertToTspans=function(b,
d){function g(){v.empty()||(E=m.attr("class")+"-math",v.select("svg."+E).remove());b.text("").style({visibility:"visible","white-space":"pre"});(q=b.appendSVG(p))||b.text(l);b.select("a").size()&&b.style("pointer-events","all");d&&d.call(m)}var l=b.text(),p=c(l),m=b,k=!m.attr("data-notex")&&p.match(/([^$]*)([$]+[^$]*[$]+)([^$]*)/),q=l,v=f.select(m.node().parentNode);if(!v.empty()){var E=m.attr("class")?m.attr("class").split(" ")[0]:"text",E=E+"-math";v.selectAll("svg."+E).remove();v.selectAll("g."+
E+"-group").remove();b.style({visibility:null});for(var A=b.node();A&&A.removeAttribute;A=A.parentNode)A.removeAttribute("data-bb");k?(A=e.Lib.getPlotDiv(m.node()),(A&&A._promises||[]).push(new Promise(function(b){m.style({visibility:"hidden"});var c={fontSize:parseInt(m.style("font-size"),10)};h(k[2],c,function(c,e,f){v.selectAll("svg."+E).remove();v.selectAll("g."+E+"-group").remove();c=c&&c.select("svg");if(!c||!c.node())return g(),void b();var h=v.append("g").classed(E+"-group",!0).attr({"pointer-events":"none"});
h.node().appendChild(c.node());e&&e.node()&&c.node().insertBefore(e.node().cloneNode(!0),c.node().firstChild);c.attr({"class":E,height:f.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});e=m.style("fill")||"black";c.select("g").attr({fill:e,stroke:e});e=c.node().getBoundingClientRect().width;f=c.node().getBoundingClientRect().height;var k=+m.attr("x")-e*{start:0,middle:.5,end:1}[m.attr("text-anchor")||"start"],l=-(parseInt(m.style("font-size"),10)||m.node().getBoundingClientRect().height)/
4;"y"===E[0]?(h.attr({transform:"rotate("+[-90,+m.attr("x"),+m.attr("y")]+") translate("+[-e/2,l-f/2]+")"}),c.attr({x:+m.attr("x"),y:+m.attr("y")})):"l"===E[0]?c.attr({x:m.attr("x"),y:l-f/2}):"a"===E[0]?c.attr({x:0,y:l}):c.attr({x:k,y:+m.attr("y")+l-f/2});d&&d.call(m,h);b(h)})}))):g();return b}};var v={sup:'font-size:70%" dy="-0.6em',sub:'font-size:70%" dy="0.3em',b:"font-weight:bold",i:"font-style:italic",a:"",span:"",br:"",em:"font-style:italic;font-weight:bold"},d=["http:","https:","mailto:"],
p=new RegExp("</?("+Object.keys(v).join("|")+")( [^>]*)?/?>","g");b.plainText=function(b){return(b||"").replace(p," ")};b.makeEditable=function(b,c,d){function h(){p();k.style({opacity:0});var b;(b=(b=m.attr("class"))?"."+b.split(" ")[0]+"-math-group":"[class*=-math-group]")&&f.select(k.node().parentNode).select(b).style({opacity:0})}function g(b){b=b.node();var c=document.createRange();c.selectNodeContents(b);var d=window.getSelection();d.removeAllRanges();d.addRange(c);b.focus()}function p(){var b=
f.select(e.Lib.getPlotDiv(k.node())).select(".svg-container"),c=b.append("div");c.classed("plugin-editable editable",!0).style({position:"absolute","font-family":k.style("font-family")||"Arial","font-size":k.style("font-size")||12,color:d.fill||k.style("fill")||"black",opacity:1,"background-color":d.background||"transparent",outline:"#ffffff33 1px solid",margin:[-parseFloat(k.style("font-size"))/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(d.text||
k.attr("data-unformatted")).call(l(k,b,d)).on("blur",function(){k.text(this.textContent).style({opacity:1});var b;(b=(b=f.select(this).attr("class"))?"."+b.split(" ")[0]+"-math-group":"[class*=-math-group]")&&f.select(k.node().parentNode).select(b).style({opacity:0});b=this.textContent;f.select(this).transition().duration(0).remove();f.select(document).on("mouseup",null);q.edit.call(k,b)}).on("focus",function(){var b=this;f.select(document).on("mouseup",function(){return f.event.target===b?!1:void(document.activeElement===
c.node()&&c.node().blur())})}).on("keyup",function(){27===f.event.which?(k.style({opacity:1}),f.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),q.cancel.call(k,this.textContent)):(q.input.call(k,this.textContent),f.select(this).call(l(k,b,d)))}).on("keydown",function(){13===f.event.which&&this.blur()}).call(g)}d||(d={});var k=this,q=f.dispatch("edit","input","cancel");b=f.select(this.node()).style({"pointer-events":"all"});var m=c||b;return c&&b.style({"pointer-events":"none"}),
d.immediate?h():m.on("click",h),f.rebind(this,q,"on")}},{"../plotly":348,d3:53}],343:[function(b,m,g){m=m.exports={};var h=b("../constants/geo_constants").locationmodeToLayer,c=b("topojson").feature;m.getTopojsonName=function(b){return[b.scope.replace(/ /g,"-"),"_",b.resolution.toString(),"m"].join("")};m.getTopojsonPath=function(b,c){return b+c+".json"};m.getTopojsonFeatures=function(b,e){return c(e,e.objects[h[b.locationmode]]).features}},{"../constants/geo_constants":318,topojson:214}],344:[function(b,
m,g){function h(b){var c;if("string"==typeof b){if(c=document.getElementById(b),null===c)throw Error("No DOM element with id '"+b+"' exists on the page.");return c}if(null===b||void 0===b)throw Error("DOM element provided is null or undefined");return b}function c(b,c){b._fullLayout._paperdiv.style("background","white");D.defaultConfig.setBackground(b,c)}function l(b,d){b._context||(b._context=D.Lib.extendFlat({},D.defaultConfig));var e=b._context;d&&(Object.keys(d).forEach(function(b){b in e&&("setBackground"===
b&&"opaque"===d[b]?e[b]=c:e[b]=d[b])}),d.plot3dPixelRatio&&!e.plotGlPixelRatio&&(e.plotGlPixelRatio=e.plot3dPixelRatio));e.staticPlot&&(e.editable=!1,e.autosizable=!1,e.scrollZoom=!1,e.doubleClick=!1,e.showTips=!1,e.showLink=!1,e.displayModeBar=!1)}function e(b){var c,d,e,f,h,g=b._fullLayout,k=b._fullData,l=M.getSubplotIds(g,"gl3d");g._paperdiv.style({width:g.width+"px",height:g.height+"px"});b._context.setBackground(b,g.paper_bgcolor);for(c=0;c<l.length;c++)d=l[c],e=M.getSubplotData(k,"gl3d",d),
f=g[d]._scene,void 0===f&&(h={container:b.querySelector(".gl-container"),id:d,staticPlot:b._context.staticPlot,plotGlPixelRatio:b._context.plotGlPixelRatio},f=new D.Scene(h,g),g[d]._scene=f),f.plot(e,g,b.layout)}function f(b){var c,d,e,f,h=b._fullLayout,g=b._fullData,k=M.getSubplotIds(h,"geo");void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(c=0;c<k.length;c++)d=k[c],e=M.getSubplotData(g,"geo",d),f=h[d]._geo,void 0===f&&(f=new D.Geo({id:d,container:h._geocontainer.node(),
topojsonURL:b._context.topojsonURL},h),h[d]._geo=f),f.plot(e,h,b._promises)}function v(b){for(var c=b._fullLayout,d=b._fullData,e=M.getSubplotIds(c,"gl2d"),f=0;f<e.length;f++){var h,g=e[f],k=c._plots[g],l=M.getSubplotData(d,"gl2d",g);h=k._scene2d;void 0===h&&(h=new D.Scene2D({container:b.querySelector(".gl-container"),id:g,staticPlot:b._context.staticPlot,plotGlPixelRatio:b._context.plotGlPixelRatio},c),k._scene2d=h);h.plot(l,c,b.layout)}}function d(b,c,d){var e=O.select(b).selectAll(".plot-container").data([0]);
e.enter().insert("div",":first-child").classed("plot-container plotly",!0);e=e.selectAll(".svg-container").data([0]);e.enter().append("div").classed("svg-container",!0).style("position","relative");e.html("");c&&(b.data=c);d&&(b.layout=d);D.micropolar.manager.fillLayout(b);"initial"===b._fullLayout.autosize&&b._context.autosizable&&(A(b,{}),b._fullLayout.autosize=d.autosize=!0);e.style({width:b._fullLayout.width+"px",height:b._fullLayout.height+"px"});b.framework=D.micropolar.manager.framework(b);
b.framework({data:b.data,layout:b.layout},e.node());b.framework.setUndoPoint();e=b.framework.svg();c=1;d=b._fullLayout.title;""!==d&&d||(c=0);var f=function(){this.call(D.util.convertToTspans)},e=e.select(".title-group text").call(f);if(b._context.editable){e.attr({"data-unformatted":d});d&&"Click to enter title"!==d||(c=.2,e.attr({"data-unformatted":"Click to enter title"}).text("Click to enter title").style({opacity:c}).on("mouseover.opacity",function(){O.select(this).transition().duration(100).style("opacity",
1)}).on("mouseout.opacity",function(){O.select(this).transition().duration(1E3).style("opacity",0)}));var h=function(){this.call(D.util.makeEditable).on("edit",function(c){b.framework({layout:{title:c}});this.attr({"data-unformatted":c}).text(c).call(f);this.call(h)}).on("cancel",function(){var b=this.attr("data-unformatted");this.text(b).call(f)})};e.call(h)}return b._context.setBackground(b,b._fullLayout.paper_bgcolor),M.addLinks(b),Promise.resolve()}function p(b){var c,d;b||(b={});b.xaxis1&&(b.xaxis||
(b.xaxis=b.xaxis1),delete b.xaxis1);b.yaxis1&&(b.yaxis||(b.yaxis=b.yaxis1),delete b.yaxis1);var e=D.Axes.list({_fullLayout:b});for(c=0;c<e.length;c++){var f=e[c];f.anchor&&"free"!==f.anchor&&(f.anchor=D.Axes.cleanId(f.anchor));f.overlaying&&(f.overlaying=D.Axes.cleanId(f.overlaying));f.type||(f.isdate?f.type="date":f.islog?f.type="log":!1===f.isdate&&!1===f.islog&&(f.type="linear"));("withzero"===f.autorange||"tozero"===f.autorange)&&(f.autorange=!0,f.rangemode="tozero");delete f.islog;delete f.isdate;
delete f.categories;u(f,"domain")&&delete f.domain;void 0!==f.autotick&&(void 0===f.tickmode&&(f.tickmode=f.autotick?"auto":"linear"),delete f.autotick)}void 0===b.annotations||Array.isArray(b.annotations)||(console.log("annotations must be an array"),delete b.annotations);e=(b.annotations||[]).length;for(c=0;e>c;c++)f=b.annotations[c],f.ref&&("paper"===f.ref?(f.xref="paper",f.yref="paper"):"data"===f.ref&&(f.xref="x",f.yref="y"),delete f.ref),t(f,"xref"),t(f,"yref");void 0===b.shapes||Array.isArray(b.shapes)||
(console.log("shapes must be an array"),delete b.shapes);e=(b.shapes||[]).length;for(c=0;e>c;c++)f=b.shapes[c],t(f,"xref"),t(f,"yref");(c=b.legend)&&(3<c.x?(c.x=1.02,c.xanchor="left"):-2>c.x&&(c.x=-.02,c.xanchor="right"),3<c.y?(c.y=1.02,c.yanchor="bottom"):-2>c.y&&(c.y=-.02,c.yanchor="top"));"rotate"===b.dragmode&&(b.dragmode="orbit");b.scene1&&(b.scene||(b.scene=b.scene1),delete b.scene1);var h,g,k,l,q=M.getSubplotIds(b,"gl3d");for(c=0;c<q.length;c++)if(h=b[q[c]],g=h.cameraposition,Array.isArray(g)&&
4===g[0].length){d=g[0];f=g[1];e=g[2];k=L([],d);l=[];for(d=0;3>d;++d)l[d]=f[c]+e*k[2+4*d];h.camera={eye:{x:l[0],y:l[1],z:l[2]},center:{x:f[0],y:f[1],z:f[2]},up:{x:k[1],y:k[5],z:k[9]}};delete h.cameraposition}return D.Lib.markTime("finished rest of cleanLayout, starting color"),D.Color.clean(b),D.Lib.markTime("finished cleanLayout color.clean"),b}function t(b,c){var d=b[c],e=c.charAt(0);d&&"paper"!==d&&(b[c]=D.Axes.cleanId(d,e))}function x(b,c){var d=[],e=b.concat(Array.isArray(c)?c:[]).filter(function(b){return"uid"in
b}).map(function(b){return b.uid}),f=0;for(;f<b.length;f++){var h=b[f];if(!("uid"in h)||-1!==d.indexOf(h.uid)){var g,k;for(k=0;100>k&&(g=D.Lib.randstr(e),-1!==d.indexOf(g));k++);h.uid=D.Lib.randstr(e);e.push(h.uid)}if(d.push(h.uid),"histogramy"===h.type&&"xbins"in h&&!("ybins"in h)&&(h.ybins=h.xbins,delete h.xbins),h.error_y&&"opacity"in h.error_y)k=D.Color.defaults,k=h.error_y.color||(M.traceIs(h,"bar")?D.Color.defaultLine:k[f%k.length]),h.error_y.color=D.Color.addOpacity(D.Color.rgb(k),D.Color.opacity(k)*
h.error_y.opacity),delete h.error_y.opacity;"bardir"in h&&("h"!==h.bardir||!M.traceIs(h,"bar")&&"histogram"!==h.type.substr(0,9)||(h.orientation="h",E(h)),delete h.bardir);"histogramy"===h.type&&E(h);"histogramx"!==h.type&&"histogramy"!==h.type||(h.type="histogram");"scl"in h&&(h.colorscale=h.scl,delete h.scl);"reversescl"in h&&(h.reversescale=h.reversescl,delete h.reversescl);h.xaxis&&(h.xaxis=D.Axes.cleanId(h.xaxis,"x"));h.yaxis&&(h.yaxis=D.Axes.cleanId(h.yaxis,"y"));h.scene&&(h.scene=D.Gl3dLayout.cleanId(h.scene));
M.traceIs(h,"pie")||(Array.isArray(h.textposition)?h.textposition=h.textposition.map(w):h.textposition&&(h.textposition=w(h.textposition)));u(h,"line")&&delete h.line;"marker"in h&&(u(h.marker,"line")&&delete h.marker.line,u(h,"marker")&&delete h.marker);D.Lib.markTime("finished rest of cleanData, starting color");D.Color.clean(h);D.Lib.markTime("finished cleanData color.clean")}}function w(b){var c="middle",d="center";return-1!==b.indexOf("top")?c="top":-1!==b.indexOf("bottom")&&(c="bottom"),-1!==
b.indexOf("left")?d="left":-1!==b.indexOf("right")&&(d="right"),c+" "+d}function u(b,c){return c in b&&"object"==typeof b[c]&&0===Object.keys(b[c]).length}function r(b){var c,d,e,f;d=D.Axes.list(b);var h=b._fullData;c=b._fullLayout;var g=b.calcdata=Array(h.length);b.firstscatter=!0;b.numboxes=0;b._hmpixcount=0;b._hmlumcount=0;c._piecolormap={};for(c=c._piedefaultcolorcount=0;c<d.length;c++)d[c]._categories=[];for(c=0;c<h.length;c++)d=h[c],e=d._module,f=[],e&&!0===d.visible&&e.calc&&(f=e.calc(b,d)),
Array.isArray(f)&&f[0]||(f=[{x:!1,y:!1}]),f[0].t||(f[0].t={}),f[0].trace=d,D.Lib.markTime("done with calcdata for "+c),g[c]=f}function y(b,c){var d,e,f=c+1,h=[];for(d=0;d<b.length;d++)e=b[d],0>e?h.push(f+e):h.push(e);return h}function k(b,c,d){var e,f;for(e=0;e<c.length;e++){if(f=c[e],f!==parseInt(f,10))throw Error("all values in "+d+" must be integers");if(f>=b.data.length||f<-b.data.length)throw Error(d+" must be valid indices for gd.data.");if(-1<c.indexOf(f,e+1)||0<=f&&-1<c.indexOf(-b.data.length+
f)||0>f&&-1<c.indexOf(b.data.length+f))throw Error("each index in "+d+" must be unique.");}}function q(b,c,d){if(!Array.isArray(b.data))throw Error("gd.data must be an array.");if("undefined"==typeof c)throw Error("currentIndices is a required argument.");if(Array.isArray(c)||(c=[c]),k(b,c,"currentIndices"),"undefined"==typeof d||Array.isArray(d)||(d=[d]),"undefined"!=typeof d&&k(b,d,"newIndices"),"undefined"!=typeof d&&c.length!==d.length)throw Error("current and new indices must be of equal length.");
}function z(b,c,d,e,f,h){var g=D.Lib.isPlainObject(e);if(!Array.isArray(b.data))throw Error("gd.data must be an array");if(!D.Lib.isPlainObject(c))throw Error("update must be a key:value object");if("undefined"==typeof d)throw Error("indices must be an integer or array of integers");k(b,d,"indices");for(var l in c){if(!Array.isArray(c[l])||c[l].length!==d.length)throw Error("attribute "+l+" must be an array of length equal to indices array length");if(g&&!(l in e&&Array.isArray(e[l])&&e[l].length===
c[l].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");}var g=d,q,p,r,t,m=D.Lib.isPlainObject(e);d=[];Array.isArray(g)||(g=[g]);var g=y(g,b.data.length-1),u;for(u in c)for(var v=0;v<g.length;v++){if(q=b.data[g[v]],p=D.Lib.nestedProperty(q,u),l=p.get(),r=c[u][v],!Array.isArray(r))throw Error("attribute: "+u+" index: "+v+" must be an array");if(!Array.isArray(l))throw Error("cannot extend missing or non-array attribute: "+
u);t=m?e[u][v]:e;P(t)||(t=-1);d.push({prop:p,target:l,insert:r,maxp:Math.floor(t)})}q=[];p={};r={};for(u=0;u<d.length;u++)c=d[u].prop,e=d[u].maxp,b=f(d[u].target,d[u].insert),0<=e&&e<b.length&&(q=h(b,e)),e=d[u].target.length,c.set(b),Array.isArray(p[c.astr])||(p[c.astr]=[]),Array.isArray(r[c.astr])||(r[c.astr]=[]),p[c.astr].push(q),r[c.astr].push(e);return{update:p,maxPoints:r}}function E(b){var c;if(D.Lib.swapAttrs(b,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" ")),Array.isArray(b.z)&&Array.isArray(b.z[0])&&
(b.transpose?delete b.transpose:b.transpose=!0),b.error_x&&b.error_y)c=b.error_y,c="copy_ystyle"in c?c.copy_ystyle:!(c.color||c.thickness||c.width),D.Lib.swapAttrs(b,["error_?.copy_ystyle"]),c&&D.Lib.swapAttrs(b,["error_?.color","error_?.thickness","error_?.width"]);if(b.hoverinfo){var d=b.hoverinfo.split("+");for(c=0;c<d.length;c++)"x"===d[c]?d[c]="y":"y"===d[c]&&(d[c]="x");b.hoverinfo=d.join("+")}}function A(b,c){var d,e,f=b._fullLayout;d=b._context;if(b.emit("plotly_autosize"),b._context.fillFrame)d=
window.innerWidth,e=window.innerHeight,document.body.style.overflow="hidden";else if(P(d.frameMargins)&&0<d.frameMargins){var h=b._boundingBoxMargins,g,k=0,l=0,q=e=0;if(h)for(g in h)h.hasOwnProperty(g)&&(k+=h[g].left||0,l+=h[g].right||0,e+=h[g].bottom||0,q+=h[g].top||0);h=k+l;e+=q;q=f._container.node().getBoundingClientRect();g=1-2*d.frameMargins;d=Math.round(g*(q.width-h));e=Math.round(g*(q.height-e))}else d=window.getComputedStyle(b),e=parseFloat(d.height)||f.height,d=parseFloat(d.width)||f.width;
return 1<Math.abs(f.width-d)||1<Math.abs(f.height-e)?(f.height=b.layout.height=e,f.width=b.layout.width=d):"initial"!==f.autosize&&(delete c.autosize,f.autosize=b.layout.autosize=!0),M.sanitizeMargins(f),c}function C(b){var c=O.select(b),d=b._fullLayout;if(d._hasGL3D&&D.Gl3dLayout.initAxes(b),d._container=c.selectAll(".plot-container").data([0]),d._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),d._paperdiv=d._container.selectAll(".svg-container").data([0]),
d._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),"initial"===d.autosize&&(A(b,{}),d.autosize=!0,b.layout.autosize=!0),d._glcontainer=d._paperdiv.selectAll(".gl-container").data([0]),d._glcontainer.enter().append("div").classed("gl-container",!0),d._geocontainer=d._paperdiv.selectAll(".geo-container").data([0]),d._geocontainer.enter().append("div").classed("geo-container",!0),d._paperdiv.selectAll(".main-svg").remove(),d._paper=d._paperdiv.insert("svg",":first-child").classed("main-svg",
!0),d._toppaper=d._paperdiv.append("svg").classed("main-svg",!0),!d._uid){var e=[];O.selectAll("defs").each(function(){this.id&&e.push(this.id.split("-")[1])});d._uid=D.Lib.randstr(e)}d._paperdiv.selectAll(".main-svg").attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink"});d._defs=d._paper.append("defs").attr("id","defs-"+d._uid);d._draggers=d._paper.append("g").classed("draglayer",!0);c=D.Axes.getSubplots(b);c.join("")!==Object.keys(b._fullLayout._plots||{}).join("")&&
B(b,c);d._hasCartesian&&G(b,c);d._shapelayer=d._paper.append("g").classed("shapelayer",!0);d._pielayer=d._paper.append("g").classed("pielayer",!0);d._glimages=d._paper.append("g").classed("glimages",!0);d._geoimages=d._paper.append("g").classed("geoimages",!0);d._infolayer=d._toppaper.append("g").classed("infolayer",!0);d._hoverlayer=d._toppaper.append("g").classed("hoverlayer",!0);b.emit("plotly_framework");d=D.Lib.syncOrAsync([F,function(){return D.Axes.doTicks(b,"redraw")},D.Fx.init],b);return d&&
d.then&&b._promises.push(d),d}function B(b,c){function d(c,e){return function(){return D.Axes.getFromId(b,c,e)}}for(var e,f,h=b._fullLayout._plots={},g=0;g<c.length;g++)e=c[g],f=h[e]={},f.id=e,f.x=d(e,"x"),f.y=d(e,"y"),f.xaxis=f.x(),f.yaxis=f.y()}function G(b,c){function d(b){b.append("g").classed("maplayer",!0);b.append("g").classed("barlayer",!0);b.append("g").classed("errorlayer",!0);b.append("g").classed("boxlayer",!0);b.append("g").classed("scatterlayer",!0)}var e=b._fullLayout,f=[];e._paper.selectAll("g.subplot").data(c).enter().append("g").classed("subplot",
!0).each(function(h){var g=e._plots[h],k=g.plotgroup=O.select(this).classed(h,!0),l=g.xaxis,q=g.yaxis;g.overlays=[];var p=D.Axes.getFromId(b,l.overlaying)||l;p!==l&&p.overlaying&&(p=l,l.overlaying=!1);var r=D.Axes.getFromId(b,q.overlaying)||q;r!==q&&r.overlaying&&(r=q,q.overlaying=!1);var t=p._id+r._id;t!==h&&-1!==c.indexOf(t)?(g.mainplot=t,f.push(g),l.domain=p.domain.slice(),q.domain=r.domain.slice()):(g.bg=k.append("rect").style("stroke-width",0),g.gridlayer=k.append("g"),g.overgrid=k.append("g"),
g.zerolinelayer=k.append("g"),g.overzero=k.append("g"),g.plot=k.append("svg").call(d),g.overplot=k.append("g"),g.xlines=k.append("path"),g.ylines=k.append("path"),g.overlines=k.append("g"),g.xaxislayer=k.append("g"),g.yaxislayer=k.append("g"),g.overaxes=k.append("g"));g.draglayer=e._draggers.append("g")});f.forEach(function(b){var c=e._plots[b.mainplot];c.overlays.push(b);b.gridlayer=c.overgrid.append("g");b.zerolinelayer=c.overzero.append("g");b.plot=c.overplot.append("svg").call(d);b.xlines=c.overlines.append("path");
b.ylines=c.overlines.append("path");b.xaxislayer=c.overaxes.append("g");b.yaxislayer=c.overaxes.append("g")});c.forEach(function(b){b=e._plots[b];b.plot.attr("preserveAspectRatio","none").style("fill","none");b.xlines.style("fill","none").classed("crisp",!0);b.ylines.style("fill","none").classed("crisp",!0)})}function F(b){return D.Lib.syncOrAsync([M.doAutoMargin,I],b)}function I(b){var c,d=b._fullLayout,e=d._size,f=D.Axes.list(b);for(c=0;c<f.length;c++)f[c]._linepositions={};d._paperdiv.style({width:d.width+
"px",height:d.height+"px"}).selectAll(".main-svg").call(D.Drawing.setSize,d.width,d.height);b._context.setBackground(b,d.paper_bgcolor);var h=[];return d._paper.selectAll("g.subplot").each(function(c){var f=d._plots[c],g=D.Axes.getFromId(b,c,"x"),k=D.Axes.getFromId(b,c,"y");g.setScale();k.setScale();f.bg&&f.bg.call(D.Drawing.setRect,g._offset-e.p,k._offset-e.p,g._length+2*e.p,k._length+2*e.p).call(D.Color.fill,d.plot_bgcolor);f.plot.call(D.Drawing.setRect,g._offset,k._offset,g._length,k._length);
var l=D.Drawing.crispRound(b,g.linewidth,1),q=D.Drawing.crispRound(b,k.linewidth,1),p=e.p+q,r="M"+-p+",",p="h"+(g._length+2*p),t="free"===g.anchor&&-1===h.indexOf(g._id),m=e.h*(1-(g.position||0))+l/2%1,u=g.anchor===k._id&&(g.mirror||"top"!==g.side)||"all"===g.mirror||"allticks"===g.mirror||g.mirrors&&g.mirrors[k._id+"bottom"],v=k._length+e.p+l/2,w=g.anchor===k._id&&(g.mirror||"top"===g.side)||"all"===g.mirror||"allticks"===g.mirror||g.mirrors&&g.mirrors[k._id+"top"],x=-e.p-l/2,z=e.p,y=w?0:l,z=","+
(-z-y)+"v"+(k._length+2*z+y+(u?0:l)),y="free"===k.anchor&&-1===h.indexOf(k._id),A=e.w*(k.position||0)+q/2%1,B=k.anchor===g._id&&(k.mirror||"right"!==k.side)||"all"===k.mirror||"allticks"===k.mirror||k.mirrors&&k.mirrors[g._id+"left"],C=-e.p-q/2,G=k.anchor===g._id&&(k.mirror||"right"===k.side)||"all"===k.mirror||"allticks"===k.mirror||k.mirrors&&k.mirrors[g._id+"right"],F=g._length+e.p+q/2;g._linepositions[c]=[u?v:void 0,w?x:void 0,t?m:void 0];g.anchor===k._id?g._linepositions[c][3]="top"===g.side?
x:v:t&&(g._linepositions[c][3]=m);k._linepositions[c]=[B?C:void 0,G?F:void 0,y?A:void 0];k.anchor===g._id?k._linepositions[c][3]="right"===k.side?F:C:y&&(k._linepositions[c][3]=A);var E=c="translate("+g._offset+","+k._offset+")",I=c;t&&(E="translate("+g._offset+","+e.t+")",x+=k._offset-e.t,v+=k._offset-e.t);y&&(I="translate("+e.l+","+k._offset+")",C+=g._offset-e.l,F+=g._offset-e.l);f.xlines.attr("transform",E).attr("d",(u?r+v+p:"")+(w?r+x+p:"")+(t?r+m+p:"")||"M0,0").style("stroke-width",l+"px").call(D.Color.stroke,
g.showline?g.linecolor:"rgba(0,0,0,0)");f.ylines.attr("transform",I).attr("d",(B?"M"+C+z:"")+(G?"M"+F+z:"")+(y?"M"+A+z:"")||"M0,0").attr("stroke-width",q+"px").call(D.Color.stroke,k.showline?k.linecolor:"rgba(0,0,0,0)");f.xaxislayer.attr("transform",E);f.yaxislayer.attr("transform",I);f.gridlayer.attr("transform",c);f.zerolinelayer.attr("transform",c);f.draglayer.attr("transform",c);t&&h.push(g._id);y&&h.push(k._id)}),D.Axes.makeClipPaths(b),D.Titles.draw(b,"gtitle"),K(b),b._promises.length&&Promise.all(b._promises)}
var D=b("../plotly"),H=b("../lib/events"),K=b("../components/modebar/manage"),O=b("d3"),L=b("gl-mat4/fromQuat"),P=b("fast-isnumeric"),M=D.Plots;D.plot=function(b,c,g,k){function q(){var c,d,e,f=b.calcdata;D.Legend.draw(b);for(c=0;c<f.length;c++)d=f[c],e=d[0].trace,!0===e.visible&&e._module.colorbar?e._module.colorbar(b,d):M.autoMargin(b,"cb"+e.uid);return M.doAutoMargin(b),M.previousPromises(b)}function t(){var c=JSON.stringify(A._size)===G?[]:[q,F];return D.Lib.syncOrAsync(c.concat(D.Fx.init),b)}
function m(){if(B){for(var c,d,e=M.getSubplotIds(A,"cartesian"),f=b._modules,h=0;h<e.length;h++){c=A._plots[e[h]];for(var g=0;g<f.length;g++)d=f[g],d.setPositions&&d.setPositions(b,c)}return D.Lib.markTime("done with bar/box adjustments"),D.ErrorBars.calc(b),D.Lib.markTime("done Plotly.ErrorBars.calc"),D.Lib.syncOrAsync([D.Shapes.calcAutorange,D.Annotations.calcAutorange,u],b)}}function u(){for(var c=D.Axes.list(b,"",!0),d=0;d<c.length;d++)D.Axes.doAutoRange(c[d])}function w(){return D.Axes.doTicks(b,
"redraw")}function z(){function c(b,d){var e,f,h,g=[];for(e=0;e<b.length;e++)f=b[e],h=f[0].trace,h.xaxis+h.yaxis===d&&g.push(f);return g}function d(b,c){var e,f,h,g=[];for(e=0;e<b.length;e++)f=b[e],h=f[0].trace,h._module===c&&!0===h.visible&&g.push(f);return g}var h,g,k,l,q,p,r,t=b.calcdata,m=M.getSubplotIds(A,"cartesian"),u=b._modules;b._fullLayout._hasGL3D&&e(b);b._fullLayout._hasGeo&&f(b);b._fullLayout._hasGL2D&&v(b);for(h=0;h<t.length;h++)g=t[h],g=g[0].trace,!0===g.visible&&g._module.colorbar||
(k=g.uid,A._paper.selectAll(".hm"+k+",.contour"+k+",.cb"+k+",#clip"+k).remove());for(h=0;h<m.length;h++){g=m[h];k=b._fullLayout._plots[g];l=c(t,g);q=[];k.plot&&k.plot.selectAll("g.trace").remove();for(g=0;g<u.length;g++)r=u[g],r.plot&&(p=d(l,r),r.plot(b,k,p),D.Lib.markTime("done "+(p[0]&&p[0][0].trace.type)),p[0]&&p[0][0].trace&&M.traceIs(p[0][0].trace,"errorBarsOK")&&(q=q.concat(p)));b._fullLayout._hasCartesian&&(D.ErrorBars.plot(b,k,q),D.Lib.markTime("done ErrorBars"))}h=d(t,D.Pie);return h.length&&
D.Pie.plot(b,h),M.style(b),D.Lib.markTime("done plots.style"),D.Shapes.drawAll(b),D.Annotations.drawAll(b),M.addLinks(b),M.previousPromises(b)}function y(){b._replotting=!1;D.Lib.markTime("done plot");b.emit("plotly_afterplot")}D.Lib.markTime("in plot");b=h(b);H.init(b);if(!1!==H.triggerHandler(b,"plotly_beforeplot",[c,g,k])){c||g||D.Lib.isPlotDiv(b)||console.log("Warning: calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",b);l(b,k);g||(g={});O.select(b).classed("js-plotly-plot",
!0);D.Drawing.makeTester(b);b._promises=[];k=0===(b.data||[]).length&&Array.isArray(c);if(Array.isArray(c)&&(x(c,b.data),k?b.data=c:b.data.push.apply(b.data,c),b.empty=!1),(!b.layout||k)&&(b.layout=p(g)),b._dragging)return void(b._replotPending=!0);if(b._replotPending=!1,M.supplyDefaults(b),c&&c[0]&&c[0].r)return d(b,c,g);b._replotting=!0;0<b._fullData.length?(c=D.Axes.getSubplots(b).join(""),g=Object.keys(b._fullLayout._plots||{}).join(""),(b.framework!==C||k||g!==c)&&(b.framework=C,C(b))):k&&C(b);
var A=b._fullLayout,B=!b.calcdata||b.calcdata.length!==(b.data||[]).length;B&&(r(b),(!1!==b._context.doubleClick||!1!==b._context.displayModeBar)&&D.Axes.saveRangeInitial(b));for(k=0;k<b.calcdata.length;k++)b.calcdata[k][0].trace=b._fullData[k];var G=JSON.stringify(A._size);return(k=D.Lib.syncOrAsync([M.previousPromises,q,F,t,m,w,z],b,y))&&k.then?k:Promise.resolve(b)}};D.redraw=function(b){return b=h(b),D.Lib.isPlotDiv(b)?(b.calcdata=void 0,D.plot(b).then(function(){return b.emit("plotly_redraw"),
b})):void console.log("This element is not a Plotly Plot",b)};D.newPlot=function(b,c,d,e){return b=h(b),M.purge(b),D.plot(b,c,d,e)};D.extendTraces=function T(b,c,d,e){b=h(b);var f=z(b,c,d,e,function(b,c){return b.concat(c)},function(b,c){return b.splice(0,b.length-c)}),g=D.redraw(b),f=[b,f.update,d,f.maxPoints];return D.Queue&&D.Queue.add(b,D.prependTraces,f,T,arguments),g};D.prependTraces=function R(b,c,d,e){b=h(b);var f=z(b,c,d,e,function(b,c){return c.concat(b)},function(b,c){return b.splice(c,
b.length)}),g=D.redraw(b),f=[b,f.update,d,f.maxPoints];return D.Queue&&D.Queue.add(b,D.extendTraces,f,R,arguments),g};D.addTraces=function S(b,c,d){b=h(b);var e,f=[],g=D.deleteTraces,k=[b,f],l=[b,c];e=c;var p=d,r,t;if(!Array.isArray(b.data))throw Error("gd.data must be an array.");if("undefined"==typeof e)throw Error("traces must be defined.");Array.isArray(e)||(e=[e]);for(r=0;r<e.length;r++)if(t=e[r],"object"!=typeof t||Array.isArray(t)||null===t)throw Error("all values in traces array must be non-array objects");
if("undefined"==typeof p||Array.isArray(p)||(p=[p]),"undefined"!=typeof p&&p.length!==e.length)throw Error("if indices is specified, traces.length must equal indices.length");Array.isArray(c)||(c=[c]);for(e=0;e<c.length;e+=1)b.data.push(c[e]);for(e=0;e<c.length;e++)f.push(-c.length+e);if("undefined"==typeof d)return c=D.redraw(b),D.Queue&&D.Queue.add(b,g,k,S,l),c;Array.isArray(d)||(d=[d]);try{q(b,f,d)}catch(m){throw b.data.splice(b.data.length-c.length,c.length),m;}D.Queue&&D.Queue.startSequence(b);
D.Queue&&D.Queue.add(b,g,k,S,l);c=D.moveTraces(b,f,d);return D.Queue&&D.Queue.stopSequence(b),c};D.deleteTraces=function X(b,c){b=h(b);var d,e,f=[],g=D.addTraces,l=[b,f,c],q=[b,c];if("undefined"==typeof c)throw Error("indices must be an integer or array of integers.");Array.isArray(c)||(c=[c]);k(b,c,"indices");c=y(c,b.data.length-1);c.sort().reverse();for(d=0;d<c.length;d+=1)e=b.data.splice(c[d],1)[0],f.push(e);d=D.redraw(b);return D.Queue&&D.Queue.add(b,g,l,X,q),d};D.moveTraces=function V(b,c,d){b=
h(b);var e,f=[],g=[],k=[b,d,c],l=[b,c,d];if(q(b,c,d),c=Array.isArray(c)?c:[c],"undefined"==typeof d)for(d=[],e=0;e<c.length;e++)d.push(-c.length+e);d=Array.isArray(d)?d:[d];c=y(c,b.data.length-1);d=y(d,b.data.length-1);for(e=0;e<b.data.length;e++)-1===c.indexOf(e)&&f.push(b.data[e]);for(e=0;e<c.length;e++)g.push({newIndex:d[e],trace:b.data[c[e]]});g.sort(function(b,c){return b.newIndex-c.newIndex});for(e=0;e<g.length;e+=1)f.splice(g[e].newIndex,0,g[e].trace);b.data=f;c=D.redraw(b);return D.Queue&&
D.Queue.add(b,V,k,V,l),c};D.restyle=function Y(b,c,d,e){function f(){return e.map(function(){})}function g(b){b=D.Axes.id2name(b);-1===u.indexOf(b)&&u.push(b)}function k(b){return"LAYOUT"+b+".autorange"}function l(b){return"LAYOUT"+b+".range"}function q(c,d,h){if(Array.isArray(c))return void c.forEach(function(b){q(b,d,h)});if(!(c in t)){var g;g="LAYOUT"===c.substr(0,6)?D.Lib.nestedProperty(b.layout,c.replace("LAYOUT","")):D.Lib.nestedProperty(b.data[e[h]],c);c in G||(G[c]=f());void 0===G[c][h]&&
(G[c][h]=g.get());void 0!==d&&g.set(d)}}b=h(b);var p,r=b._fullLayout,t={};if("string"==typeof c)t[c]=d;else{if(!D.Lib.isPlainObject(c))return console.log("restyle fail",c,d,e),new Promise.reject;t=c;void 0===e&&(e=d)}Object.keys(t).length&&(b.changed=!0);P(e)?e=[e]:Array.isArray(e)&&e.length||(e=b._fullData.map(function(b,c){return c}));var m="mode visible type orientation fill histfunc histnorm text x y z xtype x0 dx ytype y0 dy xaxis yaxis line.width connectgaps transpose zsmooth showscale marker.showscale zauto marker.cauto autocolorscale marker.autocolorscale colorscale marker.colorscale reversescale marker.reversescale autobinx nbinsx xbins xbins.start xbins.end xbins.size autobiny nbinsy ybins ybins.start ybins.end ybins.size autocontour ncontours contours contours.coloring error_y error_y.visible error_y.value error_y.type error_y.traceref error_y.array error_y.symmetric error_y.arrayminus error_y.valueminus error_y.tracerefminus error_x error_x.visible error_x.value error_x.type error_x.traceref error_x.array error_x.symmetric error_x.arrayminus error_x.valueminus error_x.tracerefminus swapxy swapxyaxes orientationaxes marker.colors values labels label0 dlabel sort textinfo textposition textfont.size textfont.family textfont.color insidetextfont.size insidetextfont.family insidetextfont.color outsidetextfont.size outsidetextfont.family outsidetextfont.color hole scalegroup domain domain.x domain.y domain.x[0] domain.x[1] domain.y[0] domain.y[1] tilt tiltaxis depth direction rotation pull".split(" ");
for(p=0;p<e.length;p++)if(M.traceIs(b._fullData[e[p]],"box")){m.push("name");break}var u,v="marker marker.size textfont boxpoints jitter pointpos whiskerwidth boxmean".split(" "),w="zmin zmax zauto marker.cmin marker.cmax marker.cauto contours.start contours.end contours.size contours.showlines line line.smoothing line.shape error_y.width error_x.width error_x.copy_ystyle marker.maxdisplayed".split(" "),x="type x y x0 y0 orientation xaxis yaxis".split(" "),z=!1,y=d=!1,A=!1,B=!1,C={},G={},F={};(r._hasGL3D||
r._hasGeo||r._hasGL2D)&&(y=!0);var I=["zmin","zmax"],H=["xbins.start","xbins.end","xbins.size"],K=["ybins.start","ybins.end","ybins.size"],O=["contours.start","contours.end","contours.size"],L;for(L in t){var va,Ca,Ea,Na,Ha,qa=t[L];if(C[L]=qa,"LAYOUT"!==L.substr(0,6)){G[L]=f();for(p=0;p<e.length;p++){if(va=b.data[e[p]],Ca=b._fullData[e[p]],Ea=D.Lib.nestedProperty(va,L),Na=Ea.get(),Ha=Array.isArray(qa)?qa[p%qa.length]:qa,-1!==I.indexOf(L))q("zauto",!1,p);else if("colorscale"===L)q("autocolorscale",
!1,p);else if("autocolorscale"===L)q("colorscale",void 0,p);else if("marker.colorscale"===L)q("marker.autocolorscale",!1,p);else if("marker.autocolorscale"===L)q("marker.colorscale",void 0,p);else if("zauto"===L)q(I,void 0,p);else if(-1!==H.indexOf(L))q("autobinx",!1,p);else if("autobinx"===L)q(H,void 0,p);else if(-1!==K.indexOf(L))q("autobiny",!1,p);else if("autobiny"===L)q(K,void 0,p);else if(-1!==O.indexOf(L))q("autocontour",!1,p);else if("autocontour"===L)q(O,void 0,p);else if(-1!==["x0","dx"].indexOf(L)&&
Ca.x&&"scaled"!==Ca.xtype)q("xtype","scaled",p);else if(-1!==["y0","dy"].indexOf(L)&&Ca.y&&"scaled"!==Ca.ytype)q("ytype","scaled",p);else if("colorbar.thicknessmode"===L&&Ea.get()!==Ha&&-1!==["fraction","pixels"].indexOf(Ha)&&Ca.colorbar){var Ia=-1!==["top","bottom"].indexOf(Ca.colorbar.orient)?r.height-r.margin.t-r.margin.b:r.width-r.margin.l-r.margin.r;q("colorbar.thickness",Ca.colorbar.thickness*("fraction"===Ha?1/Ia:Ia),p)}else"colorbar.lenmode"===L&&Ea.get()!==Ha&&-1!==["fraction","pixels"].indexOf(Ha)&&
Ca.colorbar?(Ia=-1!==["top","bottom"].indexOf(Ca.colorbar.orient)?r.width-r.margin.l-r.margin.r:r.height-r.margin.t-r.margin.b,q("colorbar.len",Ca.colorbar.len*("fraction"===Ha?1/Ia:Ia),p)):"colorbar.tick0"===L||"colorbar.dtick"===L?q("colorbar.tickmode","linear",p):"colorbar.tickmode"===L&&q(["colorbar.tick0","colorbar.dtick"],void 0,p);if("type"===L&&"pie"===Ha!=("pie"===Na)){var Ia="x",fb="y";"bar"!==Ha&&"bar"!==Na||"h"!==va.orientation||(Ia="y",fb="x");D.Lib.swapAttrs(va,["?","?src"],"labels",
Ia);D.Lib.swapAttrs(va,["d?","?0"],"label",Ia);D.Lib.swapAttrs(va,["?","?src"],"values",fb);"pie"===Na?(D.Lib.nestedProperty(va,"marker.color").set(D.Lib.nestedProperty(va,"marker.colors").get()),r._pielayer.selectAll("g.trace").remove()):M.traceIs(va,"cartesian")&&(D.Lib.nestedProperty(va,"marker.colors").set(D.Lib.nestedProperty(va,"marker.color").get()),F[va.xaxis||"x"]=!0,F[va.yaxis||"y"]=!0)}G[L][p]=Na;if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(L)){if("orientation"===
L){if(Ea.set(Ha),Ea.get()===G[L][p])continue}else"orientationaxes"===L&&(va.orientation={v:"h",h:"v"}[Ca.orientation]);E(va)}else Ea.set(Ha)}if(-1!==["swapxyaxes","orientationaxes"].indexOf(L)&&D.Axes.swap(b,e),"orientationaxes"===L)p=D.Lib.nestedProperty(b.layout,"hovermode"),"x"===p.get()?p.set("y"):"y"===p.get()&&p.set("x");if(-1!==e.indexOf(0)&&-1!==x.indexOf(L)&&(D.Axes.clearTypes(b,e),z=!0),(-1===["autobinx","autobiny","zauto"].indexOf(L)||!1!==Ha)&&(A=!0),(-1!==["colorbar","line"].indexOf(Ea.parts[0])||
"marker"===Ea.parts[0]&&"colorbar"===Ea.parts[1])&&(B=!0),-1!==m.indexOf(L)){if(-1!==["orientation","type"].indexOf(L)){u=[];for(p=0;p<e.length;p++)z=b.data[e[p]],M.traceIs(z,"cartesian")&&(g(z.xaxis||"x"),g(z.yaxis||"y"),"type"===c&&q(["autobinx","autobiny"],!0,p));q(u.map(k),!0,0);q(u.map(l),[0,1],0)}z=!0}else-1!==w.indexOf(L)?y=!0:-1!==v.indexOf(L)&&(d=!0)}else Ea=D.Lib.nestedProperty(b.layout,L.replace("LAYOUT","")),G[L]=[Ea.get()],Ea.set(Array.isArray(qa)?qa[0]:qa),z=!0}c=Object.keys(F);p=0;
a:for(;p<c.length;p++){r=c[p];L=r.charAt(0);va=L+"axis";for(Ea=0;Ea<b.data.length;Ea++)if(M.traceIs(b.data[Ea],"cartesian")&&(b.data[Ea][va]||L)===r)continue a;q("LAYOUT"+D.Axes.id2name(r),null,0)}D.Queue&&D.Queue.add(b,Y,[b,G,e],Y,[b,C,e]);var vb=!1;D.Axes.list(b).forEach(function(b){b.autorange&&(vb=!0)});(z||d&&vb)&&(b.calcdata=void 0);var Pa;z||y||d?Pa=[D.plot]:(M.supplyDefaults(b),Pa=[M.previousPromises],A&&Pa.push(function(){var c,d,e;for(c=0;c<b.calcdata.length;c++)d=b.calcdata[c],(e=(((d[0]||
{}).trace||{})._module||{}).arraysToCalcdata)&&e(d);return M.style(b),D.Legend.draw(b),M.previousPromises(b)}),B&&Pa.push(function(){return b.calcdata.forEach(function(b){if((b[0].t||{}).cb){var c=b[0].trace;b=b[0].t.cb;M.traceIs(c,"contour")&&b.line({width:!1!==c.contours.showlines?c.line.width:0,dash:c.line.dash,color:"line"===c.contours.coloring?b._opts.line.color:c.line.color});M.traceIs(c,"markerColorscale")?b.options(c.marker.colorbar)():b.options(c.colorbar)()}}),M.previousPromises(b)}));Pa=
D.Lib.syncOrAsync(Pa,b);return Pa&&Pa.then||(Pa=Promise.resolve()),Pa.then(function(){return b.emit("plotly_restyle",D.Lib.extendDeep([],[C,e])),b})};D.relayout=function W(b,c,d){function e(b,c){if(Array.isArray(b))return void b.forEach(function(b){e(b,c)});if(!(b in r)){var d=D.Lib.nestedProperty(q,b);b in B||(B[b]=d.get());void 0!==c&&d.set(c)}}function f(b,c){var d=D.Axes.id2name(b[c+"ref"]||c);return(p[d]||{}).autorange}if(b=h(b),b.framework&&b.framework.isPolar)return new Promise.resolve(b);
var g,k,l,q=b.layout,p=b._fullLayout,r={},t=!1,m=!1,u=!1,v=!1,w=!1,x=!1;if("string"==typeof c)r[c]=d;else{if(!D.Lib.isPlainObject(c))return console.log("relayout fail",c,d),new Promise.reject;r=c}Object.keys(r).length&&(b.changed=!0);k=Object.keys(r);d=D.Axes.list(b);for(c=0;c<k.length;c++){if(0===k[c].indexOf("allaxes")){for(var z=0;z<d.length;z++)g=d[z]._id.substr(1),g=-1!==g.indexOf("scene")?g+".":"",g=k[c].replace("allaxes",g+d[z]._name),r[g]||(r[g]=r[k[c]]);delete r[k[c]]}k[c].match(/^annotations\[[0-9-]+\].ref$/)&&
(l=r[k[c]].split("y"),r[k[c].replace("ref","xref")]=l[0],r[k[c].replace("ref","yref")]=2===l.length?"y"+l[1]:"paper",delete r[k[c]])}var y={},B={};l=["height","width"];for(var C in r){c=D.Lib.nestedProperty(q,C);d=r[C];k=c.parts.length;g="string"==typeof c.parts[k-1]?k-1:k-2;k=c.parts[g];var G=c.parts[g-1]+"."+k;g=c.parts.slice(0,g).join(".");var z=D.Lib.nestedProperty(b.layout,g).get(),E=D.Lib.nestedProperty(p,g).get();if(y[C]=d,B[C]="reverse"===k?d:c.get(),-1!==l.indexOf(C)?e("autosize",!1):"autosize"===
C?e(l,void 0):G.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/)?e(g+".autorange",!1):G.match(/^[xyz]axis[0-9]*\.autorange$/)?e([g+".range[0]",g+".range[1]"],void 0):G.match(/^aspectratio\.[xyz]$/)?e(c.parts[0]+".aspectmode","manual"):G.match(/^aspectmode$/)?e([g+".x",g+".y",g+".z"],void 0):"tick0"===k||"dtick"===k?e(g+".tickmode","linear"):"tickmode"===k&&e([g+".tick0",g+".dtick"],void 0),"type"===k&&"log"===E.type!=("log"===d)){var I=z;I&&I.range?E.autorange?"log"===d&&(I.range=I.range[1]>I.range[0]?
[1,2]:[2,1]):(G=I.range[0],I=I.range[1],"log"===d?(0>=G&&0>=I&&e(g+".autorange",!0),0>=G?G=I/1E6:0>=I&&(I=G/1E6),e(g+".range[0]",Math.log(G)/Math.LN10),e(g+".range[1]",Math.log(I)/Math.LN10)):(e(g+".range[0]",Math.pow(10,G)),e(g+".range[1]",Math.pow(10,I)))):e(g+".autorange",!0)}"reverse"===k?(z.range?z.range.reverse():(e(g+".autorange",!0),z.range=[1,0]),E.autorange?w=!0:v=!0):"annotations"===c.parts[0]||"shapes"===c.parts[0]?(d=c.parts[1],k=c.parts[0],g=q[k]||[],z=D[D.Lib.titleCase(k)],E=g[d]||
{},2===c.parts.length&&("add"===r[C]||D.Lib.isPlainObject(r[C])?B[C]="remove":"remove"===r[C]?-1===d?(B[k]=g,delete B[C]):B[C]=E:console.log("???",r)),!f(E,"x")&&!f(E,"y")||D.Lib.containsAny(C,["color","opacity","align","dash"])||(w=!0),z.draw(b,d,c.parts.slice(2).join("."),r[C]),delete r[C]):(0===c.parts[0].indexOf("scene")?v=!0:0===c.parts[0].indexOf("geo")?v=!0:!p._hasGL2D||-1===C.indexOf("axis")&&"plot_bgcolor"!==c.parts[0]?"hiddenlabels"===C?w=!0:-1!==c.parts[0].indexOf("legend")?t=!0:-1!==C.indexOf("title")?
m=!0:-1!==c.parts[0].indexOf("bgcolor")?u=!0:1<c.parts.length&&D.Lib.containsAny(c.parts[1],["tick","exponent","grid","zeroline"])?m=!0:-1!==C.indexOf(".linewidth")&&-1!==C.indexOf("axis")?m=u=!0:1<c.parts.length&&-1!==c.parts[1].indexOf("line")?u=!0:1<c.parts.length&&"mirror"===c.parts[1]?m=u=!0:"margin.pad"===C?m=u=!0:"margin"===c.parts[0]||"autorange"===c.parts[1]||"rangemode"===c.parts[1]||"type"===c.parts[1]||"domain"===c.parts[1]||C.match(/^(bar|box|font)/)?w=!0:-1!==["hovermode","dragmode"].indexOf(C)?
x=!0:-1===["hovermode","dragmode","height","width","autosize"].indexOf(C)&&(v=!0):v=!0,c.set(d))}D.Queue&&D.Queue.add(b,W,[b,B],W,[b,y]);r.autosize&&(r=A(b,r));(r.height||r.width||r.autosize)&&(w=!0);l=Object.keys(r);C=[M.previousPromises];if(v||w)C.push(function(){return b.layout=void 0,w&&(b.calcdata=void 0),D.plot(b,"",q)});else if(l.length&&(M.supplyDefaults(b),p=b._fullLayout,t&&C.push(function(){return D.Legend.draw(b),M.previousPromises(b)}),u&&C.push(F),m&&C.push(function(){return D.Axes.doTicks(b,
"redraw"),D.Titles.draw(b,"gtitle"),M.previousPromises(b)}),x)){K(b);t=M.getSubplotIds(p,"gl3d");for(c=0;c<t.length;c++)g=p[t[c]]._scene,g.handleDragmode(p.dragmode);t=M.getSubplotIds(p,"gl2d");for(c=0;c<t.length;c++)g=p._plots[t[c]]._scene2d,g.updateFx(p)}t=D.Lib.syncOrAsync(C,b);return t&&t.then||(t=Promise.resolve(b)),t.then(function(){return b.emit("plotly_relayout",D.Lib.extendDeep({},y)),b})}},{"../components/modebar/manage":313,"../lib/events":327,"../plotly":348,d3:53,"fast-isnumeric":58,
"gl-mat4/fromQuat":75}],345:[function(b,m,g){m.exports={staticPlot:!1,editable:!1,autosizable:!1,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:function(b,c){try{b._fullLayout._paper.style("background",c)}catch(g){console.log(g)}},topojsonURL:"https://cdn.plot.ly/"}},
{}],346:[function(b,m,g){function h(b){var d=t.Plots.attributes,h=e({type:b}),g="area"===b?{}:t.Plots.modules[b].meta||{},k=v(b),q={},p={};q.type=null;w(q,d);q=c(h.attributes,q,"attributes",b);void 0!==k.attributes&&w(q,k.attributes);q.type=b;q=f(q);l(q);E.traces[b]=x({},g,{attributes:q});void 0!==h.layoutAttributes&&(p=c(h.layoutAttributes,p,"layoutAttributes",b),l(p),E.traces[b].layoutAttributes=p)}function c(b,d,f,h){var g,k,l,q,p;return Object.keys(b).forEach(function(m){return m===r?void Object.keys(b[m]).forEach(function(q){g=
e({module:b[m][q]});void 0!==g&&(k=g[f],l=c(k,{},f,h),t.Lib.nestedProperty(d,q).set(w({},l)))}):m===y?void Object.keys(b[m]).forEach(function(g){g===h&&(q=e({module:b[m][g]}),void 0!==q&&(p=q[f],p=c(p,{},f,h),u(d,p)))}):void(d[m]=t.Lib.isPlainObject(b[m])?u({},b[m]):b[m])}),d}function l(b){B.crawl(b,function(b,c,d){B.isValObject(b)?"data_array"===b.valType?(b.role="data",d[c+"src"]={valType:"string"}):!0===b.arrayOk&&(d[c+"src"]={valType:"string"}):t.Lib.isPlainObject(b)&&(b.role="object")})}function e(b){return"type"in
b?"area"===b.type?{attributes:A}:t.Plots.getModule({type:b.type}):"module"in b?t[b.module]:void 0}function f(b){return Object.keys(b).forEach(function(c){"_"===c.charAt(0)&&-1===z.indexOf(c)&&delete b[c]}),b}function v(b){if("area"===b)return{};var c=t.Plots.subplotsRegistry,d=Object.keys(c).filter(function(c){return t.Plots.traceIs({type:b},c)})[0];return void 0===d?{}:c[d]}function d(b){var c=t.Plots.subplotsRegistry;return Object.keys(b).forEach(function(d){Object.keys(c).forEach(function(e){var f=
c[e];("cartesian"===e?f.attrRegex.x.test(d)||f.attrRegex.y.test(d):f.attrRegex.test(d))&&(b[d][k]=!0)})}),b}function p(b){return Object.keys(b).forEach(function(c){var d=w({},b[c]);if(!0===d[q]){var e=c.substr(0,c.length-1);delete d[q];b[c]={items:{}};b[c].items[e]=d;b[c].role="object"}}),b}var t=b("../plotly"),x=t.Lib.extendFlat,w=t.Lib.extendDeep,u=t.Lib.extendDeepAll,r="_nestedModules",y="_composedModules",k="_isSubplotObj",q="_isLinkedToArray",z=[k,q,"_deprecated"],E={traces:{},layout:{},defs:{}},
A=b("../plots/polar/area_attributes"),C=b("../plots/polar/axis_attributes"),B=m.exports={};B.get=function(){t.Plots.allTypes.concat("area").forEach(h);var b={},b=c(t.Plots.layoutAttributes,b,"layoutAttributes","*"),b=(x(b,{radialaxis:C.radialaxis,angularaxis:C.angularaxis}),x(b,C.layout),b),b=d(b),b=f(b);l(b);b=p(b);E.layout={layoutAttributes:b};E.defs={valObjects:t.Lib.valObjects,metaKeys:z.concat(["description","role"])};return E};B.crawl=function(b,c){Object.keys(b).forEach(function(d){var e=b[d];
-1===z.indexOf(d)&&(c(e,d,b),B.isValObject(e)||t.Lib.isPlainObject(e)&&B.crawl(e,c))})};B.isValObject=function(b){return b&&void 0!==b.valType}},{"../plotly":348,"../plots/polar/area_attributes":383,"../plots/polar/axis_attributes":384}],347:[function(b,m,g){var h=b("../plotly");m.exports=function(b){return h.Lib.extendFlat(h.defaultConfig,b)}},{"../plotly":348}],348:[function(b,m,g){b("es6-promise").polyfill();g.Lib=b("./lib");g.util=b("./lib/svg_text_utils");g.Queue=b("./lib/queue");b("../build/plotcss");
g.MathJaxConfig=b("./fonts/mathjax_config");g.defaultConfig=b("./plot_api/plot_config");g.Plots=b("./plots/plots");g.Axes=b("./plots/cartesian/axes");g.Fx=b("./plots/cartesian/graph_interact");g.Scene=b("./plots/gl3d/scene");g.Gl3dLayout=b("./plots/gl3d/layout");g.Geo=b("./plots/geo/geo");g.GeoLayout=b("./plots/geo/layout");g.Scene2D=b("./plots/gl2d/scene2d");g.micropolar=b("./plots/polar/micropolar");g.Color=b("./components/color");g.Drawing=b("./components/drawing");g.Colorscale=b("./components/colorscale");
g.Colorbar=b("./components/colorbar");g.ErrorBars=b("./components/errorbars");g.Annotations=b("./components/annotations");g.Shapes=b("./components/shapes");g.Titles=b("./components/titles");g.Legend=b("./components/legend");g.ModeBar=b("./components/modebar");g.Scatter=b("./traces/scatter");g.Bar=b("./traces/bar");g.Box=b("./traces/box");g.Heatmap=b("./traces/heatmap");g.Histogram=b("./traces/histogram");g.Histogram2d=b("./traces/histogram2d");g.Histogram2dContour=b("./traces/histogram2dcontour");
g.Pie=b("./traces/pie");g.Contour=b("./traces/contour");g.Scatter3D=b("./traces/scatter3d");g.Surface=b("./traces/surface");g.Mesh3D=b("./traces/mesh3d");g.ScatterGeo=b("./traces/scattergeo");g.Choropleth=b("./traces/choropleth");g.ScatterGl=b("./traces/scattergl");b("./plot_api/plot_api");g.PlotSchema=b("./plot_api/plot_schema");g.Snapshot=b("./snapshot")},{"../build/plotcss":1,"./components/annotations":282,"./components/color":284,"./components/colorbar":289,"./components/colorscale":297,"./components/drawing":302,
"./components/errorbars":308,"./components/legend":310,"./components/modebar":312,"./components/shapes":315,"./components/titles":316,"./fonts/mathjax_config":322,"./lib":332,"./lib/queue":337,"./lib/svg_text_utils":342,"./plot_api/plot_api":344,"./plot_api/plot_config":345,"./plot_api/plot_schema":346,"./plots/cartesian/axes":351,"./plots/cartesian/graph_interact":352,"./plots/geo/geo":355,"./plots/geo/layout":360,"./plots/gl2d/scene2d":368,"./plots/gl3d/layout":375,"./plots/gl3d/scene":380,"./plots/plots":382,
"./plots/polar/micropolar":385,"./snapshot":389,"./traces/bar":398,"./traces/box":406,"./traces/choropleth":410,"./traces/contour":417,"./traces/heatmap":428,"./traces/histogram":439,"./traces/histogram2d":444,"./traces/histogram2dcontour":448,"./traces/mesh3d":452,"./traces/pie":454,"./traces/scatter":457,"./traces/scatter3d":463,"./traces/scattergeo":466,"./traces/scattergl":471,"./traces/surface":476,"es6-promise":56}],349:[function(b,m,g){m.exports={type:{valType:"enumerated",values:[],dflt:"scatter"},
visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0},showlegend:{valType:"boolean",dflt:!0},legendgroup:{valType:"string",dflt:""},opacity:{valType:"number",min:0,max:1,dflt:1},name:{valType:"string"},uid:{valType:"string",dflt:""},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none"],dflt:"all"},stream:{token:{valType:"string",noBlank:!0,strict:!0},maxpoints:{valType:"number",min:0}}}},{}],350:[function(b,m,g){m.exports={xaxis:{valType:"axisid",dflt:"x"},
yaxis:{valType:"axisid",dflt:"y"}}},{}],351:[function(b,m,g){function h(b,c){var d={v:"x",h:"y"}[b.orientation||"v"];return r.Plots.traceIs(b,"box")&&c===d&&void 0===b[d]&&void 0===b[d+"0"]}function c(b,c,d){return c*r.Lib.roundUp(b/c,d)}function l(b){var c;c=b.dtick;(b._tickexponent=0,k(c)||"string"==typeof c||(c=1),"category"===b.type)?b._tickround=null:k(c)||"L"===c.charAt(0)?"date"===b.type?864E5<=c?b._tickround="d":36E5<=c?b._tickround="H":6E4<=c?b._tickround="M":1E3<=c?b._tickround="S":b._tickround=
3-Math.round(Math.log(c/2)/Math.LN10):(k(c)||(c=Number(c.substr(1))),b._tickround=2-Math.floor(Math.log(c)/Math.LN10+.01),c="log"===b.type?Math.pow(10,Math.max(b.range[0],b.range[1])):Math.max(Math.abs(b.range[0]),Math.abs(b.range[1])),c=Math.floor(Math.log(c)/Math.LN10+.01),3<Math.abs(c)&&("SI"===b.exponentformat||"B"===b.exponentformat?b._tickexponent=3*Math.round((c-1)/3):b._tickexponent=c)):"M"===c.charAt(0)?b._tickround=2===c.length?"m":"y":b._tickround=null}function e(b,c){var d=b.match(R),
e=new Date(c);return d?(d=String(c/1E3%1+2.0000005).substr(2,Math.min(+d[1]||6,6)).replace(/0+$/,"")||"0",y.time.format(b.replace(R,d))(e)):y.time.format(b)(e)}function f(b,c,d){b=b.tickfont||b._td._fullLayout.font;return{x:c,dx:0,dy:0,text:d||"",fontSize:b.size,font:b.family,fontColor:b.color}}function v(b,c,d,f){var h,g=c.x,l=b._tickround,q=new Date(g),p="";d&&b.hoverformat?h=e(b.hoverformat,g):b.tickformat?h=e(b.tickformat,g):(f&&(k(l)?l+=2:l={y:"m",m:"d",d:"H",H:"M",M:"S",S:2}[l]),"y"===l?h=O(q):
"m"===l?h=L(q):(g!==b._tmin||d||(p="<br>"+O(q)),"d"===l?h=P(q):"H"===l?h=M(q):(g!==b._tmin||d||(p="<br>"+P(q)+", "+O(q)),h=Q(q),"M"!==l&&(h+=T(q),"S"!==l&&(h+=x((g/1E3%1+1)%1,b,"none",d).substr(1))))));c.text=h+p}function d(b,c,d,e,f){var h=b.dtick;d=c.x;if(!e||"string"==typeof h&&"L"===h.charAt(0)||(h="L3"),b.tickformat||"string"==typeof h&&"L"===h.charAt(0))c.text=x(Math.pow(10,d),b,f,e);else if(k(h)||"D"===h.charAt(0)&&.1>((d+.01)%1+1)%1)-1!==["e","E","power"].indexOf(b.exponentformat)?(e=Math.round(d),
0===e?c.text=1:1===e?c.text="10":1<e?c.text="10<sup>"+e+"</sup>":c.text="10<sup>\u2212"+-e+"</sup>",c.fontSize*=1.25):(c.text=x(Math.pow(10,d),b,"","fakehover"),"D1"===h&&"y"===b._id.charAt(0)&&(c.dy-=c.fontSize/6));else{if("D"!==h.charAt(0))throw"unrecognized dtick "+String(h);c.text=String(Math.round(Math.pow(10,(d%1+1)%1)));c.fontSize*=.75}"D1"===b.dtick&&(e=String(c.text).charAt(0),("0"===e||"1"===e)&&("y"===b._id.charAt(0)?c.dx-=c.fontSize/4:(c.dy+=c.fontSize/2,c.dx+=(b.range[1]>b.range[0]?1:
-1)*c.fontSize*(0>d?.5:.25))))}function p(b,c){var d=b._categories[Math.round(c.x)];void 0===d&&(d="");c.text=String(d)}function t(b,c,d,e,f){"all"===b.showexponent&&1E-6>Math.abs(c.x/b.dtick)&&(f="hide");c.text=x(c.x,b,f,e)}function x(b,c,d,e){var f=0>b,h=c._tickround;d=d||c.exponentformat||"B";var g=c._tickexponent,q=c.tickformat;e&&(g={exponentformat:c.exponentformat,dtick:"none"===c.showexponent?c.dtick:k(b)?Math.abs(b)||1:1,range:"none"===c.showexponent?c.range:[0,b||1]},l(g),h=(Number(g._tickround)||
0)+4,g=g._tickexponent,c.hoverformat&&(q=c.hoverformat));if(q)return y.format(q)(b).replace(/-/g,"\u2212");e=Math.pow(10,-h)/2;if("none"===d&&(g=0),b=Math.abs(b),e>b)b="0",f=!1;else{if(b+=e,g&&(b*=Math.pow(10,-g),h+=g),0===h)b=String(Math.floor(b));else if(0>h)for(b=String(Math.round(b)),b=b.substr(0,b.length+h);0>h;h++)b+="0";else b=String(b),(e=b.indexOf(".")+1)&&(b=b.substr(0,e+h).replace(/\.?0+$/,""));h=b;c=c._td._fullLayout.separators;b=c.charAt(0);c=c.charAt(1);h=h.split(".");e=h[0];b=1<h.length?
b+h[1]:"";if(c&&(1<h.length||4<e.length))for(;X.test(e);)e=e.replace(X,"$1"+c+"$2");b=e+b}g&&"hide"!==d&&(c=0>g?"\u2212"+-g:"power"!==d?"+"+g:String(g),"e"===d||("SI"===d||"B"===d)&&(12<g||-15>g)?b+="e"+c:"E"===d?b+="E"+c:"power"===d?b+="&times;10<sup>"+c+"</sup>":"B"===d&&9===g?b+="B":("SI"===d||"B"===d)&&(b+=S[g/3+5]));return f?"\u2212"+b:b}function w(b,c,d){function e(b,d){for(var f=Object.keys(b),h=/^[xyz]axis[0-9]*/,g=[],k=0;k<f.length;k++){var l=f[k];c&&l.charAt(0)!==c||h.test(l)&&g.push(d+
l)}return g.sort()}b=b._fullLayout;if(!b)return[];var f=e(b,"");if(d)return f;d=r.Plots.getSubplotIds(b,"gl3d")||[];for(var h=0;h<d.length;h++)var g=d[h],f=f.concat(e(b[g],g+"."));return f}function u(b,c){for(var d=0;d<c.length;d++)-1===b.indexOf(c[d])&&b.push(c[d])}var r=b("../../plotly"),y=b("d3"),k=b("fast-isnumeric"),q=m.exports={};q.attributes=b("./attributes");r.Plots.registerSubplot("cartesian",["xaxis","yaxis"],["x","y"],q.attributes);q.layoutAttributes=b("./layout_attributes");var z=/^xaxis[0-9]*$/,
E=/^yaxis[0-9]*$/;q.supplyLayoutDefaults=function(b,c,d){function e(b,c){var d=Number(b.substr(5)||1),f=Number(c.substr(5)||1);return d-f}var f,h=Object.keys(b),g=[],k=[],l={},p={};for(f=0;f<h.length;f++){var t=h[f];z.test(t)?g.push(t):E.test(t)&&k.push(t)}for(f=0;f<d.length;f++){var h=d[f],t=q.id2name(h.xaxis),m=q.id2name(h.yaxis);if(t&&-1===g.indexOf(t)&&g.push(t),m&&-1===k.indexOf(m)&&k.push(m),r.Plots.traceIs(h,"2dMap")&&(l[t]=!0,l[m]=!0),r.Plots.traceIs(h,"oriented"))p["h"===h.orientation?m:
t]=!0}(c._hasCartesian||c._hasGL2D||!d.length)&&(g.length?g.sort(e):g=["xaxis"],k.length?k.sort(e):k=["yaxis"]);g.concat(k).forEach(function(e){function f(b,c){return r.Lib.coerce(t,m,q.layoutAttributes,b,c)}var h=e.charAt(0),t=b[e]||{},m={},u={letter:h,font:c.font,outerTicks:l[e],showGrid:!p[e],name:e,data:d},h={letter:h,counterAxes:{x:k,y:g}[h].map(q.name2id),overlayableAxes:{x:g,y:k}[h].filter(function(c){return c!==e&&!(b[c]||{}).overlaying}).map(q.name2id)};q.handleAxisDefaults(t,m,f,u);q.handleAxisPositioningDefaults(t,
m,f,h);c[e]=m;b[e]||"-"===t.type||(b[e]={type:t.type})});g.length&&k.length&&r.Lib.coerce(b,c,r.Plots.layoutAttributes,"plot_bgcolor")};q.handleAxisDefaults=function(b,c,d,e){var f=e.letter,g=e.font||{},l="Click to enter "+(e.title||f.toUpperCase()+" axis")+" title";e.name&&(c._name=e.name,c._id=q.name2id(e.name));var p=d("type");if("-"===p){var t=e.data;if("-"===c.type){var m=c._id,u=m.charAt(0);-1!==m.indexOf("scene")&&(m=u);var v;b:{v=m;for(var w,x=0;x<t.length;x++)if(w=t[x],(w[u+"axis"]||u)===
v)if(h(w,u)||(w[u]||[]).length||w[u+"0"]){v=w;break b}v=void 0}if(v)if("histogram"===v.type&&u==={v:"y",h:"x"}[v.orientation||"v"])c.type="linear";else if(h(v,u)){w={v:"x",h:"y"}[v.orientation||"v"];for(var x=[],z=0;z<t.length;z++)v=t[z],r.Plots.traceIs(v,"box")&&(v[u+"axis"]||u)===m&&(void 0!==v[w]?x.push(v[w][0]):void 0!==v.name?x.push(v.name):x.push("text"));c.type=q.autoType(x)}else c.type=q.autoType(v[u]||[v[u+"0"]])}"-"===c.type?c.type="linear":p=b.type=c.type}q.setConvert(c);d("title",l);r.Lib.coerceFont(d,
"titlefont",{family:g.family,size:Math.round(1.2*g.size),color:g.color});g=2===(b.range||[]).length&&k(b.range[0])&&k(b.range[1]);d("autorange",!g)&&d("rangemode");f=d("range",[-1,"x"===f?6:4]);f[0]===f[1]&&(c.range=[f[0]-1,f[0]+1]);r.Lib.noneOrAll(b.range,c.range,[0,1]);d("fixedrange");q.handleTickValueDefaults(b,c,d,p);q.handleTickDefaults(b,c,d,p,e);p=r.Lib.coerce2(b,c,q.layoutAttributes,"linecolor");f=r.Lib.coerce2(b,c,q.layoutAttributes,"linewidth");(p=d("showline",!!p||!!f))||(delete c.linecolor,
delete c.linewidth);(p||c.ticks)&&d("mirror");p=r.Lib.coerce2(b,c,q.layoutAttributes,"gridcolor");f=r.Lib.coerce2(b,c,q.layoutAttributes,"gridwidth");d("showgrid",e.showGrid||!!p||!!f)||(delete c.gridcolor,delete c.gridwidth);p=r.Lib.coerce2(b,c,q.layoutAttributes,"zerolinecolor");b=r.Lib.coerce2(b,c,q.layoutAttributes,"zerolinewidth");return d("zeroline",e.showGrid||!!p||!!b)||(delete c.zerolinecolor,delete c.zerolinewidth),c};q.handleTickDefaults=function(b,c,d,e,f){var h=r.Lib.coerce2(b,c,q.layoutAttributes,
"ticklen"),g=r.Lib.coerce2(b,c,q.layoutAttributes,"tickwidth"),k=r.Lib.coerce2(b,c,q.layoutAttributes,"tickcolor");d("ticks",f.outerTicks||h||g||k?"outside":"")||(delete c.ticklen,delete c.tickwidth,delete c.tickcolor);d("showticklabels")&&(r.Lib.coerceFont(d,"tickfont",f.font||{}),d("tickangle"),b=q.getShowAttrDflt(b),"category"!==e&&(c=d("tickformat"),f.noHover||d("hoverformat"),c||"date"===e||(d("showexponent",b),d("exponentformat"))),d("tickprefix")&&d("showtickprefix",b),d("ticksuffix")&&d("showticksuffix",
b))};q.handleTickValueDefaults=function(b,c,d,e){var f="auto";"array"!==b.tickmode||"log"!==e&&"date"!==e||(b.tickmode="auto");Array.isArray(b.tickvals)?f="array":b.dtick&&k(b.dtick)&&(f="linear");b=d("tickmode",f);"auto"===b?d("nticks"):"linear"===b?(d("tick0"),d("dtick")):void 0===d("tickvals")?c.tickmode="auto":d("ticktext")};q.handleAxisPositioningDefaults=function(b,c,d,e){var f=e.counterAxes||[],h=e.overlayableAxes||[];e=e.letter;"free"===r.Lib.coerce(b,c,{anchor:{valType:"enumerated",values:["free"].concat(f),
dflt:k(b.position)?"free":f[0]||"free"}},"anchor")&&d("position");r.Lib.coerce(b,c,{side:{valType:"enumerated",values:"x"===e?["bottom","top"]:["left","right"],dflt:"x"===e?"bottom":"left"}},"side");f=!1;(h.length&&(f=r.Lib.coerce(b,c,{overlaying:{valType:"enumerated",values:[!1].concat(h),dflt:!1}},"overlaying")),f)||(d=d("domain"),d[0]>d[1]-.01&&(c.domain=[0,1]),r.Lib.noneOrAll(b.domain,c.domain,[0,1]));return c};q.coerceRef=function(b,c,d,e){d=d._fullLayout._hasGL2D?[]:q.listIds(d,e);e+="ref";
var f={};return f[e]={valType:"enumerated",values:d.concat(["paper"]),dflt:d[0]||"paper"},r.Lib.coerce(b,c,f,e)};q.clearTypes=function(b,c){Array.isArray(c)&&c.length||(c=b._fullData.map(function(b,c){return c}));c.forEach(function(c){c=b.data[c];delete (q.getFromId(b,c.xaxis)||{}).type;delete (q.getFromId(b,c.yaxis)||{}).type})};var A=/^[xyz][0-9]*$/,C=/^[xyz]axis[0-9]*$/;q.id2name=function(b){if("string"==typeof b&&b.match(A)){var c=b.substr(1);return"1"===c&&(c=""),b.charAt(0)+"axis"+c}};q.name2id=
function(b){if(b.match(C)){var c=b.substr(5);return"1"===c&&(c=""),b.charAt(0)+c}};q.cleanId=function(b,c){if(b.match(A)&&(!c||b.charAt(0)===c)){var d=b.substr(1).replace(/^0+/,"");return"1"===d&&(d=""),b.charAt(0)+d}};q.cleanName=function(b,c){if(b.match(A)&&(!c||b.charAt(0)===c)){var d=b.substr(5).replace(/^0+/,"");return"1"===d&&(d=""),b.charAt(0)+"axis"+d}};q.counterLetter=function(b){return{x:"y",y:"x"}[b.charAt(0)]};q.autoType=function(b){if(q.moreDates(b))b="date";else if(q.category(b))b="category";
else{a:{if(b)for(var c=0;c<b.length;c++)if(k(b[c])){b=!0;break a}b=!1}b=b?"linear":"-"}return b};q.getShowAttrDflt=function(b){var c=["showexponent","showtickprefix","showticksuffix"].filter(function(c){return void 0!==b[c]});return c.every(function(d){return b[d]===b[c[0]]})||1===c.length?b[c[0]]:void 0};q.moreDates=function(b){for(var c,d=0,e=0,f=Math.max(1,(b.length-1)/1E3),h=0;h<b.length;h+=f)c=b[Math.round(h)],r.Lib.isDateTime(c)&&(d+=1),k(c)&&(e+=1);return d>2*e};q.category=function(b){for(var c,
d=Math.max(1,(b.length-1)/1E3),e=0,f=0,h=0;h<b.length;h+=d)c=q.cleanDatum(b[Math.round(h)]),k(c)?e++:"string"==typeof c&&""!==c&&"None"!==c&&f++;return f>2*e};q.cleanDatum=function(b){try{if("object"==typeof b&&null!==b&&b.getTime)return r.Lib.ms2DateTime(b);if("string"!=typeof b&&!k(b))return"";b=b.toString().replace(/['"%,$# ]/g,"")}catch(c){console.log(c,b)}return b};q.BADNUM=void 0;q.setConvert=function(b){function c(d,e){if(0<d)return Math.log(d)/Math.LN10;if(0>=d&&e&&b.range&&2===b.range.length){var h=
b.range[0],g=b.range[1];return.5*(h+g-3*f*Math.abs(h-g))}return q.BADNUM}function d(b){return Math.pow(10,b)}function e(b){return k(b)?Number(b):q.BADNUM}var f=10;if(b.c2l="log"===b.type?c:e,b.l2c="log"===b.type?d:e,b.l2d=function(c){return b.c2d(b.l2c(c))},b.setScale=function(){var c,d=b._td._fullLayout._size;if(b._categories||(b._categories=[]),b.overlaying)c=q.getFromId(b._td,b.overlaying),b.domain=c.domain;b.range&&2===b.range.length&&b.range[0]!==b.range[1]||(b.range=[-1,1]);for(c=0;2>c;c++)k(b.range[c])||
(b.range[c]=k(b.range[1-c])?b.range[1-c]*(c?10:.1):c?1:-1),b.range[c]<-(Number.MAX_VALUE/2)?b.range[c]=-(Number.MAX_VALUE/2):b.range[c]>Number.MAX_VALUE/2&&(b.range[c]=Number.MAX_VALUE/2);if("y"===b._id.charAt(0)?(b._offset=d.t+(1-b.domain[1])*d.h,b._length=d.h*(b.domain[1]-b.domain[0]),b._m=b._length/(b.range[0]-b.range[1]),b._b=-b._m*b.range[1]):(b._offset=d.l+b.domain[0]*d.w,b._length=d.w*(b.domain[1]-b.domain[0]),b._m=b._length/(b.range[1]-b.range[0]),b._b=-b._m*b.range[0]),!isFinite(b._m)||!isFinite(b._b))throw r.Lib.notifier("Something went wrong with axis scaling",
"long"),b._td._replotting=!1,Error("axis scaling");},b.l2p=function(c){return k(c)?y.round(r.Lib.constrain(b._b+b._m*c,-f*b._length,(1+f)*b._length),2):q.BADNUM},b.p2l=function(c){return(c-b._b)/b._m},b.c2p=function(c,d){return b.l2p(b.c2l(c,d))},b.p2c=function(c){return b.l2c(b.p2l(c))},-1!==["linear","log","-"].indexOf(b.type))b.c2d=e,b.d2c=function(b){return b=q.cleanDatum(b),k(b)?Number(b):q.BADNUM},b.d2l=function(c,d){return"log"===b.type?b.c2l(b.d2c(c),d):b.d2c(c)};else if("date"===b.type){if(b.c2d=
function(b){return k(b)?r.Lib.ms2DateTime(b):q.BADNUM},b.d2c=function(b){return k(b)?Number(b):r.Lib.dateTime2ms(b)},b.d2l=b.d2c,b.range&&1<b.range.length)try{var h=b.range.map(r.Lib.dateTime2ms);!k(b.range[0])&&k(h[0])&&(b.range[0]=h[0]);!k(b.range[1])&&k(h[1])&&(b.range[1]=h[1])}catch(g){console.log(g,b.range)}}else"category"===b.type&&(b.c2d=function(c){return b._categories[Math.round(c)]},b.d2c=function(c){-1===b._categories.indexOf(c)&&b._categories.push(c);c=b._categories.indexOf(c);return-1===
c?q.BADNUM:c},b.d2l=b.d2c);b.makeCalcdata=function(c,d){var e,f,h;if(d in c)for(e=c[d],f=Array(e.length),h=0;h<e.length;h++)f[h]=b.d2c(e[h]);else{var g=d+"0"in c?b.d2c(c[d+"0"]):0,k=c["d"+d]?Number(c["d"+d]):1;e=c[{x:"y",y:"x"}[d]];f=Array(e.length);for(h=0;h<e.length;h++)f[h]=g+h*k}return f};b._min=[];b._max=[];b._minDtick=null;b._forceTick0=null};q.minDtick=function(b,c,d,e){-1===["log","category"].indexOf(b.type)&&e?null===b._minDtick?(b._minDtick=c,b._forceTick0=d):b._minDtick&&(2E-6>(b._minDtick/
c+1E-6)%1&&2E-6>((d-b._forceTick0)/c%1+1.000001)%1?(b._minDtick=c,b._forceTick0=d):(2E-6<(c/b._minDtick+1E-6)%1||2E-6<((d-b._forceTick0)/b._minDtick%1+1.000001)%1)&&(b._minDtick=0)):b._minDtick=0};q.doAutoRange=function(b){if(b._length||b.setScale(),b.autorange&&b._min&&b._max&&b._min.length&&b._max.length){var c,d=b._min[0].val,e=b._max[0].val;for(c=1;c<b._min.length&&d===e;c++)d=Math.min(d,b._min[c].val);for(c=1;c<b._max.length&&d===e;c++)e=Math.max(e,b._max[c].val);var f,h,g,k,l,q,p,r=0,t=b.range&&
b.range[1]<b.range[0];"reversed"===b.autorange&&(t=!0,b.autorange=!0);for(c=0;c<b._min.length;c++)for(h=b._min[c],f=0;f<b._max.length;f++)g=b._max[f],p=g.val-h.val,q=b._length-h.pad-g.pad,0<p&&0<q&&p/q>r&&(k=h,l=g,r=p/q);d===e?b.range=t?[d+1,"normal"!==b.rangemode?0:d-1]:["normal"!==b.rangemode?0:d-1,d+1]:r&&(("linear"===b.type||"-"===b.type)&&("tozero"===b.rangemode&&0<=k.val?k={val:0,pad:0}:"nonnegative"===b.rangemode&&(0>k.val-r*k.pad&&(k={val:0,pad:0}),0>l.val&&(l={val:1,pad:0})),r=(l.val-k.val)/
(b._length-k.pad-l.pad)),b.range=[k.val-r*k.pad,l.val+r*l.pad],b.range[0]===b.range[1]&&(b.range=[b.range[0]-1,b.range[0]+1]),t&&b.range.reverse());(c=b._td.layout[b._name])||(b._td.layout[b._name]=c={});c!==b&&(c.range=b.range.slice(),c.autorange=b.autorange)}};q.saveRangeInitial=function(b,c){for(var d,e,f,h=q.list(b,"",!0),g=!1,k=0;k<h.length;k++)d=h[k],f=(e=void 0===d._rangeInitial)||!(d.range[0]===d._rangeInitial[0]&&d.range[1]===d._rangeInitial[1]),(e&&!1===d.autorange||c&&f)&&(d._rangeInitial=
d.range.slice(),g=!0);return g};var B=Number.MAX_VALUE/2;q.expand=function(b,c,d){function e(b){if(Array.isArray(b))return function(c){return Math.max(Number(b[c]||0),0)};var c=Math.max(Number(b||0),0);return function(){return c}}function f(d){function e(b){return k(b)&&Math.abs(b)<B}if(l=c[d],k(l)){if(r=y(d)+x,t=A(d)+x,u=l-E(d),v=l+C(d),"log"===b.type&&v/10>u&&(u=v/10),q=b.c2l(u),p=b.c2l(v),z&&(q=Math.min(0,q),p=Math.max(0,p)),e(q)){m=!0;for(h=0;h<b._min.length&&m;h++)g=b._min[h],g.val<=q&&g.pad>=
t?m=!1:g.val>=q&&g.pad<=t&&(b._min.splice(h,1),h--);m&&b._min.push({val:q,pad:z&&0===q?0:t})}if(e(p)){m=!0;for(h=0;h<b._max.length&&m;h++)g=b._max[h],g.val>=p&&g.pad>=r?m=!1:g.val<=p&&g.pad<=r&&(b._max.splice(h,1),h--);m&&b._max.push({val:p,pad:z&&0===p?0:r})}}}if(b.autorange&&c){b._min||(b._min=[]);b._max||(b._max=[]);d||(d={});b._m||b.setScale();var h,g,l,q,p,r,t,m,u,v,w=c.length,x=d.padded?.05*b._length:0,z=d.tozero&&("linear"===b.type||"-"===b.type),y=e((0<b._m?d.ppadplus:d.ppadminus)||d.ppad||
0),A=e((0<b._m?d.ppadminus:d.ppadplus)||d.ppad||0),C=e(d.vpadplus||d.vpad),E=e(d.vpadminus||d.vpad);for(d=0;6>d;d++)f(d);for(d=w-1;5<d;d--)f(d)}};q.autoBin=function(b,c,d,e){function f(b){return 2>(1+100*(b-t)/p.dtick)%100}var h=r.Lib.aggNums(Math.min,null,b),g=r.Lib.aggNums(Math.max,null,b);if("category"===c.type)return{start:h-.5,end:g+.5,size:1};if(d)e=(g-h)/d;else{d=r.Lib.distinctVals(b);var l=Math.pow(10,Math.floor(Math.log(d.minDiff)/Math.LN10));d=l*r.Lib.roundUp(d.minDiff/l,[.9,1.9,4.9,9.9],
!0);e=Math.max(d,2*r.Lib.stdev(b)/Math.pow(b.length,e?.25:.4))}var p={type:"log"===c.type?"linear":c.type,range:[h,g]};q.autoTicks(p,e);var t=q.tickIncrement(q.tickFirst(p),p.dtick,"reverse");if("number"==typeof p.dtick){for(var m=l=d=e=0,u=0;u<b.length;u++)0===b[u]%1?l++:k(b[u])||m++,f(b[u])&&e++,f(b[u]+p.dtick/2)&&d++;b=b.length-m;l===b&&"date"!==c.type?1>p.dtick?t=h-.5*p.dtick:t-=.5:.1*b>d&&(e>.3*b||f(h)||f(g))&&(c=p.dtick/2,t+=h>t+c?c:-c);h=t+(1+Math.floor((g-t)/p.dtick))*p.dtick}else for(h=t;g>=
h;)h=q.tickIncrement(h,p.dtick);return{start:t,end:h,size:p.dtick}};q.calcTicks=function(b){if("array"===b.tickmode){var c,d,e=b.tickvals,h=b.ticktext,g=Array(e.length);c=1.0001*b.range[0]-1E-4*b.range[1];d=1.0001*b.range[1]-1E-4*b.range[0];var k=Math.min(c,d),p=Math.max(c,d),t=0;Array.isArray(h)||(h=[]);for(d=0;d<e.length;d++)c=b.d2l(e[d]),c>k&&p>c&&(void 0===h[d]?g[t]=q.tickText(b,c):g[t]=f(b,c,String(h[d])),t++);return t<e.length&&g.splice(t,e.length-t),g}"auto"!==b.tickmode&&b.dtick||((h=b.nticks)||
("category"===b.type?(e=b.tickfont?1.2*(b.tickfont.size||12):15,h=b._length/e):(e="y"===b._id.charAt(0)?40:80,h=r.Lib.constrain(b._length/e,4,9)+1)),q.autoTicks(b,Math.abs(b.range[1]-b.range[0])/h),0<b._minDtick&&b.dtick<2*b._minDtick&&(b.dtick=b._minDtick,b.tick0=b._forceTick0));b.tick0||(b.tick0="date"===b.type?(new Date(2E3,0,1)).getTime():0);l(b);b._tmin=q.tickFirst(b);h=b.range[1]<b.range[0];e=[];g=1.0001*b.range[1]-1E-4*b.range[0];"category"===b.type&&(g=h?Math.max(-.5,g):Math.min(b._categories.length-
.5,g));for(k=b._tmin;(h?k>=g:g>=k)&&(e.push(k),!(1E3<e.length));k=q.tickIncrement(k,b.dtick,h));b._tmax=e[e.length-1];h=Array(e.length);for(g=0;g<e.length;g++)h[g]=q.tickText(b,e[g]);return h};var G=[2,5,10],F=[1,2,3,6,12],I=[1,2,5,10,15,30],D=[1,2,3,7,14],H=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],K=[-.301,0,.301,.699,1];q.autoTicks=function(b,d){var e;"date"===b.type?(b.tick0=(new Date(2E3,0,1)).getTime(),157788E5<d?(d/=315576E5,e=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),b.dtick=
"M"+12*c(d,e,G)):12096E5<d?(d/=26298E5,b.dtick="M"+c(d,1,F)):432E5<d?(b.dtick=c(d,864E5,D),b.tick0=(new Date(2E3,0,2)).getTime()):18E5<d?b.dtick=c(d,36E5,F):3E4<d?b.dtick=c(d,6E4,I):500<d?b.dtick=c(d,1E3,I):(e=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),b.dtick=c(d,e,G))):"log"===b.type?(b.tick0=0,.7<d)?b.dtick=Math.ceil(d):1>Math.abs(b.range[1]-b.range[0])?(d=Math.abs(Math.pow(10,b.range[1])-Math.pow(10,b.range[0]))/(1.5*Math.abs((b.range[1]-b.range[0])/d)),e=Math.pow(10,Math.floor(Math.log(d)/
Math.LN10)),b.dtick="L"+c(d,e,G)):b.dtick=.3<d?"D2":"D1":"category"===b.type?(b.tick0=0,b.dtick=Math.ceil(Math.max(d,1))):(b.tick0=0,e=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),b.dtick=c(d,e,G));if(0===b.dtick&&(b.dtick=1),!k(b.dtick)&&"string"!=typeof b.dtick)throw e=b.dtick,b.dtick=1,"ax.dtick error: "+String(e);};q.tickIncrement=function(b,c,d){var e=d?-1:1;if(k(c))return b+e*c;var f=c.charAt(0),h=e*Number(c.substr(1));if("M"===f)return c=new Date(b),c.setMonth(c.getMonth()+h);if("L"===f)return Math.log(Math.pow(10,
b)+h)/Math.LN10;if("D"===f)return h=b+.01*e,c=r.Lib.roundUp((h%1+1)%1,"D2"===c?K:H,d),Math.floor(h)+Math.log(y.round(Math.pow(10,c),1))/Math.LN10;throw"unrecognized dtick "+String(c);};q.tickFirst=function(b){var c=b.range[1]<b.range[0],d=c?Math.floor:Math.ceil,e=1.0001*b.range[0]-1E-4*b.range[1],f=b.dtick,h=b.tick0;if(k(f))return e=d((e-h)/f)*f+h,"category"===b.type&&(e=r.Lib.constrain(e,0,b._categories.length-1)),e;var g=f.charAt(0);b=Number(f.substr(1));if("M"===g){d=new Date(h);e=new Date(e);
h=12*(e.getFullYear()-d.getFullYear())+e.getMonth()-d.getMonth();for(b=d.setMonth(d.getMonth()+(Math.round(h/b)+(c?1:-1))*b);c?b>e:e>b;)b=q.tickIncrement(b,f,c);return b}if("L"===g)return Math.log(d((Math.pow(10,e)-h)/b)*b+h)/Math.LN10;if("D"===g)return c=r.Lib.roundUp((e%1+1)%1,"D2"===f?K:H,c),Math.floor(e)+Math.log(y.round(Math.pow(10,c),1))/Math.LN10;throw"unrecognized dtick "+String(f);};var O=y.time.format("%Y"),L=y.time.format("%b %Y"),P=y.time.format("%b %-d"),M=y.time.format("%b %-d %Hh"),
Q=y.time.format("%H:%M"),T=y.time.format(":%S"),R=/%(\d?)f/g;q.tickText=function(b,c,e){function h(d){var f;return void 0===d?!0:e?"none"===d:(f={first:b._tmin,last:b._tmax}[d],"all"!==d&&c!==f)}var g,k=f(b,c),l="array"===b.tickmode,q=e||l;if(l&&Array.isArray(b.ticktext)){for(var l=Math.abs(b.range[1]-b.range[0])/1E4,r=0;r<b.ticktext.length&&!(Math.abs(c-b.d2l(b.tickvals[r]))<l);r++);if(r<b.ticktext.length)return k.text=String(b.ticktext[r]),k}return g="none"!==b.exponentformat&&h(b.showexponent)?
"hide":"","date"===b.type?v(b,k,e,q):"log"===b.type?d(b,k,e,q,g):"category"===b.type?p(b,k):t(b,k,e,q,g),b.tickprefix&&!h(b.showtickprefix)&&(k.text=b.tickprefix+k.text),b.ticksuffix&&!h(b.showticksuffix)&&(k.text+=b.ticksuffix),k};var S="f p n &mu; m  k M G T".split(" "),X=/(\d+)(\d{3})/;q.list=function(b,c,d){return w(b,c,d).map(function(c){return r.Lib.nestedProperty(b._fullLayout,c).get()})};q.listIds=function(b,c){return w(b,c,!0).map(q.name2id)};q.getFromId=function(b,c,d){b=b._fullLayout;return"x"===
d?c=c.replace(/y[0-9]*/,""):"y"===d&&(c=c.replace(/x[0-9]*/,"")),b[q.id2name(c)]};q.getFromTrace=function(b,c,d){var e=b._fullLayout,f=null;r.Plots.traceIs(c,"gl3d")?(b=c.scene,"scene"===b.substr(0,5)&&(f=e[b][d+"axis"])):f=q.getFromId(b,c[d+"axis"]||d);return f};q.subplotMatch=/^x([0-9]*)y([0-9]*)$/;q.getSubplots=function(b,c){var d,e,f=[],h=b.data||[];for(d=0;d<h.length;d++)e=h[d],!1!==e.visible&&"legendonly"!==e.visible&&(r.Plots.traceIs(e,"cartesian")||r.Plots.traceIs(e,"gl2d"))&&(e=(e.xaxis||
"x")+(e.yaxis||"y"),-1===f.indexOf(e)&&f.push(e));h=q.list(b,"",!0);for(d=0;d<h.length;d++){var g=h[d],k=g._id.charAt(0),l="free"===g.anchor?"x"===k?"y":"x":g.anchor,p=q.getFromId(b,l),t=!1;for(e=0;e<f.length;e++)if(-1!==f[e].indexOf(g._id)){t=!0;break}if("free"!==g.anchor||!t){if(!p)return void console.log(["Warning: couldnt find anchor",l,"for axis",g._id].join(" "));e="x"===k?g._id+p._id:p._id+g._id;-1===f.indexOf(e)&&f.push(e)}}var m=q.subplotMatch,h=[];for(d=0;d<f.length;d++)e=f[d],m.test(e)&&
h.push(e);return h.sort(function(b,c){var d=b.match(m),e=c.match(m);return d[1]===e[1]?+(d[2]||1)-(e[2]||1):+(d[1]||0)-(e[1]||0)}),c?q.findSubplotsWithAxis(h,c):h};q.findSubplotsWithAxis=function(b,c){for(var d=new RegExp("x"===c._id.charAt(0)?"^"+c._id+"y":c._id+"$"),e=[],f=0;f<b.length;f++){var h=b[f];d.test(h)&&e.push(h)}return e};q.makeClipPaths=function(b){var c,d,e=b._fullLayout,f=e._defs,h={_offset:0,_length:e.width,_id:""},g={_offset:0,_length:e.height,_id:""},k=q.list(b,"x",!0),l=q.list(b,
"y",!0);b=[];for(c=0;c<k.length;c++)for(b.push({x:k[c],y:g}),d=0;d<l.length;d++)0===c&&b.push({x:h,y:l[d]}),b.push({x:k[c],y:l[d]});f=f.selectAll("g.clips").data([0]);f.enter().append("g").classed("clips",!0);f=f.selectAll(".axesclip").data(b,function(b){return b.x._id+b.y._id});f.enter().append("clipPath").classed("axesclip",!0).attr("id",function(b){return"clip"+e._uid+b.x._id+b.y._id}).append("rect");f.exit().remove();f.each(function(b){y.select(this).select("rect").attr({x:b.x._offset||0,y:b.y._offset||
0,width:b.x._length||1,height:b.y._length||1})})};q.doTicks=function(b,c,d){function e(b){b=p.l2p(b.x);return 1<b&&b<p._length-1}function f(b,c){var d=b.selectAll("path."+G).data("inside"===p.ticks?R:C,E);c&&p.ticks?(d.enter().append("path").classed(G,1).classed("ticks",1).classed("crisp",1).call(r.Color.stroke,p.tickcolor).style("stroke-width",L+"px").attr("d",c),d.attr("transform",v),d.exit().remove()):d.remove()}function h(e,f){function g(b,c){b.each(function(b){var d=m(c),e=y.select(this),f=e.select(".text-math-group");
b=v(b)+(k(c)&&0!==+c?" rotate("+c+","+q(b)+","+(t(b)-b.fontSize/2)+")":"");f.empty()?(f=e.select("text").attr({transform:b,"text-anchor":d}),f.empty()||f.selectAll("tspan.line").attr({x:f.attr("x"),y:f.attr("y")})):(d=r.Drawing.bBox(f.node()).width*{end:-.5,start:.5}[d],f.attr("transform",b+(d?"translate("+d+",0)":"")))})}var l=e.selectAll("g."+G).data(C,E);if(!p.showticklabels||!k(f))return l.remove(),void r.Titles.draw(b,c+"title");var q,t,m,u;if("x"===A){var w="bottom"===O?1:-1;q=function(b){return b.dx};
u=f+(H+I)*w;t=function(b){return b.dy+u+b.fontSize*("bottom"===O?1:-.5)};m=function(b){return k(b)&&0!==b&&180!==b?0>b*w?"end":"start":"middle"}}else t=function(b){return b.dy+b.fontSize/2},q=function(b){return b.dx+f+(H+I+(90===Math.abs(p.tickangle)?b.fontSize/2:0))*("right"===O?1:-1)},m=function(b){return k(b)&&90===Math.abs(b)?"middle":"right"===O?"start":"end"};var x=0,B=0,F=[];l.enter().append("g").classed(G,1).append("text").attr("text-anchor","middle").each(function(c){var d=y.select(this),
e=b._promises.length;d.call(r.Drawing.setPosition,q(c),t(c)).call(r.Drawing.font,c.font,c.fontSize,c.fontColor).text(c.text).call(r.util.convertToTspans);(e=b._promises[e])?F.push(b._promises.pop().then(function(){g(d,p.tickangle)})):g(d,p.tickangle)});l.exit().remove();l.each(function(b){x=Math.max(x,b.fontSize)});g(l,p._lastangle||p.tickangle);var D=r.Lib.syncOrAsync([function(){return F.length&&Promise.all(F)},function(){if(g(l,p.tickangle),"x"===A&&!k(p.tickangle)&&("log"!==p.type||"D"!==String(p.dtick).charAt(0))){var e=
[];l.each(function(b){var c=y.select(this),d=c.select(".text-math-group");b=p.l2p(b.x);d.empty()&&(d=c.select("text"));c=r.Drawing.bBox(d.node());e.push({top:0,bottom:10,height:10,left:b-c.width/2,right:b+c.width/2+2,width:c.width+2})});for(z=0;z<e.length-1;z++)if(r.Lib.bBoxIntersect(e[z],e[z+1])){B=30;break}B&&(2.5*x>Math.abs((C[C.length-1].x-C[0].x)*p._m)/(C.length-1)&&(B=90),g(l,B));p._lastangle=B}return d||r.Titles.draw(b,c+"title"),c+" done"}]);return D&&D.then&&b._promises.push(D),D}function g(b,
c){return!0!==b.visible||b.xaxis+b.yaxis!==c?!1:r.Plots.traceIs(b,"bar")&&b.orientation==={x:"h",y:"v"}[A]?!0:b.fill&&b.fill.charAt(b.fill.length-1)===A}function l(c,d,f){var h=c.zerolinelayer,k=c["hidegrid"+A]?[]:R;d="M0,0"+("x"===A?"v":"h")+d._length;c=c.gridlayer.selectAll("path."+F).data(!1===p.showgrid?[]:k,E);c.enter().append("path").classed(F,1).classed("crisp",1).attr("d",d).each(function(b){p.zeroline&&("linear"===p.type||"-"===p.type)&&Math.abs(b.x)<p.dtick/100&&y.select(this).remove()});
c.attr("transform",v).call(r.Color.stroke,p.gridcolor||"#ddd").style("stroke-width",Q+"px");c.exit().remove();c=!1;for(var q=0;q<b._fullData.length;q++)if(g(b._fullData[q],f)){c=!0;break}f=0>=p.range[0]*p.range[1]&&p.zeroline&&("linear"===p.type||"-"===p.type)&&k.length&&(c||e({x:0})||!p.showline);h=h.selectAll("path."+D).data(f?[{x:0}]:[]);h.enter().append("path").classed(D,1).classed("zl",1).classed("crisp",1).attr("d",d);h.attr("transform",v).call(r.Color.stroke,p.zerolinecolor||r.Color.defaultLine).style("stroke-width",
K+"px");h.exit().remove()}var p,t=b._fullLayout,m=!1;if("object"==typeof c)p=c,c=p._id,m=!0;else if(p=q.getFromId(b,c),"redraw"===c&&t._paper.selectAll("g.subplot").each(function(b){b=t._plots[b];var c=b.x(),d=b.y();b.plot.attr("viewBox","0 0 "+c._length+" "+d._length);b.xaxislayer.selectAll("."+c._id+"tick").remove();b.yaxislayer.selectAll("."+d._id+"tick").remove();b.gridlayer.selectAll("path").remove();b.zerolinelayer.selectAll("path").remove()}),!c||"redraw"===c)return r.Lib.syncOrAsync(q.list(b,
"",!0).map(function(d){return function(){if(d._id){var e=q.doTicks(b,d._id);return"redraw"===c&&(d._r=d.range.slice()),e}}}));p.tickformat||(-1==="none e E power SI B".split(" ").indexOf(p.exponentformat)&&(p.exponentformat="e"),-1===["all","first","last","none"].indexOf(p.showexponent)&&(p.showexponent="all"));p.range=[+p.range[0],+p.range[1]];p.setScale();var u,v,w,x,z,A=c.charAt(0),B=q.counterLetter(c),C=q.calcTicks(p),E=function(b){return b.text+b.x+p.mirror},G=c+"tick",F=c+"grid",D=c+"zl",I=
(p.linewidth||1)/2,H=("outside"===p.ticks?p.ticklen:1)+(p.linewidth||0),Q=r.Drawing.crispRound(b,p.gridwidth,1),K=r.Drawing.crispRound(b,p.zerolinewidth,Q),L=r.Drawing.crispRound(b,p.tickwidth,1);if("x"===A)u=["bottom","top"],v=function(b){return"translate("+p.l2p(b.x)+",0)"},w="M0,",x="v";else{if("y"!==A)return void console.log("unrecognized doTicks axis",c);u=["left","right"];v=function(b){return"translate(0,"+p.l2p(b.x)+")"};w="M";x=",0h"}var O=p.side||u[0],T=[-1,1,O===u[1]?1:-1];"inside"!==p.ticks==
("x"===A)&&(T=T.map(function(b){return-b}));var R=C.filter(e);if(m)return f(p._axislayer,w+(p._pos+I*T[2])+x+T[2]*p.ticklen),h(p._axislayer,p._pos);m=q.getSubplots(b,p).map(function(b){var c=t._plots[b];if(t._hasCartesian){var d=c[A+"axislayer"],e=p._linepositions[b]||[],g=c[B](),q=g._id===p.anchor,r=[!1,!1,!1],m="";if("allticks"===p.mirror?r=[!0,!0,!1]:q&&("ticks"===p.mirror?r=[!0,!0,!1]:r[u.indexOf(O)]=!0),p.mirrors)for(z=0;2>z;z++)q=p.mirrors[g._id+u[z]],"ticks"!==q&&"labels"!==q||(r[z]=!0);return void 0!==
e[2]&&(r[2]=!0),r.forEach(function(b,c){var d=e[c],f=T[c];b&&k(d)&&(m+=w+(d+I*f)+x+f*p.ticklen)}),f(d,m),l(c,g,b),h(d,e[3])}}).filter(function(b){return b&&b.then});return m.length?Promise.all(m):0};q.swap=function(b,c){var d,e,f=[];for(d=0;d<c.length;d++){var h=[],g=b._fullData[c[d]].xaxis,k=b._fullData[c[d]].yaxis;if(g&&k){for(e=0;e<f.length;e++)-1===f[e].x.indexOf(g)&&-1===f[e].y.indexOf(k)||h.push(e);if(h.length){var l,p=f[h[0]];if(1<h.length)for(e=1;e<h.length;e++)l=f[h[e]],u(p.x,l.x),u(p.y,
l.y);u(p.x,[g]);u(p.y,[k])}else f.push({x:[g],y:[k]})}}for(d=0;d<f.length;d++){e=b;var h=f[d].x,g=f[d].y,t=k=void 0,p=[],m=[];l=e.layout;for(k=0;k<h.length;k++)p.push(q.getFromId(e,h[k]));for(k=0;k<g.length;k++)m.push(q.getFromId(e,g[k]));for(var v=Object.keys(p[0]),w="anchor domain overlaying position side tickangle".split(" "),x=["linear","log"],k=0;k<v.length;k++){var z=v[k],y=p[0][z],A=m[0][z],B=!0,C=!1,E=!1;if("_"!==z.charAt(0)&&"function"!=typeof y&&-1===w.indexOf(z)){for(t=1;t<p.length&&B;t++){var F=
p[t][z];"type"===z&&-1!==x.indexOf(y)&&-1!==x.indexOf(F)&&y!==F?C=!0:F!==y&&(B=!1)}for(t=1;t<m.length&&B;t++)y=m[t][z],"type"===z&&-1!==x.indexOf(A)&&-1!==x.indexOf(y)&&A!==y?E=!0:m[t][z]!==A&&(B=!1);if(B){C&&(l[p[0]._name].type="linear");E&&(l[m[0]._name].type="linear");t=l;A=p;B=m;C=void 0;E=r.Lib.nestedProperty;y=E(t[A[0]._name],z).get();F=E(t[B[0]._name],z).get();"title"===z&&("Click to enter X axis title"===y&&(y="Click to enter Y axis title"),"Click to enter Y axis title"===F&&(F="Click to enter X axis title"));
for(C=0;C<A.length;C++)E(t,A[C]._name+"."+z).set(F);for(C=0;C<B.length;C++)E(t,B[C]._name+"."+z).set(y)}}}for(k=0;k<e._fullLayout.annotations.length;k++)p=e._fullLayout.annotations[k],-1!==h.indexOf(p.xref)&&-1!==g.indexOf(p.yref)&&r.Lib.swapAttrs(l.annotations[k],["?"])}}},{"../../plotly":348,"./attributes":350,"./layout_attributes":353,d3:53,"fast-isnumeric":58}],352:[function(b,m,g){function h(b,c){for(var d=[],e=b.length;0<e;e--)d.push(c);return d}function c(b,c){for(var d=[],e=0;e<b.length;e++)d.push(b[e].p2c(c));
return d}function l(b,c){return function(d){var e=b(d);d=c(d);return Math.sqrt(e*e+d*d)}}function e(b,e,g){g||(g="xy");var k=b._fullLayout,l=[g].concat(k._plots[g].overlays.map(function(b){return b.id}));g=l.map(function(c){return q.Axes.getFromId(b,c,"x")});var r=l.map(function(c){return q.Axes.getFromId(b,c,"y")}),m=e.hovermode||k.hovermode;if(-1===["x","y","closest"].indexOf(m)||!b.calcdata||b.querySelector(".zoombox")||b._dragging)return x(b,e);var u,w,z,y,E,F,G,D,I,H,K,L=[],O=[];if(Array.isArray(e))for(m=
"array",z=0;z<e.length;z++)y=b.calcdata[e[z].curveNumber||0],"none"!==y[0].trace.hoverinfo&&O.push(y);else{for(z=0;z<b.calcdata.length;z++)y=b.calcdata[z],E=y[0].trace,"none"!==E.hoverinfo&&-1!==l.indexOf(E.xaxis+E.yaxis)&&O.push(y);var M;if(e.target&&"clientX"in e&&"clientY"in e){if(!1===C.triggerHandler(b,"plotly_beforehover",e))return;z=e.target.getBoundingClientRect();if(K=e.clientX-z.left,M=e.clientY-z.top,0>K||K>z.width||0>M||M>z.height)return x(b,e)}else K="xpx"in e?e.xpx:g[0]._length/2,M=
"ypx"in e?e.ypx:r[0]._length/2;if(u="xval"in e?h(l,e.xval):c(g,K),w="yval"in e?h(l,e.yval):c(r,M),!A(u[0])||!A(w[0]))return console.log("Plotly.Fx.hover failed",e,b),x(b,e)}M=1/0;for(z=0;z<O.length;z++)if(y=O[z],y&&y[0]&&y[0].trace&&!0===y[0].trace.visible){if(E=y[0].trace,F=l.indexOf(E.xaxis+E.yaxis),G=m,H={cd:y,trace:E,xa:g[F],ya:r[F],name:1<b.data.length||-1!==E.hoverinfo.indexOf("name")?E.name:void 0,index:!1,distance:Math.min(M,B.MAXDIST),color:q.Color.defaultLine,x0:void 0,x1:void 0,y0:void 0,
y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},K=L.length,"array"===G){var P=e[z];"pointNumber"in P?(H.index=P.pointNumber,G="closest"):(G="","xval"in P&&(D=P.xval,G="x"),"yval"in P&&(I=P.yval,G=G?"closest":"y"))}else D=u[F],I=w[F];if(E._module&&E._module.hoverPoints){if(H=E._module.hoverPoints(H,D,I,G))for(var Da=0;Da<H.length;Da++)P=H[Da],A(P.x0)&&A(P.y0)&&L.push(f(P,m))}else console.log("unrecognized trace type in hover",E);"closest"===m&&L.length>K&&(L.splice(0,K),M=
L[0].distance)}if(0===L.length)return x(b,e);y="y"===m&&1<O.length;L.sort(function(b,c){return b.distance-c.distance});k={hovermode:m,rotateLabels:y,bgColor:q.Color.combine(k.plot_bgcolor,k.paper_bgcolor),container:k._hoverlayer,outerContainer:k._paperdiv};k=v(L,k);d(L,y?g[0]:r[0]);p(k,y);k=b._hoverdata;m=[];for(z=0;z<L.length;z++)y=L[z],E={data:y.trace._input,fullData:y.trace,curveNumber:y.trace.index,pointNumber:y.index,x:y.xVal,y:y.yVal,xaxis:y.xa,yaxis:y.ya},void 0!==y.zLabelVal&&(E.z=y.zLabelVal),
m.push(E);b._hoverdata=m;t(b,e,k)&&(k&&b.emit("plotly_unhover",{points:k}),b.emit("plotly_hover",{points:b._hoverdata,xaxes:g,yaxes:r,xvals:u,yvals:w}))}function f(b,c){b.posref="y"===c?(b.x0+b.x1)/2:(b.y0+b.y1)/2;b.x0=q.Lib.constrain(b.x0,0,b.xa._length);b.x1=q.Lib.constrain(b.x1,0,b.xa._length);b.y0=q.Lib.constrain(b.y0,0,b.ya._length);b.y1=q.Lib.constrain(b.y1,0,b.ya._length);var d;if(void 0!==b.xLabelVal){d="log"===b.xa.type&&0>=b.xLabelVal;var e=q.Axes.tickText(b.xa,b.xa.c2l(d?-b.xLabelVal:b.xLabelVal),
"hover");d?0===b.xLabelVal?b.xLabel="0":b.xLabel="-"+e.text:b.xLabel=e.text;b.xVal=b.xa.c2d(b.xLabelVal)}void 0!==b.yLabelVal&&(d="log"===b.ya.type&&0>=b.yLabelVal,e=q.Axes.tickText(b.ya,b.ya.c2l(d?-b.yLabelVal:b.yLabelVal),"hover"),d?0===b.yLabelVal?b.yLabel="0":b.yLabel="-"+e.text:b.yLabel=e.text,b.yVal=b.ya.c2d(b.yLabelVal));if(void 0!==b.zLabelVal&&(b.zLabel=String(b.zLabelVal)),void 0!==b.xerr)d=q.Axes.tickText(b.xa,b.xa.c2l(b.xerr),"hover").text,void 0!==b.xerrneg?b.xLabel+=" +"+d+" / -"+q.Axes.tickText(b.xa,
b.xa.c2l(b.xerrneg),"hover").text:b.xLabel+=" &plusmn; "+d,"x"===c&&(b.distance+=1);void 0!==b.yerr&&(d=q.Axes.tickText(b.ya,b.ya.c2l(b.yerr),"hover").text,void 0!==b.yerrneg?b.yLabel+=" +"+d+" / -"+q.Axes.tickText(b.ya,b.ya.c2l(b.yerrneg),"hover").text:b.yLabel+=" &plusmn; "+d,"y"===c&&(b.distance+=1));d=b.trace.hoverinfo;return"all"!==d&&(d=d.split("+"),-1===d.indexOf("x")&&(b.xLabel=void 0),-1===d.indexOf("y")&&(b.yLabel=void 0),-1===d.indexOf("z")&&(b.zLabel=void 0),-1===d.indexOf("text")&&(b.text=
void 0),-1===d.indexOf("name")&&(b.name=void 0)),b}function v(b,c){var d,e,f=c.hovermode,h=c.rotateLabels,g=c.bgColor,k=c.container;d=c.outerContainer;var l=b[0],p=l.xa,r=l.ya,t="y"===f?"yLabel":"xLabel",m=l[t],u=(String(m)||"").split(" ")[0];d=d.node().getBoundingClientRect();var v=d.top,w=d.width,x=d.height,y=l.distance<=B.MAXDIST&&("x"===f||"y"===f);for(d=0;d<b.length;d++)if(e=b[d].trace.hoverinfo,e=e.split("+"),-1===e.indexOf("all")&&-1===e.indexOf(f)){y=!1;break}d=k.selectAll("g.axistext").data(y?
[0]:[]);d.enter().append("g").classed("axistext",!0);d.exit().remove();d.each(function(){var c=z.select(this),d=c.selectAll("path").data([0]),e=c.selectAll("text").data([0]);d.enter().append("path").style({fill:q.Color.defaultLine,"stroke-width":"1px",stroke:q.Color.background});e.enter().append("text").call(q.Drawing.font,L,O,q.Color.background).attr("data-notex",1);e.text(m).call(q.util.convertToTspans).call(q.Drawing.setPosition,0,0).selectAll("tspan.line").call(q.Drawing.setPosition,0,0);c.attr("transform",
"");var h=e.node().getBoundingClientRect();"x"===f?(e.attr("text-anchor","middle").call(q.Drawing.setPosition,0,"top"===p.side?v-h.bottom-H-K:v-h.top+H+K).selectAll("tspan.line").attr({x:e.attr("x"),y:e.attr("y")}),e="top"===p.side?"-":"",d.attr("d","M0,0L"+H+","+e+H+"H"+(K+h.width/2)+"v"+e+(2*K+h.height)+"H-"+(K+h.width/2)+"V"+e+H+"H-"+H+"Z"),c.attr("transform","translate("+(p._offset+(l.x0+l.x1)/2)+","+(r._offset+("top"===p.side?0:r._length))+")")):(e.attr("text-anchor","right"===r.side?"start":
"end").call(q.Drawing.setPosition,("right"===r.side?1:-1)*(K+H),v-h.top-h.height/2).selectAll("tspan.line").attr({x:e.attr("x"),y:e.attr("y")}),e="right"===r.side?"":"-",d.attr("d","M0,0L"+e+H+","+H+"V"+(K+h.height/2)+"h"+e+(2*K+h.width)+"V-"+(K+h.height/2)+"H"+e+H+"V-"+H+"Z"),c.attr("transform","translate("+(p._offset+("right"===r.side?p._length:0))+","+(r._offset+(l.y0+l.y1)/2)+")"));b=b.filter(function(b){return void 0!==b.zLabelVal||(b[t]||"").split(" ")[0]===u})});k=k.selectAll("g.hovertext").data(b,
function(b){return[b.trace.index,b.index,b.x0,b.y0,b.name,b.attr||""].join()});return k.enter().append("g").classed("hovertext",!0).each(function(){var b=z.select(this);b.append("rect").call(q.Color.fill,q.Color.addOpacity(g,.8));b.append("text").classed("name",!0).call(q.Drawing.font,L,O);b.append("path").style("stroke-width","1px");b.append("text").classed("nums",!0).call(q.Drawing.font,L,O)}),k.exit().remove(),k.each(function(b){var c=z.select(this).attr("transform",""),d="",e="",k=q.Color.opacity(b.color)?
b.color:q.Color.defaultLine,l=q.Color.combine(k,g),t=128<E(l).getBrightness()?"#000":q.Color.background;b.name&&void 0===b.zLabelVal&&(k=document.createElement("p"),k.innerHTML=b.name,d=k.textContent||"",15<d.length&&(d=d.substr(0,12)+"..."));void 0!==b.zLabel?(void 0!==b.xLabel&&(e+="x: "+b.xLabel+"<br>"),void 0!==b.yLabel&&(e+="y: "+b.yLabel+"<br>"),e+=(e?"z: ":"")+b.zLabel):y&&b[f+"Label"]===m?e=b[("x"===f?"y":"x")+"Label"]||"":void 0===b.xLabel?void 0!==b.yLabel&&(e=b.yLabel):e=void 0===b.yLabel?
b.xLabel:"("+b.xLabel+", "+b.yLabel+")";b.text&&(e+=(e?"<br>":"")+b.text);""===e&&(""===d&&c.remove(),e=d);k=c.select("text.nums").style("fill",t).call(q.Drawing.setPosition,0,0).text(e).attr("data-notex",1).call(q.util.convertToTspans);k.selectAll("tspan.line").call(q.Drawing.setPosition,0,0);var u=c.select("text.name"),A=0;d&&d!==e?(u.style("fill",l).text(d).call(q.Drawing.setPosition,0,0).attr("data-notex",1).call(q.util.convertToTspans),u.selectAll("tspan.line").call(q.Drawing.setPosition,0,0),
A=u.node().getBoundingClientRect().width+2*K):(u.remove(),c.select("rect").remove());c.select("path").style({fill:l,stroke:t});var B,C,e=k.node().getBoundingClientRect(),d=p._offset+(b.x0+b.x1)/2,l=r._offset+(b.y0+b.y1)/2,t=Math.abs(b.x1-b.x0),F=Math.abs(b.y1-b.y0),D=e.width+H+K+A;b.ty0=v-e.top;b.bx=e.width+2*K;b.by=e.height+2*K;b.anchor="start";b.txwidth=e.width;b.tx2width=A;b.offset=0;h?(b.pos=d,B=x>=l+F/2+D,C=0<=l-F/2-D,"top"!==b.idealAlign&&B||!C?B?(l+=F/2,b.anchor="start"):b.anchor="middle":
(l-=F/2,b.anchor="end")):(b.pos=l,B=w>=d+t/2+D,C=0<=d-t/2-D,"left"!==b.idealAlign&&B||!C?B?(d+=t/2,b.anchor="start"):b.anchor="middle":(d-=t/2,b.anchor="end"));k.attr("text-anchor",b.anchor);A&&u.attr("text-anchor",b.anchor);c.attr("transform","translate("+d+","+l+")"+(h?"rotate("+G+")":""))}),k}function d(b,c){function d(b){var c=b[0],q=b[b.length-1];if(f=r-c.pos-c.dp+c.size,h=q.pos+q.dp+q.size-t,.01<f){for(k=b.length-1;0<=k;k--)b[k].dp+=f;e=!1}if(!(.01>h)){if(-.01>f){for(k=b.length-1;0<=k;k--)b[k].dp-=
h;e=!1}if(e){for(g=c=0;g<b.length;g++)l=b[g],l.pos+l.dp+l.size>t&&c++;for(g=b.length-1;0<=g&&!(0>=c);g--)l=b[g],l.pos>t-1&&(l.del=!0,c--);for(g=0;g<b.length&&!(0>=c);g++)if(l=b[g],l.pos<r+1)for(l.del=!0,c--,h=2*l.size,k=b.length-1;0<=k;k--)b[k].dp-=h;for(g=b.length-1;0<=g&&!(0>=c);g--)l=b[g],l.pos+l.dp+l.size>t&&(l.del=!0,c--)}}}for(var e,f,h,g,k,l,q,p=0,r=c._offset,t=c._offset+c._length,m=b.map(function(b,d){return[{i:d,dp:0,pos:b.pos,posref:b.posref,size:b.by*("x"===c._id.charAt(0)?F:1)/2}]}).sort(function(b,
c){return b[0].posref-c[0].posref});!e&&p<=b.length;){p++;e=!0;for(g=0;g<m.length-1;){var u=m[g];q=m[g+1];var v=u[u.length-1],w=q[0];if(f=v.pos+v.dp+v.size-w.pos-w.dp+w.size,.01<f){for(k=q.length-1;0<=k;k--)q[k].dp+=f;u.push.apply(u,q);m.splice(g+1,1);q=0;for(k=u.length-1;0<=k;k--)q+=u[k].dp;h=q/u.length;for(k=u.length-1;0<=k;k--)u[k].dp-=h;e=!1}else g++}m.forEach(d)}for(g=m.length-1;0<=g;g--)for(p=m[g],k=p.length-1;0<=k;k--)u=p[k],q=b[u.i],q.offset=u.dp,q.del=u.del}function p(b,c){b.each(function(b){var d=
z.select(this);if(b.del)return void d.remove();var e="end"===b.anchor?-1:1,f=d.select("text.nums"),h={start:1,end:-1,middle:0}[b.anchor],g=h*(H+K),k=g+h*(b.txwidth+K),l=0,p=b.offset;"middle"===b.anchor&&(g-=b.tx2width/2,k-=b.tx2width/2);c&&(p*=-D,l=b.offset*I);d.select("path").attr("d","middle"===b.anchor?"M-"+b.bx/2+",-"+b.by/2+"h"+b.bx+"v"+b.by+"h-"+b.bx+"Z":"M0,0L"+(e*H+l)+","+(H+p)+"v"+(b.by/2-H)+"h"+e*b.bx+"v-"+b.by+"H"+(e*H+l)+"V"+(p-H)+"Z");f.call(q.Drawing.setPosition,g+l,p+b.ty0-b.by/2+K).selectAll("tspan.line").attr({x:f.attr("x"),
y:f.attr("y")});b.tx2width&&(d.select("text.name, text.name tspan.line").call(q.Drawing.setPosition,k+h*K+l,p+b.ty0-b.by/2+K),d.select("rect").call(q.Drawing.setRect,k+(h-1)*b.tx2width/2+l,p-b.by/2-1,b.tx2width,b.by+2))})}function t(b,c,d){if(!c.target)return!1;if(!d||d.length!==b._hoverdata.length)return!0;for(c=d.length-1;0<=c;c--){var e=d[c],f=b._hoverdata[c];if(e.curveNumber!==f.curveNumber||String(e.pointNumber)!==String(f.pointNumber))return!0}return!1}function x(b,c){var d=b._fullLayout;c||
(c={});c.target&&!1===C.triggerHandler(b,"plotly_beforehover",c)||(d._hoverlayer.selectAll("g").remove(),c.target&&b._hoverdata&&b.emit("plotly_unhover",{points:b._hoverdata}),b._hoverdata=void 0)}function w(b,c){return b?"nsew"===b?"pan"===c?"move":"crosshair":b.toLowerCase()+"-resize":"pointer"}function u(b,c,d,e,f,h,g,l){var p,t,m,u,v,x;function z(b,c){for(ja=0;ja<b.length;ja++)if(!b[ja].fixedrange)return c;return""}function A(b){b[0]=Number(b[0]);b[1]=Number(b[1])}function C(b,c){var d=Math.max(0,
Math.min(za,b+qa)),e=Math.max(0,Math.min(Ta,c+Ia)),f=Math.abs(d-qa),h=Math.abs(e-Ia),g=Math.floor(Math.min(h,f,B.MINZOOM)/2);p=Math.min(qa,d);t=Math.max(qa,d);m=Math.min(Ia,e);u=Math.max(Ia,e);!Ca||h<Math.min(Math.max(.6*f,B.MINDRAG),B.MINZOOM)?f<B.MINDRAG?(ab="",t=p,m=u,hb.attr("d","M0,0Z")):(m=0,u=Ta,ab="x",hb.attr("d","M"+(p-.5)+","+(Ia-B.MINZOOM-.5)+"h-3v"+(2*B.MINZOOM+1)+"h3ZM"+(t+.5)+","+(Ia-B.MINZOOM-.5)+"h3v"+(2*B.MINZOOM+1)+"h-3Z")):!va||f<Math.min(.6*h,B.MINZOOM)?(p=0,t=za,ab="y",hb.attr("d",
"M"+(qa-B.MINZOOM-.5)+","+(m-.5)+"v-3h"+(2*B.MINZOOM+1)+"v3ZM"+(qa-B.MINZOOM-.5)+","+(u+.5)+"v3h"+(2*B.MINZOOM+1)+"v-3Z")):(ab="xy",hb.attr("d","M"+(p-3.5)+","+(m-.5+g)+"h3v"+-g+"h"+g+"v-3h-"+(g+3)+"ZM"+(t+3.5)+","+(m-.5+g)+"h-3v"+-g+"h"+-g+"v-3h"+(g+3)+"ZM"+(t+3.5)+","+(u+.5-g)+"h-3v"+g+"h"+-g+"v3h"+(g+3)+"ZM"+(p-3.5)+","+(u+.5-g)+"h3v"+g+"h"+g+"v3h-"+(g+3)+"Z"));v=t-p;x=u-m;ob.attr("d",vb+"M"+p+","+m+"v"+x+"h"+v+"v-"+x+"h-"+v+"Z");Pa||(ob.transition().style("fill",.2<fb?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),
hb.transition().style("opacity",1).duration(200),Pa=!0)}function F(b,c,d){var e,f,h;for(e=0;e<b.length;e++)f=b[e],f.fixedrange||(h=f.range,f.range=[h[0]+(h[1]-h[0])*c,h[0]+(h[1]-h[0])*d])}function G(c,d){return Math.min(x,v)<2*B.MINDRAG?(2===d?L():y(b),k(b)):(("xy"===ab||"x"===ab)&&F(Oa,p/za,t/za),("xy"===ab||"y"===ab)&&F(Fa,(Ta-u)/Ta,(Ta-m)/Ta),k(b),O(ab),void(P&&b.data&&b._context.showTips&&(q.Lib.notifier("Double-click to<br>zoom back out","long"),P=!1)))}function D(c,d){var e=1===(g+l).length;
if(c)O();else if(2!==d||e)if(1===d&&e){var f=g?Fa[0]:Oa[0],e="s"===g||"w"===l?0:1,h=f._name+".range["+e+"]",e=r(f,e),k="left",p="middle";f.fixedrange||(g?(p="n"===g?"top":"bottom","right"===f.side&&(k="right")):"e"===l&&(k="right"),Ea.call(q.util.makeEditable,null,{immediate:!0,background:Ma.paper_bgcolor,text:String(e),fill:f.tickfont?f.tickfont.color:"#444",horizontalAlign:k,verticalAlign:p}).on("edit",function(c){c="category"===f.type?f.c2l(c):f.d2l(c);void 0!==c&&q.relayout(b,h,c)}))}else y(b);
else L()}function I(c){function d(b,c,e){if(!b.fixedrange){A(b.range);var f=b.range;c=f[0]+(f[1]-f[0])*c;b.range=[c+(f[0]-c)*e,c+(f[1]-c)*e]}}if(b._context.scrollZoom||Ma._enablescrollzoom){var e=b.querySelector(".plotly");if(!(10<e.scrollHeight-e.clientHeight||10<e.scrollWidth-e.clientWidth)){clearTimeout(ib);e=-c.deltaY;if(isFinite(e)||(e=c.wheelDelta/10),!isFinite(e))return void console.log("did not find wheel motion attributes",c);var f,e=Math.exp(-Math.min(Math.max(e,-20),20)/100);f=wb.draglayer.select(".nsewdrag").node().getBoundingClientRect();
var h=(c.clientX-f.left)/f.width,k=Va[0]+Va[2]*h,p=(f.bottom-c.clientY)/f.height,r=Va[1]+Va[3]*(1-p);if(l){for(f=0;f<Oa.length;f++)d(Oa[f],h,e);Va[2]*=e;Va[0]=k-Va[2]*h}if(g){for(f=0;f<Fa.length;f++)d(Fa[f],p,e);Va[3]*=e;Va[1]=r-Va[3]*(1-p)}return M(Va),K(g,l),ib=setTimeout(function(){Va=[0,0,za,Ta];O()},Wa),q.Lib.pauseEvent(c)}}}function H(b,c){function d(b,c){for(var e=0;e<b.length;e++){var f=b[e];f.fixedrange||(f.range=[f._r[0]-c/f._m,f._r[1]-c/f._m])}}function e(b,c,d){for(var f=1-c,h=0,g=0;g<
b.length;g++){var k=b[g];if(!k.fixedrange){var h=g,l=d/k._length;k.range[c]=k._r[f]+(k._r[c]-k._r[f])/(1-(0<=l?Math.min(l,.9):1/(1/Math.max(l,-.3)+3.222)))}}return b[h]._length*(b[h]._r[c]-b[h].range[c])/(b[h]._r[c]-b[h]._r[f])}return"ew"===va||"ns"===Ca?(va&&d(Oa,b),Ca&&d(Fa,c),M([va?-b:0,Ca?-c:0,za,Ta]),void K(Ca,va)):("w"===va?b=e(Oa,0,b):"e"===va?b=e(Oa,1,-b):va||(b=0),"n"===Ca?c=e(Fa,1,c):"s"===Ca?c=e(Fa,0,-c):Ca||(c=0),M(["w"===va?b:0,"n"===Ca?c:0,za-b,Ta-c]),void K(Ca,va))}function K(c,d){function e(b){for(h=
0;h<b.length;h++)b[h].fixedrange||g.push(b[h]._id)}function f(e,k){var l;for(h=0;h<e.length;h++)l=e[h],(d&&-1!==g.indexOf(l.xref)||c&&-1!==g.indexOf(l.yref))&&k.draw(b,h)}var h,g=[];d&&e(Oa);c&&e(Fa);for(h=0;h<g.length;h++)q.Axes.doTicks(b,g[h],!0);f(Ma.annotations||[],q.Annotations);f(Ma.shapes||[],q.Shapes)}function L(){var c,d;c=b._context.doubleClick;var e=(va?Oa:[]).concat(Ca?Fa:[]),f={};if("autosize"===c)for(d=0;d<e.length;d++)c=e[d],c.fixedrange||(f[c._name+".autorange"]=!0);else if("reset"===
c)for(d=0;d<e.length;d++)c=e[d],f[c._name+".range"]=c._rangeInitial.slice();else if("reset+autosize"===c)for(d=0;d<e.length;d++)c=e[d],c.fixedrange||(void 0===c._rangeInitial||c.range[0]===c._rangeInitial[0]&&c.range[1]===c._rangeInitial[1]?f[c._name+".autorange"]=!0:f[c._name+".range"]=c._rangeInitial.slice());q.relayout(b,f)}function O(c){for(var d={},e=0;e<eb.length;e++){var f=eb[e];c&&-1===c.indexOf(f._id.charAt(0))||(f._r[0]!==f.range[0]&&(d[f._name+".range[0]"]=f.range[0]),f._r[1]!==f.range[1]&&
(d[f._name+".range[1]"]=f.range[1]),f.range=f._r.slice())}M([0,0,za,Ta]);q.relayout(b,d)}function M(b){var c,d,e,f,h,k,q=Ma._plots,p=Object.keys(q);for(c=0;c<p.length;c++)if(d=q[p[c]],e=d.x(),f=d.y(),h=l&&-1!==Oa.indexOf(e)&&!e.fixedrange,k=g&&-1!==Fa.indexOf(f)&&!f.fixedrange,h||k){var r=[0,0,e._length,f._length];h&&(r[0]=b[0],r[2]=b[2]);k&&(r[1]=b[1],r[3]=b[3]);d.plot.attr("viewBox",r.join(" "))}}var ja,oa,Ya,Ma=b._fullLayout,ua=[c].concat(g&&l?c.overlays:[]),Oa=[c.x()],Fa=[c.y()],za=Oa[0]._length,
Ta=Fa[0]._length;for(ja=1;ja<ua.length;ja++)oa=ua[ja].x(),Ya=ua[ja].y(),-1===Oa.indexOf(oa)&&Oa.push(oa),-1===Fa.indexOf(Ya)&&Fa.push(Ya);var eb=Oa.concat(Fa),va=z(Oa,l),Ca=z(Fa,g);oa=w(Ca+va,Ma.dragmode);Ya=g+l+"drag";var Ea=c.draglayer.selectAll("."+Ya).data([0]);Ea.enter().append("rect").classed("drag",!0).classed(Ya,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",c.id);Ea.call(q.Drawing.setRect,d,e,f,h).call(B.setCursor,oa);var Na=Ea.node();if(!Ca&&!va)return Na.onmousedown=
null,Na.style.pointerEvents="nsew"===g+l?"all":"none",Na;var Ha={element:Na,prepFn:function(d,e,f){if("nsew"===g+l&&("zoom"===Ma.dragmode?!d.shiftKey:d.shiftKey))for(Ha.moveFn=C,Ha.doneFn=G,d=Na.getBoundingClientRect(),qa=e-d.left,Ia=f-d.top,t=p=qa,v=0,u=m=Ia,x=0,fb=b._hmpixcount?b._hmlumcount/b._hmpixcount:E(b._fullLayout.plot_bgcolor).getLuminance(),vb=vb="M0,0H"+za+"V"+Ta+"H0V0",Pa=!1,ab="xy",ob=c.plot.append("path").attr("class","zoombox").style({fill:.2<fb?"rgba(0,0,0,0)":"rgba(255,255,255,0)",
"stroke-width":0}).attr("d",vb+"Z"),hb=c.plot.append("path").attr("class","zoombox-corners").style({fill:q.Color.background,stroke:q.Color.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ja=0;ja<eb.length;ja++)A(eb[ja].range);else Ha.moveFn=H,Ha.doneFn=D}};B.dragElement(Ha);var qa,Ia,fb,vb,Pa,ab,ob,hb,Va=[0,0,za,Ta],ib=null,Wa=300,wb=c.mainplot?Ma._plots[c.mainplot]:c;return 1!==g.length*l.length&&(void 0!==Na.onwheel?Na.onwheel=I:void 0!==Na.onmousewheel&&(Na.onmousewheel=I)),Na}function r(b,
c){var d,e=b.range[c],f=Math.abs(e-b.range[1-c]);return"date"===b.type?q.Lib.ms2DateTime(e,f):"log"===b.type?(d=Math.ceil(Math.max(0,-Math.log(f)/Math.LN10))+3,z.format("."+d+"g")(Math.pow(10,e))):(d=Math.floor(Math.log(Math.abs(e))/Math.LN10)-Math.floor(Math.log(f)/Math.LN10)+4,z.format("."+String(d)+"g")(e))}function y(b){b._dragging=!0;var c=b._replotPending;b._replotPending=!1;setTimeout(function(){b._replotPending=c;b._dragging=!1;b._replotPending&&q.plot(b)},B.DBLCLICKDELAY)}function k(b){z.select(b).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}
var q=b("../../plotly"),z=b("d3"),E=b("tinycolor2"),A=b("fast-isnumeric"),C=b("../../lib/events"),B=m.exports={};B.layoutAttributes={dragmode:{valType:"enumerated",values:["zoom","pan","orbit","turntable"]},hovermode:{valType:"enumerated",values:["x","y","closest",!1]}};B.supplyLayoutDefaults=function(b,c,d){var e,f;q.Lib.coerce(b,c,B.layoutAttributes,"dragmode",c._hasGL3D?"turntable":"zoom");c._hasCartesian?(e=c._isHoriz=B.isHoriz(d),f=e?"y":"x"):f="closest";q.Lib.coerce(b,c,B.layoutAttributes,"hovermode",
f)};B.isHoriz=function(b){var c,d,e=!0;for(c=0;c<b.length;c++)if(d=b[c],"h"!==d.orientation){e=!1;break}return e};B.DBLCLICKDELAY=600;B.MINDRAG=8;B.MINZOOM=20;B.init=function(b){var c=b._fullLayout;if(!(c._hasGL3D||c._hasGeo||b._context.staticPlot)){Object.keys(c._plots||{}).sort(function(b,d){if((c._plots[b].mainplot&&!0)===(c._plots[d].mainplot&&!0)){var e=b.split("y"),f=d.split("y");return e[0]===f[0]?Number(e[1]||1)-Number(f[1]||1):Number(e[0]||1)-Number(f[0]||1)}return c._plots[b].mainplot?1:
-1}).forEach(function(d){var e=c._plots[d];if(c._hasCartesian){var f=e.x(),h=e.y(),g=(f._linepositions[d]||[])[3],k=(h._linepositions[d]||[])[3];if(A(g)&&"top"===f.side&&(g-=20),A(k)&&"right"!==h.side&&(k-=20),!e.mainplot){var l=u(b,e,0,0,f._length,h._length,"ns","ew");l.onmousemove=function(e){B.hover(b,e,d);c._lasthover=l;c._hoversubplot=d};l.onmouseout=function(c){b._dragging||B.unhover(b,c)};l.onclick=function(c){B.click(b,c)};u(b,e,-20,-20,20,20,"n","w");u(b,e,f._length,-20,20,20,"n","e");u(b,
e,-20,h._length,20,20,"s","w");u(b,e,f._length,h._length,20,20,"s","e")}A(g)&&("free"===f.anchor&&(g-=c._size.h*(1-h.domain[1])),u(b,e,.1*f._length,g,.8*f._length,20,"","ew"),u(b,e,0,g,.1*f._length,20,"","w"),u(b,e,.9*f._length,g,.1*f._length,20,"","e"));A(k)&&("free"===h.anchor&&(k-=c._size.w*f.domain[0]),u(b,e,k,.1*h._length,20,.8*h._length,"ns",""),u(b,e,k,.9*h._length,20,.1*h._length,"s",""),u(b,e,k,0,20,.1*h._length,"n",""))}});var d=c._hoverlayer.node();d.onmousemove=function(d){d.target=c._lasthover;
B.hover(b,d,c._hoversubplot)};d.onclick=function(d){d.target=c._lasthover;B.click(b,d)};d.onmousedown=function(b){c._lasthover.onmousedown(b)}}};var G=60;b=Math.PI*G/180;var F=1/Math.sin(b),I=Math.cos(b),D=Math.sin(b),H=6,K=3,O=13,L="Arial, sans-serif";B.MAXDIST=20;B.hover=function(b,c,d){return"string"==typeof b&&(b=document.getElementById(b)),void 0===b._lastHoverTime&&(b._lastHoverTime=0),void 0!==b._hoverTimer&&(clearTimeout(b._hoverTimer),b._hoverTimer=void 0),Date.now()>b._lastHoverTime+100?
(e(b,c,d),void(b._lastHoverTime=Date.now())):void(b._hoverTimer=setTimeout(function(){e(b,c,d);b._lastHoverTime=Date.now();b._hoverTimer=void 0},100))};B.unhover=function(b,c,d){"string"==typeof b&&(b=document.getElementById(b));b._hoverTimer&&(clearTimeout(b._hoverTimer),b._hoverTimer=void 0);x(b,c,d)};B.getDistanceFunction=function(b,c,d,e){return"closest"===b?e||l(c,d):"x"===b?c:d};B.getClosest=function(b,c,d){if(!1!==d.index)0<=d.index&&d.index<b.length?d.distance=0:d.index=!1;else for(var e=
0;e<b.length;e++){var f=c(b[e]);f<d.distance&&(d.index=e,d.distance=f)}return d};B.loneHover=function(b,c){var d={color:b.color||q.Color.defaultLine,x0:b.x0||b.x||0,x1:b.x1||b.x||0,y0:b.y0||b.y||0,y1:b.y1||b.y||0,xLabel:b.xLabel,yLabel:b.yLabel,zLabel:b.zLabel,text:b.text,name:b.name,idealAlign:b.idealAlign,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},e=z.select(c.container),f=c.outerContainer?z.select(c.outerContainer):e,e={hovermode:"closest",rotateLabels:!1,bgColor:c.bgColor||
q.Color.background,container:e,outerContainer:f},d=v([d],e);return p(d,e.rotateLabels),d.node()};B.loneUnhover=function(b){(b instanceof z.selection?b:z.select(b)).selectAll("g.hovertext").remove()};B.click=function(b,c){b._hoverdata&&c&&c.target&&(b.emit("plotly_click",{points:b._hoverdata}),c.stopImmediatePropagation&&c.stopImmediatePropagation())};var P=!0;B.dragAlign=function(b,c,d,e,f){b=(b-d)/(e-d);c=b+c/(e-d);d=(b+c)/2;return"left"===f||"bottom"===f?b:"center"===f||"middle"===f?d:"right"===
f||"top"===f?c:2/3-d>b?b:c>4/3-d?c:d};var M=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];B.dragCursors=function(b,c,d,e){return b="left"===d?0:"center"===d?1:"right"===d?2:q.Lib.constrain(Math.floor(3*b),0,2),c="bottom"===e?0:"middle"===e?1:"top"===e?2:q.Lib.constrain(Math.floor(3*c),0,2),M[c][b]};B.dragElement=function(b){function c(d){var h=d.clientX-e,g=d.clientY-f;return Math.abs(h)<B.MINDRAG&&(h=0),Math.abs(g)<B.MINDRAG&&(g=0),(h||
g)&&(l._dragged=!0),b.moveFn&&b.moveFn(h,g,l._dragged),q.Lib.pauseEvent(d)}function d(c){if(g.onmousemove=null,g.onmouseup=null,g.onmouseout=null,q.Lib.removeElement(g),!l._dragging)return void(l._dragged=!1);if(l._dragging=!1,(new Date).getTime()-l._mouseDownTime>B.DBLCLICKDELAY&&(p=Math.max(p-1,1)),b.doneFn&&b.doneFn(l._dragged,p),!l._dragged){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0);k.dispatchEvent(e)}e=l;e._dragging=!1;e._replotPending&&q.plot(e);return l._dragged=
!1,q.Lib.pauseEvent(c)}var e,f,h,g,k,l=q.Lib.getPlotDiv(b.element)||{},p=1;l._mouseDownTime||(l._mouseDownTime=0);b.element.onmousedown=function(r){var t=document.querySelector(".plugin-editable");t&&z.select(t).on("blur").call(t);l._dragged=!1;l._dragging=!0;e=r.clientX;f=r.clientY;k=r.target;h=(new Date).getTime();h-l._mouseDownTime<B.DBLCLICKDELAY?p+=1:(p=1,l._mouseDownTime=h);b.prepFn&&b.prepFn(r,e,f);t=document.createElement("div");t.className="dragcover";var m=t.style;return g=(m.position="fixed",
m.left=0,m.right=0,m.top=0,m.bottom=0,m.zIndex=999999999,m.background="none",document.body.appendChild(t),t),g.onmousemove=c,g.onmouseup=d,g.onmouseout=d,q.Lib.pauseEvent(r)};b.element.style.pointerEvents="all"};B.setCursor=function(b,c){(b.attr("class")||"").split(" ").forEach(function(c){0===c.indexOf("cursor-")&&b.classed(c,!1)});c&&b.classed("cursor-"+c,!0)};B.inbox=function(b,c){return 0>b*c||0===b?B.MAXDIST*(.6-.3/Math.max(3,Math.abs(b-c))):1/0}},{"../../lib/events":327,"../../plotly":348,d3:53,
"fast-isnumeric":58,tinycolor2:213}],353:[function(b,m,g){g=b("../../plotly");var h=b("../font_attributes"),c=b("../../components/color/attributes");b=b("../../lib/extend").extendFlat;m.exports={title:{valType:"string"},titlefont:b({},h,{}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal"},range:{valType:"info_array",
items:[{valType:"number"},{valType:"number"}]},fixedrange:{valType:"boolean",dflt:!1},tickmode:{valType:"enumerated",values:["auto","linear","array"]},nticks:{valType:"integer",min:0,dflt:0},tick0:{valType:"number",dflt:0},dtick:{valType:"any",dflt:1},tickvals:{valType:"data_array"},ticktext:{valType:"data_array"},ticks:{valType:"enumerated",values:["outside","inside",""]},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1},ticklen:{valType:"number",min:0,dflt:5},tickwidth:{valType:"number",
min:0,dflt:1},tickcolor:{valType:"color",dflt:c.defaultLine},showticklabels:{valType:"boolean",dflt:!0},tickfont:b({},h,{}),tickangle:{valType:"angle",dflt:"auto"},tickprefix:{valType:"string",dflt:""},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},ticksuffix:{valType:"string",dflt:""},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},exponentformat:{valType:"enumerated",
values:"none e E power SI B".split(" "),dflt:"B"},tickformat:{valType:"string",dflt:""},hoverformat:{valType:"string",dflt:""},showline:{valType:"boolean",dflt:!1},linecolor:{valType:"color",dflt:c.defaultLine},linewidth:{valType:"number",min:0,dflt:1},showgrid:{valType:"boolean"},gridcolor:{valType:"color",dflt:c.lightLine},gridwidth:{valType:"number",min:0,dflt:1},zeroline:{valType:"boolean"},zerolinecolor:{valType:"color",dflt:c.defaultLine},zerolinewidth:{valType:"number",dflt:1},anchor:{valType:"enumerated",
values:["free",g.Plots.subplotsRegistry.cartesian.idRegex.x.toString(),g.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},side:{valType:"enumerated",values:["top","bottom","left","right"]},overlaying:{valType:"enumerated",values:["free",g.Plots.subplotsRegistry.cartesian.idRegex.x.toString(),g.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},position:{valType:"number",min:0,
max:1,dflt:0},_deprecated:{autotick:{valType:"boolean"}}}},{"../../components/color/attributes":283,"../../lib/extend":328,"../../plotly":348,"../font_attributes":354}],354:[function(b,m,g){m.exports={family:{valType:"string",noBlank:!0,strict:!0},size:{valType:"number",min:1},color:{valType:"color"}}},{}],355:[function(b,m,g){function h(b,c){this.id=b.id;this.container=b.container;this.topojsonURL=b.topojsonURL;f();this.showHover="closest"===c.hovermode;this.zoomReset=this.zoom=this.path=this.setScale=
this.clipAngle=this.projection=this.projectionType=this.topojson=this.topojsonName=this.hoverContainer=null;this.makeFramework()}function c(b){b={type:"linear",showexponent:"all",exponentformat:l.Axes.layoutAttributes.exponentformat.dflt,_td:{_fullLayout:b}};return l.Axes.setConvert(b),b}var l=b("../../plotly"),e=b("d3"),f=b("./projections"),v=b("./set_scale"),d=b("./zoom"),p=b("./zoom_reset"),t=b("../../traces/scattergeo/plot"),x=b("../../traces/choropleth/plot"),w=b("../../constants/geo_constants"),
u=b("../../lib/topojson_utils"),r=b("topojson").feature;m.exports=h;b=h.prototype;b.plot=function(b,f,h){var g,l=this,r=f[l.id],t=f._size;l.projection=null;l.setScale=v(r,t);l.makeProjection(r);l.makePath();l.adjustLayout(r,t);l.zoom=d(l,r);l.zoomReset=p(l,r);l.mockAxis=c(f);l.framework.call(l.zoom).on("dblclick.zoom",l.zoomReset);f=u.getTopojsonName(r);null===l.topojson||f!==l.topojsonName?(l.topojsonName=f,void 0!==PlotlyGeoAssets.topojson[l.topojsonName]?(l.topojson=PlotlyGeoAssets.topojson[l.topojsonName],
l.onceTopojsonIsLoaded(b,r)):(g=u.getTopojsonPath(l.topojsonURL,l.topojsonName),h.push(new Promise(function(c,d){e.json(g,function(e,f){return e?void d(404===e.status?Error(["plotly.js could not find topojson file at",g,". Make sure the *topojsonURL* plot config option is set properly."].join(" ")):Error(["unexpected error while fetching topojson file at",g].join(" "))):(l.topojson=f,PlotlyGeoAssets.topojson[l.topojsonName]=f,l.onceTopojsonIsLoaded(b,r),void c())})})))):l.onceTopojsonIsLoaded(b,r)};
b.onceTopojsonIsLoaded=function(b,c){var d,e=[],f=[];this.drawLayout(c);for(var h=0;h<b.length;h++)d=b[h],"scattergeo"===d.type?e.push(d):"choropleth"===d.type&&f.push(d);0<e.length&&t.plot(this,e);0<f.length&&x.plot(this,f,c);this.render()};b.makeProjection=function(b){var c,d=b.projection,f=d.type,h=null===this.projection||f!==this.projectionType;h?(this.projectionType=f,c=this.projection=e.geo[w.projNames[f]]()):c=this.projection;c.translate(d._translate0).precision(w.precision);b._isAlbersUsa||
c.rotate(d._rotate).center(d._center);b._clipAngle?(this.clipAngle=b._clipAngle,c.clipAngle(b._clipAngle-w.clipPad)):this.clipAngle=null;d.parallels&&c.parallels(d.parallels);h&&this.setScale(c);c.translate(d._translate).scale(d._scale)};b.makePath=function(){this.path=e.geo.path().projection(this.projection)};b.makeFramework=function(){var b=this.geoDiv=e.select(this.container).append("div");b.attr("id",this.id).style("position","absolute");(this.hoverContainer=b.append("svg")).attr({xmlns:"http://www.w3.org/2000/svg",
"xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink"}).style({position:"absolute","z-index":20,"pointer-events":"none"});b=this.framework=b.append("svg");b.attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink",position:"absolute",preserveAspectRatio:"none"});b.append("g").attr("class","bglayer").append("rect");b.append("g").attr("class","baselayer");b.append("g").attr("class","choroplethlayer");b.append("g").attr("class","baselayeroverchoropleth");b.append("g").attr("class",
"scattergeolayer");b.on("dblclick.zoom",null)};b.adjustLayout=function(b,c){var d=b.domain;this.geoDiv.style({left:c.l+c.w*d.x[0]+b._marginX+"px",top:c.t+c.h*(1-d.y[1])+b._marginY+"px",width:b._width+"px",height:b._height+"px"});this.hoverContainer.attr({width:b._width,height:b._height});this.framework.attr({width:b._width,height:b._height});this.framework.select(".bglayer").select("rect").attr({width:b._width,height:b._height}).style({fill:b.bgcolor,"stroke-width":0})};b.drawTopo=function(b,c,d){!0===
d["show"+c]&&(d=this.topojson,d="frame"===c?w.sphereSVG:r(d,d.objects[c]),b.append("g").datum(d).attr("class",c).append("path").attr("class","basepath"))};b.drawGraticule=function(b,c,d){var f=d[c];if(!0===f.showgrid){var h=w.scopeDefaults[d.scope];d=h.lonaxisRange;h=h.lataxisRange;f="lonaxis"===c?[f.dtick]:[0,f.dtick];f=e.geo.graticule().extent([[d[0],h[0]],[d[1],h[1]]]).step(f);b.append("g").datum(f).attr("class",c+"graticule").append("path").attr("class","graticulepath")}};b.drawLayout=function(b){var c,
d=this.framework.select("g.baselayer"),e=w.baseLayers,f=w.axesNames;d.selectAll("*").remove();for(var h=0;h<e.length;h++)c=e[h],-1!==f.indexOf(c)?this.drawGraticule(d,c,b):this.drawTopo(d,c,b);this.styleLayout(b)};b.styleLayer=function(b,c,d){var e=w.lineLayers;-1!==w.fillLayers.indexOf(c)?(e=w.layerNameToAdjective[c],b.select("."+c).selectAll("path").attr("stroke","none").call(l.Color.fill,d[e+"color"])):-1!==e.indexOf(c)&&(e=w.layerNameToAdjective[c],b.select("."+c).selectAll("path").attr("fill",
"none").call(l.Color.stroke,d[e+"color"]).call(l.Drawing.dashLine,"",d[e+"width"]))};b.styleLayout=function(b){for(var c,d=this.framework.select("g.baselayer"),e=w.baseLayers,f=w.axesNames,h=0;h<e.length;h++)if(c=e[h],-1!==f.indexOf(c)){var g=b;d.select("."+c+"graticule").selectAll("path").attr("fill","none").call(l.Color.stroke,g[c].gridcolor).call(l.Drawing.dashLine,"",g[c].gridwidth)}else this.styleLayer(d,c,b)};b.render=function(){function b(c){return(c=g([c.lon,c.lat]))?"translate("+c[0]+","+
c[1]+")":null}function c(b){var d=g.rotate();return e.geo.distance([b.lon,b.lat],[-d[0],-d[1]])>p*Math.PI/180?"0":"1.0"}var d=this.framework,f=d.select("g.choroplethlayer"),h=d.select("g.scattergeolayer"),g=this.projection,l=this.path,p=this.clipAngle;d.selectAll("path.basepath").attr("d",l);d.selectAll("path.graticulepath").attr("d",l);f.selectAll("path.choroplethlocation").attr("d",l);f.selectAll("path.basepath").attr("d",l);h.selectAll("path.js-line").attr("d",l);null!==p?(h.selectAll("path.point").style("opacity",
c).attr("transform",b),h.selectAll("text").style("opacity",c).attr("transform",b)):(h.selectAll("path.point").attr("transform",b),h.selectAll("text").attr("transform",b))}},{"../../constants/geo_constants":318,"../../lib/topojson_utils":343,"../../plotly":348,"../../traces/choropleth/plot":411,"../../traces/scattergeo/plot":467,"./projections":362,"./set_scale":363,"./zoom":364,"./zoom_reset":365,d3:53,topojson:214}],356:[function(b,m,g){m.exports={geo:{valType:"geoid",dflt:"geo"}}},{}],357:[function(b,
m,g){b=b("../../../components/color/attributes");m.exports={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:b.lightLine},gridwidth:{valType:"number",min:0,dflt:1}}},{"../../../components/color/attributes":283}],358:[function(b,m,g){var h=b("../../../plotly"),c=b("../../../constants/geo_constants"),l=b("./axis_attributes");m.exports=function(b,f){function g(b,
c){return h.Lib.coerce(w,u,l,b,c)}function d(b){var d,e,h,g,l,p,r=f.scope;return"world"===r?(d=f.projection,e=d.type,h=d.rotation,l=c[b+"Span"],p=void 0!==l[e]?l[e]/2:l["*"]/2,g="lonaxis"===b?h.lon:h.lat,[g-p,g+p]):c.scopeDefaults[r][b+"Range"]}for(var p=c.axesNames,t=0;t<p.length;t++){var m=p[t],w=b[m]||{},u={},r=d(m),y=g("range",r);h.Lib.noneOrAll(w.range,u.range,[0,1]);g("tick0",y[0]);g("dtick","lonaxis"===m?30:10);g("showgrid")&&(g("gridcolor"),g("gridwidth"));f[m]=u;f[m]._fullRange=r}}},{"../../../constants/geo_constants":318,
"../../../plotly":348,"./axis_attributes":357}],359:[function(b,m,g){function h(b,c,e){var h,g=e("scope"),m="world"!==g;h=l.scopeDefaults[g];var u=e("resolution"),r=e("projection.type",h.projType),y="albers usa"===r,k=-1!==r.indexOf("conic");k&&e("projection.parallels",h.projParallels||[0,60]);y?c.scope="usa":(h=h.projRotate||[0,0,0],e("projection.rotation.lon",h[0]),e("projection.rotation.lat",h[1]),e("projection.rotation.roll",h[2]),(h=e("showcoastlines",!m))&&(e("coastlinecolor"),e("coastlinewidth")),
(h=e("showocean"))&&e("oceancolor"));e("projection.scale");(h=e("showland"))&&e("landcolor");(h=e("showlakes"))&&e("lakecolor");(h=e("showrivers"))&&(e("rivercolor"),e("riverwidth"));(h=e("showcountries",m))&&(e("countrycolor"),e("countrywidth"));("usa"===g||"north america"===g&&50===u)&&(e("showsubunits",!0),e("subunitcolor"),e("subunitwidth"));m||(h=e("showframe",!0),h&&(e("framecolor"),e("framewidth")));e("bgcolor");f(b,c);c._isHighRes=50===u;c._clipAngle=l.lonaxisSpan[r]/2;c._isAlbersUsa=y;c._isConic=
k;c._isScoped=m;b=c.projection.rotation||{};c.projection._rotate=[-b.lon||0,-b.lat||0,b.roll||0]}var c=b("../../../plotly"),l=b("../../../constants/geo_constants"),e=b("./layout_attributes"),f=b("./axis_defaults");m.exports=function(b,d,f){function g(b,d){return c.Lib.coerce(r,y,e,b,d)}f=c.Plots.getSubplotIdsInData(f,"geo");for(var l=f.length,m=0;l>m;m++){var u=f[m],r=b[u]||{},y={};g("domain.x");g("domain.y",[m/l,(m+1)/l]);h(r,y,g);d[u]=y}}},{"../../../constants/geo_constants":318,"../../../plotly":348,
"./axis_defaults":358,"./layout_attributes":361}],360:[function(b,m,g){m=b("../../../plotly");var h=b("./attributes");m.Plots.registerSubplot("geo","geo","geo",h);g.layoutAttributes=b("./layout_attributes");g.supplyLayoutDefaults=b("./defaults")},{"../../../plotly":348,"./attributes":356,"./defaults":359,"./layout_attributes":361}],361:[function(b,m,g){g=b("../../../components/color/attributes");var h=b("../../../constants/geo_constants");b=b("./axis_attributes");m.exports={domain:{x:{valType:"info_array",
items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(h.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(h.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",
items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,max:10,dflt:1}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:g.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:h.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:h.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:h.waterColor},showrivers:{valType:"boolean",
dflt:!1},rivercolor:{valType:"color",dflt:h.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:g.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:g.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:g.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",
dflt:g.background},lonaxis:b,lataxis:b}},{"../../../components/color/attributes":283,"../../../constants/geo_constants":318,"./axis_attributes":357}],362:[function(b,m,g){var h=b("d3");m.exports=function(){function b(c,d){return{type:"Feature",id:c.id,properties:c.properties,geometry:g(c.geometry,d)}}function g(b,c){if(!b)return null;if("GeometryCollection"===b.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(b){return g(b,c)})};if(!B.hasOwnProperty(b.type))return null;
var d=B[b.type];return h.geo.stream(b,c(d)),d.result()}function e(){}function f(b){return 1<b?D:-1>b?-D:Math.asin(b)}function m(b,c){var d=(2+D)*Math.sin(c);c/=2;for(var e=0,f=1/0;10>e&&Math.abs(f)>G;e++)f=Math.cos(c),c-=f=(c+Math.sin(c)*(f+2)-d)/(2*f*(1+f));return[2/Math.sqrt(I*(4+I))*b*(1+Math.cos(c)),2*Math.sqrt(I/(4+I))*Math.sin(c)]}function d(b,c){function d(e,f){var h=P(e/c,f);return h[0]*=b,h}return 2>arguments.length&&(c=b),1===c?P:c===1/0?p:(d.invert=function(d,e){var f=P.invert(d/b,e);return f[0]*=
c,f},d)}function p(b,c){return[b*Math.cos(c)/Math.cos(c/=2),2*Math.sin(c)]}function t(b,c){return[3*b/(2*I)*Math.sqrt(I*I/3-c*c),c]}function x(b,c){return[b,1.25*Math.log(Math.tan(I/4+.4*c))]}function w(b){return function(c){var d,e=b*Math.sin(c),f=30;do c-=d=(c+Math.sin(c)-e)/(1+Math.cos(c));while(Math.abs(d)>G&&0<--f);return c/2}}function u(b,c){var d=c*c,e=d*d;return[b*(.8707-.131979*d+e*(-.013791+e*(.003971*d-.001529*e))),c*(1.007226+d*(.015085+e*(-.044475+.028874*d-.005916*e)))]}function r(b,
c){var d,e=Math.min(18,36*Math.abs(c)/I),f=Math.floor(e),e=e-f,h=(d=Q[f])[0],g=d[1],k=(d=Q[++f])[0],l=d[1],f=(d=Q[Math.min(19,++f)])[0];d=d[1];return[b*(k+e*(f-h)/2+e*e*(f-2*k+h)/2),(0<c?D:-D)*(l+e*(d-g)/2+e*e*(d-2*l+g)/2)]}function y(b,c){return[b*Math.cos(c),c]}h.geo.project=function(b,c){var d=c.stream;if(!d)throw Error("not yet supported");return(b&&k.hasOwnProperty(b.type)?k[b.type]:g)(b,d)};var k={Feature:b,FeatureCollection:function(d,e){return{type:"FeatureCollection",features:d.features.map(function(d){return b(d,
e)})}}},q=[],z=[],E={point:function(b,c){q.push([b,c])},result:function(){var b=q.length?2>q.length?{type:"Point",coordinates:q[0]}:{type:"MultiPoint",coordinates:q}:null;return q=[],b}},A={lineStart:e,point:function(b,c){q.push([b,c])},lineEnd:function(){q.length&&(z.push(q),q=[])},result:function(){var b=z.length?2>z.length?{type:"LineString",coordinates:z[0]}:{type:"MultiLineString",coordinates:z}:null;return z=[],b}},C={polygonStart:e,lineStart:e,point:function(b,c){q.push([b,c])},lineEnd:function(){var b=
q.length;if(b){do q.push(q[0].slice());while(4>++b);z.push(q);q=[]}},polygonEnd:e,result:function(){if(!z.length)return null;var b=[],c=[];return z.forEach(function(d){var e;if(4>(e=d.length))e=!1;else{for(var f=0,h=d[e-1][1]*d[0][0]-d[e-1][0]*d[0][1];++f<e;)h+=d[f-1][1]*d[f][0]-d[f-1][0]*d[f][1];e=0>=h}e?b.push([d]):c.push(d)}),c.forEach(function(c){var d=c[0];b.some(function(b){for(var e=b[0],f=d[0],h=d[1],g=!1,k=0,l=e.length,p=l-1;l>k;p=k++){var q=e[k],r=q[0],q=q[1],m=e[p],p=m[0],m=m[1];q>h^m>
h&&(p-r)*(h-q)/(m-q)+r>f&&(g=!g)}return g?(b.push(c),!0):void 0})||b.push([c])}),z=[],b.length?1<b.length?{type:"MultiPolygon",coordinates:b}:{type:"Polygon",coordinates:b[0]}:null}},B={Point:E,MultiPoint:E,LineString:A,MultiLineString:A,Polygon:C,MultiPolygon:C,Sphere:C},G=1E-6,F=G*G,I=Math.PI,D=I/2,H=(Math.sqrt(I),I/180),K=180/I,O=h.geo.projection,L=h.geo.projectionMutator;h.geo.interrupt=function(b){function c(d,e){for(var f=0>e?-1:1,h=k[+(0>e)],g=0,l=h.length-1;l>g&&d>h[g][2][0];++g);l=b(d-h[g][1][0],
e);return l[0]+=b(h[g][1][0],f*e>f*h[g][0][1]?h[g][0][1]:e)[0],l}function d(){g=k.map(function(c){return c.map(function(c){var d,e=b(c[0][0],c[0][1])[0],f=b(c[2][0],c[2][1])[0],h=b(c[1][0],c[0][1])[1];c=b(c[1][0],c[1][1])[1];return h>c&&(d=h,h=c,c=d),[[e,h],[f,c]]})})}function e(){for(var b=[],c=0,d=k[0].length;d>c;++c){var g=k[0][c],l=180*g[0][0]/I,p=180*g[0][1]/I,q=180*g[1][1]/I,r=180*g[2][0]/I,g=180*g[2][1]/I;b.push(f([[l+1E-6,p+1E-6],[l+1E-6,q-1E-6],[r-1E-6,q-1E-6],[r-1E-6,g+1E-6]],30))}for(c=
k[1].length-1;0<=c;--c)g=k[1][c],l=180*g[0][0]/I,p=180*g[0][1]/I,q=180*g[1][1]/I,r=180*g[2][0]/I,g=180*g[2][1]/I,b.push(f([[r-1E-6,g-1E-6],[r-1E-6,q+1E-6],[l+1E-6,q+1E-6],[l+1E-6,p-1E-6]],30));return{type:"Polygon",coordinates:[h.merge(b)]}}function f(b,c){for(var d,e,h,g=-1,k=b.length,l=b[0],p=[];++g<k;){d=b[g];e=(d[0]-l[0])/c;h=(d[1]-l[1])/c;for(var q=0;c>q;++q)p.push([l[0]+q*e,l[1]+q*h]);l=d}return p.push(d),p}var g,k=[[[[-I,0],[0,D],[I,0]]],[[[-I,0],[0,-D],[I,0]]]];b.invert&&(c.invert=function(d,
e){for(var f=g[+(0>e)],h=k[+(0>e)],l=0,p=f.length;p>l;++l){var q=f[l];if(q[0][0]<=d&&d<q[1][0]&&q[0][1]<=e&&e<q[1][1])return f=b.invert(d-b(h[l][1][0],0)[0],e),f[0]+=h[l][1][0],h=c(f[0],f[1]),l=[d,e],Math.abs(h[0]-l[0])<G&&Math.abs(h[1]-l[1])<G?f:null}});var l=h.geo.projection(c),p=l.stream;return l.stream=function(b){var c=l.rotate(),d=p(b),f=(l.rotate([0,0]),p(b));return l.rotate(c),d.sphere=function(){h.geo.stream(e(),f)},d},l.lobes=function(b){return arguments.length?(k=b.map(function(b){return b.map(function(b){return[[b[0][0]*
I/180,b[0][1]*I/180],[b[1][0]*I/180,b[1][1]*I/180],[b[2][0]*I/180,b[2][1]*I/180]]})}),d(),l):k.map(function(b){return b.map(function(b){return[[180*b[0][0]/I,180*b[0][1]/I],[180*b[1][0]/I,180*b[1][1]/I],[180*b[2][0]/I,180*b[2][1]/I]]})})},l};m.invert=function(b,c){var d=.5*c*Math.sqrt((4+I)/I),e=f(d),h=Math.cos(e);return[b/(2/Math.sqrt(I*(4+I))*(1+h)),f((e+d*(h+2))/(2+D))]};(h.geo.eckert4=function(){return O(m)}).raw=m;var P=h.geo.azimuthalEqualArea.raw;p.invert=function(b,c){var d=2*f(c/2);return[b*
Math.cos(d/2)/Math.cos(d),d]};(h.geo.hammer=function(){var b=2,c=L(d),e=c(b);return e.coefficient=function(d){return arguments.length?c(b=+d):b},e}).raw=d;t.invert=function(b,c){return[2/3*I*b/Math.sqrt(I*I/3-c*c),c]};(h.geo.kavrayskiy7=function(){return O(t)}).raw=t;x.invert=function(b,c){return[b,2.5*Math.atan(Math.exp(.8*c))-.625*I]};(h.geo.miller=function(){return O(x)}).raw=x;var M=(w(I),function(b,c,d){function e(d,f){return[b*d*Math.cos(f=h(f)),c*Math.sin(f)]}var h=w(d);return e.invert=function(e,
h){var g=f(h/c);return[e/(b*Math.cos(g)),f((2*g+Math.sin(2*g))/d)]},e}(Math.SQRT2/D,Math.SQRT2,I));(h.geo.mollweide=function(){return O(M)}).raw=M;u.invert=function(b,c){var d,e=c,f=25;do{var h=e*e;d=h*h;e-=d=(e*(1.007226+h*(.015085+d*(-.044475+.028874*h-.005916*d)))-c)/(1.007226+h*(.045255+d*(-.311325+.259866*h-.005916*11*d)))}while(Math.abs(d)>G&&0<--f);return[b/(.8707+(h=e*e)*(-.131979+h*(-.013791+h*h*h*(.003971-.001529*h)))),e]};(h.geo.naturalEarth=function(){return O(u)}).raw=u;var Q=[[.9986,
-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Q.forEach(function(b){b[1]*=1.0144});r.invert=function(b,c){var d=c/D,e=90*d,f=Math.min(18,Math.abs(e/5)),h=Math.max(0,Math.floor(f));do{var g=Q[h][1],k=Q[h+1][1],l=Q[Math.min(19,h+2)][1],p=l-g,q=2*(Math.abs(d)-k)/p,g=(l-2*k+g)/p,q=q*(1-g*q*(1-2*g*q));if(0<=
q||1===h){e=(0<=c?5:-5)*(q+f);d=50;do f=Math.min(18,Math.abs(e)/5),h=Math.floor(f),q=f-h,g=Q[h][1],k=Q[h+1][1],l=Q[Math.min(19,h+2)][1],e-=(f=(0<=c?D:-D)*(k+q*(l-g)/2+q*q*(l-2*k+g)/2)-c)*K;while(Math.abs(f)>F&&0<--d);break}}while(0<=--h);f=Q[h][0];d=Q[h+1][0];h=Q[Math.min(19,h+2)][0];return[b/(d+q*(h-f)/2+q*q*(h-2*d+f)/2),e*H]};(h.geo.robinson=function(){return O(r)}).raw=r;y.invert=function(b,c){return[b/Math.cos(c),c]};(h.geo.sinusoidal=function(){return O(y)}).raw=y}},{d3:53}],363:[function(b,
m,g){function h(b,c,d,e){var h=(d-b)/4;return{type:"Polygon",coordinates:[[[b,c],[b,e],[b+h,e],[b+2*h,e],[b+3*h,e],[d,e],[d,c],[d-h,c],[d-2*h,c],[d-3*h,c],[b,c]]]}}function c(b,c){return l.geo.path().projection(b).bounds(c)}var l=b("d3"),e=b("../../constants/geo_constants").clipPad;m.exports=function(b,g){var d=b.projection,l=b.lonaxis,m=b.lataxis,x=b.domain,w=b.framewidth||0,u=g.w*(x.x[1]-x.x[0]),r=g.h*(x.y[1]-x.y[0]),y=l.range[0]+e,k=l.range[1]-e,q=m.range[0]+e,z=m.range[1]-e,E=l._fullRange[0]+
e,A=l._fullRange[1]-e,C=m._fullRange[0]+e,B=m._fullRange[1]-e;d._translate0=[g.l+u/2,g.t+r/2];l=[y+(k-y)/2,q+(z-q)/2];m=d._rotate;d._center=[l[0]+m[0],l[1]+m[1]];return function(e){function g(b){return Math.min(t*u/(b[1][0]-b[0][0]),t*r/(b[1][1]-b[0][1]))}var l,p,m,t=e.scale();p=d._translate0;var v=h(y,q,k,z),x=h(E,C,A,B);m=c(e,v);l=g(m);m=c(e,x);d._fullScale=g(m);e.scale(l);m=c(e,v);p=[p[0]-m[0][0]+w,p[1]-m[0][1]+w];d._translate=p;e.translate(p);m=c(e,v);b._isAlbersUsa||e.clipExtent(m);l*=d.scale;
d._scale=l;b._width=Math.round(m[1][0])+w;b._height=Math.round(m[1][1])+w;b._marginX=(u-Math.round(m[1][0]))/2;b._marginY=(r-Math.round(m[1][1]))/2}}},{"../../constants/geo_constants":318,d3:53}],364:[function(b,m,g){function h(b,c){var d=c._fullScale;return w.behavior.zoom().translate(b.translate()).scale(b.scale()).scaleExtent([.5*d,100*d])}function c(b,c){var d=b.projection,e=h(d,c);return e.on("zoomstart",function(){w.select(this).style(y)}).on("zoom",function(){d.scale(w.event.scale).translate(w.event.translate);
b.render()}).on("zoomend",function(){w.select(this).style(k)}),e}function l(b,c){var d,e,f,g,l,p,r,m,t=b.projection,u=h(t,c);return u.on("zoomstart",function(){w.select(this).style(y);d=w.mouse(this);e=t.rotate();f=t.translate();g=e;l=t.invert(d)}).on("zoom",function(){p=w.mouse(this);var c=d,h=t(t.invert(c));return 2<Math.abs(h[0]-c[0])||2<Math.abs(h[1]-c[1])?(u.scale(t.scale()),void u.translate(t.translate())):(t.scale(w.event.scale),t.translate([f[0],w.event.translate[1]]),l?t.invert(p)&&(m=t.invert(p),
r=[g[0]+(m[0]-l[0]),e[1],e[2]],t.rotate(r),g=r):(d=p,l=t.invert(d)),void b.render())}).on("zoomend",function(){w.select(this).style(k)}),u}function e(b,c){function e(b){F++||b({type:"zoomstart"})}var g,l=b.projection;l.rotate();l.scale();var m=h(l,c),u=x(m,"zoomstart","zoom","zoomend"),F=0,I=m.on;return m.on("zoomstart",function(){w.select(this).style(y);var b=w.mouse(this),c=l.rotate(),h=c,k=l.translate(),q=v(c);g=f(l,b);I.call(m,"zoom",function(){var e=w.mouse(this);if(l.scale(w.event.scale),g){if(f(l,
e)){l.rotate(c).translate(k);var e=f(l,e),m;var v=g,x=e;if(v&&x){var e=[v[1]*x[2]-v[2]*x[1],v[2]*x[0]-v[0]*x[2],v[0]*x[1]-v[1]*x[0]],z=Math.sqrt(t(e,e)),v=.5*Math.acos(Math.max(-1,Math.min(1,t(v,x)))),x=Math.sin(v)/z;m=z&&[Math.cos(v),e[2]*x,-e[1]*x,e[0]*x]}else m=void 0;var e=q[0],z=q[1],v=q[2],x=q[3],y=m[0],B=m[1],F=m[2];m=m[3];var e=[e*y-z*B-v*F-x*m,e*B+z*y+v*m-x*F,e*F-z*m+v*y+x*B,e*m+z*F-v*B+x*y],v=[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*r,Math.asin(Math.max(-1,Math.min(1,
2*(e[0]*e[2]-e[3]*e[1]))))*r,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*r],z=g,e=h,x=p(z,2,v[0]),x=p(x,1,v[1]),x=p(x,0,v[2]-e[2]),E,I,y=z[0],B=z[1],z=z[2],v=x[0],F=x[1],x=x[2];m=Math.atan2(B,y)*r;y=Math.sqrt(y*y+B*B);Math.abs(F)>y?(I=(0<F?90:-90)-m,E=0):(I=Math.asin(F/y)*r-m,E=Math.sqrt(y*y-F*F));y=180-I-2*m;B=(Math.atan2(x,v)-Math.atan2(z,E))*r;E=(Math.atan2(x,v)-Math.atan2(z,-E))*r;z=d(e[0],e[1],I,B);I=d(e[0],e[1],y,E)>=z?[I,B,e[2]]:[y,E,e[2]];isFinite(I[0])&&isFinite(I[1])&&
isFinite(I[2])||(I=h);l.rotate(I);h=I}}else b=e,g=f(l,b);u.of(this,arguments)({type:"zoom"})});e(u.of(this,arguments))}).on("zoomend",function(){w.select(this).style(k);I.call(m,"zoom",null);var b=u.of(this,arguments);--F||b({type:"zoomend"})}).on("zoom.redraw",function(){b.render()}),w.rebind(m,u,"on")}function f(b,c){var d=b.invert(c),e;if(e=d&&isFinite(d[0])&&isFinite(d[1])){e=d[0]*u;var d=d[1]*u,f=Math.cos(d);e=[f*Math.cos(e),f*Math.sin(e),Math.sin(d)]}return e}function v(b){var c=.5*b[0]*u,d=
.5*b[1]*u,e=.5*b[2]*u;b=Math.sin(c);var c=Math.cos(c),f=Math.sin(d),d=Math.cos(d),h=Math.sin(e),e=Math.cos(e);return[c*d*e+b*f*h,b*d*e-c*f*h,c*f*e+b*d*h,c*d*h-b*f*e]}function d(b,c,d,e){b=((d-b)%360+540)%360-180;c=((e-c)%360+540)%360-180;return Math.sqrt(b*b+c*c)}function p(b,c,d){var e=d*u;d=b.slice();var f=0===c?1:0;c=2===c?1:2;var h=Math.cos(e),e=Math.sin(e);return d[f]=b[f]*h-b[c]*e,d[c]=b[c]*h+b[f]*e,d}function t(b,c){for(var d=0,e=b.length,f=0;e>d;++d)f+=b[d]*c[d];return f}function x(b){for(var c=
0,d=arguments.length,e=[];++c<d;)e.push(arguments[c]);var f=w.dispatch.apply(null,e);return f.of=function(c,d){return function(e){var h;try{h=e.sourceEvent=w.event,e.target=b,w.event=e,f[e.type].apply(c,d)}finally{w.event=h}}},f}var w=b("d3"),u=Math.PI/180,r=180/Math.PI,y={cursor:"pointer"},k={cursor:"auto"};m.exports=function(b,d){return(d._isScoped?c:d._clipAngle?e:l)(b,d.projection)}},{d3:53}],365:[function(b,m,g){var h=b("../../plotly").Fx.loneUnhover;m.exports=function(b,g){var e=b.projection,
f=b.zoom;return function(){b.makeProjection(g);b.makePath();f.scale(e.scale());f.translate(e.translate());h(b.hoverContainer);b.render()}}},{"../../plotly":348}],366:[function(b,m,g){function h(b,c){this.element=b;this.plot=c;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0]}var c=b("mouse-change"),l=b("mouse-wheel");m.exports=function(b){var f=b.mouseContainer,g=b.glplot,d=new h(f,g);return d.mouseListener=
c(f,function(c,f,h){function l(c,f,h){var g=Math.min(f,h);f=Math.max(f,h);g!==f?(c[0]=g,c[1]=f,d.dataBox=c):(b.selectBox.selectBox=[0,0,1,1],b.glplot.setDirty())}var m=b.xaxis.range,r=b.yaxis.range,y=g.viewBox,k=d.lastPos[0],q=d.lastPos[1];switch(f*=g.pixelRatio,h*=g.pixelRatio,h=y[3]-y[1]-h,b.fullLayout.dragmode){case "zoom":c?(m=f/(y[2]-y[0])*(m[1]-m[0])+m[0],r=h/(y[3]-y[1])*(r[1]-r[0])+r[0],d.boxEnabled||(d.boxStart[0]=m,d.boxStart[1]=r),d.boxEnd[0]=m,d.boxEnd[1]=r,d.boxEnabled=!0):d.boxEnabled&&
(l(m,d.boxStart[0],d.boxEnd[0]),l(r,d.boxStart[1],d.boxEnd[1]),d.boxEnabled=!1);break;case "pan":if(d.boxEnabled=!1,c)y=(k-f)*(m[1]-m[0])/(g.viewBox[2]-g.viewBox[0]),q=(q-h)*(r[1]-r[0])/(g.viewBox[3]-g.viewBox[1]),m[0]+=y,m[1]+=y,r[0]+=q,r[1]+=q,d.lastInputTime=Date.now(),b.cameraChanged()}d.lastPos[0]=f;d.lastPos[1]=h}),d.wheelListener=l(f,function(c,f){var h=b.xaxis.range,l=b.yaxis.range,m=g.viewBox,r=d.lastPos[0],y=d.lastPos[1];switch(b.fullLayout.dragmode){case "pan":var k=Math.exp(.1*f/(m[3]-
m[1])),r=r/(m[2]-m[0])*(h[1]-h[0])+h[0],m=y/(m[3]-m[1])*(l[1]-l[0])+l[0];h[0]=(h[0]-r)*k+r;h[1]=(h[1]-r)*k+r;l[0]=(l[0]-m)*k+m;l[1]=(l[1]-m)*k+m;d.lastInputTime=Date.now();b.cameraChanged()}return!0}),d}},{"mouse-change":173,"mouse-wheel":177}],367:[function(b,m,g){function h(b){this.scene=b;this.gl=b.gl;this.pixelRatio=b.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,
0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];
this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0]}var c=b("../../plotly"),l=b("../../lib/html2unicode"),
e=b("../../lib/str2rgbarray");b=h.prototype;var f=["xaxis","yaxis"];b.merge=function(b){this.titleEnable=!1;this.backgroundColor=e(b.plot_bgcolor);var c,h,g,m,w,u,r;for(r=0;2>r;++r){c=f[r];h=b[this.scene[c]._name];g=/Click to enter .+ title/.test(h.title)?"":h.title;for(w=0;2>=w;w+=2)this.labelEnable[r+w]=!1,this.labels[r+w]=l(g),this.labelColor[r+w]=e(h.titlefont.color),this.labelFont[r+w]=h.titlefont.family,this.labelSize[r+w]=h.titlefont.size,this.labelPad[r+w]=this.getLabelPad(c,h),this.tickEnable[r+
w]=!1,this.tickColor[r+w]=e((h.tickfont||{}).color),this.tickAngle[r+w]="auto"===h.tickangle?0:Math.PI*-h.tickangle/180,this.tickPad[r+w]=this.getTickPad(h),this.tickMarkLength[r+w]=0,this.tickMarkWidth[r+w]=h.tickwidth||0,this.tickMarkColor[r+w]=e(h.tickcolor),this.borderLineEnable[r+w]=!1,this.borderLineColor[r+w]=e(h.linecolor),this.borderLineWidth[r+w]=h.linewidth||0;w=this.hasSharedAxis(h);g=this.hasAxisInDfltPos(c,h)&&!w;c=this.hasAxisInAltrPos(c,h)&&!w;m=h.mirror||!1;u=w?-1!==String(m).indexOf("all"):
!!m;w=w?"allticks"===m:-1!==String(m).indexOf("ticks");g?this.labelEnable[r]=!0:c&&(this.labelEnable[r+2]=!0);g?this.tickEnable[r]=h.showticklabels:c&&(this.tickEnable[r+2]=h.showticklabels);(g||u)&&(this.borderLineEnable[r]=h.showline);(c||u)&&(this.borderLineEnable[r+2]=h.showline);(g||w)&&(this.tickMarkLength[r]=this.getTickMarkLength(h));(c||w)&&(this.tickMarkLength[r+2]=this.getTickMarkLength(h));this.gridLineEnable[r]=h.showgrid;this.gridLineColor[r]=e(h.gridcolor);this.gridLineWidth[r]=h.gridwidth;
this.zeroLineEnable[r]=h.zeroline;this.zeroLineColor[r]=e(h.zerolinecolor);this.zeroLineWidth[r]=h.zerolinewidth}};b.hasSharedAxis=function(b){var d=this.scene,e=c.Plots.getSubplotIds(d.fullLayout,"gl2d");return 0!==c.Axes.findSubplotsWithAxis(e,b).indexOf(d.id)};b.hasAxisInDfltPos=function(b,c){var e=c.side;return"xaxis"===b?"bottom"===e:"yaxis"===b?"left"===e:void 0};b.hasAxisInAltrPos=function(b,c){var e=c.side;return"xaxis"===b?"top"===e:"yaxis"===b?"right"===e:void 0};b.getLabelPad=function(b,
c){var e=c.titlefont.size,f=c.showticklabels;return"xaxis"===b?"top"===c.side?-10+e*(1.5+(f?1:0)):-10+e*(1.5+(f?.5:0)):"yaxis"===b?"right"===c.side?10+e*(1.5+(f?1:.5)):10+e*(1.5+(f?.5:0)):void 0};b.getTickPad=function(b){return"outside"===b.ticks?10+b.ticklen:15};b.getTickMarkLength=function(b){if(!b.ticks)return 0;var c=b.ticklen;return"inside"===b.ticks?-c:c};m.exports=function(b){return new h(b)}},{"../../lib/html2unicode":331,"../../lib/str2rgbarray":341,"../../plotly":348}],368:[function(b,m,
g){function h(b,c){this.container=b.container;this.pixelRatio=b.plotGlPixelRatio||window.devicePixelRatio;this.id=b.id;this.staticPlot=!!b.staticPlot;this.fullLayout=c;this.updateAxes(c);this.makeFramework();this.glplotOptions=p(this);this.glplotOptions.merge(c);this.glplot=f(this.glplotOptions);this.camera=t(this);this.traces={};this.spikes=v(this.glplot);this.selectBox=d(this.glplot,{innerFill:!1,outerFill:!0});this.pickResult=null;this.bounds=[1/0,1/0,-(1/0),-(1/0)];this.stopped=!1;this.redraw=
this.draw.bind(this);this.redraw()}var c,l,e=b("../../plotly"),f=b("gl-plot2d"),v=b("gl-spikes2d"),d=b("gl-select-box"),p=b("./convert"),t=b("./camera"),x=b("../../traces/scattergl/convert"),w=b("../../lib/html2unicode"),u=b("../../lib/show_no_webgl_msg"),r=["xaxis","yaxis"];e.Plots.registerSubplot("gl2d",["xaxis","yaxis"],["x","y"],e.Axes.attributes);m.exports=h;b=h.prototype;b.makeFramework=function(){if(this.staticPlot){if(!l){c=document.createElement("canvas");try{l=c.getContext("webgl",{preserveDrawingBuffer:!0,
premultipliedAlpha:!0,antialias:!0})}catch(b){throw Error("Error creating static canvas/context for image server");}}this.canvas=c;this.gl=l}else{var d,e=document.createElement("canvas"),f={premultipliedAlpha:!0};try{d=e.getContext("webgl",f)}catch(b){}if(!d)try{d=e.getContext("experimental-webgl",f)}catch(b){}d||u(this);this.canvas=e;this.gl=d}d=this.canvas;e=this.pixelRatio;f=this.fullLayout;d.width=0|Math.ceil(e*f.width);d.height=0|Math.ceil(e*f.height);d.style.width="100%";d.style.height="100%";
d.style.position="absolute";d.style.top="0px";d.style.left="0px";d.style["pointer-events"]="none";e=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");e.style.position="absolute";e.style.top=e.style.left="0px";e.style.width=e.style.height="100%";e.style["z-index"]=20;e.style["pointer-events"]="none";f=this.mouseContainer=document.createElement("div");f.style.position="absolute";var h=this.container;h.appendChild(d);h.appendChild(e);h.appendChild(f)};b.toImage=function(b){b||
(b="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(c);this.glplot.setDirty(!0);this.glplot.draw();var d=this.glplot.gl,e=d.drawingBufferWidth,f=d.drawingBufferHeight;d.bindFramebuffer(d.FRAMEBUFFER,null);var h=new Uint8Array(e*f*4);d.readPixels(0,0,e,f,d.RGBA,d.UNSIGNED_BYTE,h);for(var d=0,g=f-1;g>d;++d,--g)for(var l=0;e>l;++l)for(var p=0;4>p;++p){var r=h[4*(e*d+l)+p];h[4*(e*d+l)+p]=h[4*(e*g+l)+p];h[4*(e*g+l)+p]=r}d=document.createElement("canvas");d.width=e;d.height=f;g=d.getContext("2d");
e=g.createImageData(e,f);e.data.set(h);g.putImageData(e,0,0);switch(b){case "jpeg":b=d.toDataURL("image/jpeg");break;case "webp":b=d.toDataURL("image/webp");break;default:b=d.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(c),b};b.computeTickMarks=function(){this.xaxis._length=this.glplot.viewBox[2]-this.glplot.viewBox[0];this.yaxis._length=this.glplot.viewBox[3]-this.glplot.viewBox[1];for(var b=[e.Axes.calcTicks(this.xaxis),e.Axes.calcTicks(this.yaxis)],c=0;2>c;++c)for(var d=
0;d<b[c].length;++d)b[c][d].text=w(b[c][d].text+"").replace(/\n/g," ");return b};b.updateAxes=function(b){var c=e.Axes.subplotMatch,d="xaxis"+this.id.match(c)[1],c="yaxis"+this.id.match(c)[2];this.xaxis=b[d];this.yaxis=b[c]};b.updateFx=function(b){var c=this.fullLayout;c.dragmode=b.dragmode;c.hovermode=b.hovermode};b.cameraChanged=function(){var b=this.camera,c=this.xaxis.range,d=this.yaxis.range;this.glplot.setDataBox([c[0],d[0],c[1],d[1]]);c=this.computeTickMarks();d=this.glplotOptions.ticks;a:{for(var e=
0;2>e;++e){var f=c[e],h=d[e];if(f.length!==h.length){d=!0;break a}for(var g=0;g<f.length;++g)if(f[g].x!==h[g].x){d=!0;break a}}d=!1}d&&(this.glplotOptions.ticks=c,this.glplotOptions.dataBox=b.dataBox,this.glplot.update(this.glplotOptions))};b.destroy=function(){this.glplot.dispose()};b.plot=function(b,c){var d,f,h=this.glplot,g=this.pixelRatio;this.fullLayout=c;this.updateAxes(c);var l=c.width,p=c.height;d=0|Math.ceil(g*l);var g=0|Math.ceil(g*p),m=this.canvas;(m.width!==d||m.height!==g)&&(m.width=
d,m.height=g);b?Array.isArray(b)||(b=[b]):b=[];for(d=0;d<b.length;++d){if(f=b[d],g=this.traces[f.uid])g.update(f);else switch(f.type){case "scattergl":g=x(this,f)}this.traces[f.uid]=g}m=Object.keys(this.traces);d=0;a:for(;d<m.length;++d){for(f=0;f<b.length;++f)if(b[f].uid===m[d])continue a;g=this.traces[m[d]];g.dispose();delete this.traces[m[d]]}f=this.glplotOptions;f.merge(c);f.screenBox=[0,0,l,p];d=c._size;g=this.xaxis.domain;m=this.yaxis.domain;f.viewBox=[d.l+g[0]*d.w,d.b+m[0]*d.h,l-d.r-(1-g[1])*
d.w,p-d.t-(1-m[1])*d.h];this.mouseContainer.style.width=d.w*(g[1]-g[0])+"px";this.mouseContainer.style.height=d.h*(m[1]-m[0])+"px";this.mouseContainer.height=d.h*(m[1]-m[0]);this.mouseContainer.style.left=d.l+g[0]*d.w+"px";this.mouseContainer.style.top=d.t+(1-m[1])*d.h+"px";l=this.bounds;l[0]=l[1]=1/0;l[2]=l[3]=-(1/0);m=Object.keys(this.traces);for(d=0;d<m.length;++d)for(g=this.traces[m[d]],p=0;2>p;++p)l[p]=Math.min(l[p],g.bounds[p]),l[p+2]=Math.max(l[p+2],g.bounds[p+2]);for(d=0;2>d;++d)l[d]>l[d+
2]&&(l[d]=-1,l[d+2]=1),p=this[r[d]],p._length=f.viewBox[d+2]-f.viewBox[d],e.Axes.doAutoRange(p);f.ticks=this.computeTickMarks();l=this.xaxis.range;p=this.yaxis.range;f.dataBox=[l[0],p[0],l[1],p[1]];f.merge(c);h.update(f)};b.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var b=this.glplot,c=this.camera,d=c.mouseListener,f=this.fullLayout;this.cameraChanged();var h=d.x*b.pixelRatio,d=this.canvas.height-b.pixelRatio*d.y;c.boxEnabled&&"zoom"===f.dragmode?(this.selectBox.enabled=
!0,this.selectBox.selectBox=[Math.min(c.boxStart[0],c.boxEnd[0]),Math.min(c.boxStart[1],c.boxEnd[1]),Math.max(c.boxStart[0],c.boxEnd[0]),Math.max(c.boxStart[1],c.boxEnd[1])],b.setDirty()):(this.selectBox.enabled=!1,c=f._size,(h=b.pick(h/b.pixelRatio+c.l+this.xaxis.domain[0]*c.w,d/b.pixelRatio-(c.t+(1-this.yaxis.domain[1])*c.h)))&&f.hovermode?!(f=h.object._trace.handlePick(h))||this.lastPickResult&&this.lastPickResult.trace===f.trace&&this.lastPickResult.dataCoord[0]===f.dataCoord[0]&&this.lastPickResult.dataCoord[1]===
f.dataCoord[1]||(f=this.lastPickResult=f,this.spikes.update({center:h.dataCoord}),f.screenCoord=[((b.viewBox[2]-b.viewBox[0])*(h.dataCoord[0]-b.dataBox[0])/(b.dataBox[2]-b.dataBox[0])+b.viewBox[0])/b.pixelRatio,(this.canvas.height-(b.viewBox[3]-b.viewBox[1])*(h.dataCoord[1]-b.dataBox[1])/(b.dataBox[3]-b.dataBox[1])-b.viewBox[1])/b.pixelRatio],c=f.hoverinfo,"all"!==c&&(c=c.split("+"),-1===c.indexOf("x")&&(f.traceCoord[0]=void 0),-1===c.indexOf("y")&&(f.traceCoord[1]=void 0),-1===c.indexOf("text")&&
(f.textLabel=void 0),-1===c.indexOf("name")&&(f.name=void 0)),e.Fx.loneHover({x:f.screenCoord[0],y:f.screenCoord[1],xLabel:this.hoverFormatter("xaxis",f.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",f.traceCoord[1]),text:f.textLabel,name:f.name,color:f.color},{container:this.svgContainer}),this.lastPickResult={dataCoord:h.dataCoord}):!h&&this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,e.Fx.loneUnhover(this.svgContainer)));b.draw()}};b.hoverFormatter=function(b,c){if(void 0!==
c){var d=this[b];return e.Axes.tickText(d,d.c2l(c),"hover").text}}},{"../../lib/html2unicode":331,"../../lib/show_no_webgl_msg":339,"../../plotly":348,"../../traces/scattergl/convert":469,"./camera":366,"./convert":367,"gl-plot2d":106,"gl-select-box":136,"gl-spikes2d":147}],369:[function(b,m,g){m.exports=function(b,g){b=b||document.body;g=g||{};var d=[.01,1/0];"distanceLimits"in g&&(d[0]=g.distanceLimits[0],d[1]=g.distanceLimits[1]);"zoomMin"in g&&(d[0]=g.zoomMin);"zoomMax"in g&&(d[1]=g.zoomMax);
var p=c({center:g.center||[0,0,0],up:g.up||[0,1,0],eye:g.eye||[0,0,10],mode:g.mode||"orbit",distanceLimits:d}),m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0,w=b.clientWidth,u=b.clientHeight,r={keyBindingMode:"rotate",view:p,element:b,delay:g.delay||16,rotateSpeed:g.rotateSpeed||1,zoomSpeed:g.zoomSpeed||1,translateSpeed:g.translateSpeed||1,flipX:!!g.flipX,flipY:!!g.flipY,modes:p.modes,tick:function(){var c=h(),d=this.delay,e=c-2*d;p.idle(c-d);p.recalcMatrix(e);p.flush(c-(100+2*d));c=!0;d=p.computedMatrix;
for(e=0;16>e;++e)c=c&&m[e]===d[e],m[e]=d[e];d=b.clientWidth===w&&b.clientHeight===u;return w=b.clientWidth,u=b.clientHeight,c?!d:(x=Math.exp(p.computedRadius[0]),!0)},lookAt:function(b,c,d){p.lookAt(p.lastT(),b,c,d)},rotate:function(b,c,d){p.rotate(p.lastT(),b,c,d)},pan:function(b,c,d){p.pan(p.lastT(),b,c,d)},translate:function(b,c,d){p.translate(p.lastT(),b,c,d)}};Object.defineProperties(r,{matrix:{get:function(){return p.computedMatrix},set:function(b){return p.setMatrix(p.lastT(),b),p.computedMatrix},
enumerable:!0},mode:{get:function(){return p.getMode()},set:function(b){var c=p.computedUp.slice(),d=p.computedEye.slice(),e=p.computedCenter.slice();if(p.setMode(b),"turntable"===b)b=h(),p._active.lookAt(b,d,e,c),p._active.lookAt(b+500,d,e,[0,0,1]),p._active.flush(b);return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(b){return p.lookAt(p.lastT(),null,b),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(b){return p.lookAt(p.lastT(),
b),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(b){return p.lookAt(p.lastT(),null,null,b),p.computedUp},enumerable:!0},distance:{get:function(){return x},set:function(b){return p.setDistance(p.lastT(),b),b},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(d)},set:function(b){return p.setDistanceLimits(b),b},enumerable:!0}});b.addEventListener("contextmenu",function(b){return b.preventDefault(),!1});var y=0,k=0;return l(b,function(c,d,e,
g){var l="rotate"===r.keyBindingMode,m="pan"===r.keyBindingMode,t="zoom"===r.keyBindingMode,u=!!g.control,v=!!g.alt;g=!!g.shift;var w=!!(1&c),H=!!(2&c);c=!!(4&c);var K=1/b.clientHeight,O=K*(d-y),L=K*(e-k),P=r.flipX?1:-1,M=r.flipY?1:-1,K=h(),Q=Math.PI*r.rotateSpeed;if((l&&w&&!u&&!v&&!g||w&&!u&&!v&&g)&&p.rotate(K,P*Q*O,-M*Q*L,0),(m&&w&&!u&&!v&&!g||H||w&&u&&!v&&!g)&&p.pan(K,-r.translateSpeed*O*x,r.translateSpeed*L*x,0),t&&w&&!u&&!v&&!g||c||w&&!u&&v&&!g)l=-r.zoomSpeed*L/window.innerHeight*(K-p.lastT())*
100,p.pan(K,0,0,x*(Math.exp(l)-1));return y=d,k=e,!0}),e(b,function(b,c){var d=r.flipX?1:-1,e=r.flipY?1:-1,f=h();Math.abs(b)>Math.abs(c)?p.rotate(f,0,0,-b*d*Math.PI*r.rotateSpeed/window.innerWidth):(d=-r.zoomSpeed*e*c/window.innerHeight*(f-p.lastT())/100,p.pan(f,0,0,x*(Math.exp(d)-1)))},!0),r};var h=b("right-now"),c=b("3d-view"),l=b("mouse-change"),e=b("mouse-wheel")},{"3d-view":22,"mouse-change":173,"mouse-wheel":177,"right-now":191}],370:[function(b,m,g){m.exports={scene:{valType:"sceneid",dflt:"scene"}}},
{}],371:[function(b,m,g){g=b("../../cartesian/layout_attributes");b=b("../../../lib/extend").extendFlat;m.exports={showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:"rgb(0,0,0)"},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},title:g.title,titlefont:g.titlefont,type:g.type,autorange:g.autorange,
rangemode:g.rangemode,range:g.range,fixedrange:g.fixedrange,tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,mirror:g.mirror,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:g.tickfont,tickangle:g.tickangle,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,showexponent:g.showexponent,exponentformat:g.exponentformat,
tickformat:g.tickformat,hoverformat:g.hoverformat,showline:g.showline,linecolor:g.linecolor,linewidth:g.linewidth,showgrid:g.showgrid,gridcolor:b({},g.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:g.gridwidth,zeroline:g.zeroline,zerolinecolor:g.zerolinecolor,zerolinewidth:g.zerolinewidth}},{"../../../lib/extend":328,"../../cartesian/layout_attributes":353}],372:[function(b,m,g){var h=b("../../../plotly"),c=b("./axis_attributes"),l=["xaxis","yaxis","zaxis"],e=function(){};m.exports=function(b,g,
d){function p(b,d){return h.Lib.coerce(m,x,c,b,d)}for(var m,x,w=h.Axes,u=0;u<l.length;u++){var r=l[u];m=b[r]||{};x={_id:r[0]+d.scene,_name:r};g[r]=x=w.handleAxisDefaults(m,x,p,{font:d.font,letter:r[0],data:d.data,showGrid:!0});p("gridcolor");p("title",r[0]);x.setScale=e;p("showspikes")&&(p("spikesides"),p("spikethickness"),p("spikecolor"));p("showbackground")&&p("backgroundcolor");p("showaxeslabels")}}},{"../../../plotly":348,"./axis_attributes":371}],373:[function(b,m,g){function h(){this.bounds=
[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,
!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,
!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=e(this.tickPad);this._defaultLabelPad=e(this.labelPad);this._defaultLineTickLength=e(this.lineTickLength)}g=b("arraytools");var c=b("../../../lib/html2unicode"),l=b("../../../lib/str2rgbarray"),e=g.copy1D,f=["xaxis","yaxis","zaxis"];h.prototype.merge=function(b){for(var d=0;3>d;++d){var e=b[f[d]];this.labels[d]=c(e.title);"titlefont"in e&&(e.titlefont.color&&(this.labelColor[d]=l(e.titlefont.color)),e.titlefont.family&&
(this.labelFont[d]=e.titlefont.family),e.titlefont.size&&(this.labelSize[d]=e.titlefont.size));"showline"in e&&(this.lineEnable[d]=e.showline);"linecolor"in e&&(this.lineColor[d]=l(e.linecolor));"linewidth"in e&&(this.lineWidth[d]=e.linewidth);"showgrid"in e&&(this.gridEnable[d]=e.showgrid);"gridcolor"in e&&(this.gridColor[d]=l(e.gridcolor));"gridwidth"in e&&(this.gridWidth[d]=e.gridwidth);"log"===e.type?this.zeroEnable[d]=!1:"zeroline"in e&&(this.zeroEnable[d]=e.zeroline);"zerolinecolor"in e&&(this.zeroLineColor[d]=
l(e.zerolinecolor));"zerolinewidth"in e&&(this.zeroLineWidth[d]=e.zerolinewidth);"ticks"in e&&e.ticks?this.lineTickEnable[d]=!0:this.lineTickEnable[d]=!1;"ticklen"in e&&(this.lineTickLength[d]=this._defaultLineTickLength[d]=e.ticklen);"tickcolor"in e&&(this.lineTickColor[d]=l(e.tickcolor));"tickwidth"in e&&(this.lineTickWidth[d]=e.tickwidth);"tickangle"in e&&(this.tickAngle[d]="auto"===e.tickangle?0:Math.PI*-e.tickangle/180);"showticklabels"in e&&(this.tickEnable[d]=e.showticklabels);"tickfont"in
e&&(e.tickfont.color&&(this.tickColor[d]=l(e.tickfont.color)),e.tickfont.family&&(this.tickFont[d]=e.tickfont.family),e.tickfont.size&&(this.tickSize[d]=e.tickfont.size));"mirror"in e?-1!==["ticks","all","allticks"].indexOf(e.mirror)?(this.lineTickMirror[d]=!0,this.lineMirror[d]=!0):!0===e.mirror?(this.lineTickMirror[d]=!1,this.lineMirror[d]=!0):(this.lineTickMirror[d]=!1,this.lineMirror[d]=!1):this.lineMirror[d]=!1;"showbackground"in e&&!1!==e.showbackground?(this.backgroundEnable[d]=!0,this.backgroundColor[d]=
l(e.backgroundcolor)):this.backgroundEnable[d]=!1}};m.exports=function(b){var c=new h;return c.merge(b),c}},{"../../../lib/html2unicode":331,"../../../lib/str2rgbarray":341,arraytools:32}],374:[function(b,m,g){var h=b("../../../plotly"),c=b("./layout_attributes"),l=b("./axis_defaults");m.exports=function(b,f,g){function d(b,d){return h.Lib.coerce(w,r,c,b,d)}if(f._hasGL3D){var p,m=h.Plots.getSubplotIdsInData(g,"gl3d");delete f.xaxis;delete f.yaxis;var x=m.length;for(p=0;x>p;++p){var w,u=m[p];void 0!==
b[u]?w=b[u]:b[u]=w={};var r=f[u]||{};d("bgcolor");for(var y=Object.keys(c.camera),k=0;k<y.length;k++)d("camera."+y[k]+".x"),d("camera."+y[k]+".y"),d("camera."+y[k]+".z");d("domain.x",[p/x,(p+1)/x]);d("domain.y");y=!!d("aspectratio.x")&&!!d("aspectratio.y")&&!!d("aspectratio.z");k=d("aspectmode",y?"manual":"auto");y||(w.aspectratio=r.aspectratio={x:1,y:1,z:1},"manual"===k&&(r.aspectmode="auto"));l(w,r,{font:f.font,scene:u,data:g});f[u]=r}}}},{"../../../plotly":348,"./axis_defaults":372,"./layout_attributes":376}],
375:[function(b,m,g){var h=b("../../../plotly");m=b("./attributes");var c=["xaxis","yaxis","zaxis"],l=function(){};h.Plots.registerSubplot("gl3d","scene","scene",m);g.layoutAttributes=b("./layout_attributes");g.supplyLayoutDefaults=b("./defaults");g.cleanId=function(b){if(b.match(/^scene[0-9]*$/))return b=b.substr(5),"1"===b&&(b=""),"scene"+b};g.setConvert=function(b){h.Axes.setConvert(b);b.setScale=l};g.initAxes=function(b){var f=b._fullLayout;delete f.xaxis;delete f.yaxis;for(var g=h.Plots.getSubplotIds(f,
"gl3d"),d=0;d<g.length;++d)for(var l=f[g[d]],m=0;3>m;++m)l[c[m]]._td=b}},{"../../../plotly":348,"./attributes":370,"./defaults":374,"./layout_attributes":376}],376:[function(b,m,g){function h(b,h,e){return{x:{valType:"number",dflt:b},y:{valType:"number",dflt:h},z:{valType:"number",dflt:e}}}g=b("./axis_attributes");b=b("../../../lib/extend").extendFlat;m.exports={bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},camera:{up:b(h(0,0,1),{}),center:b(h(0,0,0),{}),eye:b(h(1.25,1.25,1.25),{})},domain:{x:{valType:"info_array",
items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto"},aspectratio:{x:{valType:"number",min:0},y:{valType:"number",min:0},z:{valType:"number",min:0}},xaxis:g,yaxis:g,zaxis:g,_deprecated:{cameraposition:{valType:"info_array"}}}},{"../../../lib/extend":328,"./axis_attributes":371}],377:[function(b,
m,g){function h(){this.enabled=[!0,!0,!0];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var c=b("../../../lib/str2rgbarray"),l=["xaxis","yaxis","zaxis"];h.prototype.merge=function(b){for(var f=0;3>f;++f){var h=b[l[f]];this.enabled[f]=h.showspikes;this.colors[f]=c(h.spikecolor);this.drawSides[f]=h.spikesides;this.lineWidth[f]=h.spikethickness}};m.exports=function(b){var c=new h;return c.merge(b),c}},{"../../../lib/str2rgbarray":341}],378:[function(b,m,
g){m.exports=function(b){for(var f=b.axesOptions,g=b.glplot.axesPixels,d=b.fullSceneLayout,p=[[],[],[]],m=0;3>m;++m){var x=d[l[m]];if(x._length=(g[m].hi-g[m].lo)*g[m].pixelsPerDataUnit/b.dataScale[m],Math.abs(x._length)===1/0)p[m]=[];else{x.range[0]=g[m].lo/b.dataScale[m];x.range[1]=g[m].hi/b.dataScale[m];x._m=1/(b.dataScale[m]*g[m].pixelsPerDataUnit);x.range[0]===x.range[1]&&(--x.range[0],x.range[1]+=1);var w=x.tickmode;if("auto"===x.tickmode){x.tickmode="linear";var u=x.nticks||h.Lib.constrain(x._length/
40,4,9);h.Axes.autoTicks(x,Math.abs(x.range[1]-x.range[0])/u)}for(var u=h.Axes.calcTicks(x),r=0;r<u.length;++r)u[r].x*=b.dataScale[m],u[r].text=c(u[r].text);p[m]=u;x.tickmode=w}}f.ticks=p;for(m=0;3>m;++m)for(r=0;2>r;++r)f.bounds[r][m]=b.glplot.bounds[r][m];f=Array(3);for(g=0;3>g;++g){d=p[g];m=Array(d.length);for(x=0;x<d.length;++x)m[x]=d[x].x;f[g]=m}b.contourLevels=f};var h=b("../../../plotly"),c=b("../../../lib/html2unicode"),l=["xaxis","yaxis","zaxis"]},{"../../../lib/html2unicode":331,"../../../plotly":348}],
379:[function(b,m,g){function h(b,h){var e,f,g=[0,0,0,0];for(e=0;4>e;++e)for(f=0;4>f;++f)g[f]+=b[4*e+f]*h[e];return g}m.exports=function(b,g){return h(b.projection,h(b.view,h(b.model,[g[0],g[1],g[2],1])))}},{}],380:[function(b,m,g){function h(b){function c(e,f){if(void 0!==f){if("string"==typeof f)return f;var h=b.fullSceneLayout[e];return d.Axes.tickText(h,h.c2l(f),"hover").text}}var e=b.svgContainer,f=b.container.getBoundingClientRect(),h=f.width,f=f.height;e.setAttributeNS(null,"viewBox","0 0 "+
h+" "+f);e.setAttributeNS(null,"width",h);e.setAttributeNS(null,"height",f);w(b);b.glplot.axes.update(b.axesOptions);for(var g=Object.keys(b.traces),k=null,l=b.glplot.selection,p=0;p<g.length;++p){var r=b.traces[g[p]];r.handlePick(l)&&(k=r);r.setContourLevels&&r.setContourLevels()}null!==k?(g=q(b.glplot.cameraParams,l.dataCoordinate),p=k.data.hoverinfo,"all"!==p&&(p=p.split("+"),-1===p.indexOf("x")&&(l.traceCoordinate[0]=void 0),-1===p.indexOf("y")&&(l.traceCoordinate[1]=void 0),-1===p.indexOf("z")&&
(l.traceCoordinate[2]=void 0),-1===p.indexOf("text")&&(l.textLabel=void 0),-1===p.indexOf("name")&&(k.name=void 0)),d.Fx.loneHover({x:(.5+.5*g[0]/g[3])*h,y:(.5-.5*g[1]/g[3])*f,xLabel:c("xaxis",l.traceCoordinate[0]),yLabel:c("yaxis",l.traceCoordinate[1]),zLabel:c("zaxis",l.traceCoordinate[2]),text:l.textLabel,name:k.name,color:k.color},{container:e})):d.Fx.loneUnhover(e)}function c(b,c,d,e){d={canvas:d,gl:e,container:b.container,axes:b.axesOptions,spikes:b.spikeOptions,pickRadius:10,snapToData:!0,
autoScale:!0,autoBounds:!1};if(b.staticMode){if(!v){f=document.createElement("canvas");try{v=f.getContext("webgl",{preserveDrawingBuffer:!0,premultipliedAlpha:!0})}catch(g){throw Error("error creating static canvas/context for image server");}}d.pixelRatio=b.pixelRatio;d.gl=v;d.canvas=f}try{b.glplot=p(d)}catch(g){E(b)}(b.staticMode||b.glplot.canvas.addEventListener("webglcontextlost",function(b){console.log("lost context");b.preventDefault()}),b.camera)||(c=c.scene.camera,b.camera=k(b.container,{center:[c.center.x,
c.center.y,c.center.z],eye:[c.eye.x,c.eye.y,c.eye.z],up:[c.up.x,c.up.y,c.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"}));return b.glplot.mouseListener.enabled=!1,b.glplot.camera=b.camera,b.glplot.oncontextloss=function(){b.recoverContext()},b.glplot.onrender=h.bind(null,b),b.traces={},!0}function l(b,d){var e=document.createElement("div"),f=b.container,h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.style.position="absolute";h.style.top=h.style.left="0px";h.style.width=h.style.height=
"100%";h.style["z-index"]=20;h.style["pointer-events"]="none";e.appendChild(h);this.svgContainer=h;e.id=b.id;e.style.position="absolute";e.style.top=e.style.left="0px";e.style.width=e.style.height="100%";f.appendChild(e);this.fullLayout=d;this.id=b.id||"scene";this.plotArgs=[[],{},{}];this.axesOptions=t(d[this.id]);this.spikeOptions=x(d[this.id]);this.container=e;this.staticMode=!!b.staticPlot;this.pixelRatio=b.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];!c(this,d)}function e(b,
c,d,e){for(var f=0;f<c.length;++f)if(Array.isArray(c[f]))for(var h=0;h<c[f].length;++h){var g=b.d2l(c[f][h]);!isNaN(g)&&isFinite(g)&&(e[0][d]=Math.min(e[0][d],g),e[1][d]=Math.max(e[1][d],g))}else g=b.d2l(c[f]),!isNaN(g)&&isFinite(g)&&(e[0][d]=Math.min(e[0][d],g),e[1][d]=Math.max(e[1][d],g))}var f,v,d=b("../../plotly"),p=b("gl-plot3d"),t=b("./layout/convert"),x=b("./layout/spikes"),w=b("./layout/tick_marks"),u=b("../../traces/scatter3d/convert"),r=b("../../traces/surface/convert"),y=b("../../traces/mesh3d/convert"),
k=b("./camera"),q=b("./project"),z=b("../../lib/str2rgbarray"),E=b("../../lib/show_no_webgl_msg");b=l.prototype;b.recoverContext=function(){function b(){return e.isContextLost()?void requestAnimationFrame(b):c(d,d.fullLayout,f,e)?void d.plot.apply(d,d.plotArgs):void console.error("catastrophic/unrecoverable webgl error.  context lost.")}var d=this,e=this.glplot.gl,f=this.glplot.canvas;this.glplot.dispose();requestAnimationFrame(b)};var A=["xaxis","yaxis","zaxis"];b.plot=function(b,c,f){if(this.plotArgs=
[b,c,f],!this.glplot.contextLost){var h,g,k,l=c[this.id];f=f[this.id];l.bgcolor?this.glplot.clearColor=z(l.bgcolor):this.glplot.clearColor=[0,0,0,0];this.glplot.snapToData=!0;this.glplotLayout=this.fullSceneLayout=l;this.axesOptions.merge(l);this.spikeOptions.merge(l);this.handleDragmode(c.dragmode);this.glplot.update({});for(k=0;3>k;++k){var p=l[A[k]];d.Gl3dLayout.setConvert(p)}b?Array.isArray(b)||(b=[b]):b=[];p=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];for(k=0;k<b.length;++k)if(h=b[k],!0===h.visible){var q=
h;g=p;var m=this.fullSceneLayout;e(m.xaxis,q.x,0,g);e(m.yaxis,q.y,1,g);e(m.zaxis,q.z,2,g)}q=[1,1,1];for(g=0;3>g;++g)p[0][g]>p[1][g]?q[g]=1:p[1][g]===p[0][g]?q[g]=1:q[g]=1/(p[1][g]-p[0][g]);this.dataScale=q;for(k=0;k<b.length;++k)if(h=b[k],!0===h.visible){if(g=this.traces[h.uid])g.update(h);else{switch(h.type){case "scatter3d":g=u(this,h);break;case "surface":g=r(this,h);break;case "mesh3d":g=y(this,h)}this.traces[h.uid]=g}g.name=h.name}h=Object.keys(this.traces);k=0;a:for(;k<h.length;++k){for(g=0;g<
b.length;++g)if(b[g].uid===h[k]&&!0===b[g].visible)continue a;g=this.traces[h[k]];g.dispose();delete this.traces[h[k]]}h=[[0,0,0],[0,0,0]];b={};for(k=0;3>k;++k){p=l[A[k]];g=p.type;if(g in b?(b[g].acc*=q[k],b[g].count+=1):b[g]={acc:q[k],count:1},p.autorange){h[0][k]=1/0;h[1][k]=-(1/0);for(g=0;g<this.glplot.objects.length;++g)m=this.glplot.objects[g].bounds,h[0][k]=Math.min(h[0][k],m[0][k]/q[k]),h[1][k]=Math.max(h[1][k],m[1][k]/q[k]);("rangemode"in p&&"tozero"===p.rangemode&&(h[0][k]=Math.min(h[0][k],
0),h[1][k]=Math.max(h[1][k],0)),h[0][k]>h[1][k])?(h[0][k]=-1,h[1][k]=1):(g=h[1][k]-h[0][k],h[0][k]-=g/32,h[1][k]+=g/32)}else g=l[A[k]].range,h[0][k]=g[0],h[1][k]=g[1];h[0][k]===h[1][k]&&(--h[0][k],h[1][k]+=1);this.glplot.bounds[0][k]=h[0][k]*q[k];this.glplot.bounds[1][k]=h[1][k]*q[k]}h=[1,1,1];for(k=0;3>k;++k)p=l[A[k]],g=p.type,g=b[g],h[k]=Math.pow(g.acc,1/g.count)/q[k];if("auto"===l.aspectmode)k=4>=Math.max.apply(null,h)/Math.min.apply(null,h)?h:[1,1,1];else if("cube"===l.aspectmode)k=[1,1,1];else if("data"===
l.aspectmode)k=h;else{if("manual"!==l.aspectmode)throw Error("scene.js aspectRatio was not one of the enumerated types");k=l.aspectratio;k=[k.x,k.y,k.z]}l.aspectratio.x=f.aspectratio.x=k[0];l.aspectratio.y=f.aspectratio.y=k[1];l.aspectratio.z=f.aspectratio.z=k[2];this.glplot.aspect=k;l=l.domain||null;c=c._size||null;l&&c&&(f=this.container.style,f.position="absolute",f.left=c.l+l.x[0]*c.w+"px",f.top=c.t+(1-l.y[1])*c.h+"px",f.width=c.w*(l.x[1]-l.x[0])+"px",f.height=c.h*(l.y[1]-l.y[0])+"px")}};b.destroy=
function(){this.glplot.dispose();this.container.parentNode.removeChild(this.container);this.glplot=null};b.setCameraToDefault=function(){this.glplot.camera.lookAt([1.25,1.25,1.25],[0,0,0],[0,0,1])};b.getCamera=function(){this.glplot.camera.view.recalcMatrix(this.camera.view.lastT());var b=this.glplot.camera.up,c=this.glplot.camera.center,d=this.glplot.camera.eye;return{up:{x:b[0],y:b[1],z:b[2]},center:{x:c[0],y:c[1],z:c[2]},eye:{x:d[0],y:d[1],z:d[2]}}};b.setCamera=function(b){var c=b.up,d=b.center;
b=b.eye;this.glplot.camera.lookAt([b.x,b.y,b.z],[d.x,d.y,d.z],[c.x,c.y,c.z])};b.saveCamera=function(b){var c=this.getCamera();b=d.Lib.nestedProperty(b,this.id+".camera");var e=b.get(),f=!1;if(void 0===e)f=!0;else for(var h=0;3>h;h++)for(var g=0;3>g;g++){var k=["up","center","eye"],l=["x","y","z"];if(c[k[h]][l[g]]!==e[k[h]][l[g]]){f=!0;break}}return f&&b.set(c),f};b.handleDragmode=function(b){var c=this.camera;c&&("orbit"===b?(c.mode="orbit",c.keyBindingMode="rotate"):"turntable"===b?(c.up=[0,0,1],
c.mode="turntable",c.keyBindingMode="rotate"):c.keyBindingMode=b)};b.toImage=function(b){b||(b="png");this.staticMode&&this.container.appendChild(f);this.glplot.redraw();var c=this.glplot.gl,d=c.drawingBufferWidth,e=c.drawingBufferHeight;c.bindFramebuffer(c.FRAMEBUFFER,null);var h=new Uint8Array(d*e*4);c.readPixels(0,0,d,e,c.RGBA,c.UNSIGNED_BYTE,h);for(var c=0,g=e-1;g>c;++c,--g)for(var k=0;d>k;++k)for(var l=0;4>l;++l){var p=h[4*(d*c+k)+l];h[4*(d*c+k)+l]=h[4*(d*g+k)+l];h[4*(d*g+k)+l]=p}c=document.createElement("canvas");
c.width=d;c.height=e;g=c.getContext("2d");d=g.createImageData(d,e);d.data.set(h);g.putImageData(d,0,0);switch(b){case "jpeg":b=c.toDataURL("image/jpeg");break;case "webp":b=c.toDataURL("image/webp");break;default:b=c.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(f),b};m.exports=l},{"../../lib/show_no_webgl_msg":339,"../../lib/str2rgbarray":341,"../../plotly":348,"../../traces/mesh3d/convert":450,"../../traces/scatter3d/convert":461,"../../traces/surface/convert":474,"./camera":369,
"./layout/convert":373,"./layout/spikes":377,"./layout/tick_marks":378,"./project":379,"gl-plot3d":124}],381:[function(b,m,g){var h=b("../plotly");g=b("./font_attributes");b=b("../components/color/attributes");h=h.Lib.extendFlat;m.exports={font:{family:h({},g.family,{dflt:'"Open Sans", verdana, arial, sans-serif'}),size:h({},g.size,{dflt:12}),color:h({},g.color,{dflt:b.defaultLine})},title:{valType:"string",dflt:"Click to enter Plot title"},titlefont:h({},g,{}),autosize:{valType:"enumerated",values:[!0,
!1,"initial"]},width:{valType:"number",min:10,dflt:700},height:{valType:"number",min:10,dflt:450},margin:{l:{valType:"number",min:0,dflt:80},r:{valType:"number",min:0,dflt:80},t:{valType:"number",min:0,dflt:100},b:{valType:"number",min:0,dflt:80},pad:{valType:"number",min:0,dflt:0},autoexpand:{valType:"boolean",dflt:!0}},paper_bgcolor:{valType:"color",dflt:b.background},plot_bgcolor:{valType:"color",dflt:b.background},separators:{valType:"string",dflt:".,"},hidesources:{valType:"boolean",dflt:!1},
smith:{valType:"enumerated",values:[!1],dflt:!1},showlegend:{valType:"boolean"},_hasCartesian:{valType:"boolean",dflt:!1},_hasGL3D:{valType:"boolean",dflt:!1},_hasGeo:{valType:"boolean",dflt:!1},_hasPie:{valType:"boolean",dflt:!1},_hasGL2D:{valType:"boolean",dflt:!1},_composedModules:{"*":"Fx"},_nestedModules:{xaxis:"Axes",yaxis:"Axes",scene:"Gl3dLayout",geo:"GeoLayout",legend:"Legend",annotations:"Annotations",shapes:"Shapes"}}},{"../components/color/attributes":283,"../plotly":348,"./font_attributes":354}],
382:[function(b,m,g){function h(b){return"object"==typeof b&&(b=b.type),b}function c(b,c){c.text("");var e=c.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(b._context.linkText+" "+String.fromCharCode(187));if(b._context.sendData)e.on("click",function(){d.sendDataToCloud(b)});else{var f=window.location.pathname.split("/"),h=window.location.search;e.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+f[2].split(".")[0]+"/"+f[1]+h})}}function l(b,
c){for(var d,f=Object.keys(c),h=0;h<f.length;++h){var g=f[h];if("_"===g.charAt(0)||"function"==typeof c[g])g in b||(b[g]=c[g]);else if(Array.isArray(c[g])&&Array.isArray(b[g])&&c[g].length&&e.Lib.isPlainObject(c[g][0])){if(c[g].length!==b[g].length)throw Error("relinkPrivateKeys needs equal length arrays");for(d=0;d<c[g].length;d++)l(b[g][d],c[g][d])}else e.Lib.isPlainObject(c[g])&&e.Lib.isPlainObject(b[g])&&(l(b[g],c[g]),Object.keys(b[g]).length||delete b[g])}}var e=b("../plotly"),f=b("d3"),v=b("fast-isnumeric"),
d=m.exports={},p=d.modules={},t=d.allTypes=[],x=d.allCategories={},w=d.subplotsRegistry={};d.attributes=b("./attributes");d.attributes.type.values=t;d.fontAttrs=b("./font_attributes");d.layoutAttributes=b("./layout_attributes");d.fontWeight="normal";d.register=function(b,c,d,e){if(p[c])throw Error("type "+c+" already registered");for(var f={},h=0;h<d.length;h++)f[d[h]]=!0,x[d[h]]=!0;p[c]={module:b,categories:f};e&&Object.keys(e).length&&(p[c].meta=e);t.push(c)};d.getModule=function(b){return void 0!==
b.r?(console.log("Oops, tried to put a polar trace on an incompatible graph of cartesian data. Ignoring this dataset.",b),!1):(b=p[h(b)])?b.module:!1};d.traceIs=function(b,c){if(b=h(b),"various"===b)return!1;var e=p[b];return e||(void 0!==b&&console.warn("unrecognized trace type "+b),e=p[d.attributes.type.dflt]),!!e.categories[c]};d.registerSubplot=function(b,c,d,e){function f(b){return new RegExp(h+b+g)}if(w[b])throw Error("subplot "+b+" already registered");var h="^",g="([2-9]|[1-9][0-9]+)?$",l=
"cartesian"===b||"gl2d"===w;w[b]={attr:c,idRoot:d,attributes:e,attrRegex:l?{x:f(c[0]),y:f(c[1])}:f(c),idRegex:l?{x:f(d[0]),y:f(d[1])}:f(d)}};d.getSubplotIds=function(b,c){if(void 0===d.subplotsRegistry[c]||"cartesian"===c&&!b._hasCartesian||"gl2d"===c&&!b._hasGL2D)return[];if("cartesian"===c||"gl2d"===c)return Object.keys(b._plots);for(var e,f=d.subplotsRegistry[c].idRegex,h=Object.keys(b),g=[],l=0;l<h.length;l++)e=h[l],f.test(e)&&g.push(e);return g};d.getSubplotIdsInData=function(b,c){if(void 0===
d.subplotsRegistry[c])return[];for(var f,h=d.subplotsRegistry[c].attr,g=[],l=0;l<b.length;l++)f=b[l],e.Plots.traceIs(f,c)&&-1===g.indexOf(f[h])&&g.push(f[h]);return g};d.getSubplotData=function(b,c,f){if(void 0===d.subplotsRegistry[c])return[];for(var h,g=d.subplotsRegistry[c].attr,l=[],p=0;p<b.length;p++)if(h=b[p],"gl2d"===c&&d.traceIs(h,"gl2d")){var m=e.Axes.subplotMatch,t="x"+f.match(m)[1],m="y"+f.match(m)[2];h[g[0]]===t&&h[g[1]]===m&&l.push(h)}else h[g]===f&&l.push(h);return l};d.redrawText=function(b){return b._fullLayout._hasGL3D||
b.data&&b.data[0]&&b.data[0].r?void 0:new Promise(function(c){setTimeout(function(){e.Annotations.drawAll(b);e.Legend.draw(b);(b.calcdata||[]).forEach(function(b){b[0]&&b[0].t&&b[0].t.cb&&b[0].t.cb()});c(d.previousPromises(b))},300)})};d.resize=function(b){b&&"none"!==f.select(b).style("display")&&(b._redrawTimer&&clearTimeout(b._redrawTimer),b._redrawTimer=setTimeout(function(){if((b._fullLayout||{}).autosize){var c=b.changed;b.autoplay=!0;e.relayout(b,{autosize:!0});b.changed=c}},100))};d.previousPromises=
function(b){return(b._promises||[]).length?Promise.all(b._promises).then(function(){b._promises=[]}):void 0};d.addLinks=function(b){var d=b._fullLayout,h=d._paper.selectAll("text.js-plot-link-container").data([0]);h.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:e.Color.defaultLine,"pointer-events":"all"}).each(function(){var b=f.select(this);b.append("tspan").classed("js-link-to-tool",!0);b.append("tspan").classed("js-link-spacer",
!0);b.append("tspan").classed("js-sourcelinks",!0)});var g=h.node(),l={y:d._paper.attr("height")-9};g&&g.offsetParent&&g.getComputedTextLength()>=d.width-20?(l["text-anchor"]="start",l.x=5):(l["text-anchor"]="end",l.x=d._paper.attr("width")-7);h.attr(l);d=h.select(".js-link-to-tool");g=h.select(".js-link-spacer");h=h.select(".js-sourcelinks");b._context.showSources&&b._context.showSources(b);b._context.showLink&&c(b,d);g.text(d.text()&&h.text()?" - ":"")};d.sendDataToCloud=function(b){b.emit("plotly_beforeexport");
var c=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",e=f.select(b).append("div").attr("id","hiddenform").style("display","none"),c=e.append("form").attr({action:c+"/external",method:"post",target:"_blank"});return c.append("input").attr({type:"text",name:"data"}).node().value=d.graphJson(b,!1,"keepdata"),c.node().submit(),e.remove(),b.emit("plotly_afterexport"),!1};d.supplyDefaults=function(b){var c,f,h,g;h=b._fullLayout||{};g=b._fullLayout={};var p=b.layout||{},m=b._fullData||[],
t=b._fullData=[],v=b.data||[],w=b._modules=[];d.supplyLayoutGlobalDefaults(p,g);g._dataLength=v.length;for(c=0;c<v.length;c++)f=v[c],f=d.supplyDataDefaults(f,c,g),t.push(f),d.traceIs(f,"cartesian")?g._hasCartesian=!0:d.traceIs(f,"gl3d")?g._hasGL3D=!0:d.traceIs(f,"geo")?g._hasGeo=!0:d.traceIs(f,"pie")?g._hasPie=!0:d.traceIs(f,"gl2d")?g._hasGL2D=!0:"r"in f&&(g._hasPolar=!0),(f=f._module)&&-1===w.indexOf(f)&&w.push(f);for(c=0;c<w.length;c++)f=w[c],f.cleanData&&f.cleanData(t);if(m.length===v.length)for(c=
0;c<t.length;c++)l(t[c],m[c]);d.supplyLayoutModuleDefaults(p,g,t);p=d.getSubplotIds(h,"gl3d");for(m=0;m<p.length;m++)c=p[m],!g[c]&&h[c]._scene&&h[c]._scene.destroy();l(g,h);d.doAutoMargin(b);h=e.Axes.list(b);for(c=0;c<h.length;c++)g=h[c],g._td=b,g.setScale();if((b.calcdata||[]).length===t.length)for(c=0;c<t.length;c++)f=t[c],(b.calcdata[c][0]||{}).trace=f};d.supplyDataDefaults=function(b,c,f){function h(c,f){return e.Lib.coerce(b,l,d.attributes,c,f)}function g(c,f){return d.traceIs(l,c)?e.Lib.coerce(b,
l,d.subplotsRegistry[c].attributes,f):void 0}var l={},p=e.Color.defaults[c%e.Color.defaults.length];l.index=c;var m,t=h("visible");return h("type"),h("uid"),g("gl3d","scene"),g("geo","geo"),(t||void 0)&&(m=d.getModule(l),l._module=m),t&&h("hoverinfo",1===f._dataLength?"x+y+z+text":void 0),m&&t&&m.supplyDefaults(b,l,p,f),t&&(h("name","trace "+c),d.traceIs(l,"noOpacity")||h("opacity"),g("cartesian","xaxis"),g("cartesian","yaxis"),g("gl2d","xaxis"),g("gl2d","yaxis"),d.traceIs(l,"showLegend")&&(h("showlegend"),
h("legendgroup"))),l._input=b,l};d.supplyLayoutGlobalDefaults=function(b,c){function f(h,g){return e.Lib.coerce(b,c,d.layoutAttributes,h,g)}var h=e.Lib.coerceFont(f,"font");f("title");e.Lib.coerceFont(f,"titlefont",{family:h.family,size:Math.round(1.4*h.size),color:h.color});h=f("autosize",b.width&&b.height?!1:"initial");f("width");f("height");f("margin.l");f("margin.r");f("margin.t");f("margin.b");f("margin.pad");f("margin.autoexpand");"initial"!==h&&d.sanitizeMargins(c);f("paper_bgcolor");f("separators");
f("hidesources");f("smith");f("_hasCartesian");f("_hasGL3D");f("_hasGeo");f("_hasPie");f("_hasGL2D")};d.supplyLayoutModuleDefaults=function(b,c,d){var f,h,g="Axes Annotations Shapes Fx Bar Box Gl3dLayout GeoLayout Pie Legend".split(" ");for(f=0;f<g.length;f++)h=g[f],e[h]&&e[h].supplyLayoutDefaults(b,c,d)};d.purge=function(b){var c=b._fullLayout||{};void 0!==c._glcontainer&&c._glcontainer.remove();void 0!==c._geocontainer&&c._geocontainer.remove();c._modeBar&&c._modeBar.destroy();delete b.data;delete b.layout;
delete b._fullData;delete b._fullLayout;delete b.calcdata;delete b.framework;delete b.empty;delete b.fid;delete b.undoqueue;delete b.undonum;delete b.autoplay;delete b.changed;delete b._modules;delete b._tester;delete b._testref;delete b._promises;delete b._redrawTimer;delete b._replotting;delete b.firstscatter;delete b.hmlumcount;delete b.hmpixcount;delete b.numboxes;delete b._hoverTimer;delete b._lastHoverTime;b.removeAllListeners&&b.removeAllListeners()};d.style=function(b){for(var c=b._modules.concat(e.ErrorBars),
d=0;d<c.length;d++){var f=c[d];f.style&&f.style(b)}};d.sanitizeMargins=function(b){if(b&&b.margin){var c,d=b.width,e=b.height;b=b.margin;var f=e-(b.t+b.b);0>d-(b.l+b.r)&&(c=(d-1)/(b.l+b.r),b.l=Math.floor(c*b.l),b.r=Math.floor(c*b.r));0>f&&(c=(e-1)/(b.t+b.b),b.t=Math.floor(c*b.t),b.b=Math.floor(c*b.b))}};d.autoMargin=function(b,c,e){var f=b._fullLayout;if(f._pushmargin||(f._pushmargin={}),!1!==f.margin.autoexpand){if(e){var h=e.pad||12;e.l+e.r>.5*f.width&&(e.l=e.r=0);e.b+e.t>.5*f.height&&(e.b=e.t=
0);f._pushmargin[c]={l:{val:e.x,size:e.l+h},r:{val:e.x,size:e.r+h},b:{val:e.y,size:e.b+h},t:{val:e.y,size:e.t+h}}}else delete f._pushmargin[c];b._replotting||d.doAutoMargin(b)}};d.doAutoMargin=function(b){var c=b._fullLayout;c._size||(c._size={});c._pushmargin||(c._pushmargin={});var d=c._size,f=JSON.stringify(d),h=Math.max(c.margin.l||0,0),g=Math.max(c.margin.r||0,0),l=Math.max(c.margin.t||0,0),p=Math.max(c.margin.b||0,0),m=c._pushmargin;return!1!==c.margin.autoexpand&&(m.base={l:{val:0,size:h},
r:{val:1,size:g},t:{val:1,size:l},b:{val:0,size:p}},Object.keys(m).forEach(function(b){var d=m[b].l||{};b=m[b].b||{};var e=d.val,f=d.size,k=b.val,t=b.size;Object.keys(m).forEach(function(b){if(v(f)&&m[b].r){var d=m[b].r.val,u=m[b].r.size;if(d>e){var w=(f*d+(u-c.width)*e)/(d-e),d=(u*(1-e)+(f-c.width)*(1-d))/(d-e);0<=w&&0<=d&&w+d>h+g&&(h=w,g=d)}}v(t)&&m[b].t&&(w=m[b].t.val,d=m[b].t.size,w>k&&(b=(t*w+(d-c.height)*k)/(w-k),w=(d*(1-k)+(t-c.height)*(1-w))/(w-k),0<=b&&0<=w&&b+w>p+l&&(p=b,l=w)))})})),d.l=
Math.round(h),d.r=Math.round(g),d.t=Math.round(l),d.b=Math.round(p),d.p=Math.round(c.margin.pad),d.w=Math.round(c.width)-d.l-d.r,d.h=Math.round(c.height)-d.t-d.b,b._replotting||"{}"===f||f===JSON.stringify(c._size)?void 0:e.plot(b)};d.graphJson=function(b,c,f,h,g){function l(b){if("function"==typeof b)return null;if(e.Lib.isPlainObject(b)){var c,d,h={};for(c in b)if("function"!=typeof b[c]&&-1===["_","["].indexOf(c.charAt(0))){if("keepdata"===f){if("src"===c.substr(c.length-3))continue}else if("keepstream"===
f){if(d=b[c+"src"],"string"==typeof d&&0<d.indexOf(":")&&!e.Lib.isPlainObject(b.stream))continue}else if("keepall"!==f&&(d=b[c+"src"],"string"==typeof d&&0<d.indexOf(":")))continue;h[c]=l(b[c])}return h}return Array.isArray(b)?b.map(l):b&&b.getTime?e.Lib.ms2DateTime(b):b}(g&&c&&!b._fullData||g&&!c&&!b._fullLayout)&&d.supplyDefaults(b);var p=g?b._fullLayout:b.layout;g={data:((g?b._fullData:b.data)||[]).map(function(b){b=l(b);return c&&delete b.fit,b})};return c||(g.layout=l(p)),b.framework&&b.framework.isPolar&&
(g=b.framework.getConfig()),"object"===h?g:JSON.stringify(g)}},{"../plotly":348,"./attributes":349,"./font_attributes":354,"./layout_attributes":381,d3:53,"fast-isnumeric":58}],383:[function(b,m,g){b=b("../../traces/scatter/attributes");g=b.marker;m.exports={r:b.r,t:b.t,marker:{color:g.color,size:g.size,symbol:g.symbol,opacity:g.opacity}}},{"../../traces/scatter/attributes":455}],384:[function(b,m,g){function h(b,e){return c({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",
values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}})}g=b("../cartesian/layout_attributes");var c=b("../../lib/extend").extendFlat;b=c({},g.domain,{});m.exports={radialaxis:h("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:b,orientation:{valType:"number"}}),angularaxis:h("angular",{range:{valType:"info_array",items:[{valType:"number",
dflt:0},{valType:"number",dflt:360}]},domain:b}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}}},{"../../lib/extend":328,"../cartesian/layout_attributes":353}],385:[function(b,m,g){g=b("../../plotly");var h=b("d3"),c=m.exports={version:"0.2.2",manager:b("./micropolar_manager")},l=g.Lib.extendDeepAll;c.Axis=function(){function b(e){g=e||g;e=m.data;var k=m.layout;return("string"==typeof g||g.nodeName)&&(g=h.select(g)),g.datum(e).each(function(b,
e){var g=b.slice();w={data:c.util.cloneJson(g),layout:c.util.cloneJson(k)};var m=0;g.forEach(function(b,c){b.color||(b.color=k.defaultColorRange[m],m=(m+1)%k.defaultColorRange.length);b.strokeColor||(b.strokeColor="LinePlot"===b.geometry?b.color:h.rgb(b.color).darker().toString());w.data[c].color=b.color;w.data[c].strokeColor=b.strokeColor;w.data[c].strokeDash=b.strokeDash;w.data[c].strokeSize=b.strokeSize});var g=g.filter(function(b,c){var d=b.visible;return"undefined"==typeof d||!0===d}),r=!1,t=
g.map(function(b,c){return r=r||"undefined"!=typeof b.groupId,b});if(r)var u=[],g=h.nest().key(function(b,c){return"undefined"!=typeof b.groupId?b.groupId:"unstacked"}).entries(t).map(function(b,d){if("unstacked"===b.key)return b.values;var e=b.values[0].r.map(function(b,c){return 0});return b.values.forEach(function(b,d,f){b.yStack=[e];u.push(e);e=c.util.sumArrays(b.r,e)}),b.values}),g=h.merge(g);g.forEach(function(b,c){b.t=Array.isArray(b.t[0])?b.t:[b.t];b.r=Array.isArray(b.r[0])?b.r:[b.r]});var v=
Math.min(k.width-k.margin.left-k.margin.right,k.height-k.margin.top-k.margin.bottom)/2,v=Math.max(10,v),x=[k.margin.left+v,k.margin.top+v],t=r?[0,h.max(c.util.sumArrays(c.util.arrayLast(g).r[0],c.util.arrayLast(u)))]:h.extent(c.util.flattenArray(g.map(function(b,c){return b.r})));k.radialAxis.domain!=c.DATAEXTENT&&(t[0]=0);d=h.scale.linear().domain(k.radialAxis.domain!=c.DATAEXTENT&&k.radialAxis.domain?k.radialAxis.domain:t).range([0,v]);w.layout.radialAxis.domain=d.domain();var y,H=c.util.flattenArray(g.map(function(b,
c){return b.t})),K="string"==typeof H[0];K&&(H=c.util.deduplicate(H),y=H.slice(),H=h.range(H.length),g=g.map(function(b,c){return b.t=[H],r&&(b.yStack=b.yStack),b}));var O=g.filter(function(b,c){return"LinePlot"===b.geometry||"DotPlot"===b.geometry}).length===g.length,t=null===k.needsEndSpacing?K||!O:k.needsEndSpacing,L=k.angularAxis.domain&&k.angularAxis.domain!=c.DATAEXTENT&&!K&&0<=k.angularAxis.domain[0]?k.angularAxis.domain:h.extent(H),P=Math.abs(H[1]-H[0]);O&&!K&&(P=0);L=L.slice();t&&K&&(L[1]+=
P);O=k.angularAxis.ticksCount||4;8<O&&(O=O/(O/8)+O%8);k.angularAxis.ticksStep&&(O=(L[1]-L[0])/O);O=k.angularAxis.ticksStep||(L[1]-L[0])/(O*(k.minorTicks+1));y&&(O=Math.max(Math.round(O),1));L[2]||(L[2]=O);O=h.range.apply(this,L);if(O=O.map(function(b,c){return parseFloat(b.toPrecision(12))}),p=h.scale.linear().domain(L.slice(0,2)).range("clockwise"===k.direction?[0,360]:[360,0]),w.layout.angularAxis.domain=p.domain(),w.layout.angularAxis.endPadding=t?P:0,f=h.select(this).select("svg.chart-root"),
"undefined"==typeof f||f.empty())t=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",
"application/xml"),t=this.appendChild(this.ownerDocument.importNode(t.documentElement,!0)),f=h.select(t);f.select(".guides-group").style({"pointer-events":"none"});f.select(".angular.axis-group").style({"pointer-events":"none"});f.select(".radial.axis-group").style({"pointer-events":"none"});var t=f.select(".chart-group"),L={fill:"none",stroke:k.tickColor},M={"font-size":k.font.size,"font-family":k.font.family,fill:k.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(b,
c){return" "+b+" 0 "+k.font.outlineColor}).join(",")};if(k.showLegend){var P=f.select(".legend-group").attr({transform:"translate("+[v,k.margin.top]+")"}).style({display:"block"}),Q=g.map(function(b,d){var e=c.util.cloneJson(b);return e.symbol="DotPlot"===b.geometry?b.dotType||"circle":"LinePlot"!=b.geometry?"square":"line",e.visibleInLegend="undefined"==typeof b.visibleInLegend||b.visibleInLegend,e.color="LinePlot"===b.geometry?b.strokeColor:b.color,e});c.Legend().config({data:g.map(function(b,c){return b.name||
"Element"+c}),legendConfig:l({},c.Legend.defaultConfig().legendConfig,{container:P,elements:Q,reverseOrder:k.legend.reverseOrder})})();Q=P.node().getBBox();v=Math.min(k.width-Q.width-k.margin.left-k.margin.right,k.height-k.margin.top-k.margin.bottom)/2;v=Math.max(10,v);x=[k.margin.left+v,k.margin.top+v];d.range([0,v]);w.layout.radialAxis.domain=d.domain();P.attr("transform","translate("+[x[0]+v,x[1]-v]+")")}else P=f.select(".legend-group").style({display:"none"});f.attr({width:k.width,height:k.height}).style({opacity:k.opacity});
t.attr("transform","translate("+x+")").style({cursor:"crosshair"});var T=[(k.width-(k.margin.left+k.margin.right+2*v+(Q?Q.width:0)))/2,(k.height-(k.margin.top+k.margin.bottom+2*v))/2];if(T[0]=Math.max(0,T[0]),T[1]=Math.max(0,T[1]),f.select(".outer-group").attr("transform","translate("+T+")"),k.title){var Q=f.select("g.title-group text").style(M).text(k.title),R=Q.node().getBBox();Q.attr({x:x[0]-R.width/2,y:x[1]-v-20})}Q=f.select(".radial.axis-group");k.radialAxis.gridLinesVisible&&(R=Q.selectAll("circle.grid-circle").data(d.ticks(5)),
R.enter().append("circle").attr({"class":"grid-circle"}).style(L),R.attr("r",d),R.exit().remove());Q.select("circle.outside-circle").attr({r:v}).style(L);var S=f.select("circle.background-circle").attr({r:v}).style({fill:k.backgroundColor,stroke:k.stroke});k.radialAxis.visible&&(R=h.svg.axis().scale(d).ticks(5).tickSize(5),Q.call(R).attr({transform:"rotate("+k.radialAxis.orientation+")"}),Q.selectAll(".domain").style(L),Q.selectAll("g>text").text(function(b,c){return this.textContent+k.radialAxis.ticksSuffix}).style(M).style({"text-anchor":"start"}).attr({x:0,
y:0,dx:0,dy:0,transform:function(b,c){return"horizontal"===k.radialAxis.tickOrientation?"rotate("+-k.radialAxis.orientation+") translate("+[0,M["font-size"]]+")":"translate("+[0,M["font-size"]]+")"}}),Q.selectAll("g>line").style({stroke:"black"}));Q=f.select(".angular.axis-group").selectAll("g.angular-tick").data(O);O=Q.enter().append("g").classed("angular-tick",!0);Q.attr({transform:function(b,c){return"rotate("+(p(b)%360+k.orientation)+")"}}).style({display:k.angularAxis.visible?"block":"none"});
Q.exit().remove();O.append("line").classed("grid-line",!0).classed("major",function(b,c){return 0==c%(k.minorTicks+1)}).classed("minor",function(b,c){return 0!=c%(k.minorTicks+1)}).style(L);O.selectAll(".minor").style({stroke:k.minorTickColor});Q.select("line.grid-line").attr({x1:k.tickLength?v-k.tickLength:0,x2:v}).style({display:k.angularAxis.gridLinesVisible?"block":"none"});O.append("text").classed("axis-text",!0).style(M);Q=Q.select("text.axis-text").attr({x:v+k.labelOffset,dy:".35em",transform:function(b,
c){var d=p(b)%360+k.orientation,e=v+k.labelOffset,f=k.angularAxis.tickOrientation;return"horizontal"==f?"rotate("+-d+" "+e+" 0)":"radial"==f?270>d&&90<d?"rotate(180 "+e+" 0)":null:"rotate("+(180>=d&&0<d?-90:90)+" "+e+" 0)"}}).style({"text-anchor":"middle",display:k.angularAxis.labelsVisible?"block":"none"}).text(function(b,c){return 0!=c%(k.minorTicks+1)?"":y?y[b]+k.angularAxis.ticksSuffix:b+k.angularAxis.ticksSuffix}).style(M);k.angularAxis.rewriteTicks&&Q.text(function(b,c){return 0!=c%(k.minorTicks+
1)?"":k.angularAxis.rewriteTicks(this.textContent,c)});Q=h.max(t.selectAll(".angular-tick text")[0].map(function(b,c){return b.getCTM().e+b.getBBox().width}));P.attr({transform:"translate("+[v+Q,k.margin.top]+")"});var Q=0<f.select("g.geometry-group").selectAll("g").size(),X=f.select("g.geometry-group").selectAll("g.geometry").data(g);if(X.enter().append("g").attr({"class":function(b,c){return"geometry geometry"+c}}),X.exit().remove(),g[0]||Q){var V=[];g.forEach(function(b,c){var e={};e.radialScale=
d;e.angularScale=p;e.container=X.filter(function(b,d){return d==c});e.geometry=b.geometry;e.orientation=k.orientation;e.direction=k.direction;e.index=c;V.push({data:b,geometryConfig:e})});var Y=[];h.nest().key(function(b,c){return"undefined"!=typeof b.data.groupId||"unstacked"}).entries(V).forEach(function(b,c){"unstacked"===b.key?Y=Y.concat(b.values.map(function(b,c){return[b]})):Y.push(b.values)});Y.forEach(function(b,d){var e;e=Array.isArray(b)?b[0].geometryConfig.geometry:b.geometryConfig.geometry;
var f=b.map(function(b,d){return l(c[e].defaultConfig(),b)});c[e]().config(f)()})}var W,Z,U=f.select(".guides-group"),g=f.select(".tooltips-group"),ea=c.tooltipPanel().config({container:g,fontSize:8})(),ga=c.tooltipPanel().config({container:g,fontSize:8})(),ia=c.tooltipPanel().config({container:g,hasTick:!0})();if(!K){var ha=U.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});t.on("mousemove.angular-guide",function(b,d){var e=c.util.getMousePos(S).angle;ha.attr({x2:-v,
transform:"rotate("+e+")"}).style({opacity:.5});W=p.invert((e+180+360-k.orientation)%360);e=c.util.convertToCartesian(v+12,e+180);ea.text(c.util.round(W)).move([e[0]+x[0],e[1]+x[1]])}).on("mouseout.angular-guide",function(b,c){U.select("line").style({opacity:0})})}var na=U.select("circle").style({stroke:"grey",fill:"none"});t.on("mousemove.radial-guide",function(b,e){var f=c.util.getMousePos(S).radius;na.attr({r:f}).style({opacity:.5});Z=d.invert(c.util.getMousePos(S).radius);f=c.util.convertToCartesian(f,
k.radialAxis.orientation);ga.text(c.util.round(Z)).move([f[0]+x[0],f[1]+x[1]])}).on("mouseout.radial-guide",function(b,c){na.style({opacity:0});ia.hide();ea.hide();ga.hide()});f.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(b,d){var e=h.select(this),g=e.style("fill"),k="black",k=e.style("opacity")||1;if(e.attr({"data-opacity":k}),"none"!=g){e.attr({"data-fill":g});k=h.hsl(g).darker().toString();e.style({fill:k,opacity:1});e=c.util.round(b[0]);g=c.util.round(b[1]);K&&(e=y[b[0]]);
var e="t: "+e+", r: "+g,g=this.getBoundingClientRect(),l=f.node().getBoundingClientRect(),g=[g.left+g.width/2-T[0]-l.left,g.top+g.height/2-T[1]-l.top];ia.config({color:k}).text(e);ia.move(g)}else g=e.style("stroke"),e.attr({"data-stroke":g}),k=h.hsl(g).darker().toString(),e.style({stroke:k,opacity:1})}).on("mousemove.tooltip",function(b,c){return 0!=h.event.which?!1:void(h.select(this).attr("data-fill")&&ia.show())}).on("mouseout.tooltip",function(b,c){ia.hide();var d=h.select(this),e=d.attr("data-fill");
e?d.style({fill:e,opacity:d.attr("data-opacity")}):d.style({stroke:d.attr("data-stroke"),opacity:d.attr("data-opacity")})})}),r}var f,g,d,p,m={data:[],layout:{}},x={},w={},u=h.dispatch("hover"),r={};return r.render=function(c){return b(c),this},r.config=function(b){if(!arguments.length)return m;var d=c.util.cloneJson(b);return d.data.forEach(function(b,d){m.data[d]||(m.data[d]={});l(m.data[d],c.Axis.defaultConfig().data[0]);l(m.data[d],b)}),l(m.layout,c.Axis.defaultConfig().layout),l(m.layout,d.layout),
this},r.getLiveConfig=function(){return w},r.getinputConfig=function(){return x},r.radialScale=function(b){return d},r.angularScale=function(b){return p},r.svg=function(){return f},h.rebind(r,u,"on"),r};c.Axis.defaultConfig=function(b,c){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:h.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,
right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",
minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};c.util={};c.DATAEXTENT="dataExtent";c.AREA="AreaChart";c.LINE="LinePlot";c.DOT="DotPlot";c.BAR="BarChart";c.util._override=function(b,c){for(var h in b)h in c&&(c[h]=b[h])};c.util._extend=function(b,c){for(var h in b)c[h]=b[h]};c.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};c.util.dataFromEquation2=function(b,c){var g=c||6;return h.range(0,
360+g,g).map(function(c,f){var h=b(c*Math.PI/180);return[c,h]})};c.util.dataFromEquation=function(b,c,g){c=c||6;var d=[],l=[];h.range(0,360+c,c).forEach(function(c,f){var h=b(c*Math.PI/180);d.push(c);l.push(h)});c={t:d,r:l};return g&&(c.name=g),c};c.util.ensureArray=function(b,c){if("undefined"==typeof b)return null;var g=[].concat(b);return h.range(c).map(function(b,c){return g[c]||g[0]})};c.util.fillArrays=function(b,f,h){return f.forEach(function(d,f){b[d]=c.util.ensureArray(b[d],h)}),b};c.util.cloneJson=
function(b){return JSON.parse(JSON.stringify(b))};c.util.validateKeys=function(b,c){"string"==typeof c&&(c=c.split("."));var h=c.shift();return b[h]&&(!c.length||objHasKeys(b[h],c))};c.util.sumArrays=function(b,c){return h.zip(b,c).map(function(b,c){return h.sum(b)})};c.util.arrayLast=function(b){return b[b.length-1]};c.util.arrayEqual=function(b,c){for(var h=Math.max(b.length,c.length,1);0<=h--&&b[h]===c[h];);return-2===h};c.util.flattenArray=function(b){for(var f=[];!c.util.arrayEqual(f,b);)f=b,
b=[].concat.apply([],b);return b};c.util.deduplicate=function(b){return b.filter(function(b,c,d){return d.indexOf(b)==c})};c.util.convertToCartesian=function(b,c){var h=c*Math.PI/180;return[b*Math.cos(h),b*Math.sin(h)]};c.util.round=function(b,c){var h=Math.pow(10,c||2);return Math.round(b*h)/h};c.util.getMousePos=function(b){b=h.mouse(b.node());var c=b[0],g=b[1],d={};return d.x=c,d.y=g,d.pos=b,d.angle=180*(Math.atan2(g,c)+Math.PI)/Math.PI,d.radius=Math.sqrt(c*c+g*g),d};c.util.duplicatesCount=function(b){for(var c,
h={},d={},g=0,l=b.length;l>g;g++)c=b[g],c in h?(h[c]++,d[c]=h[c]):h[c]=1;return d};c.util.duplicates=function(b){return Object.keys(c.util.duplicatesCount(b))};c.util.translator=function(b,c,h,d){d&&(d=h.slice(),h=c,c=d);var g=c.reduce(function(b,c){return"undefined"!=typeof b?b[c]:void 0},b);"undefined"!=typeof g&&(c.reduce(function(b,d,e){return"undefined"!=typeof b?(e===c.length-1&&delete b[d],b[d]):void 0},b),h.reduce(function(b,c,d){return"undefined"==typeof b[c]&&(b[c]={}),d===h.length-1&&(b[c]=
g),b[c]},b))};c.PolyChart=function(){function b(){var c=f[0].geometryConfig,e=c.container;"string"==typeof e&&(e=h.select(e));e.datum(f).each(function(b,e){var f=!!b[0].data.yStack,g=b.map(function(b,c){return f?h.zip(b.data.t[0],b.data.r[0],b.data.yStack[0]):h.zip(b.data.t[0],b.data.r[0])}),l=c.angularScale,k=c.radialScale.domain()[0],q={bar:function(d,e,f){f=b[f].data;e=c.radialScale(d[1])-c.radialScale(0);d=c.radialScale(d[2]||0);f=f.barWidth;h.select(this).attr({"class":"mark bar",d:"M"+[[e+d,
-f/2],[e+d,f/2],[d,f/2],[d,-f/2]].join("L")+"Z",transform:function(b,d){return"rotate("+(c.orientation+l(b[0]))+")"}})},dot:function(d,e,f){var g=d[2]?[d[0],d[1]+d[2]]:d;d=h.svg.symbol().size(b[f].data.dotSize).type(b[f].data.dotType)(d,e);h.select(this).attr({"class":"mark dot",d:d,transform:function(b,d){var e=c.radialScale(g[1]),f=(c.angularScale(g[0])+c.orientation)*Math.PI/180;return"translate("+[e*Math.cos(f),e*Math.sin(f)]+")"}})}},m=h.svg.line.radial().interpolate(b[0].data.lineInterpolation).radius(function(b){return c.radialScale(b[1])}).angle(function(b){return c.angularScale(b[0])*
Math.PI/180});q.line=function(d,e,f){var k=d[2]?g[f].map(function(b,c){return[b[0],b[1]+b[2]]}):g[f];if(h.select(this).each(q.dot).style({opacity:function(c,d){return+b[f].data.dotVisible},fill:B.stroke(d,e,f)}).attr({"class":"mark dot"}),!(0<e)){var l=h.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path");l.attr({"class":"line",d:m(k),transform:function(b,d){return"rotate("+(c.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(b,c){return B.fill(d,e,
f)},"fill-opacity":0,stroke:function(b,c){return B.stroke(d,e,f)},"stroke-width":function(b,c){return B["stroke-width"](d,e,f)},"stroke-dasharray":function(b,c){return B["stroke-dasharray"](d,e,f)},opacity:function(b,c){return B.opacity(d,e,f)},display:function(b,c){return B.display(d,e,f)}})}};var t=c.angularScale.range(),v=Math.abs(t[1]-t[0])/g[0].length*Math.PI/180,C=h.svg.arc().startAngle(function(b){return-v/2}).endAngle(function(b){return v/2}).innerRadius(function(b){return c.radialScale(k+
(b[2]||0))}).outerRadius(function(b){return c.radialScale(k+(b[2]||0))+c.radialScale(b[1])});q.arc=function(b,d,e){h.select(this).attr({"class":"mark arc",d:C,transform:function(b,d){return"rotate("+(c.orientation+l(b[0])+90)+")"}})};var B={fill:function(c,d,e){return b[e].data.color},stroke:function(c,d,e){return b[e].data.strokeColor},"stroke-width":function(c,d,e){return b[e].data.strokeSize+"px"},"stroke-dasharray":function(c,e,f){return d[b[f].data.strokeDash]},opacity:function(c,d,e){return b[e].data.opacity},
display:function(c,d,e){return"undefined"==typeof b[e].data.visible||b[e].data.visible?"block":"none"}},t=h.select(this).selectAll("g.layer").data(g);t.enter().append("g").attr({"class":"layer"});var G=t.selectAll("path.mark").data(function(b,c){return b});G.enter().append("path").attr({"class":"mark"});G.style(B).each(q[c.geometryType]);G.exit().remove();t.exit().remove()})}var f=[c.PolyChart.defaultConfig()],g=h.dispatch("hover"),d={solid:"none",dash:[5,2],dot:[2,5]};return b.config=function(b){return arguments.length?
(b.forEach(function(b,d){f[d]||(f[d]={});l(f[d],c.PolyChart.defaultConfig());l(f[d],b)}),this):f},b.getColorScale=function(){},h.rebind(b,g,"on"),b};c.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,
container:"body",radialScale:null,angularScale:null,colorScale:h.scale.category20()}}};c.BarChart=function(){return c.PolyChart()};c.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};c.AreaChart=function(){return c.PolyChart()};c.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};c.DotPlot=function(){return c.PolyChart()};c.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};c.LinePlot=function(){return c.PolyChart()};
c.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};c.Legend=function(){function b(){var c=f.legendConfig,g=f.data.map(function(b,e){return[].concat(b).map(function(b,f){var h=l({},c.elements[e]);return h.name=b,h.color=[].concat(c.elements[e].color)[f],h})}),m=h.merge(g),m=m.filter(function(b,e){return c.elements[e]&&(c.elements[e].visibleInLegend||"undefined"==typeof c.elements[e].visibleInLegend)});c.reverseOrder&&(m=m.reverse());var v=c.container;("string"==typeof v||
v.nodeName)&&(v=h.select(v));var w=m.map(function(b,c){return b.color}),u=c.fontSize,r=(g=null==c.isContinuous?"number"==typeof m[0]:c.isContinuous)?c.height:u*m.length,v=v.classed("legend-group",!0).selectAll("svg").data([0]),y=v.enter().append("svg").attr({width:300,height:r+u,xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});y.append("g").classed("legend-axis",!0);y.append("g").classed("legend-marks",!0);var y=h.range(m.length),k=h.scale[g?"linear":
"ordinal"]().domain(y).range(w),q=h.scale[g?"linear":"ordinal"]().domain(y)[g?"range":"rangePoints"]([0,r]);g?(r=v.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(w),r.enter().append("stop"),r.attr({offset:function(b,c){return c/(w.length-1)*100+"%"}}).style({"stop-color":function(b,c){return b}}),v.append("rect").classed("legend-mark",!0).attr({height:c.height,width:c.colorBandWidth,fill:"url(#grad1)"})):
(r=v.select(".legend-marks").selectAll("path.legend-mark").data(m),r.enter().append("path").classed("legend-mark",!0),r.attr({transform:function(b,c){return"translate("+[u/2,q(c)+u/2]+")"},d:function(b,c){var d=b.symbol,e=3*u;return"line"===d?"M"+[[-u/2,-u/12],[u/2,-u/12],[u/2,u/12],[-u/2,u/12]]+"Z":-1!=h.svg.symbolTypes.indexOf(d)?h.svg.symbol().type(d).size(e)():h.svg.symbol().type("square").size(e)()},fill:function(b,c){return k(c)}}),r.exit().remove());r=h.svg.axis().scale(q).orient("right");
v=v.select("g.legend-axis").attr({transform:"translate("+[g?c.colorBandWidth:u,u/2]+")"}).call(r);return v.selectAll(".domain").style({fill:"none",stroke:"none"}),v.selectAll("line").style({fill:"none",stroke:g?c.textColor:"none"}),v.selectAll("text").style({fill:c.textColor,"font-size":c.fontSize}).text(function(b,c){return m[c].name}),b}var f=c.Legend.defaultConfig(),g=h.dispatch("hover");return b.config=function(b){return arguments.length?(l(f,b),this):f},h.rebind(b,g,"on"),b};c.Legend.defaultConfig=
function(b,c){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};c.tooltipPanel=function(){var b,f,g,d={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},p="tooltip-"+c.tooltipPanel.uid++,m=function(){b=d.container.selectAll("g."+p).data([0]);var c=b.enter().append("g").classed(p,
!0).style({"pointer-events":"none",display:"none"});return g=c.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),f=c.append("text").attr({dx:d.padding+10,dy:.3*+d.fontSize}),m};return m.text=function(c){var l=h.hsl(d.color).l,p=.5<=l?"#aaa":"white";c=c||"";f.style({fill:.5<=l?"black":"white","font-size":d.fontSize+"px"}).text(c);l=d.padding;c=f.node().getBBox();var p={fill:d.color,stroke:p,"stroke-width":"2px"},r=c.width+2*l+10;c=c.height+2*l;return g.attr({d:"M"+[[10,-c/2],
[10,-c/4],[d.hasTick?0:10,0],[10,c/4],[10,c/2],[r,c/2],[r,-c/2]].join("L")+"Z"}).style(p),b.attr({transform:"translate("+[10,-c/2+2*l]+")"}),b.style({display:"block"}),m},m.move=function(c){return b?(b.attr({transform:"translate("+[c[0],c[1]]+")"}).style({display:"block"}),m):void 0},m.hide=function(){return b?(b.style({display:"none"}),m):void 0},m.show=function(){return b?(b.style({display:"block"}),m):void 0},m.config=function(b){return l(d,b),m},m};c.tooltipPanel.uid=1;c.adapter={};c.adapter.plotly=
function(){var b={};return b.convert=function(b,e){var d={};if(b.data&&(d.data=b.data.map(function(b,d){var f=l({},b);return[[f,["marker","color"],["color"]],[f,["marker","opacity"],["opacity"]],[f,["marker","line","color"],["strokeColor"]],[f,["marker","line","dash"],["strokeDash"]],[f,["marker","line","width"],["strokeSize"]],[f,["marker","symbol"],["dotType"]],[f,["marker","size"],["dotSize"]],[f,["marker","barWidth"],["barWidth"]],[f,["line","interpolation"],["lineInterpolation"]],[f,["showlegend"],
["visibleInLegend"]]].forEach(function(b,d){c.util.translator.apply(null,b.concat(e))}),e||delete f.marker,e&&delete f.groupId,e?("LinePlot"===f.geometry?(f.type="scatter",!0===f.dotVisible?(delete f.dotVisible,f.mode="lines+markers"):f.mode="lines"):"DotPlot"===f.geometry?(f.type="scatter",f.mode="markers"):"AreaChart"===f.geometry?f.type="area":"BarChart"===f.geometry&&(f.type="bar"),delete f.geometry):("scatter"===f.type?"lines"===f.mode?f.geometry="LinePlot":"markers"===f.mode?f.geometry="DotPlot":
"lines+markers"===f.mode&&(f.geometry="LinePlot",f.dotVisible=!0):"area"===f.type?f.geometry="AreaChart":"bar"===f.type&&(f.geometry="BarChart"),delete f.mode,delete f.type),f}),!e&&b.layout&&"stack"===b.layout.barmode)){var g=c.util.duplicates(d.data.map(function(b,c){return b.geometry}));d.data.forEach(function(b,c){var e=g.indexOf(b.geometry);-1!=e&&(d.data[c].groupId=e)})}if(b.layout){var m=l({},b.layout);if([[m,["plot_bgcolor"],["backgroundColor"]],[m,["showlegend"],["showLegend"]],[m,["radialaxis"],
["radialAxis"]],[m,["angularaxis"],["angularAxis"]],[m.angularaxis,["showline"],["gridLinesVisible"]],[m.angularaxis,["showticklabels"],["labelsVisible"]],[m.angularaxis,["nticks"],["ticksCount"]],[m.angularaxis,["tickorientation"],["tickOrientation"]],[m.angularaxis,["ticksuffix"],["ticksSuffix"]],[m.angularaxis,["range"],["domain"]],[m.angularaxis,["endpadding"],["endPadding"]],[m.radialaxis,["showline"],["gridLinesVisible"]],[m.radialaxis,["tickorientation"],["tickOrientation"]],[m.radialaxis,
["ticksuffix"],["ticksSuffix"]],[m.radialaxis,["range"],["domain"]],[m.angularAxis,["showline"],["gridLinesVisible"]],[m.angularAxis,["showticklabels"],["labelsVisible"]],[m.angularAxis,["nticks"],["ticksCount"]],[m.angularAxis,["tickorientation"],["tickOrientation"]],[m.angularAxis,["ticksuffix"],["ticksSuffix"]],[m.angularAxis,["range"],["domain"]],[m.angularAxis,["endpadding"],["endPadding"]],[m.radialAxis,["showline"],["gridLinesVisible"]],[m.radialAxis,["tickorientation"],["tickOrientation"]],
[m.radialAxis,["ticksuffix"],["ticksSuffix"]],[m.radialAxis,["range"],["domain"]],[m.font,["outlinecolor"],["outlineColor"]],[m.legend,["traceorder"],["reverseOrder"]],[m,["labeloffset"],["labelOffset"]],[m,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(b,d){c.util.translator.apply(null,b.concat(e))}),e?("undefined"!=typeof m.tickLength&&(m.angularaxis.ticklen=m.tickLength,delete m.tickLength),m.tickColor&&(m.angularaxis.tickcolor=m.tickColor,delete m.tickColor)):(m.angularAxis&&"undefined"!=
typeof m.angularAxis.ticklen&&(m.tickLength=m.angularAxis.ticklen),m.angularAxis&&"undefined"!=typeof m.angularAxis.tickcolor&&(m.tickColor=m.angularAxis.tickcolor)),m.legend&&"boolean"!=typeof m.legend.reverseOrder&&(m.legend.reverseOrder="normal"!=m.legend.reverseOrder),m.legend&&"boolean"==typeof m.legend.traceorder&&(m.legend.traceorder=m.legend.traceorder?"reversed":"normal",delete m.legend.reverseOrder),m.margin&&"undefined"!=typeof m.margin.t){var x=["t","r","b","l","pad"],w=["top","right",
"bottom","left","pad"],u={};h.entries(m.margin).forEach(function(b,c){u[w[x.indexOf(b.key)]]=b.value});m.margin=u}e&&(delete m.needsEndSpacing,delete m.minorTickColor,delete m.minorTicks,delete m.angularaxis.ticksCount,delete m.angularaxis.ticksCount,delete m.angularaxis.ticksStep,delete m.angularaxis.rewriteTicks,delete m.angularaxis.nticks,delete m.radialaxis.ticksCount,delete m.radialaxis.ticksCount,delete m.radialaxis.ticksStep,delete m.radialaxis.rewriteTicks,delete m.radialaxis.nticks);d.layout=
m}return d},b}},{"../../plotly":348,"./micropolar_manager":386,d3:53}],386:[function(b,m,g){var h=b("../../plotly"),c=b("d3"),l=b("./undo_manager"),e=m.exports={},f=h.Lib.extendDeepAll;e.framework=function(b){function d(d,k){return k&&(u=k),c.select(c.select(u).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),g=g?f(g,d):d,x||(x=h.micropolar.Axis()),w=h.micropolar.adapter.plotly().convert(g),x.config(w).render(u),b.data=g.data,b.layout=g.layout,e.fillLayout(b),g}var g,m,x,
w,u,r=new l;return d.isPolar=!0,d.svg=function(){return x.svg()},d.getConfig=function(){return g},d.getLiveConfig=function(){return h.micropolar.adapter.plotly().convert(x.getLiveConfig(),!0)},d.getLiveScales=function(){return{t:x.angularScale(),r:x.radialScale()}},d.setUndoPoint=function(){var b=this,c=h.micropolar.util.cloneJson(g);!function(c,d){r.add({undo:function(){d&&b(d)},redo:function(){b(c)}})}(c,m);m=h.micropolar.util.cloneJson(c)},d.undo=function(){r.undo()},d.redo=function(){r.redo()},
d};e.fillLayout=function(b){var d=c.select(b).selectAll(".plot-container"),e=d.selectAll(".svg-container"),g=b.framework&&b.framework.svg&&b.framework.svg();b._fullLayout=f({width:800,height:600,paper_bgcolor:h.Color.background,_container:d,_paperdiv:e,_paper:g},b.layout)}},{"../../plotly":348,"./undo_manager":387,d3:53}],387:[function(b,m,g){m.exports=function(){function b(c,d){return c?(f=!0,c[d](),f=!1,this):this}var c,g=[],e=-1,f=!1;return{add:function(b){return f?this:(g.splice(e+1,g.length-
e),g.push(b),e=g.length-1,this)},setCallback:function(b){c=b},undo:function(){var f=g[e];return f?(b(f,"undo"),--e,c&&c(f.undo),this):this},redo:function(){var f=g[e+1];return f?(b(f,"redo"),e+=1,c&&c(f.redo),this):this},clear:function(){g=[];e=-1},hasUndo:function(){return-1!==e},hasRedo:function(){return e<g.length-1},getCommands:function(){return g},getPreviousCommand:function(){return g[e-1]},getIndex:function(){return e}}}},{}],388:[function(b,m,g){function h(b){switch(b){case "themes__thumb":b=
{autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":b={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:b={}}return b}var c=b("../plotly"),l=c.Lib.extendFlat,e=c.Lib.extendDeep;m.exports=function(b,g){b.framework&&b.framework.isPolar&&(b=b.framework.getConfig());var d,p=b.layout,m=e([],b.data),p=e({},p,h(g.tileClass));if(g.width&&(p.width=g.width),
g.height&&(p.height=g.height),"thumbnail"===g.tileClass||"themes__thumb"===g.tileClass){p.annotations=[];var x=Object.keys(p);for(d=0;d<x.length;d++)-1<["xaxis","yaxis","zaxis"].indexOf(x[d].slice(0,5))&&(p[x[d]].title="");for(d=0;d<m.length;d++)x=m[d],x.showscale=!1,x.marker&&(x.marker.showscale=!1),"pie"===x.type&&(x.textposition="none")}if(Array.isArray(g.annotations))for(d=0;d<g.annotations.length;d++)p.annotations.push(g.annotations[d]);x=c.Plots.getSubplotIds(p,"gl3d");if(x.length){var w={};
"thumbnail"===g.tileClass&&(w={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(d=0;d<x.length;d++){var u=x[d];l(p[u].xaxis,w);l(p[u].yaxis,w);l(p[u].zaxis,w);p[u]._scene=null}}d=document.createElement("div");g.tileClass&&(d.className=g.tileClass);m={td:d,layout:p,data:m,config:{staticPlot:void 0===g.staticPlot?!0:g.staticPlot,plotGlPixelRatio:void 0===g.plotGlPixelRatio?2:g.plotGlPixelRatio,displaylogo:g.displaylogo||!1,showLink:g.showLink||!1,showTips:g.showTips||!1}};return"transparent"!==
g.setBackground&&(m.config.setBackground=g.setBackground||"opaque"),m.td.defaultLayout=h(g.tileClass),m}},{"../plotly":348}],389:[function(b,m,g){var h=b("../plotly");b={getDelay:function(b){return b._hasGL3D||b._hasGL2D?500:0},getRedrawFunc:function(b){return function(){var g=b._fullLayout;g._hasGL3D||g._hasGL2D||b.data&&b.data[0]&&b.data[0].r||(h.Annotations.drawAll(b),h.Legend.draw(b,g.showlegend),(b.calcdata||[]).forEach(function(b){b[0]&&b[0].t&&b[0].t.cb&&b[0].t.cb()}))}},clone:b("./cloneplot"),
toSVG:b("./tosvg"),svgToImg:b("./svgtoimg"),toImage:b("./toimage")};m.exports=b},{"../plotly":348,"./cloneplot":388,"./svgtoimg":390,"./toimage":391,"./tosvg":392}],390:[function(b,m,g){var h=b("events").EventEmitter;m.exports=function(b){var g=b.emitter?b.emitter:new h,e=window.Image,f=window.Blob,m=b.svg,d=b.format||"png",p=b.canvas,t=p.getContext("2d"),x=new e,w=window.URL||window.webkitURL,e=new f([m],{type:"image/svg+xml;charset=utf-8"}),u=w.createObjectURL(e);return p.height=b.height||150,p.width=
b.width||300,x.onload=function(){var b;switch(w.revokeObjectURL(u),t.drawImage(x,0,0),d){case "jpeg":b=p.toDataURL("image/jpeg");break;case "png":b=p.toDataURL("image/png");break;case "webp":b=p.toDataURL("image/webp");break;case "svg":b=m;break;default:return g.emit("error","Image format is not jpeg, png or svg")}g.emit("success",b)},x.onerror=function(b){return w.revokeObjectURL(u),g.emit("error",b)},x.src=u,g}},{events:57}],391:[function(b,m,g){var h=b("events").EventEmitter,c=b("../plotly");m.exports=
function(b,e){var f=c.Snapshot,g=new h,d=f.clone(b,{format:"png"}),p=d.td;p.style.position="absolute";p.style.left="-5000px";document.body.appendChild(p);var m=f.getRedrawFunc(p);return c.plot(p,d.data,d.layout,d.config).then(m).then(function(){var b=f.getDelay(p._fullLayout);setTimeout(function(){var b=c.Snapshot.toSVG(p),d=window.document.createElement("div"),f=window.document.createElement("canvas");d.appendChild(f);d.id=c.Lib.randstr();f.id=c.Lib.randstr();g=c.Snapshot.svgToImg({format:e.format,
width:p._fullLayout.width,height:p._fullLayout.height,canvas:f,emitter:g,svg:b});g.clean=function(){p&&p.remove()}},b)})["catch"](function(b){g.emit("error",b)}),g}},{"../plotly":348,events:57}],392:[function(b,m,g){function h(b,c,h){var d=c.toImage("png");b._glimages.append("svg:image").attr({xmlns:"http://www.w3.org/2000/svg","xlink:xlink:href":d,x:h.x,y:h.y,width:h.width,height:h.height,preserveAspectRatio:"none"});c.destroy()}var c=b("../plotly"),l=b("d3");m.exports=function(b,f){var g,d,p=b._fullLayout,
m=p._paper,x=p._size;m.insert("rect",":first-child").call(c.Drawing.setRect,0,0,p.width,p.height).call(c.Color.fill,p.paper_bgcolor);var w,u=c.Plots.getSubplotIds(p,"gl3d");for(d=0;d<u.length;d++)w=p[u[d]],g=w.domain,h(p,w._scene,{x:x.l+x.w*g.x[0],y:x.t+x.h*(1-g.y[1]),width:x.w*(g.x[1]-g.x[0]),height:x.h*(g.y[1]-g.y[0])});w=c.Plots.getSubplotIds(p,"gl2d");for(d=0;d<w.length;d++)g=p._plots[w[d]],h(p,g._scene2d,{x:x.l,y:x.t,width:x.w,height:x.h});var r=c.Plots.getSubplotIds(p,"geo");for(d=0;d<r.length;d++)w=
p[r[d]],g=w.domain,u=w._geo.framework,u.attr("style",null),u.attr({x:x.l+x.w*g.x[0]+w._marginX,y:x.t+x.h*(1-g.y[1])+w._marginY,width:w._width,height:w._height}),p._geoimages.node().appendChild(u.node());if(p._toppaper)for(x=p._toppaper.node().childNodes,d=0;d<x.length;d++)p=x[d],p.childNodes.length&&m.node().appendChild(p);m.node().style.background="";m.selectAll("text").attr({"data-unformatted":null}).each(function(){var b=l.select(this);if("hidden"===b.style("visibility"))return void b.remove();
var c=b.style("font-family");c&&-1!==c.indexOf('"')&&b.style("font-family",c.replace(/"/g,"\\'"))});"pdf"!==f&&"eps"!==f||m.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);m.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg");m.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");d=(new window.XMLSerializer).serializeToString(m.node());return d=c.util.html_entity_decode(d),d=c.util.xml_entity_encode(d)}},
{"../plotly":348,d3:53}],393:[function(b,m,g){var h=b("../../lib").mergeArray;m.exports=function(b){var g=b[0].trace,e=g.marker,f=e.line;h(g.text,b,"tx");h(e.opacity,b,"mo");h(e.color,b,"mc");h(f.color,b,"mlc");h(f.width,b,"mlw")}},{"../../lib":332}],394:[function(b,m,g){b=b("../scatter/attributes");g=b.marker;var h=g.line;m.exports={x:b.x,x0:b.x0,dx:b.dx,y:b.y,y0:b.y0,dy:b.dy,text:b.text,orientation:{valType:"enumerated",values:["v","h"]},marker:{color:g.color,colorscale:g.colorscale,cauto:g.cauto,
cmax:g.cmax,cmin:g.cmin,autocolorscale:g.autocolorscale,reversescale:g.reversescale,showscale:g.showscale,line:{color:h.color,colorscale:h.colorscale,cauto:h.cauto,cmax:h.cmax,cmin:h.cmin,width:h.width,autocolorscale:h.autocolorscale,reversescale:h.reversescale}},r:b.r,t:b.t,_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"},_deprecated:{bardir:{valType:"enumerated",values:["v","h"]}}}},{"../scatter/attributes":455}],395:[function(b,m,g){var h=b("fast-isnumeric"),
c=b("../../plotly"),l=b("../../components/colorscale/has_colorscale"),e=b("../../components/colorscale/calc");m.exports=function(b,g){var d,p,m;m=c.Axes.getFromId(b,g.xaxis||"x");var x=c.Axes.getFromId(b,g.yaxis||"y");"h"===(g.orientation||(g.x&&!g.y?"h":"v"))?(p=m.makeCalcdata(g,"x"),d=x.makeCalcdata(g,"y")):(p=x.makeCalcdata(g,"y"),d=m.makeCalcdata(g,"x"));var x=Math.min(d.length,p.length),w=[];for(m=0;x>m;m++)h(d[m])&&h(p[m])&&w.push({p:d[m],s:p[m],b:0});return l(g,"marker")&&e(g,g.marker.color,
"marker","c"),l(g,"marker.line")&&e(g,g.marker.line.color,"marker.line","c"),w}},{"../../components/colorscale/calc":291,"../../components/colorscale/has_colorscale":296,"../../plotly":348,"fast-isnumeric":58}],396:[function(b,m,g){var h=b("../../lib"),c=b("../../components/color"),l=b("../scatter/xy_defaults"),e=b("../bar/style_defaults"),f=b("../../components/errorbars/defaults"),v=b("./attributes");m.exports=function(b,g,m,x){function w(c,e){return h.coerce(b,g,v,c,e)}return l(b,g,w)?(w("orientation",
g.x&&!g.y?"h":"v"),w("text"),e(b,g,w,m,x),f(b,g,c.defaultLine,{axis:"y"}),void f(b,g,c.defaultLine,{axis:"x",inherit:"y"})):void(g.visible=!1)}},{"../../components/color":284,"../../components/errorbars/defaults":307,"../../lib":332,"../bar/style_defaults":404,"../scatter/xy_defaults":458,"./attributes":394}],397:[function(b,m,g){var h=b("../../plotly"),c=b("../../components/color");m.exports=function(b,e,f,g){var d,p=b.cd,m=p[0].trace,x=p[0].t,w=b.xa,u=b.ya,r="closest"===g?x.barwidth/2:x.dbar*(1-
w._td._fullLayout.bargap)/2;d="closest"!==g?function(b){return b.p}:"h"===m.orientation?function(b){return b.y}:function(b){return b.x};var y,k;"h"===m.orientation?(y=function(b){return h.Fx.inbox(b.b-e,b.x-e)+(b.x-e)/(b.x-b.b)},k=function(b){b=d(b)-f;return h.Fx.inbox(b-r,b+r)}):(k=function(b){return h.Fx.inbox(b.b-f,b.y-f)+(b.y-f)/(b.y-b.b)},y=function(b){b=d(b)-e;return h.Fx.inbox(b-r,b+r)});g=h.Fx.getDistanceFunction(g,y,k);if(h.Fx.getClosest(p,g,b),!1!==b.index)return p=p[b.index],g=p.mcc||m.marker.color,
x=p.mlcc||m.marker.line.color,y=p.mlw||m.marker.line.width,c.opacity(g)?b.color=g:c.opacity(x)&&y&&(b.color=x),"h"===m.orientation?(b.x0=b.x1=w.c2p(p.x,!0),b.xLabelVal=p.s,b.y0=u.c2p(d(p)-r,!0),b.y1=u.c2p(d(p)+r,!0),b.yLabelVal=p.p):(b.y0=b.y1=u.c2p(p.y,!0),b.yLabelVal=p.s,b.x0=w.c2p(d(p)-r,!0),b.x1=w.c2p(d(p)+r,!0),b.xLabelVal=p.p),p.tx&&(b.text=p.tx),h.ErrorBars.hoverInfo(p,m,b),[b]}},{"../../components/color":284,"../../plotly":348}],398:[function(b,m,g){b("../../plotly").Plots.register(g,"bar",
"cartesian bar oriented markerColorscale errorBarsOK showLegend".split(" "),{});g.attributes=b("./attributes");g.layoutAttributes=b("./layout_attributes");g.supplyDefaults=b("./defaults");g.supplyLayoutDefaults=b("./layout_defaults");g.calc=b("./calc");g.setPositions=b("./set_positions");g.colorbar=b("../scatter/colorbar");g.arraysToCalcdata=b("./arrays_to_calcdata");g.plot=b("./plot");g.style=b("./style");g.hoverPoints=b("./hover")},{"../../plotly":348,"../scatter/colorbar":456,"./arrays_to_calcdata":393,
"./attributes":394,"./calc":395,"./defaults":396,"./hover":397,"./layout_attributes":399,"./layout_defaults":400,"./plot":401,"./set_positions":402,"./style":403}],399:[function(b,m,g){m.exports={barmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"group"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:""},bargap:{valType:"number",min:0,max:1},bargroupgap:{valType:"number",min:0,max:1,dflt:0}}},{}],400:[function(b,m,g){var h=b("../../plotly"),c=b("../../lib"),
l=b("./layout_attributes");m.exports=function(b,f,g){var d,p,m,x=!1,w=!1,u=!1,r={};for(d=0;d<g.length;d++)(p=g[d],h.Plots.traceIs(p,"bar")&&(x=!0,"overlay"!==b.barmode&&"stack"!==b.barmode&&(m=p.xaxis+p.yaxis,r[m]&&(u=!0),r[m]=!0),p.visible&&"histogram"===p.type))&&"category"!==h.Axes.getFromId({_fullLayout:f},p["v"===p.orientation?"xaxis":"yaxis"]).type&&(w=!0);x&&("overlay"!==c.coerce(b,f,l,"barmode",void 0)&&c.coerce(b,f,l,"barnorm",void 0),c.coerce(b,f,l,"bargap",w&&!u?0:.2),c.coerce(b,f,l,"bargroupgap",
void 0))}},{"../../lib":332,"../../plotly":348,"./layout_attributes":399}],401:[function(b,m,g){var h=b("d3"),c=b("fast-isnumeric"),l=b("../../lib"),e=b("../../components/color"),f=b("./arrays_to_calcdata");m.exports=function(b,d,g){var m=d.x(),x=d.y(),w=b._fullLayout;d.plot.select(".barlayer").selectAll("g.trace.bars").data(g).enter().append("g").attr("class","trace bars").append("g").attr("class","points").each(function(d){var g=d[0].t,p=d[0].trace;f(d);h.select(this).selectAll("path").data(l.identity).enter().append("path").each(function(d){function f(b){return 0===
w.bargap&&0===w.bargroupgap?h.round(Math.round(b)-F,2):b}function l(b,c){return 2<=Math.abs(b-c)?f(b):b>c?Math.ceil(b):Math.floor(b)}var u,A,C,B;if("h"===p.orientation?(C=x.c2p(g.poffset+d.p,!0),B=x.c2p(g.poffset+d.p+g.barwidth,!0),u=m.c2p(d.b,!0),A=m.c2p(d.s+d.b,!0)):(u=m.c2p(g.poffset+d.p,!0),A=m.c2p(g.poffset+d.p+g.barwidth,!0),B=x.c2p(d.s+d.b,!0),C=x.c2p(d.b,!0)),!(c(u)&&c(A)&&c(C)&&c(B)&&u!==A&&C!==B))return void h.select(this).remove();var G=(d.mlw+1||p.marker.line.width+1||(d.trace?d.trace.marker.line.width:
0)+1)-1,F=h.round(G/2%1,2);b._context.staticPlot||(d=1>e.opacity(d.mc||p.marker.color)||.01<G?f:l,u=d(u,A),A=d(A,u),C=d(C,B),B=d(B,C));h.select(this).attr("d","M"+u+","+C+"V"+B+"H"+A+"V"+C+"Z")})})}},{"../../components/color":284,"../../lib":332,"./arrays_to_calcdata":393,d3:53,"fast-isnumeric":58}],402:[function(b,m,g){var h=b("fast-isnumeric"),c=b("../../plotly"),l=b("../../lib");m.exports=function(b,f){var g,d,p=b._fullLayout,m=f.x(),x=f.y();["v","h"].forEach(function(w){function u(d){function f(b){b[y]=
b.p+v}var h=[];d.forEach(function(c){b.calcdata[c].forEach(function(b){h.push(b.p)})});var g=l.distinctVals(h),k=g.vals,m=g.minDiff,t=!1,u=[];"group"===p.barmode&&d.forEach(function(c){t||(b.calcdata[c].forEach(function(b){t||u.forEach(function(c){Math.abs(b.p-c)<m&&(t=!0)})}),t||b.calcdata[c].forEach(function(b){u.push(b.p)}))});c.Axes.minDtick(q,m,k[0],t);c.Axes.expand(q,k,{vpad:m/2});m*=1-p.bargap;t&&(m/=r.length);for(var v,k=0;k<d.length;k++){var w=b.calcdata[d[k]][0].t;w.barwidth=m*(1-p.bargroupgap);
w.poffset=((t?(2*k+1-d.length)*m:0)-w.barwidth)/2;w.dbar=g.minDiff;v=w.poffset+w.barwidth/2;b.calcdata[d[k]].forEach(f)}}var r=[],y={v:"x",h:"y"}[w],k={v:"y",h:"x"}[w],q=f[y](),z=f[k]();if(b._fullData.forEach(function(b,d){!0===b.visible&&c.Plots.traceIs(b,"bar")&&b.orientation===w&&b.xaxis===m._id&&b.yaxis===x._id&&r.push(d)}),r.length){"overlay"===p.barmode?r.forEach(function(b){u([b])}):u(r);var E="stack"===p.barmode,A=p.barnorm;if(E||A){var C,B,G=z.l2c(z.c2l(0)),F=G,I={},D=b.calcdata[r[0]][0].t.barwidth/
100,H=0,K=!0;for(g=0;g<r.length;g++)for(B=b.calcdata[r[g]],d=0;d<B.length;d++){var H=Math.round(B[d].p/D),O=I[H]||0;E&&(B[d].b=O);C=B[d].b+B[d].s;I[H]=O+B[d].s;E&&(B[d][k]=C,!A&&h(z.c2l(C))&&(G=Math.max(G,C),F=Math.min(F,C)))}if(A)for(K=!1,A="fraction"===A?1:100,H=A/1E9,F=0,G=E?A:0,g=0;g<r.length;g++)for(B=b.calcdata[r[g]],d=0;d<B.length;d++)E=A/I[Math.round(B[d].p/D)],B[d].b*=E,B[d].s*=E,C=B[d].b+B[d].s,B[d][k]=C,h(z.c2l(C))&&(F-H>C&&(K=!0,F=C),C>G+H&&(K=!0,G=C));c.Axes.expand(z,[F,G],{tozero:!0,
padded:K})}else for(B=function(b){return b[k]=b.s,b.s},g=0;g<r.length;g++)c.Axes.expand(z,b.calcdata[r[g]].map(B),{tozero:!0,padded:!0})}})}},{"../../lib":332,"../../plotly":348,"fast-isnumeric":58}],403:[function(b,m,g){var h=b("d3"),c=b("../../plotly"),l=b("../../components/color");m.exports=function(b){var f=h.select(b).selectAll("g.trace.bars"),g=f.size(),d=b._fullLayout;f.style("opacity",function(b){return b[0].trace.opacity}).each(function(b){("stack"===d.barmode&&1<g||0===d.bargap&&0===d.bargroupgap&&
!b[0].trace.marker.line.width)&&h.select(this).attr("shape-rendering","crispEdges")});f.selectAll("g.points").each(function(b){b=b[0].trace;var d=b.marker,e=d.line;b=(b._input||{}).marker||{};var f=c.Drawing.tryColorscale(d,b,""),g=c.Drawing.tryColorscale(d,b,"line.");h.select(this).selectAll("path").each(function(b){var c,k,m=(b.mlw+1||e.width+1)-1,p=h.select(this);c="mc"in b?b.mcc=f(b.mc):Array.isArray(d.color)?l.defaultLine:d.color;p.style("stroke-width",m+"px").call(l.fill,c);m&&(k="mlc"in b?
b.mlcc=g(b.mlc):Array.isArray(e.color)?l.defaultLine:e.color,p.call(l.stroke,k))})})}},{"../../components/color":284,"../../plotly":348,d3:53}],404:[function(b,m,g){var h=b("../../components/color"),c=b("../../components/colorscale/has_colorscale"),l=b("../../components/colorscale/defaults");m.exports=function(b,f,g,d,m){g("marker.color",d);c(b,"marker")&&l(b,f,m,g,{prefix:"marker.",cLetter:"c"});g("marker.line.color",h.defaultLine);c(b,"marker.line")&&l(b,f,m,g,{prefix:"marker.line.",cLetter:"c"});
g("marker.line.width")}},{"../../components/color":284,"../../components/colorscale/defaults":293,"../../components/colorscale/has_colorscale":296}],405:[function(b,m,g){g=b("../scatter/attributes");var h=b("../../components/color/attributes");b=b("../../lib/extend").extendFlat;var c=g.marker,l=c.line;m.exports={y:{valType:"data_array"},x:{valType:"data_array"},x0:{valType:"any"},y0:{valType:"any"},whiskerwidth:{valType:"number",min:0,max:1,dflt:.5},boxpoints:{valType:"enumerated",values:["all","outliers",
"suspectedoutliers",!1],dflt:"outliers"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1},jitter:{valType:"number",min:0,max:1},pointpos:{valType:"number",min:-2,max:2},orientation:{valType:"enumerated",values:["v","h"]},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)"},symbol:b({},c.symbol,{arrayOk:!1}),opacity:b({},c.opacity,{arrayOk:!1,dflt:1}),size:b({},c.size,{arrayOk:!1}),color:b({},c.color,{arrayOk:!1}),line:{color:b({},l.color,{arrayOk:!1,dflt:h.defaultLine}),width:b({},
l.width,{arrayOk:!1,dflt:0}),outliercolor:{valType:"color"},outlierwidth:{valType:"number",min:0,dflt:1}}},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2}},fillcolor:g.fillcolor}},{"../../components/color/attributes":283,"../../lib/extend":328,"../scatter/attributes":455}],406:[function(b,m,g){function h(){var b=v;return v=(69069*v+1)%4294967296,429496729>Math.abs(v-b)?h():v/4294967296}var c=b("../../plotly"),l=b("d3"),e=b("fast-isnumeric"),f=m.exports={};c.Plots.register(f,"box",
["cartesian","symbols","oriented","box","showLegend"],{});f.attributes=b("./attributes");f.layoutAttributes=b("./layout_attributes");f.supplyDefaults=function(b,e,h){function g(h,l){return c.Lib.coerce(b,e,f.attributes,h,l)}var l;l=g("y");var m=g("x");if(l&&l.length)l="v",m||g("x0");else{if(!m||!m.length)return void(e.visible=!1);l="h";g("y0")}g("orientation",l);g("line.color",(b.marker||{}).color||h);g("line.width",2);g("fillcolor",c.Color.addOpacity(e.line.color,.5));g("whiskerwidth");g("boxmean");
h=c.Lib.coerce2(b,e,f.attributes,"marker.outliercolor");m=g("marker.line.outliercolor");(h=h||m?g("boxpoints","suspectedoutliers"):g("boxpoints"))&&(g("jitter","all"===h?.3:0),g("pointpos","all"===h?-1.5:0),g("marker.symbol"),g("marker.opacity"),g("marker.size"),g("marker.color",e.line.color),g("marker.line.color"),g("marker.line.width"),"suspectedoutliers"===h&&(g("marker.line.outliercolor",e.marker.color),g("marker.line.outlierwidth")))};f.supplyLayoutDefaults=function(b,e,h){for(var g,l=0;l<h.length;l++)if(c.Plots.traceIs(h[l],
"box")){g=!0;break}g&&(c.Lib.coerce(b,e,f.layoutAttributes,"boxmode",void 0),c.Lib.coerce(b,e,f.layoutAttributes,"boxgap",void 0),c.Lib.coerce(b,e,f.layoutAttributes,"boxgroupgap",void 0))};f.calc=function(b,f){var h,g,l,m,r,v,k,q,z=c.Axes.getFromId(b,f.xaxis||"x"),E=c.Axes.getFromId(b,f.yaxis||"y"),A=[];"h"===f.orientation?(h=z,g="x",m=E,r="y"):(h=E,g="y",m=z,r="x");g=h.makeCalcdata(f,g);c.Axes.expand(h,g,{padded:!0});v=function(b,d,f,h,g){var k;return f in d?v=h.makeCalcdata(d,f):(k=f+"0"in d?d[f+
"0"]:"name"in d&&("category"===h.type||e(d.name)&&-1!==["linear","log"].indexOf(h.type)||c.Lib.isDateTime(d.name)&&"date"===h.type)?d.name:b.numboxes,k=h.d2c(k),v=g.map(function(){return k})),v}(b,f,r,m,g);h=c.Lib.distinctVals(v);return k=h.vals,q=h.minDiff/2,l=function(b,d,f,h,g){var k,l,m,p=h.length,q=d.length,r=[],t=[];for(k=0;p>k;++k)l=h[k],b[k]={pos:l},t[k]=l-g,r[k]=[];t.push(h[p-1]+g);for(k=0;q>k;++k)b=d[k],e(b)&&(m=c.Lib.findBin(f[k],t),0<=m&&q>m&&r[m].push(b));return r}(A,g,v,k,q),function(b,
d){var e,f,h,g;for(g=0;g<d.length;++g)e=d[g].sort(c.Lib.sorterAsc),f=e.length,h=b[g],h.val=e,h.min=e[0],h.max=e[f-1],h.mean=c.Lib.mean(e,f),h.sd=c.Lib.stdev(e,f,h.mean),h.q1=c.Lib.interp(e,.25),h.med=c.Lib.interp(e,.5),h.q3=c.Lib.interp(e,.75),h.lf=Math.min(h.q1,e[Math.min(c.Lib.findBin(2.5*h.q1-1.5*h.q3,e,!0)+1,f-1)]),h.uf=Math.max(h.q3,e[Math.max(c.Lib.findBin(2.5*h.q3-1.5*h.q1,e),0)]),h.lo=4*h.q1-3*h.q3,h.uo=4*h.q3-3*h.q1}(A,l),A=A.filter(function(b){return b.val&&b.val.length}),A.length?(A[0].t=
{boxnum:b.numboxes,dPos:q},b.numboxes++,A):[{t:{emptybox:!0}}]};f.setPositions=function(b,e){var f,h,g,l,m=b._fullLayout,v=e.x(),k=e.y(),q=["v","h"];for(h=0;h<q.length;++h){var z,E=q[h],A=[],C=[],B=0,G=0;f="h"===E?k:v;for(g=0;g<b.calcdata.length;++g)z=b.calcdata[g],l=z[0].t,z=z[0].trace,!0===z.visible&&c.Plots.traceIs(z,"box")&&!l.emptybox&&z.orientation===E&&z.xaxis===v._id&&z.yaxis===k._id&&(A.push(g),!1!==z.boxpoints&&(B=Math.max(B,z.jitter-z.pointpos-1),G=Math.max(G,z.jitter+z.pointpos-1)));for(g=
0;g<A.length;g++)for(z=b.calcdata[A[g]],l=0;l<z.length;l++)C.push(z[l].pos);if(C.length){g=c.Lib.distinctVals(C);z=g.minDiff/2;C.length===g.vals.length&&(b.numboxes=1);c.Axes.minDtick(f,g.minDiff,g.vals[0],!0);for(h=0;h<A.length;++h)b.calcdata[h][0].t.dPos=z;A=(1-m.boxgap)*(1-m.boxgroupgap)*z/b.numboxes;c.Axes.expand(f,g.vals,{vpadminus:z+B*A,vpadplus:z+G*A})}}};var v=2E9;f.plot=function(b,e,f){var g,m,u=b._fullLayout,r=e.x(),y=e.y();e.plot.select(".boxlayer").selectAll("g.trace.boxes").data(f).enter().append("g").attr("class",
"trace boxes").each(function(e){var f=e[0].t,p=e[0].trace;e="group"===u.boxmode&&1<b.numboxes;var t=f.dPos*(1-u.boxgap)*(1-u.boxgroupgap)/(e?b.numboxes:1),A=e?2*f.dPos*(-.5+(f.boxnum+.5)/b.numboxes)*(1-u.boxgap):0,C=t*p.whiskerwidth;!0!==p.visible||f.emptybox?e=void l.select(this).remove():("h"===p.orientation?(g=y,m=r):(g=r,m=y),f.bPos=A,f.bdPos=t,v=2E9,e=(l.select(this).selectAll("path.box").data(c.Lib.identity).enter().append("path").attr("class","box").each(function(b){var d=g.c2p(b.pos+A,!0),
e=g.c2p(b.pos+A-t,!0),f=g.c2p(b.pos+A+t,!0),h=g.c2p(b.pos+A-C,!0),k=g.c2p(b.pos+A+C,!0),q=m.c2p(b.q1,!0),r=m.c2p(b.q3,!0),u=c.Lib.constrain(m.c2p(b.med,!0),Math.min(q,r)+1,Math.max(q,r)-1),v=m.c2p(!1===p.boxpoints?b.min:b.lf,!0);b=m.c2p(!1===p.boxpoints?b.max:b.uf,!0);"h"===p.orientation?l.select(this).attr("d","M"+u+","+e+"V"+f+"M"+q+","+e+"V"+f+"H"+r+"V"+e+"ZM"+q+","+d+"H"+v+"M"+r+","+d+"H"+b+(0===p.whiskerwidth?"":"M"+v+","+h+"V"+k+"M"+b+","+h+"V"+k)):l.select(this).attr("d","M"+e+","+u+"H"+f+
"M"+e+","+q+"H"+f+"V"+r+"H"+e+"ZM"+d+","+q+"V"+v+"M"+d+","+r+"V"+b+(0===p.whiskerwidth?"":"M"+h+","+v+"H"+k+"M"+h+","+b+"H"+k))}),p.boxpoints&&l.select(this).selectAll("g.points").data(function(b){return b.forEach(function(b){b.t=f;b.trace=p}),b}).enter().append("g").attr("class","points").selectAll("path").data(function(b){var d,e,f,g,k,l,m="all"===p.boxpoints?b.val:b.val.filter(function(c){return c<b.lf||c>b.uf}),q=.01*(b.q3-b.q1),r=[],u=0;if(p.jitter){for(d=0;d<m.length;d++)e=Math.max(0,d-5),g=
m[e],f=Math.min(m.length-1,d+5),k=m[f],"all"!==p.boxpoints&&(m[d]<b.lf?k=Math.min(k,b.lf):g=Math.max(g,b.uf)),e=Math.sqrt(q*(f-e)/(k-g))||0,e=c.Lib.constrain(Math.abs(e),0,1),r.push(e),u=Math.max(e,u);l=2*p.jitter/u}return m.map(function(c,d){var e,f=p.pointpos;return p.jitter&&(f+=l*r[d]*(h()-.5)),e="h"===p.orientation?{y:b.pos+f*t+A,x:c}:{x:b.pos+f*t+A,y:c},"suspectedoutliers"===p.boxpoints&&c<b.uo&&c>b.lo&&(e.so=!0),e})}).enter().append("path").call(c.Drawing.translatePoints,r,y),void(p.boxmean&&
l.select(this).selectAll("path.mean").data(c.Lib.identity).enter().append("path").attr("class","mean").style("fill","none").each(function(b){var c=g.c2p(b.pos+A,!0),d=g.c2p(b.pos+A-t,!0),e=g.c2p(b.pos+A+t,!0),f=m.c2p(b.mean,!0),h=m.c2p(b.mean-b.sd,!0);b=m.c2p(b.mean+b.sd,!0);"h"===p.orientation?l.select(this).attr("d","M"+f+","+d+"V"+e+("sd"!==p.boxmean?"":"m0,0L"+h+","+c+"L"+f+","+d+"L"+b+","+c+"Z")):l.select(this).attr("d","M"+d+","+f+"H"+e+("sd"!==p.boxmean?"":"m0,0L"+c+","+h+"L"+d+","+f+"L"+c+
","+b+"Z"))}))));return e})};f.style=function(b){l.select(b).selectAll("g.trace.boxes").style("opacity",function(b){return b[0].trace.opacity}).each(function(b){b=b[0].trace;var d=b.line.width;l.select(this).selectAll("path.box").style("stroke-width",d+"px").call(c.Color.stroke,b.line.color).call(c.Color.fill,b.fillcolor);l.select(this).selectAll("path.mean").style({"stroke-width":d,"stroke-dasharray":2*d+"px,"+d+"px"}).call(c.Color.stroke,b.line.color);l.select(this).selectAll("g.points path").call(c.Drawing.pointStyle,
b)})};f.hoverPoints=function(b,e,f,h){var g,l,m,v,k,q,z,E,A,C=b.cd,B=C[0].trace,G=C[0].t,F=b.xa,I=b.ya,D=[];if(v="closest"===h?2.5*G.bdPos:G.bdPos,"h"===B.orientation?(g=function(b){return c.Fx.inbox(b.min-e,b.max-e)},l=function(b){b=b.pos+G.bPos-f;return c.Fx.inbox(b-v,b+v)},k="y",q=I,E="x",A=F):(g=function(b){b=b.pos+G.bPos-e;return c.Fx.inbox(b-v,b+v)},l=function(b){return c.Fx.inbox(b.min-f,b.max-f)},k="x",q=F,E="y",A=I),m=c.Fx.getDistanceFunction(h,g,l),c.Fx.getClosest(C,m,b),!1!==b.index){h=
C[b.index];g=B.line.color;l=(B.marker||{}).color;c.Color.opacity(g)&&B.line.width?b.color=g:c.Color.opacity(l)&&B.boxpoints?b.color=l:b.color=B.fillcolor;b[k+"0"]=q.c2p(h.pos+G.bPos-G.bdPos,!0);b[k+"1"]=q.c2p(h.pos+G.bPos+G.bdPos,!0);c.Axes.tickText(q,q.c2l(h.pos),"hover");b[k+"LabelVal"]=h.pos;var H;q={};g=["med","min","q1","q3","max"];B.boxmean&&g.push("mean");B.boxpoints&&[].push.apply(g,["lf","uf"]);for(l=0;l<g.length;l++)k=g[l],k in h&&!(h[k]in q)&&(q[h[k]]=!0,z=A.c2p(h[k],!0),H=c.Lib.extendFlat({},
b),H[E+"0"]=H[E+"1"]=z,H[E+"LabelVal"]=h[k],H.attr=k,"mean"===k&&"sd"in h&&"sd"===B.boxmean&&(H[E+"err"]=h.sd),b.name="",D.push(H));return D}}},{"../../plotly":348,"./attributes":405,"./layout_attributes":407,d3:53,"fast-isnumeric":58}],407:[function(b,m,g){m.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay"},boxgap:{valType:"number",min:0,max:1,dflt:.3},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3}}},{}],408:[function(b,m,g){g=b("../scattergeo/attributes");var h=
b("../../components/colorscale/attributes"),c=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var l=g.marker.line;m.exports={locations:{valType:"data_array"},locationmode:g.locationmode,z:{valType:"data_array"},text:{valType:"data_array"},marker:{line:{color:l.color,width:l.width}},zauto:h.zauto,zmin:h.zmin,zmax:h.zmax,colorscale:h.colorscale,autocolorscale:h.autocolorscale,reversescale:h.reversescale,showscale:h.showscale,hoverinfo:b({},c.hoverinfo,{flags:["location","z","text","name"]}),
_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":290,"../../lib/extend":328,"../../plots/attributes":349,"../scattergeo/attributes":464}],409:[function(b,m,g){var h=b("../../lib"),c=b("../../components/colorscale/defaults"),l=b("./attributes");m.exports=function(b,f,g,d){function m(c,d){return h.coerce(b,f,l,c,d)}var t;g=m("locations");if(g&&(t=g.length),!g||!t)return void(f.visible=!1);g=m("z");return Array.isArray(g)?(g.length>t&&(f.z=g.slice(0,t)),m("locationmode"),
m("text"),m("marker.line.color"),m("marker.line.width"),c(b,f,d,m,{prefix:"",cLetter:"z"}),void m("hoverinfo",1===d._dataLength?"location+z+text":void 0)):void(f.visible=!1)}},{"../../components/colorscale/defaults":293,"../../lib":332,"./attributes":408}],410:[function(b,m,g){b("../../plotly").Plots.register(g,"choropleth",["geo","noOpacity"],{});g.attributes=b("./attributes");g.supplyDefaults=b("./defaults");g.colorbar=b("../heatmap/colorbar");g.calc=b("../surface/calc")},{"../../plotly":348,"../heatmap/colorbar":423,
"../surface/calc":473,"./attributes":408,"./defaults":409}],411:[function(b,m,g){function h(b,d){function e(d){var f=b.mockAxis;return c.Axes.tickText(f,f.c2l(d),"hover").text}var f=d.hoverinfo;if("none"===f)return function(b){delete b.nameLabel;delete b.textLabel};var f="all"===f?c.Choropleth.attributes.hoverinfo.flags:f.split("+"),h=-1!==f.indexOf("name"),g=-1!==f.indexOf("location"),l=-1!==f.indexOf("z"),m=-1!==f.indexOf("text"),p=!h&&g;return function(b){var c=[];p?b.nameLabel=b.id:(h&&(b.nameLabel=
d.name),g&&c.push(b.id));l&&c.push(e(b.z));m&&c.push(b.tx);b.textLabel=c.join("<br>")}}var c=b("../../plotly"),l=b("d3"),e=b("../../components/color"),f=b("../../lib/topojson_utils").getTopojsonFeatures,v=b("../../lib/geo_location_utils").locationToFeature,d=b("../../lib/array_to_calc_item"),p=b("../../components/colorscale/get_scale"),t=b("../../components/colorscale/make_scale_function"),x=b("../../constants/geo_constants"),w=m.exports={};w.calcGeoJSON=function(b,c){for(var e,h=[],g=b.locations,
l=g.length,m=f(b,c),p=(b.marker||{}).line||{},t=0;l>t;t++)e=v(b.locationmode,g[t],m),void 0!==e&&(e.z=b.z[t],void 0!==b.text&&(e.tx=b.text[t]),d(p.color,e,"mlc",t),d(p.width,e,"mlw",t),h.push(e));return 0<h.length&&(h[0].trace=b),h};w.plot=function(b,d,e){var f=b.framework,g=b.topojson,m=f.select("g.choroplethlayer"),p=f.select("g.baselayer"),f=f.select("g.baselayeroverchoropleth"),t=x.baseLayersOverChoropleth;m.selectAll("*").remove();f.selectAll("*").remove();d=m.selectAll("g.trace.scatter").data(d);
d.enter().append("g").attr("class","trace choropleth");d.each(function(d){function e(d){if(b.showHover){var f=b.projection(d.properties.ct);k(d);c.Fx.loneHover({x:f[0],y:f[1],name:d.nameLabel,text:d.textLabel},{container:b.hoverContainer.node()})}}if(!0===d.visible){var f=w.calcGeoJSON(d,g),k=h(b,d);l.select(this).selectAll("path.choroplethlocation").data(f).enter().append("path").attr("class","choroplethlocation").on("mouseover",e).on("mouseout",function(){c.Fx.loneUnhover(b.hoverContainer)}).on("mousedown",
function(){c.Fx.loneUnhover(b.hoverContainer)}).on("mouseup",e)}});for(m=0;m<t.length;m++)d=t[m],p.select("g."+d).remove(),b.drawTopo(f,d,e),b.styleLayer(f,d,e);w.style(b)};w.style=function(b){b.framework.selectAll("g.trace.choropleth").each(function(b){var d=l.select(this),f=(b.marker||{}).line||{},h=b.zmin,g=b.zmax;b=p(b.colorscale);var m=t(b,h,g);d.selectAll("path.choroplethlocation").each(function(b){l.select(this).attr("fill",function(b){return m(b.z)}).call(e.stroke,b.mlc||f.color).call(c.Drawing.dashLine,
"",b.mlw||f.width)})})}},{"../../components/color":284,"../../components/colorscale/get_scale":295,"../../components/colorscale/make_scale_function":300,"../../constants/geo_constants":318,"../../lib/array_to_calc_item":324,"../../lib/geo_location_utils":329,"../../lib/topojson_utils":343,"../../plotly":348,d3:53}],412:[function(b,m,g){g=b("../heatmap/attributes");var h=b("../scatter/attributes");b=b("../../lib/extend").extendFlat;h=h.line;m.exports={z:g.z,x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,
text:g.text,transpose:g.transpose,xtype:g.xtype,ytype:g.ytype,zauto:g.zauto,zmin:g.zmin,zmax:g.zmax,colorscale:g.colorscale,autocolorscale:g.autocolorscale,reversescale:g.reversescale,showscale:g.showscale,connectgaps:g.connectgaps,autocontour:{valType:"boolean",dflt:!0},ncontours:{valType:"integer",dflt:0},contours:{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"number",dflt:null},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill"},
showlines:{valType:"boolean",dflt:!0}},line:{color:b({},h.color,{}),width:h.width,dash:h.dash,smoothing:b({},h.smoothing,{})},_nestedModules:{colorbar:"Colorbar"}}},{"../../lib/extend":328,"../heatmap/attributes":421,"../scatter/attributes":455}],413:[function(b,m,g){var h=b("../../plotly"),c=b("../heatmap/calc");m.exports=function(b,e){var f=c(b,e),g=e.contours;if(!1!==e.autocontour){var d={type:"linear",range:[e.zmin,e.zmax]};h.Axes.autoTicks(d,(e.zmax-e.zmin)/(e.ncontours||15));g.start=h.Axes.tickFirst(d);
g.size=d.dtick;d.range.reverse();g.end=h.Axes.tickFirst(d);g.start===e.zmin&&(g.start+=g.size);g.end===e.zmax&&(g.end-=g.size);g.end+=g.size/100;e._input.contours=g}return f}},{"../../plotly":348,"../heatmap/calc":422}],414:[function(b,m,g){var h=b("d3"),c=b("../../plotly"),l=b("../../components/colorscale/get_scale"),e=b("../../components/colorbar/draw");m.exports=function(b,g){var d=g[0].trace,m="cb"+d.uid;if(b._fullLayout._infolayer.selectAll("."+m).remove(),!1===d.showscale)return void c.Plots.autoMargin(b,
m);m=e(b,m);g[0].t.cb=m;var t=d.contours,x=d.line,w=t.size||1,u=Math.floor((t.end+w/10-t.start)/w)+1,r=l(d.colorscale),y="lines"===t.coloring?0:1,k=h.scale.linear().interpolate(h.interpolateRgb),q=r.map(function(b){return(b[0]*(u+y-1)-y/2)*w+t.start}),z=r.map(function(b){return b[1]});if("heatmap"===t.coloring){d.zauto&&!1===d.autocontour&&(d.zmin=t.start-w/2,d.zmax=d.zmin+u*w);m.filllevels({start:d.zmin,end:d.zmax,size:(d.zmax-d.zmin)/254});var q=r.map(function(b){return b[0]*(d.zmax-d.zmin)+d.zmin}),
E=h.extent([d.zmin,d.zmax,t.start,t.start+w*(u-1)]),r=E[d.zmin<d.zmax?0:1],E=E[d.zmin<d.zmax?1:0];r!==d.zmin&&(q.splice(0,0,r),z.splice(0,0,z[0]));E!==d.zmax&&(q.push(E),z.push(z[z.length-1]))}k.domain(q).range(z);m.fillcolor("fill"===t.coloring||"heatmap"===t.coloring?k:"").line({color:"lines"===t.coloring?k:x.color,width:!1!==t.showlines?x.width:0,dash:x.dash}).levels({start:t.start,end:t.end,size:w}).options(d.colorbar)()}},{"../../components/colorbar/draw":287,"../../components/colorscale/get_scale":295,
"../../plotly":348,d3:53}],415:[function(b,m,g){var h=b("../../lib"),c=b("../heatmap/has_columns"),l=b("../heatmap/xyz_defaults"),e=b("../contour/style_defaults"),f=b("./attributes");m.exports=function(b,d,g,m){function x(c,e){return h.coerce(b,d,f,c,e)}if(!l(b,d,x))return void(d.visible=!1);x("text");x("connectgaps",c(d));g=h.coerce2(b,d,f,"contours.start");var w=h.coerce2(b,d,f,"contours.end");g=x("autocontour",!(g&&w));x(g?"ncontours":"contours.size");e(b,d,x,m)}},{"../../lib":332,"../contour/style_defaults":420,
"../heatmap/has_columns":426,"../heatmap/xyz_defaults":432,"./attributes":412}],416:[function(b,m,g){var h=b("../heatmap/hover");m.exports=function(b,g,e,f){return h(b,g,e,f,!0)}},{"../heatmap/hover":427}],417:[function(b,m,g){b("../../plotly").Plots.register(g,"contour",["cartesian","2dMap","contour"],{});g.attributes=b("./attributes");g.supplyDefaults=b("./defaults");g.calc=b("./calc");g.plot=b("./plot");g.style=b("./style");g.colorbar=b("./colorbar");g.hoverPoints=b("./hover")},{"../../plotly":348,
"./attributes":412,"./calc":413,"./colorbar":414,"./defaults":415,"./hover":416,"./plot":418,"./style":419}],418:[function(b,m,g){function h(b){var c,d,e,f,h,g,l,m,p,r=b[0].z,t=r.length,u=r[0].length,v=2===t||2===u;for(d=0;t-1>d;d++)for(f=[],0===d&&(f=f.concat(k)),d===t-2&&(f=f.concat(q)),c=0;u-1>c;c++)for(e=f.slice(),0===c&&(e=e.concat(z)),c===u-2&&(e=e.concat(E)),h=c+","+d,g=[[r[d][c],r[d][c+1]],[r[d+1][c],r[d+1][c+1]]],p=0;p<b.length;p++){m=b[p];l=m.level;var w=(g[0][0]>l?0:1)+(g[0][1]>l?0:2)+
(g[1][1]>l?0:4)+(g[1][0]>l?0:8);l=5===w||10===w?l>(g[0][0]+g[0][1]+g[1][0]+g[1][1])/4?5===w?713:1114:5===w?104:208:15===w?0:w;l&&(m.crossings[h]=l,-1!==e.indexOf(l)&&(m.starts.push([c,d]),v&&-1!==e.indexOf(l,e.indexOf(l)+1)&&m.starts.push([c,d])))}}function c(b,c,h){for(var g=c.join(","),k=g,l=b.crossings[k],m=e(l,h,c),p=[d(b,c,[-m[0],-m[1]])],q=m.join(","),r=b.z.length,t=b.z[0].length,u=0;1E4>u;u++){if(20<l?(l=C[l][0>(m[0]||m[1])?0:1],b.crossings[k]=B[l]):delete b.crossings[k],m=A[l],!m){console.log("found bad marching index",
l,c,b.level);break}if(p.push(d(b,c,m)),c[0]+=m[0],c[1]+=m[1],f(p[p.length-1],p[p.length-2])&&p.pop(),k=c.join(","),k===g&&m.join(",")===q||h&&(m[0]&&(0>c[0]||c[0]>t-2)||m[1]&&(0>c[1]||c[1]>r-2)))break;l=b.crossings[k]}1E4===u&&console.log("Infinite loop in contour?");var w,x;c=f(p[0],p[p.length-1]);q=0;r=.2*b.smoothing;k=[];l=0;for(u=1;u<p.length;u++)m=v(p[u],p[u-1]),q+=m,k.push(m);r*=q/k.length;for(u=p.length-2;u>=l;u--)if(w=k[u],r>w){q=0;for(m=u-1;m>=l&&w+k[m]<r;m--)w+=k[m];if(c&&u===p.length-2)for(q=
0;m>q&&w+k[q]<r;q++)w+=k[q];t=u-m+q+1;x=Math.floor((u+m+q+2)/2);t=c||u!==p.length-2?c||-1!==m?t%2?p[x%p.length]:[(p[x%p.length][0]+p[(x+1)%p.length][0])/2,(p[x%p.length][1]+p[(x+1)%p.length][1])/2]:p[0]:p[p.length-1];p.splice(m+1,u-m+1,t);u=m+1;q&&(l=q);c&&(u===p.length-2?p[q]=p[p.length-1]:0===u&&(p[p.length-1]=p[0]))}if(p.splice(0,l),!(2>p.length))if(c)p.pop(),b.paths.push(p);else{h||console.log("unclosed interior contour?",b.level,g,p.join("L"));var z=!1;b.edgepaths.forEach(function(c,d){if(!z&&
f(c[0],p[p.length-1])){p.pop();z=!0;var e=!1;b.edgepaths.forEach(function(c,h){!e&&f(c[c.length-1],p[0])&&(e=!0,p.splice(0,1),b.edgepaths.splice(d,1),h===d?b.paths.push(p.concat(c)):b.edgepaths[h]=b.edgepaths[h].concat(p,c))});e||(b.edgepaths[d]=p.concat(c))}});b.edgepaths.forEach(function(c,d){!z&&f(c[c.length-1],p[0])&&(p.splice(0,1),b.edgepaths[d]=c.concat(p),z=!0)});z||b.edgepaths.push(p)}}function l(b){var d,e,f,h;for(f=0;f<b.length;f++){h=b[f];for(d=0;d<h.starts.length;d++)e=h.starts[d],c(h,
e,"edge");for(d=0;Object.keys(h.crossings).length&&1E4>d;)d++,e=Object.keys(h.crossings)[0].split(",").map(Number),c(h,e);1E4===d&&console.log("Infinite loop in contour?")}}function e(b,c,d){var e=0,f=0;return 20<b&&c?208===b||1114===b?e=0===d[0]?1:-1:f=0===d[1]?1:-1:-1!==k.indexOf(b)?f=1:-1!==z.indexOf(b)?e=1:-1!==q.indexOf(b)?f=-1:e=-1,[e,f]}function f(b,c){return.01>Math.abs(b[0]-c[0])&&.01>Math.abs(b[1]-c[1])}function v(b,c){var d=b[0]-c[0],e=b[1]-c[1];return Math.sqrt(d*d+e*e)}function d(b,c,
d){var e=c[0]+Math.max(d[0],0);c=c[1]+Math.max(d[1],0);var f=b.z[c][e],h=b.xaxis,g=b.yaxis;if(d[1])return d=(b.level-f)/(b.z[c][e+1]-f),[h.c2p((1-d)*b.x[e]+d*b.x[e+1],!0),g.c2p(b.y[c],!0)];d=(b.level-f)/(b.z[c+1][e]-f);return[h.c2p(b.x[e],!0),g.c2p((1-d)*b.y[c]+d*b.y[c+1],!0)]}function p(b,c,d,e){b=b.selectAll("g.contourfill").data([0]);b.enter().append("g").classed("contourfill",!0);c=b.selectAll("path").data("fill"===e.coloring?c:[]);c.enter().append("path");c.exit().remove();c.each(function(b){(b=
t(b,d))?w.select(this).attr("d",b).style("stroke","none"):w.select(this).remove()})}function t(b,c){var d,e,f,h,g,k=b.edgepaths.length||b.z[0][0]<b.level?"":"M"+c.join("L")+"Z",l=0,m=b.edgepaths.map(function(b,c){return c});for(f=!0;m.length;){d=u.Drawing.smoothopen(b.edgepaths[l],b.smoothing);k+=f?d:d.replace(/^M/,"L");m.splice(m.indexOf(l),1);d=b.edgepaths[l][b.edgepaths[l].length-1];h=-1;for(f=0;4>f;f++){if(!d){console.log("missing end?",l,b);break}.01>Math.abs(d[1]-c[0][1])&&!(.01>Math.abs(d[0]-
c[2][0]))?e=c[1]:.01>Math.abs(d[0]-c[0][0])?e=c[0]:.01>Math.abs(d[1]-c[2][1])?e=c[3]:.01>Math.abs(d[0]-c[2][0])&&(e=c[2]);for(g=0;g<b.edgepaths.length;g++){var p=b.edgepaths[g][0];.01>Math.abs(d[0]-e[0])?.01>Math.abs(d[0]-p[0])&&0<=(p[1]-d[1])*(e[1]-p[1])&&(e=p,h=g):.01>Math.abs(d[1]-e[1])?.01>Math.abs(d[1]-p[1])&&0<=(p[0]-d[0])*(e[0]-p[0])&&(e=p,h=g):console.log("endpt to newendpt is not vert. or horz.",d,e,p)}if(d=e,0<=h)break;k+="L"+e}if(h===b.edgepaths.length){console.log("unclosed perimeter path");
break}l=h;(f=-1===m.indexOf(l))&&(l=m[0],k+="Z")}for(l=0;l<b.paths.length;l++)k+=u.Drawing.smoothclosed(b.paths[l],b.smoothing);return k}function x(b,c,d){var e=c[0].smoothing;b=b.selectAll("g.contourlevel").data(!1===d.showlines?[]:c);b.enter().append("g").classed("contourlevel",!0);b.exit().remove();c=b.selectAll("path.openline").data(function(b){return b.edgepaths});c.enter().append("path").classed("openline",!0);c.exit().remove();c.attr("d",function(b){return u.Drawing.smoothopen(b,e)}).style("stroke-miterlimit",
1);b=b.selectAll("path.closedline").data(function(b){return b.paths});b.enter().append("path").classed("closedline",!0);b.exit().remove();b.attr("d",function(b){return u.Drawing.smoothclosed(b,e)}).style("stroke-miterlimit",1)}var w=b("d3"),u=b("../../plotly"),r=b("../../lib"),y=b("../heatmap/plot");m.exports=function(b,c,d){for(var e=0;e<d.length;e++){var f=b,g=c,k=d[e];r.markTime("in Contour.plot");var m=k[0].trace,q=k[0].x,v=k[0].y,w=m.contours,z=m.uid,A=g.x(),B=g.y(),C=f._fullLayout,E="contour"+
z,Y;Y=w;for(var W=g,Z=k[0],U=Y.size||1,ea=[],ga=Y.start;ga<Y.end+U/10;ga+=U)ea.push({level:ga,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:W.x(),yaxis:W.y(),x:Z.x,y:Z.y,z:Z.z,smoothing:Z.trace.line.smoothing});Y=ea;if(!0!==m.visible)C._paper.selectAll("."+E+",.cb"+z+",.hm"+z).remove();else{"heatmap"===w.coloring?(m.zauto&&!1===m.autocontour&&(m._input.zmin=m.zmin=w.start-w.size/2,m._input.zmax=m.zmax=m.zmin+Y.length*w.size),y(f,g,[k])):C._paper.selectAll(".hm"+z).remove();h(Y);l(Y);f=A.c2p(q[0],
!0);q=A.c2p(q[q.length-1],!0);A=B.c2p(v[0],!0);v=B.c2p(v[v.length-1],!0);v=[[f,v],[q,v],[q,A],[f,A]];B=k;B=g.plot.select(".maplayer").selectAll("g.contour."+E).data(B);E=(B.enter().append("g").classed("contour",!0).classed(E,!0),B.exit().remove(),B);B=v;q=w;A=E.selectAll("g.contourbg").data([0]);A.enter().append("g").classed("contourbg",!0);q=A.selectAll("path").data("fill"===q.coloring?[0]:[]);q.enter().append("path");q.exit().remove();q.attr("d","M"+B.join("L")+"Z").style("stroke","none");p(E,Y,
v,w);x(E,Y,w);w=E;k=k[0];E=v;Y="clip"+k.trace.uid;v=g.plot.selectAll("defs").data([0]);v.enter().append("defs");v=v.selectAll("#"+Y).data(k.trace.connectgaps?[]:[0]);if(v.enter().append("clipPath").attr("id",Y),v.exit().remove(),!1===k.trace.connectgaps){B=g.x();q=g.y();A=k.x;f=k.y;W=m=m=void 0;z=k.trace._emptypoints;C=[];W=k.z.length;Z=k.z[0].length;U=[];for(m=0;Z>m;m++)U.push(1);for(m=0;W>m;m++)C.push(U.slice());for(m=0;m<z.length;m++)W=z[m],C[W[0]][W[1]]=0;m=(k.zmask=C,C);B={level:.9,crossings:{},
starts:[],edgepaths:[],paths:[],xaxis:B,yaxis:q,x:A,y:f,z:m,smoothing:0};h([B]);l([B]);E=t(B,E);v=v.selectAll("path").data([0]);v.enter().append("path");v.attr("d",E)}else Y=null;w.call(u.Drawing.setClipUrl,Y);g.plot.selectAll(".hm"+k.trace.uid).call(u.Drawing.setClipUrl,Y);u.Lib.markTime("done Contour.plot")}}};var k=[1,9,13,104,713],q=[4,6,7,104,713],z=[8,12,14,208,1114],E=[2,3,11,208,1114],A=[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],C={104:[4,
1],208:[2,8],713:[7,13],1114:[11,14]},B={1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11}},{"../../lib":332,"../../plotly":348,"../heatmap/plot":430,d3:53}],419:[function(b,m,g){var h=b("d3"),c=b("../../plotly"),l=b("../../components/colorscale/get_scale"),e=b("../heatmap/style");m.exports=function(b){h.select(b).selectAll("g.contour").style("opacity",function(b){return b.trace.opacity}).each(function(b){var d=h.select(this);b=b.trace;var e=b.contours,f=b.line,g="lines"===e.coloring,m=e.size||1,u=Math.floor((e.end+
m/10-e.start)/m)+1;b=l(b.colorscale);var r=g?0:1,y=h.scale.linear().domain(b.map(function(b){return(b[0]*(u+r-1)-r/2)*m+e.start})).interpolate(h.interpolateRgb).range(b.map(function(b){return b[1]}));d.selectAll("g.contourlevel").each(function(b,d){h.select(this).selectAll("path").call(c.Drawing.lineGroupStyle,f.width,g?y(e.start+d*m):f.color,f.dash)});d.selectAll("g.contourbg path").style("fill",y(e.start-m/2));d.selectAll("g.contourfill path").style("fill",function(b,c){return y(e.start+(c+.5)*
m)})});e(b)}},{"../../components/colorscale/get_scale":295,"../../plotly":348,"../heatmap/style":431,d3:53}],420:[function(b,m,g){var h=b("../../components/colorscale/defaults");m.exports=function(b,g,e,f){var m,d=e("contours.coloring");"fill"===d&&(m=e("contours.showlines"));!1!==m&&("lines"!==d&&e("line.color","#000"),e("line.width",.5),e("line.dash"));e("line.smoothing");"none"!==(g.contours||{}).coloring&&h(b,g,f,e,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":293}],421:[function(b,
m,g){g=b("../scatter/attributes");var h=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;m.exports={z:{valType:"data_array"},x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,text:{valType:"data_array"},transpose:{valType:"boolean",dflt:!1},xtype:{valType:"enumerated",values:["array","scaled"]},ytype:{valType:"enumerated",values:["array","scaled"]},zauto:h.zauto,zmin:h.zmin,zmax:h.zmax,colorscale:h.colorscale,autocolorscale:b({},h.autocolorscale,{dflt:!1}),reversescale:h.reversescale,
showscale:h.showscale,zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1},connectgaps:{valType:"boolean",dflt:!1},_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":290,"../../lib/extend":328,"../scatter/attributes":455}],422:[function(b,m,g){function h(b){function c(b){return v(b)?+b:void 0}var d,e,f,h,g,k=b.z;if(b.transpose){for(h=b=0;h<k.length;h++)b=Math.max(b,k[h].length);if(0===b)return!1;e=function(b){return b.length};f=function(b,c,d){return b[d][c]}}else b=
k.length,e=function(b,c){return b[c].length},f=function(b,c,d){return b[c][d]};var l=Array(b);for(h=0;b>h;h++)for(d=e(k,h),l[h]=Array(d),g=0;d>g;g++)l[h][g]=c(f(k,h,g));return l}function c(b,c,e,f,h,g){var k,l=[];k=d.Plots.traceIs(b,"contour");b=d.Plots.traceIs(b,"histogram");if(Array.isArray(c)&&!b&&"category"!==g.type){c=c.map(g.d2c);e=c.length;if(!(h>=e))return k?c.slice(0,h):c.slice(0,h+1);if(k)l=c.slice(0,h);else if(1===h)l=[c[0]-.5,c[0]+.5];else{l=[1.5*c[0]-.5*c[1]];for(k=1;e>k;k++)l.push(.5*
(c[k-1]+c[k]));l.push(1.5*c[e-1]-.5*c[e-2])}if(h>e)for(c=l[l.length-1],g=c-l[l.length-2],k=e;h>k;k++)c+=g,l.push(c)}else for(c=f||1,e=void 0===e?0:b||"category"===g.type?e:g.d2c(e),k=k?0:-.5;h>k;k++)l.push(e+c*k);return l}function l(b,c,d){var e,h,g=1;if(Array.isArray(d))for(e=0;e<c.length;e++)h=c[e],b[h[0]][h[1]]=d[h[0]][h[1]];else f(b,c);for(e=0;e<c.length&&!(4>c[e][2]);e++);c=c.slice(e);for(e=0;100>e&&g>y;e++)g=f(b,c,.5-.25*Math.min(1,.5*g));return g>y&&console.log("interp2d didn't converge quickly",
g),b}function e(b){var c,d,e,f,h,g,k=[],l={},m=[];g=b[0];var p=[],t=[0,0,0],u=r(b);for(d=0;d<b.length;d++)for(c=p,p=g,g=b[d+1]||[],e=0;u>e;e++)void 0===p[e]&&(h=(void 0!==p[e-1]?1:0)+(void 0!==p[e+1]?1:0)+(void 0!==c[e]?1:0)+(void 0!==g[e]?1:0),h?(0===d&&h++,0===e&&h++,d===b.length-1&&h++,e===p.length-1&&h++,4>h&&(l[[d,e]]=[d,e,h]),k.push([d,e,h])):m.push([d,e]));for(;m.length;){c={};g=!1;for(b=m.length-1;0<=b;b--)f=m[b],d=f[0],e=f[1],(h=((l[[d-1,e]]||t)[2]+(l[[d+1,e]]||t)[2]+(l[[d,e-1]]||t)[2]+(l[[d,
e+1]]||t)[2])/20)&&(c[f]=[d,e,h],m.splice(b,1),g=!0);if(!g)throw"findEmpties iterated with no new neighbors";for(f in c)l[f]=c[f],k.push(c[f])}return k.sort(function(b,c){return c[2]-b[2]})}function f(b,c,d){var e,f,h,g,l,m,p,r,t,u,v,w,x=0;for(h=0;h<c.length;h++){e=c[h];f=e[0];e=e[1];u=b[f][e];for(g=r=t=0;4>g;g++)l=k[g],(m=b[f+l[0]])&&(p=m[e+l[1]],void 0!==p&&(0===t?v=w=p:(v=Math.min(v,p),w=Math.max(w,p)),r++,t+=p));if(0===r)throw"iterateInterp2d order is wrong: no defined neighbors";b[f][e]=t/r;
void 0===u?4>r&&(x=1):(b[f][e]=(1+d)*b[f][e]-d*u,w>v&&(x=Math.max(x,Math.abs(b[f][e]-u)/(w-v))))}return x}var v=b("fast-isnumeric"),d=b("../../plotly"),p=b("../../lib"),t=b("../histogram2d/calc"),x=b("../../components/colorscale/calc"),w=b("./has_columns"),u=b("./convert_column_xyz"),r=b("./max_row_length");m.exports=function(b,f){function g(b){P=f._input.zsmooth=f.zsmooth=!1;p.notifier("cannot fast-zsmooth: "+b)}p.markTime("start convert x&y");var k,m,v,y,F,I,D,H,K=d.Axes.getFromId(b,f.xaxis||"x"),
O=d.Axes.getFromId(b,f.yaxis||"y"),L=d.Plots.traceIs(f,"contour");H=d.Plots.traceIs(f,"histogram");var P=L?"best":f.zsmooth;(K._minDtick=0,O._minDtick=0,p.markTime("done convert x&y"),H)?(D=t(b,f),k=D.x,m=D.x0,v=D.dx,y=D.y,F=D.y0,I=D.dy,D=D.z):(w(f)&&u(f,K,O),k=f.x?K.makeCalcdata(f,"x"):[],y=f.y?O.makeCalcdata(f,"y"):[],m=f.x0||0,v=f.dx||1,F=f.y0||0,I=f.dy||1,D=h(f),(L||f.connectgaps)&&(f._emptypoints=e(D),f._interpz=l(D,f._emptypoints,f._interpz)));if("fast"===P)if("log"===K.type||"log"===O.type)g("log axis found");
else if(!H){if(k.length){var M=(k[k.length-1]-k[0])/(k.length-1),Q=Math.abs(M/100);for(H=0;H<k.length-1;H++)if(Math.abs(k[H+1]-k[H]-M)>Q){g("x scale is not linear");break}}if(y.length&&"fast"===P)for(k=(y[y.length-1]-y[0])/(y.length-1),M=Math.abs(k/100),H=0;H<y.length-1;H++)if(Math.abs(y[H+1]-y[H]-k)>M){g("y scale is not linear");break}}y=r(D);k="scaled"===f.xtype?"":f.x;M=c(f,k,m,v,y,K);H="scaled"===f.ytype?"":f.y;Q=c(f,H,F,I,D.length,O);d.Axes.expand(K,M);d.Axes.expand(O,Q);M={x:M,y:Q,z:D};if(x(f,
D,"","z"),L&&f.contours&&"heatmap"===f.contours.coloring)L="contour"===f.type?"heatmap":"histogram2d",M.xfill=c(L,k,m,v,y,K),M.yfill=c(L,H,F,I,D.length,O);return[M]};var y=.01,k=[[-1,0],[1,0],[0,-1],[0,1]]},{"../../components/colorscale/calc":291,"../../lib":332,"../../plotly":348,"../histogram2d/calc":442,"./convert_column_xyz":424,"./has_columns":426,"./max_row_length":429,"fast-isnumeric":58}],423:[function(b,m,g){var h=b("d3"),c=b("fast-isnumeric"),l=b("../../plotly"),e=b("../../lib"),f=b("../../components/colorscale/get_scale"),
v=b("../../components/colorbar/draw");m.exports=function(b,g){var m=g[0].trace,x="cb"+m.uid,w=f(m.colorscale),u=m.zmin,r=m.zmax;if(c(u)||(u=e.aggNums(Math.min,null,m.z)),c(r)||(r=e.aggNums(Math.max,null,m.z)),b._fullLayout._infolayer.selectAll("."+x).remove(),!m.showscale)return void l.Plots.autoMargin(b,x);(g[0].t.cb=v(b,x)).fillcolor(h.scale.linear().domain(w.map(function(b){return u+b[0]*(r-u)})).range(w.map(function(b){return b[1]}))).filllevels({start:u,end:r,size:(r-u)/254}).options(m.colorbar)();
e.markTime("done colorbar")}},{"../../components/colorbar/draw":287,"../../components/colorscale/get_scale":295,"../../lib":332,"../../plotly":348,d3:53,"fast-isnumeric":58}],424:[function(b,m,g){var h=b("../../lib");m.exports=function(b,g,e){var f,m=b.x.slice(),d=b.y.slice(),p=b.z,t=b.text,x=Math.min(m.length,d.length,p.length),w=void 0!==t&&!Array.isArray(t[0]);x<m.length&&(m=m.slice(0,x));x<d.length&&(d=d.slice(0,x));for(f=0;x>f;f++)m[f]=g.d2c(m[f]),d[f]=e.d2c(d[f]);var u,r=h.distinctVals(m),y=
r.vals,k=h.distinctVals(d),q=k.vals,z=h.init2dArray(q.length,y.length);w&&(u=h.init2dArray(q.length,y.length));for(f=0;x>f;f++)g=h.findBin(m[f]+r.minDiff/2,y),e=h.findBin(d[f]+k.minDiff/2,q),z[e][g]=p[f],w&&(u[e][g]=t[f]);b.x=y;b.y=q;b.z=z;w&&(b.text=u)}},{"../../lib":332}],425:[function(b,m,g){var h=b("../../lib"),c=b("./has_columns"),l=b("./xyz_defaults"),e=b("../../components/colorscale/defaults"),f=b("./attributes");m.exports=function(b,d,g,m){function x(c,e){return h.coerce(b,d,f,c,e)}return l(b,
d,x)?(x("text"),x("zsmooth"),x("connectgaps",c(d)&&!1!==d.zsmooth),void e(b,d,m,x,{prefix:"",cLetter:"z"})):void(d.visible=!1)}},{"../../components/colorscale/defaults":293,"../../lib":332,"./attributes":421,"./has_columns":426,"./xyz_defaults":432}],426:[function(b,m,g){m.exports=function(b){return!Array.isArray(b.z[0])}},{}],427:[function(b,m,g){var h=b("../../plotly"),c=b("../../lib");m.exports=function(b,e,f,g,d){if(!(b.distance<h.Fx.MAXDIST)){var m,t,x,w,u=b.cd[0];g=u.trace;var r=b.xa,y=b.ya,
k=u.x,q=u.y,z=u.z,u=u.zmask,E=k,A=q;if(!1!==b.index){try{x=Math.round(b.index[1]),w=Math.round(b.index[0])}catch(B){return void console.log("Error hovering on heatmap, pointNumber must be [row,col], found:",b.index)}if(0>x||x>=z[0].length||0>w||w>z.length)return}else{if(h.Fx.inbox(e-k[0],e-k[k.length-1])>h.Fx.MAXDIST||h.Fx.inbox(f-q[0],f-q[q.length-1])>h.Fx.MAXDIST)return;if(d){E=[2*k[0]-k[1]];for(x=1;x<k.length;x++)E.push((k[x]+k[x-1])/2);E.push([2*k[k.length-1]-k[k.length-2]]);A=[2*q[0]-q[1]];for(x=
1;x<q.length;x++)A.push((q[x]+q[x-1])/2);A.push([2*q[q.length-1]-q[q.length-2]])}x=Math.max(0,Math.min(E.length-2,c.findBin(e,E)));w=Math.max(0,Math.min(A.length-2,c.findBin(f,A)))}e=r.c2p(k[x]);f=r.c2p(k[x+1]);r=y.c2p(q[w]);y=y.c2p(q[w+1]);d?(f=e,m=k[x],y=r,t=q[w]):(m=(k[x]+k[x+1])/2,t=(q[w]+q[w+1])/2,g.zsmooth&&(e=f=(e+f)/2,r=y=(r+y)/2));d=z[w][x];u&&!u[w][x]&&(d=void 0);var C;return Array.isArray(g.text)&&Array.isArray(g.text[w])&&(C=g.text[w][x]),[c.extendFlat(b,{index:[w,x],distance:h.Fx.MAXDIST+
10,x0:e,x1:f,y0:r,y1:y,xLabelVal:m,yLabelVal:t,zLabelVal:d,text:C})]}}},{"../../lib":332,"../../plotly":348}],428:[function(b,m,g){b("../../plotly").Plots.register(g,"heatmap",["cartesian","2dMap"],{});g.attributes=b("./attributes");g.supplyDefaults=b("./defaults");g.calc=b("./calc");g.plot=b("./plot");g.colorbar=b("./colorbar");g.style=b("./style");g.hoverPoints=b("./hover")},{"../../plotly":348,"./attributes":421,"./calc":422,"./colorbar":423,"./defaults":425,"./hover":427,"./plot":430,"./style":431}],
429:[function(b,m,g){m.exports=function(b){for(var c=0,g=0;g<b.length;g++)c=Math.max(c,b[g].length);return c}},{}],430:[function(b,m,g){function h(b,g,h){function m(b,c){var d=c.length-2,e=f.constrain(f.findBin(b,c),0,d),g=c[e],e=f.constrain(e+(b-g)/(c[e+1]-g)-.5,0,d),g=Math.round(e),h=Math.abs(e-g);return e&&e!==d&&h?{bin0:g,frac:h,bin1:Math.round(g+h/(e-g))}:{bin0:g,bin1:g,frac:0}}function u(b,c){if(void 0!==b){var d=ga((b-K)/(O-K));return d[0]=Math.round(d[0]),d[1]=Math.round(d[1]),d[2]=Math.round(d[2]),
na+=c,sa+=d[0]*c,ra+=d[1]*c,ya+=d[2]*c,d}return[0,0,0,0]}function r(b,c,d){b[c]=d[0];b[c+1]=d[1];b[c+2]=d[2];b[c+3]=Math.round(255*d[3])}function y(b,c,d,e){var f=b[d.bin0];if(void 0===f)return u(void 0,1);var g;b=b[d.bin1];var h=c[d.bin0];c=c[d.bin1];return g=void 0===b?void 0===c?0:void 0===h?2*(c-f):2*(2*c-h-f)/3:void 0===c?void 0===h?0:2*(2*f-b-h)/3:void 0===h?2*(2*c-b-f)/3:c+f-b-h,u(f+d.frac*(b-f||0)+e.frac*((h-f||0)+d.frac*g))}f.markTime("in Heatmap.plot");var k=h[0].trace,q=k.uid,z=g.x(),E=
g.y(),A=b._fullLayout,C="hm"+q,B="cb"+q;if(A._paper.selectAll(".contour"+q).remove(),!0!==k.visible)return A._paper.selectAll("."+C).remove(),void A._paper.selectAll("."+B).remove();for(var G,F,I,D,H,q=h[0].z,K=k.zmin,O=k.zmax,L=v(k.colorscale),P=h[0].x,M=h[0].y,Q=e.Plots.traceIs(k,"contour"),B=Q?"best":k.zsmooth,T=q.length,R=d(q),S=!1,X=!1,k=0;void 0===G&&k<P.length-1;)G=z.c2p(P[k]),k++;for(k=P.length-1;void 0===F&&0<k;)F=z.c2p(P[k]),k--;G>F&&(I=F,F=G,G=I,S=!0);for(k=0;void 0===D&&k<M.length-1;)D=
E.c2p(M[k]),k++;for(k=M.length-1;void 0===H&&0<k;)H=E.c2p(M[k]),k--;if(D>H&&(I=D,D=H,H=I,X=!0),Q&&(P=h[0].xfill,M=h[0].yfill),"fast"!==B)k="best"===B?0:.5,G=Math.max(-k*z._length,G),F=Math.min((1+k)*z._length,F),D=Math.max(-k*E._length,D),H=Math.min((1+k)*E._length,H);var V=Math.round(F-G),Y=Math.round(H-D);if(!(0>=V||0>=Y)){var W,Z;"fast"===B?(W=R,Z=T):(W=V,Z=Y);F=document.createElement("canvas");F.width=W;F.height=Z;var U,ea;W=F.getContext("2d");var ga=c.scale.linear().domain(L.map(function(b){return b[0]})).range(L.map(function(b){b=
l(b[1]).toRgb();return[b.r,b.g,b.b,b.a]})).clamp(!0);"fast"===B?(U=S?function(b){return R-1-b}:f.identity,ea=X?function(b){return T-1-b}:f.identity):(U=function(b){return f.constrain(Math.round(z.c2p(P[b])-G),0,V)},ea=function(b){return f.constrain(Math.round(E.c2p(M[b])-D),0,Y)});f.markTime("done init png");var ia,ha,k=ea(0);Z=[k,k];H=S?0:1;var X=X?0:1,na=0,sa=0,ra=0,ya=0;if(B){X=0;ia=new Uint8Array(V*Y*4);if("best"===B){ha=Array(P.length);U=Array(M.length);ea=Array(V);for(k=0;k<P.length;k++)ha[k]=
Math.round(z.c2p(P[k])-G);for(k=0;k<M.length;k++)U[k]=Math.round(E.c2p(M[k])-D);for(k=0;V>k;k++)ea[k]=m(k,ha);for(B=0;Y>B;B++)for(S=m(B,U),Z=q[S.bin0],H=q[S.bin1],k=0;V>k;k++,X+=4)ha=y(Z,H,ea[k],S),r(ia,X,ha)}else for(B=0;T>B;B++)for(S=q[B],Z=ea(B),k=0;R>k;k++)ha=u(S[k],1),X=4*(Z*V+U(k)),r(ia,X,ha);ha=W.createImageData(V,Y);ha.data.set(ia);W.putImageData(ha,0,0)}else for(B=0;T>B;B++)if(S=q[B],Z.reverse(),Z[X]=ea(B+1),Z[0]!==Z[1]&&void 0!==Z[0]&&void 0!==Z[1])for(k=U(0),L=[k,k],k=0;R>k;k++)L.reverse(),
L[H]=U(k+1),L[0]!==L[1]&&void 0!==L[0]&&void 0!==L[1]&&(ia=S[k],ha=u(ia,(L[1]-L[0])*(Z[1]-Z[0])),W.fillStyle="rgba("+ha.join(",")+")",W.fillRect(L[0],Z[0],L[1]-L[0],Z[1]-Z[0]));f.markTime("done filling png");sa=Math.round(sa/na);ra=Math.round(ra/na);ya=Math.round(ya/na);ha=l("rgb("+sa+","+ra+","+ya+")");b._hmpixcount=(b._hmpixcount||0)+na;b._hmlumcount=(b._hmlumcount||0)+na*ha.getLuminance();A._paper.selectAll("."+C).remove();g.plot.select(".maplayer").append("svg:image").classed(C,!0).datum(h[0]).attr({xmlns:"http://www.w3.org/2000/svg",
"xlink:xlink:href":F.toDataURL("image/png"),height:Y,width:V,x:G,y:D,preserveAspectRatio:"none"});f.markTime("done showing png")}}var c=b("d3"),l=b("tinycolor2"),e=b("../../plotly"),f=b("../../lib"),v=b("../../components/colorscale/get_scale"),d=b("./max_row_length");m.exports=function(b,c,d){d.forEach(function(d){h(b,c,d)})}},{"../../components/colorscale/get_scale":295,"../../lib":332,"../../plotly":348,"./max_row_length":429,d3:53,tinycolor2:213}],431:[function(b,m,g){var h=b("d3");m.exports=function(b){h.select(b).selectAll("image").style("opacity",
function(b){return b.trace.opacity})}},{d3:53}],432:[function(b,m,g){function h(b,c){var g=c(b);return"scaled"===(g?c(b+"type","array"):"scaled")&&(c(b+"0"),c("d"+b)),g}var c=b("fast-isnumeric"),l=b("./has_columns");m.exports=function(b,f,g){var d,m,t=g("z");if(void 0===t||!t.length)return 0;if(l(b)){if(d=g("x"),m=g("y"),!d||!m)return 0}else{h("x",g);h("y",g);var x;b=!0;m=d=!1;for(var w=0;w<t.length;w++){if(x=t[w],!Array.isArray(x)){b=!1;break}0<x.length&&(d=!0);for(var u=0;u<x.length;u++)if(c(x[u])){m=
!0;break}}if(!(b&&d&&m))return 0;g("transpose")}return f.z.length}},{"./has_columns":426,"fast-isnumeric":58}],433:[function(b,m,g){function h(b){return{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"any",dflt:1}}}g=b("../bar/attributes");b=b("../../lib").extendFlat;var c=g.marker,l=c.line;m.exports={x:{valType:"data_array"},y:{valType:"data_array"},text:g.text,orientation:g.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count"},
histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:""},autobinx:{valType:"boolean",dflt:!0},nbinsx:{valType:"integer",min:0,dflt:0},xbins:h("x"),autobiny:{valType:"boolean",dflt:!0},nbinsy:{valType:"integer",min:0,dflt:0},ybins:h("y"),marker:{color:c.color,colorscale:c.colorscale,cauto:c.cauto,cmax:c.cmax,cmin:c.cmin,autocolorscale:c.autocolorscale,reversescale:c.reversescale,showscale:c.showscale,line:{color:l.color,colorscale:l.colorscale,cauto:l.cauto,
cmax:l.cmax,cmin:l.cmin,autocolorscale:l.autocolorscale,reversescale:l.reversescale,width:b({},l.width,{dflt:0})}},_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"},_deprecated:{bardir:g._deprecated.bardir}}},{"../../lib":332,"../bar/attributes":394}],434:[function(b,m,g){m.exports=function(b,c){for(var g=b.length,e=0,f=0;g>f;f++)c[f]?(b[f]/=c[f],e+=b[f]):b[f]=null;return e}},{}],435:[function(b,m,g){m.exports=function(b,c,g,e){return g("histnorm"),e.forEach(function(b){var c=
g(b+"bins.start"),d=g(b+"bins.end"),c=g("autobin"+b,!(c&&d));g(c?"nbins"+b:b+"bins.size")}),c}},{}],436:[function(b,m,g){var h=b("fast-isnumeric");m.exports={count:function(b,g,e){return e[b]++,1},sum:function(b,g,e,f){g=f[g];return h(g)?(g=Number(g),e[b]+=g,g):0},avg:function(b,g,e,f,m){g=f[g];return h(g)&&(g=Number(g),e[b]+=g,m[b]++),0},min:function(b,g,e,f){g=f[g];if(h(g)){if(g=Number(g),!h(e[b]))return e[b]=g,g;if(e[b]>g)return e[b]=g,g-e[b]}return 0},max:function(b,g,e,f){g=f[g];if(h(g)){if(g=
Number(g),!h(e[b]))return e[b]=g,g;if(e[b]<g)return e[b]=g,g-e[b]}return 0}}},{"fast-isnumeric":58}],437:[function(b,m,g){var h=b("fast-isnumeric"),c=b("../../plotly"),l=b("../../lib"),e=b("./bin_functions"),f=b("./norm_functions"),v=b("./average");m.exports=function(b,g){if(!0===g.visible){var m,x=[],w=[],u=c.Axes.getFromId(b,"h"===g.orientation?g.yaxis||"y":g.xaxis||"x"),r="h"===g.orientation?"y":"x";m={x:"y",y:"x"}[r];var y=u.makeCalcdata(g,r);!1===g["autobin"+r]&&r+"bins"in g||(g[r+"bins"]=c.Axes.autoBin(y,
u,g["nbins"+r]),g._input[r+"bins"]=g[r+"bins"]);var k,q,z,E;z=g[r+"bins"];var A="string"==typeof z.size,u=A?[]:z,r=[],C=[],B=0,G=g.histnorm;k=g.histfunc;var F=-1!==G.indexOf("density"),I="max"===k||"min"===k?null:0,D=e.count,G=f[G],H=!1;Array.isArray(g[m])&&"count"!==k&&(E=g[m],H="avg"===k,D=e[k]);m=z.start;for(q=z.end+(z.start-c.Axes.tickIncrement(z.start,z.size))/1E6;q>m&&5E3>x.length;)k=c.Axes.tickIncrement(m,z.size),x.push((m+k)/2),w.push(I),A&&u.push(m),F&&r.push(1/(k-m)),H&&C.push(0),m=k;A=
w.length;for(m=0;m<y.length;m++)z=l.findBin(y[m],u),0<=z&&A>z&&(B+=D(z,m,w,E,C));H&&(B=v(w,C));G&&G(w,B,r);y=Math.min(x.length,w.length);E=[];u=0;r=y-1;for(m=0;y>m;m++)if(w[m]){u=m;break}for(m=y-1;m>u;m--)if(w[m]){r=m;break}for(m=u;r>=m;m++)h(x[m])&&h(w[m])&&E.push({p:x[m],s:w[m],b:0});return E}}},{"../../lib":332,"../../plotly":348,"./average":434,"./bin_functions":436,"./norm_functions":440,"fast-isnumeric":58}],438:[function(b,m,g){var h=b("../../lib"),c=b("../../components/color"),l=b("./bin_defaults"),
e=b("../bar/style_defaults"),f=b("../../components/errorbars/defaults"),v=b("./attributes");m.exports=function(b,g,m,x){function w(c,e){return h.coerce(b,g,v,c,e)}var u=w("x"),r=w("y");w("text");u=w("orientation",r&&!u?"h":"v");r=g["v"===u?"x":"y"];if(!r||!r.length)return void(g.visible=!1);g["h"===u?"x":"y"]&&w("histfunc");l(b,g,w,"h"===u?["y"]:["x"]);e(b,g,w,m,x);f(b,g,c.defaultLine,{axis:"y"});f(b,g,c.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":284,"../../components/errorbars/defaults":307,
"../../lib":332,"../bar/style_defaults":404,"./attributes":433,"./bin_defaults":435}],439:[function(b,m,g){b("../../plotly").Plots.register(g,"histogram","cartesian bar histogram oriented errorBarsOK showLegend".split(" "),{});g.attributes=b("./attributes");g.layoutAttributes=b("../bar/layout_attributes");g.supplyDefaults=b("./defaults");g.supplyLayoutDefaults=b("../bar/layout_defaults");g.calc=b("./calc");g.setPositions=b("../bar/set_positions");g.plot=b("../bar/plot");g.style=b("../bar/style");
g.colorbar=b("../scatter/colorbar");g.hoverPoints=b("../bar/hover")},{"../../plotly":348,"../bar/hover":397,"../bar/layout_attributes":399,"../bar/layout_defaults":400,"../bar/plot":401,"../bar/set_positions":402,"../bar/style":403,"../scatter/colorbar":456,"./attributes":433,"./calc":437,"./defaults":438}],440:[function(b,m,g){m.exports={percent:function(b,c){for(var g=b.length,e=100/c,f=0;g>f;f++)b[f]*=e},probability:function(b,c){for(var g=b.length,e=0;g>e;e++)b[e]/=c},density:function(b,c,g,e){c=
b.length;e=e||1;for(var f=0;c>f;f++)b[f]=b[f]*g[f]*e},"probability density":function(b,c,g,e){var f=b.length;e&&(c/=e);for(e=0;f>e;e++)b[e]*=g[e]/c}}},{}],441:[function(b,m,g){g=b("../histogram/attributes");b=b("../heatmap/attributes");m.exports={x:g.x,y:g.y,z:{valType:"data_array"},marker:{color:{valType:"data_array"}},histnorm:g.histnorm,histfunc:g.histfunc,autobinx:g.autobinx,nbinsx:g.nbinsx,xbins:g.xbins,autobiny:g.autobiny,nbinsy:g.nbinsy,ybins:g.ybins,zauto:b.zauto,zmin:b.zmin,zmax:b.zmax,colorscale:b.colorscale,
autocolorscale:b.autocolorscale,reversescale:b.reversescale,showscale:b.showscale,zsmooth:b.zsmooth,_nestedModules:{colorbar:"Colorbar"}}},{"../heatmap/attributes":421,"../histogram/attributes":433}],442:[function(b,m,g){var h=b("../../plotly"),c=b("../../lib"),l=b("../histogram/bin_functions"),e=b("../histogram/norm_functions"),f=b("../histogram/average");m.exports=function(b,d){var g,m,x,w,u,r;u=h.Axes.getFromId(b,d.xaxis||"x");var y=d.x?u.makeCalcdata(d,"x"):[],k=h.Axes.getFromId(b,d.yaxis||"y"),
q=d.y?k.makeCalcdata(d,"y"):[],z=Math.min(y.length,q.length);y.length>z&&y.splice(z,y.length-z);q.length>z&&q.splice(z,q.length-z);c.markTime("done convert data");!d.autobinx&&"xbins"in d||(d.xbins=h.Axes.autoBin(y,u,d.nbinsx,"2d"),"histogram2dcontour"===d.type&&(d.xbins.start-=d.xbins.size,d.xbins.end+=d.xbins.size),d._input.xbins=d.xbins);!d.autobiny&&"ybins"in d||(d.ybins=h.Axes.autoBin(q,k,d.nbinsy,"2d"),"histogram2dcontour"===d.type&&(d.ybins.start-=d.ybins.size,d.ybins.end+=d.ybins.size),d._input.ybins=
d.ybins);c.markTime("done autoBin");u=[];var E,A;E=[];x=[];var C="string"==typeof d.xbins.size?[]:d.xbins,B="string"==typeof d.xbins.size?[]:d.ybins,k=0,G=[],F=d.histnorm;r=d.histfunc;A=-1!==F.indexOf("density");g="max"===r||"min"===r?null:0;var I=l.count,F=e[F],D=!1,H=[],K=[],O="z"in d?d.z:"marker"in d&&Array.isArray(d.marker.color)?d.marker.color:"";O&&"count"!==r&&(D="avg"===r,I=l[r]);var L=d.xbins,P=L.end+(L.start-h.Axes.tickIncrement(L.start,L.size))/1E6;for(r=L.start;P>r;r=h.Axes.tickIncrement(r,
L.size))E.push(g),Array.isArray(C)&&C.push(r),D&&x.push(0);Array.isArray(C)&&C.push(r);var M=E.length;g=d.xbins.start;m=(r-g)/M;g+=m/2;L=d.ybins;P=L.end+(L.start-h.Axes.tickIncrement(L.start,L.size))/1E6;for(r=L.start;P>r;r=h.Axes.tickIncrement(r,L.size))u.push(E.concat()),Array.isArray(B)&&B.push(r),D&&G.push(x.concat());Array.isArray(B)&&B.push(r);L=u.length;x=d.ybins.start;w=(r-x)/L;x+=w/2;A&&(H=E.map(function(b,c){return Array.isArray(C)?1/(C[c+1]-C[c]):1/m}),K=u.map(function(b,c){return Array.isArray(B)?
1/(B[c+1]-B[c]):1/w}));c.markTime("done making bins");for(r=0;z>r;r++)E=c.findBin(y[r],C),A=c.findBin(q[r],B),0<=E&&M>E&&0<=A&&L>A&&(k+=I(E,r,u[A],O,G[A]));if(D)for(A=0;L>A;A++)k+=f(u[A],G[A]);if(F)for(A=0;L>A;A++)F(u[A],k,H,K[A]);return c.markTime("done binning"),{x:y,x0:g,dx:m,y:q,y0:x,dy:w,z:u}}},{"../../lib":332,"../../plotly":348,"../histogram/average":434,"../histogram/bin_functions":436,"../histogram/norm_functions":440}],443:[function(b,m,g){var h=b("../../lib"),c=b("./sample_defaults"),l=
b("../../components/colorscale/defaults"),e=b("./attributes");m.exports=function(b,g,d){function m(c,d){return h.coerce(b,g,e,c,d)}c(b,g,m);m("zsmooth");l(b,g,d,m,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":293,"../../lib":332,"./attributes":441,"./sample_defaults":445}],444:[function(b,m,g){b("../../plotly").Plots.register(g,"histogram2d",["cartesian","2dMap","histogram"],{});g.attributes=b("./attributes");g.supplyDefaults=b("./defaults");g.calc=b("../heatmap/calc");g.plot=
b("../heatmap/plot");g.colorbar=b("../heatmap/colorbar");g.style=b("../heatmap/style");g.hoverPoints=b("../heatmap/hover")},{"../../plotly":348,"../heatmap/calc":422,"../heatmap/colorbar":423,"../heatmap/hover":427,"../heatmap/plot":430,"../heatmap/style":431,"./attributes":441,"./defaults":443}],445:[function(b,m,g){var h=b("../histogram/bin_defaults");m.exports=function(b,g,e){var f=e("x"),m=e("y");if(!(f&&f.length&&m&&m.length))return void(g.visible=!1);(e("z")||e("marker.color"))&&e("histfunc");
h(b,g,e,["x","y"])}},{"../histogram/bin_defaults":435}],446:[function(b,m,g){g=b("../histogram2d/attributes");b=b("../contour/attributes");m.exports={x:g.x,y:g.y,z:g.z,marker:g.marker,histnorm:g.histnorm,histfunc:g.histfunc,autobinx:g.autobinx,nbinsx:g.nbinsx,xbins:g.xbins,autobiny:g.autobiny,nbinsy:g.nbinsy,ybins:g.ybins,zauto:b.zauto,zmin:b.zmin,zmax:b.zmax,colorscale:b.colorscale,autocolorscale:b.autocolorscale,reversescale:b.reversescale,showscale:b.showscale,autocontour:b.autocontour,ncontours:b.ncontours,
contours:b.contours,line:b.line,_nestedModules:{colorbar:"Colorbar"}}},{"../contour/attributes":412,"../histogram2d/attributes":441}],447:[function(b,m,g){var h=b("../../lib"),c=b("../histogram2d/sample_defaults"),l=b("../contour/style_defaults"),e=b("./attributes");m.exports=function(b,g,d,m){function t(c,d){return h.coerce(b,g,e,c,d)}c(b,g,t);d=h.coerce2(b,g,e,"contours.start");var x=h.coerce2(b,g,e,"contours.end");d=t("autocontour",!(d&&x));t(d?"ncontours":"contours.size");l(b,g,t,m)}},{"../../lib":332,
"../contour/style_defaults":420,"../histogram2d/sample_defaults":445,"./attributes":446}],448:[function(b,m,g){b("../../plotly").Plots.register(g,"histogram2dcontour",["cartesian","2dMap","contour","histogram"],{});g.attributes=b("./attributes");g.supplyDefaults=b("./defaults");g.calc=b("../contour/calc");g.plot=b("../contour/plot");g.style=b("../contour/style");g.colorbar=b("../contour/colorbar");g.hoverPoints=b("../contour/hover")},{"../../plotly":348,"../contour/calc":413,"../contour/colorbar":414,
"../contour/hover":416,"../contour/plot":418,"../contour/style":419,"./attributes":446,"./defaults":447}],449:[function(b,m,g){g=b("../../components/colorscale/attributes");var h=b("../surface/attributes");b=b("../../lib/extend").extendFlat;m.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},i:{valType:"data_array"},j:{valType:"data_array"},k:{valType:"data_array"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z"},alphahull:{valType:"number",dflt:-1},
intensity:{valType:"data_array"},color:{valType:"color"},vertexcolor:{valType:"data_array"},facecolor:{valType:"data_array"},opacity:b({},h.opacity),flatshading:{valType:"boolean",dflt:!1},contour:{show:b({},h.contours.x.show,{}),color:b({},h.contours.x.color),width:b({},h.contours.x.width)},colorscale:g.colorscale,reversescale:g.reversescale,showscale:g.showscale,lighting:b({},h.lighting),_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":290,"../../lib/extend":328,
"../surface/attributes":472}],450:[function(b,m,g){function h(b,c,d){this.scene=b;this.uid=d;this.mesh=c;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function c(b){return b.map(function(b){var c=b[0];b=f(b[1]).toRgb();return{index:c,rgb:[b.r,b.g,b.b,1]}})}function l(b,c,d){for(var e=Array(b.length),f=0;f<b.length;++f)e[f]=[b[f],c[f],d[f]];return e}var e=b("gl-mesh3d"),f=b("tinycolor2"),v=b("delaunay-triangulate"),d=b("alpha-shape"),p=b("convex-hull"),t=b("../../lib/str2rgbarray");
b=h.prototype;b.handlePick=function(b){if(b.object===this.mesh){var c=b.data.index;return b.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c]],!0}};b.update=function(b){function e(b,c,d){return c.map(function(c){return b.d2l(c)*d})}var f=this.scene,g=f.fullSceneLayout;this.data=b;g=l(e(g.xaxis,b.x,f.dataScale[0]),e(g.yaxis,b.y,f.dataScale[1]),e(g.zaxis,b.z,f.dataScale[2]));if(b.i&&b.j&&b.k)f=l(b.i,b.j,b.k);else if(0===b.alphahull)f=p(g);else if(0<b.alphahull)f=d(b.alphahull,g);else var h=
["x","y","z"].indexOf(b.delaunayaxis),f=v(g.map(function(b){return[b[(h+1)%3],b[(h+2)%3]]}));f={positions:g,cells:f,ambient:b.lighting.ambient,diffuse:b.lighting.diffuse,specular:b.lighting.specular,roughness:b.lighting.roughness,fresnel:b.lighting.fresnel,opacity:b.opacity,contourEnable:b.contour.show,contourColor:t(b.contour.color).slice(0,3),contourWidth:b.contour.width,useFacetNormals:b.flatshading};b.intensity?(this.color="#fff",f.vertexIntensity=b.intensity,f.colormap=c(b.colorscale)):b.vertexColor?
(this.color=b.vertexColor[0],f.vertexColors=b.vertexColor.map(t)):b.faceColor?(this.color=b.faceColor[0],f.cellColors=b.faceColor.map(t)):(this.color=b.color,f.meshColor=t(b.color));this.mesh.update(f)};b.dispose=function(){this.glplot.remove(this.mesh);this.mesh.dispose()};m.exports=function(b,c){var d=e({gl:b.glplot.gl}),f=new h(b,d,c.uid);return f.update(c),b.glplot.add(d),f}},{"../../lib/str2rgbarray":341,"alpha-shape":23,"convex-hull":42,"delaunay-triangulate":54,"gl-mesh3d":91,tinycolor2:213}],
451:[function(b,m,g){var h=b("../../plotly"),c=b("./");m.exports=function(b,e,f,g){function d(d,f){return h.Lib.coerce(b,e,c.attributes,d,f)}function m(b){var c=b.map(function(b){return(b=d(b))&&Array.isArray(b)?b:null});return c.every(function(b){return b&&b.length===c[0].length})&&c}var t=m(["x","y","z"]),x=m(["i","j","k"]);return t?(x&&x.forEach(function(b){for(var c=0;c<b.length;++c)b[c]|=0}),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel contour.show contour.color contour.width colorscale reversescale flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(b){d(b)}),
"intensity"in b?(d("intensity"),d("showscale",!0)):(e.showscale=!1,"vertexColor"in b?d("vertexColor"):"faceColor"in b?d("faceColor"):d("color",f)),e.reversescale&&(e.colorscale=e.colorscale.map(function(b){return[1-b[0],b[1]]}).reverse()),void(e.showscale&&h.Colorbar.supplyDefaults(b,e,g))):void(e.visible=!1)}},{"../../plotly":348,"./":452}],452:[function(b,m,g){g=b("../../plotly");m=m.exports={};g.Plots.register(m,"mesh3d",["gl3d"],{});m.attributes=b("./attributes");m.supplyDefaults=b("./defaults");
m.colorbar=b("../heatmap/colorbar")},{"../../plotly":348,"../heatmap/colorbar":423,"./attributes":449,"./defaults":451}],453:[function(b,m,g){g=b("../../components/color/attributes");var h=b("../../plots/font_attributes"),c=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;m.exports={labels:{valType:"data_array"},label0:{valType:"number",dflt:0},dlabel:{valType:"number",dflt:1},values:{valType:"data_array"},marker:{colors:{valType:"data_array"},line:{color:{valType:"color",dflt:g.defaultLine,
arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}}},text:{valType:"data_array"},scalegroup:{valType:"string",dflt:""},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"]},hoverinfo:b({},c.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0},textfont:b({},h,{}),insidetextfont:b({},h,{}),outsidetextfont:b({},h,{}),domain:{x:{valType:"info_array",items:[{valType:"number",
min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},hole:{valType:"number",min:0,max:1,dflt:0},sort:{valType:"boolean",dflt:!0},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise"},rotation:{valType:"number",min:-360,max:360,dflt:0},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0}}},{"../../components/color/attributes":283,"../../lib/extend":328,
"../../plots/attributes":349,"../../plots/font_attributes":354}],454:[function(b,m,g){function h(b){b=(100*b).toPrecision(3);return-1!==b.indexOf(".")?b.replace(/[.]?0+$/,"")+"%":b+"%"}function c(b){b=b.toPrecision(10);return-1!==b.indexOf(".")?b.replace(/[.]?0+$/,""):b}function l(b){if(!k){var c=x.Color.defaults;k=c.slice();for(var d=0;d<c.length;d++)k.push(r(c[d]).lighten(20).toHexString());for(d=0;d<x.Color.defaults.length;d++)k.push(r(c[d]).darken(20).toHexString())}return k[b%k.length]}function e(b,
c){return b.v!==c.vTotal||c.trace.hole?Math.min(1/(1+1/Math.sin(Math.PI*Math.min(b.v/c.vTotal,.5))),(1-c.trace.hole)/2):1}function f(b,c){var d=c.pxmid[0],e=c.pxmid[1],f=b.width/2,g=b.height/2;return 0>d&&(f*=-1),0>e&&(g*=-1),{scale:1,rCenter:1,rotate:0,x:f+Math.abs(g)*(0<f?1:-1)/2,y:g/(1+d*d/(e*e)),outside:!0}}function v(b,c){function d(b,c){return b.pxmid[1]-c.pxmid[1]}function e(b,c){return c.pxmid[1]-b.pxmid[1]}function f(b,d){d||(d={});var e,g,k,q,t,u;g=d.labelExtraY+(h?d.yLabelMax:d.yLabelMin);
var w=h?b.yLabelMin:b.yLabelMax,x=h?b.yLabelMax:b.yLabelMin,y=b.cyFinal+m(b.px0[1],b.px1[1]),A=g-w;if(0<A*r&&(b.labelExtraY=A),Array.isArray(c.pull))for(g=0;g<v.length;g++)k=v[g],k===b||(c.pull[b.i]||0)>=c.pull[k.i]||(0<(b.pxmid[1]-k.pxmid[1])*r?(q=k.cyFinal+m(k.px0[1],k.px1[1]),A=q-w-b.labelExtraY,0<A*r&&(b.labelExtraY+=A)):0<(x+b.labelExtraY-y)*r&&(e=3*p*Math.abs(g-v.indexOf(b)),t=k.cxFinal+l(k.px0[0],k.px1[0]),u=t+e-(b.cxFinal+b.pxmid[0])-b.labelExtraX,0<u*p&&(b.labelExtraX+=u)))}var g,h,k,l,m,
p,r,t,u,v,w,x;for(h=0;2>h;h++)for(k=h?d:e,m=h?Math.max:Math.min,r=h?1:-1,g=0;2>g;g++){l=g?Math.max:Math.min;p=g?1:-1;t=b[h][g];t.sort(k);u=b[1-h][g];v=u.concat(t);x=[];for(w=0;w<t.length;w++)void 0!==t[w].yLabelMid&&x.push(t[w]);t=!1;for(w=0;h&&w<u.length;w++)if(void 0!==u[w].yLabelMid){t=u[w];break}for(w=0;w<x.length;w++)u=w&&x[w-1],t&&!w&&(u=t),f(x[w],u)}}function d(b,c){var d,e,f,g,h,k,l,m,p=[];for(f=0;f<b.length;f++){if(h=b[f][0],k=h.trace,d=c.w*(k.domain.x[1]-k.domain.x[0]),e=c.h*(k.domain.y[1]-
k.domain.y[0]),l=k.tiltaxis*Math.PI/180,m=k.pull,Array.isArray(m))for(g=m=0;g<k.pull.length;g++)k.pull[g]>m&&(m=k.pull[g]);h.r=Math.min(d/t(k.tilt,Math.sin(l),k.depth),e/t(k.tilt,Math.cos(l),k.depth))/(2+2*m);h.cx=c.l+c.w*(k.domain.x[1]+k.domain.x[0])/2;h.cy=c.t+c.h*(2-k.domain.y[1]-k.domain.y[0])/2;k.scalegroup&&-1===p.indexOf(k.scalegroup)&&p.push(k.scalegroup)}for(g=0;g<p.length;g++){e=1/0;d=p[g];for(f=0;f<b.length;f++)h=b[f][0],h.trace.scalegroup===d&&(e=Math.min(e,h.r*h.r/h.vTotal));for(f=0;f<
b.length;f++)h=b[f][0],h.trace.scalegroup===d&&(h.r=Math.sqrt(e*h.vTotal))}}function p(b){function c(b){var d=p.r*Math.sin(b);b=-p.r*Math.cos(b);return r?[d*(1-k*e*e)+b*h*k,d*h*k+b*(1-k*f*f),Math.sin(g)*(b*f-d*e)]:[d,b]}var d,e,f,g,h,k,l,m,p=b[0];m=p.trace;var r=m.tilt,t=m.rotation*Math.PI/180,u=2*Math.PI/p.vTotal,v="px0",w="px1";if("counterclockwise"===m.direction){for(l=0;l<b.length&&b[l].hidden;l++);if(l===b.length)return;t+=u*b[l].v;u*=-1;v="px1";w="px0"}r&&(g=r*Math.PI/180,d=m.tiltaxis*Math.PI/
180,h=Math.sin(d)*Math.cos(d),k=1-Math.cos(g),e=Math.sin(d),f=Math.cos(d));m=c(t);for(l=0;l<b.length;l++)d=b[l],d.hidden||(d[v]=m,t+=u*d.v/2,d.pxmid=c(t),d.midangle=t,t+=u*d.v/2,m=c(t),d[w]=m,d.largeArc=d.v>p.vTotal/2?1:0)}function t(b,c,d){if(!b)return 1;b=Math.sin(b*Math.PI/180);return Math.max(.01,d*b*Math.abs(c)+2*Math.sqrt(1-b*b*c*c))}var x=b("../../plotly"),w=b("d3"),u=b("fast-isnumeric"),r=b("tinycolor2"),y=m.exports={};x.Plots.register(y,"pie",["pie","showLegend"],{});y.attributes=b("./attributes");
y.supplyDefaults=function(b,c,d,e){function f(d,e){return x.Lib.coerce(b,c,y.attributes,d,e)}d=x.Lib.coerceFont;var g=f("values");if(!Array.isArray(g)||!g.length)return void(c.visible=!1);g=f("labels");Array.isArray(g)||(f("label0"),f("dlabel"));f("marker.line.width")&&f("marker.line.color");g=f("marker.colors");Array.isArray(g)||(c.marker.colors=[]);f("scalegroup");g=f("text");g=f("textinfo",Array.isArray(g)?"text+percent":"percent");if(f("hoverinfo",1===e._dataLength?"label+text+value+percent":
void 0),g&&"none"!==g){var h=f("textposition"),k=Array.isArray(h)||"auto"===h,g=k||"inside"===h,h=k||"outside"===h;if(g||h)e=d(f,"textfont",e.font),g&&d(f,"insidetextfont",e),h&&d(f,"outsidetextfont",e)}f("domain.x");f("domain.y");f("hole");f("sort");f("direction");f("rotation");f("pull")};y.layoutAttributes={hiddenlabels:{valType:"data_array"}};y.supplyLayoutDefaults=function(b,c){x.Lib.coerce(b,c,y.layoutAttributes,"hiddenlabels",void 0)};y.calc=function(b,d){var e,f,g,k,m,p=d.values,t=d.labels,
v=[],w=b._fullLayout,y=w._piecolormap,O={},L=!1,P=0,M=w.hiddenlabels||[];if(d.dlabel)for(t=Array(p.length),e=0;e<p.length;e++)t[e]=String(d.label0+e*d.dlabel);for(e=0;e<p.length;e++)f=p[e],u(f)&&(f=+f,0>f||(g=t[e],(void 0===g||""===g)&&(g=e),g=String(g),void 0===O[g]&&(O[g]=!0,k=r(d.marker.colors[e]),k.isValid()?(k=x.Color.addOpacity(k,k.getAlpha()),y[g]||(y[g]=k)):y[g]?k=y[g]:(k=!1,L=!0),m=-1!==M.indexOf(g),m||(P+=f),v.push({v:f,label:g,color:k,i:e,hidden:m}))));if(d.sort&&v.sort(function(b,c){return c.v-
b.v}),L)for(e=0;e<v.length;e++)f=v[e],!1===f.color&&(y[f.label]=f.color=l(w._piedefaultcolorcount),w._piedefaultcolorcount++);if(v[0]&&(v[0].vTotal=P),d.textinfo&&"none"!==d.textinfo)for(y=-1!==d.textinfo.indexOf("label"),g=-1!==d.textinfo.indexOf("text"),k=-1!==d.textinfo.indexOf("value"),m=-1!==d.textinfo.indexOf("percent"),e=0;e<v.length;e++)f=v[e],w=y?[f.label]:[],g&&d.text[f.i]&&w.push(d.text[f.i]),k&&w.push(c(f.v)),m&&w.push(h(f.v/P)),f.text=w.join("<br>");return v};var k;y.plot=function(b,
g){var k=b._fullLayout;d(g,k._size);var l=k._pielayer.selectAll("g.trace").data(g);l.enter().append("g").attr({"stroke-linejoin":"round","class":"trace"});l.exit().remove();l.order();l.each(function(d){var g=w.select(this),l=d[0],m=l.trace,r=(m.depth||0)*l.r*Math.sin(0)/2,t=m.tiltaxis||0,u=t*Math.PI/180,z=[r*Math.sin(u),r*Math.cos(u)],y=l.r*Math.cos(0),r=g.selectAll("g.part").data(m.tilt?["top","sides"]:["top"]);r.enter().append("g").attr("class",function(b){return b+" part"});r.exit().remove();r.order();
p(d);g.selectAll(".top").each(function(){var g=w.select(this).selectAll("g.slice").data(d);g.enter().append("g").classed("slice",!0);g.exit().remove();var p=[[[],[]],[[],[]]],r=!1;g.each(function(g){function u(b,c,d,e){return"a"+e*l.r+","+e*y+" "+t+" "+g.largeArc+(d?" 1 ":" 0 ")+e*(c[0]-b[0])+","+e*(c[1]-b[1])}if(g.hidden)return void w.select(this).selectAll("path,g").remove();p[0>g.pxmid[1]?0:1][0>g.pxmid[0]?0:1].push(g);var v=l.cx+z[0],A=l.cy+z[1],B=w.select(this),I=B.selectAll("path.surface").data([g]),
H=!1;if(I.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),B.select("path.textline").remove(),B.on("mouseover",function(){var d=b._fullLayout,f=b._fullData[m.index],k=f.hoverinfo;if("all"===k&&(k="label+text+value+percent+name"),!b._dragging&&!1!==d.hovermode&&"none"!==k&&k){var p=e(g,l),r=v+g.pxmid[0]*(1-p),t=A+g.pxmid[1]*(1-p),u=[];-1!==k.indexOf("label")&&u.push(g.label);f.text&&f.text[g.i]&&-1!==k.indexOf("text")&&u.push(f.text[g.i]);-1!==k.indexOf("value")&&u.push(c(g.v));
-1!==k.indexOf("percent")&&u.push(h(g.v/l.vTotal));x.Fx.loneHover({x0:r-p*l.r,x1:r+p*l.r,y:t,text:u.join("<br>"),name:-1!==k.indexOf("name")?f.name:void 0,color:g.color,idealAlign:0>g.pxmid[0]?"left":"right"},{container:d._hoverlayer.node(),outerContainer:d._paper.node()});H=!0}}).on("mouseout",function(){H&&(x.Fx.loneUnhover(k._hoverlayer.node()),H=!1)}).on("click",function(c){b._hoverdata=[g];b._hoverdata.trace=d.trace;x.Fx.click(b,{target:!0})}),m.pull){var L=+(Array.isArray(m.pull)?m.pull[g.i]:
m.pull)||0;0<L&&(v+=L*g.pxmid[0],A+=L*g.pxmid[1])}g.cxFinal=v;g.cyFinal=A;L=m.hole;if(g.v===l.vTotal){var Z="M"+(v+g.px0[0])+","+(A+g.px0[1])+u(g.px0,g.pxmid,!0,1)+u(g.pxmid,g.px0,!0,1)+"Z";L?I.attr("d","M"+(v+L*g.px0[0])+","+(A+L*g.px0[1])+u(g.px0,g.pxmid,!1,L)+u(g.pxmid,g.px0,!1,L)+"Z"+Z):I.attr("d",Z)}else if(Z=u(g.px0,g.px1,!0,1),L){var U=1-L;I.attr("d","M"+(v+L*g.px1[0])+","+(A+L*g.px1[1])+u(g.px1,g.px0,!1,L)+"l"+U*g.px0[0]+","+U*g.px0[1]+Z+"Z")}else I.attr("d","M"+v+","+A+"l"+g.px0[0]+","+g.px0[1]+
Z+"Z");var ea=Array.isArray(m.textposition)?m.textposition[g.i]:m.textposition,B=B.selectAll("g.slicetext").data(g.text&&"none"!==ea?[0]:[]);B.enter().append("g").classed("slicetext",!0);B.exit().remove();B.each(function(){var b=w.select(this).selectAll("text").data([0]);b.enter().append("text").attr("data-notex",1);b.exit().remove();b.text(g.text).attr({"class":"slicetext",transform:"","data-bb":"","text-anchor":"middle",x:0,y:0}).call(x.Drawing.font,"outside"===ea?m.outsidetextfont:m.insidetextfont).call(x.util.convertToTspans);
b.selectAll("tspan.line").attr({x:0,y:0});var c,d=x.Drawing.bBox(b.node());if("outside"===ea)c=f(d,g);else{c=d;var h=Math.sqrt(c.width*c.width+c.height*c.height),k=c.width/c.height,p=Math.PI*Math.min(g.v/l.vTotal,.5),q=1-l.trace.hole,t=e(g,l),h={scale:t*l.r*2/h,rCenter:1-t,rotate:0};if(1<=h.scale)c=h;else{var t=k+1/(2*Math.tan(p)),t=l.r*Math.min(1/(Math.sqrt(t*t+.5)+t),q/(Math.sqrt(k*k+q/2)+k)),t={scale:2*t/c.height,rCenter:Math.cos(t/l.r)-t*k/l.r,rotate:(180/Math.PI*g.midangle+720)%180-90},u=1/k,
p=u+1/(2*Math.tan(p)),q=l.r*Math.min(1/(Math.sqrt(p*p+.5)+p),q/(Math.sqrt(u*u+q/2)+u));c={scale:2*q/c.width,rCenter:Math.cos(q/l.r)-q/k/l.r,rotate:(180/Math.PI*g.midangle+810)%180-90};c=c.scale>t.scale?c:t;c=1>h.scale&&c.scale>h.scale?c:h}"auto"===ea&&1>c.scale&&(b.call(x.Drawing.font,m.outsidetextfont),(m.outsidetextfont.family!==m.insidetextfont.family||m.outsidetextfont.size!==m.insidetextfont.size)&&(b.attr({"data-bb":""}),d=x.Drawing.bBox(b.node())),c=f(d,g))}k=v+g.pxmid[0]*c.rCenter+(c.x||0);
h=A+g.pxmid[1]*c.rCenter+(c.y||0);c.outside&&(g.yLabelMin=h-d.height/2,g.yLabelMid=h,g.yLabelMax=h+d.height/2,g.labelExtraX=0,g.labelExtraY=0,r=!0);b.attr("transform","translate("+k+","+h+")"+(1>c.scale?"scale("+c.scale+")":"")+(c.rotate?"rotate("+c.rotate+")":"")+"translate("+-(d.left+d.right)/2+","+-(d.top+d.bottom)/2+")")})});r&&v(p,m);g.each(function(b){if(b.labelExtraX||b.labelExtraY){var c=w.select(this),d=c.select("g.slicetext text");d.attr("transform","translate("+b.labelExtraX+","+b.labelExtraY+
")"+d.attr("transform"));var d=b.cxFinal+b.pxmid[0],e="M"+d+","+(b.cyFinal+b.pxmid[1]),f=(b.yLabelMax-b.yLabelMin)*(0>b.pxmid[0]?-1:1)/4;if(b.labelExtraX)var g=b.labelExtraX*b.pxmid[1]/b.pxmid[0],h=b.yLabelMid+b.labelExtraY-(b.cyFinal+b.pxmid[1]),e=e+(Math.abs(g)>Math.abs(h)?"l"+h*b.pxmid[0]/b.pxmid[1]+","+h+"H"+(d+b.labelExtraX+f):"l"+b.labelExtraX+","+g+"v"+(h-g)+"h"+f);else e+="V"+(b.yLabelMid+b.labelExtraY)+"h"+f;c.append("path").classed("textline",!0).call(x.Color.stroke,m.outsidetextfont.color).attr({"stroke-width":Math.min(2,
m.outsidetextfont.size/8),d:e,fill:"none"})}})})});setTimeout(function(){l.selectAll("tspan").each(function(){var b=w.select(this);b.attr("dy")&&b.attr("dy",b.attr("dy"))})},0)};y.style=function(b){b._fullLayout._pielayer.selectAll(".trace").each(function(b){var c=b[0].trace;b=w.select(this);b.style({opacity:c.opacity});b.selectAll(".top path.surface").each(function(b){w.select(this).call(y.styleOne,b,c)})})};y.styleOne=function(b,c,d){var e=d.marker.line.color;Array.isArray(e)&&(e=e[c.i]||x.Color.defaultLine);
d=d.marker.line.width||0;Array.isArray(d)&&(d=d[c.i]||0);b.style({"stroke-width":d,fill:c.color}).call(x.Color.stroke,e)}},{"../../plotly":348,"./attributes":453,d3:53,"fast-isnumeric":58,tinycolor2:213}],455:[function(b,m,g){b=b("../../plotly");m.exports={x:{valType:"data_array"},x0:{valType:"any",dflt:0},dx:{valType:"number",dflt:1},y:{valType:"data_array"},y0:{valType:"any",dflt:0},dy:{valType:"number",dflt:1},text:{valType:"string",dflt:"",arrayOk:!0},mode:{valType:"flaglist",flags:["lines","markers",
"text"],extras:["none"]},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear"},smoothing:{valType:"number",min:0,max:1.3,dflt:1},dash:{valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid"}},connectgaps:{valType:"boolean",dflt:!1},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx"],dflt:"none"},fillcolor:{valType:"color"},marker:{symbol:{valType:"enumerated",
values:b.Drawing.symbolList,dflt:"circle",arrayOk:!0},opacity:{valType:"number",min:0,max:1,arrayOk:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0},color:{valType:"color",arrayOk:!0},maxdisplayed:{valType:"number",min:0,dflt:0},sizeref:{valType:"number",dflt:1},sizemin:{valType:"number",min:0,dflt:0},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter"},colorscale:{valType:"colorscale"},cauto:{valType:"boolean",dflt:!0},cmax:{valType:"number",dflt:null},cmin:{valType:"number",
dflt:null},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1},showscale:{valType:"boolean",dflt:!1},line:{color:{valType:"color",arrayOk:!0},width:{valType:"number",min:0,arrayOk:!0},colorscale:{valType:"colorscale"},cauto:{valType:"boolean",dflt:!0},cmax:{valType:"number",dflt:null},cmin:{valType:"number",dflt:null},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1}}},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),
dflt:"middle center",arrayOk:!0},textfont:{family:{valType:"string",noBlank:!0,strict:!0,arrayOk:!0},size:{valType:"number",min:1,arrayOk:!0},color:{valType:"color",arrayOk:!0}},r:{valType:"data_array"},t:{valType:"data_array"},_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../plotly":348}],456:[function(b,m,g){var h=b("d3"),c=b("fast-isnumeric"),l=b("../../plotly"),e=b("../../lib"),f=b("../../components/colorscale/get_scale"),v=b("../../components/colorbar/draw");
m.exports=function(b,g){var m=g[0].trace,x=m.marker,m="cb"+m.uid;if(b._fullLayout._infolayer.selectAll("."+m).remove(),void 0===x||!x.showscale)return void l.Plots.autoMargin(b,m);var w=f(x.colorscale),u=x.color,r=x.cmin,y=x.cmax;c(r)||(r=l.Lib.aggNums(Math.min,null,u));c(y)||(y=l.Lib.aggNums(Math.max,null,u));(g[0].t.cb=v(b,m)).fillcolor(h.scale.linear().domain(w.map(function(b){return r+b[0]*(y-r)})).range(w.map(function(b){return b[1]}))).filllevels({start:r,end:y,size:(y-r)/254}).options(x.colorbar)();
e.markTime("done colorbar")}},{"../../components/colorbar/draw":287,"../../components/colorscale/get_scale":295,"../../lib":332,"../../plotly":348,d3:53,"fast-isnumeric":58}],457:[function(b,m,g){function h(b,c,e){"spline"===e("line.shape")&&e("line.smoothing")}var c=b("../../plotly"),l=b("d3"),e=b("fast-isnumeric"),f=m.exports={};c.Plots.register(f,"scatter",["cartesian","symbols","markerColorscale","errorBarsOK","showLegend"],{});f.PTS_LINESONLY=20;f.attributes=b("./attributes");var v=b("./xy_defaults");
f.supplyDefaults=function(b,e,g,l){function m(g,h){return c.Lib.coerce(b,e,f.attributes,g,h)}var u=v(b,e,m),r=u<f.PTS_LINESONLY?"lines+markers":"lines";return u?(m("text"),m("mode",r),f.hasLines(e)&&(f.lineDefaults(b,e,g,m),h(b,e,m),m("connectgaps")),f.hasMarkers(e)&&f.markerDefaults(b,e,g,l,m),f.hasText(e)&&f.textDefaults(b,e,l,m),(f.hasMarkers(e)||f.hasText(e))&&m("marker.maxdisplayed"),m("fill"),"none"!==e.fill&&(f.fillColorDefaults(b,e,g,m),f.hasLines(e)||h(b,e,m)),c.ErrorBars.supplyDefaults(b,
e,g,{axis:"y"}),void c.ErrorBars.supplyDefaults(b,e,g,{axis:"x",inherit:"y"})):void(e.visible=!1)};f.lineDefaults=function(b,c,e,f){b=(b.marker||{}).color;f("line.color",(Array.isArray(b)?!1:b)||e);f("line.width");f("line.dash")};f.markerDefaults=function(b,e,g,h,l){var m=f.isBubble(b),r=(b.line||{}).color;r&&(g=r);l("marker.symbol");l("marker.opacity",m?.7:1);l("marker.size");l("marker.color",g);c.Colorscale.hasColorscale(b,"marker")&&c.Colorscale.handleDefaults(b,e,h,l,{prefix:"marker.",cLetter:"c"});
l("marker.line.color",r&&e.marker.color!==r?r:m?c.Color.background:c.Color.defaultLine);c.Colorscale.hasColorscale(b,"marker.line")&&c.Colorscale.handleDefaults(b,e,h,l,{prefix:"marker.line.",cLetter:"c"});l("marker.line.width",m?1:0);m&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode"))};f.textDefaults=function(b,e,f,g){g("textposition");c.Lib.coerceFont(g,"textfont",f.font)};f.fillColorDefaults=function(b,e,f,g){b=!1;if(e.marker){var h=e.marker.color,l=(e.marker.line||{}).color;h&&!Array.isArray(h)?
b=h:l&&!Array.isArray(l)&&(b=l)}g("fillcolor",c.Color.addOpacity((e.line||{}).color||b||f,.5))};f.cleanData=function(b){var c,e,f,g,h;for(c=0;c<b.length;c++)if(e=b[c],f=e.fill,"none"!==f&&"scatter"===e.type&&(e.opacity=void 0,"tonexty"===f||"tonextx"===f))for(g=c-1;0<=g;g--)if(h=b[g],"scatter"===h.type&&h.xaxis===e.xaxis&&h.yaxis===e.yaxis){h.opacity=void 0;break}};f.hasLines=function(b){return b.visible&&b.mode&&-1!==b.mode.indexOf("lines")};f.hasMarkers=function(b){return b.visible&&b.mode&&-1!==
b.mode.indexOf("markers")};f.hasText=function(b){return b.visible&&b.mode&&-1!==b.mode.indexOf("text")};f.isBubble=function(b){return"object"==typeof b.marker&&Array.isArray(b.marker.size)};f.colorbar=b("./colorbar");f.getBubbleSizeFn=function(b){b=b.marker;var c=b.sizeref||1,f=b.sizemin||0,g="area"===b.sizemode?function(b){return Math.sqrt(b/c)}:function(b){return b/c};return function(b){b=g(b/2);return e(b)&&0<b?Math.max(b,f):0}};f.calc=function(b,g){var h=c.Axes.getFromId(b,g.xaxis||"x"),l=c.Axes.getFromId(b,
g.yaxis||"y");c.Lib.markTime("in Scatter.calc");var m=h.makeCalcdata(g,"x");c.Lib.markTime("finished convert x");var u=l.makeCalcdata(g,"y");c.Lib.markTime("finished convert y");var r,v,k=Math.min(m.length,u.length);h._minDtick=0;l._minDtick=0;m.length>k&&m.splice(k,m.length-k);u.length>k&&u.splice(k,u.length-k);var q={padded:!0},z={padded:!0};if(f.hasMarkers(g)){if(r=g.marker,v=r.size,Array.isArray(v))v={type:"linear"},c.Axes.setConvert(v),v=v.makeCalcdata(g.marker,"size"),v.length>k&&v.splice(k,
v.length-k);var E=1.6*(g.marker.sizeref||1);r="area"===g.marker.sizemode?function(b){return Math.max(Math.sqrt((b||0)/E),3)}:function(b){return Math.max((b||0)/E,3)};q.ppad=z.ppad=Array.isArray(v)?v.map(r):r(v)}f.calcMarkerColorscales(g);!("tozerox"===g.fill||"tonextx"===g.fill&&b.firstscatter)||m[0]===m[k-1]&&u[0]===u[k-1]?g.error_y.visible||-1===["tonexty","tozeroy"].indexOf(g.fill)&&(f.hasMarkers(g)||f.hasText(g))||(q.padded=!1,q.ppad=0):q.tozero=!0;!("tozeroy"===g.fill||"tonexty"===g.fill&&b.firstscatter)||
m[0]===m[k-1]&&u[0]===u[k-1]?-1!==["tonextx","tozerox"].indexOf(g.fill)&&(z.padded=!1):z.tozero=!0;c.Lib.markTime("ready for Axes.expand");c.Axes.expand(h,m,q);c.Lib.markTime("done expand x");c.Axes.expand(l,u,z);c.Lib.markTime("done expand y");l=Array(k);for(h=0;k>h;h++)l[h]=e(m[h])&&e(u[h])?{x:m[h],y:u[h]}:{x:!1,y:!1};return void 0!==typeof v&&c.Lib.mergeArray(v,l,"ms"),b.firstscatter=!1,l};f.calcMarkerColorscales=function(b){if(f.hasMarkers(b)){var e=b.marker;c.Colorscale.hasColorscale(b,"marker")&&
c.Colorscale.calc(b,e.color,"marker","c");c.Colorscale.hasColorscale(b,"marker.line")&&c.Colorscale.calc(b,e.line.color,"marker.line","c")}};f.selectMarkers=function(b,c,e){b=c.x();c=c.y();var g=l.extent(b.range.map(b.l2c)),h=l.extent(c.range.map(c.l2c));e.forEach(function(b,c){var d=b[0].trace;if(f.hasMarkers(d)&&(d=d.marker.maxdisplayed,0!==d)){var k=b.filter(function(b){return b.x>=g[0]&&b.x<=g[1]&&b.y>=h[0]&&b.y<=h[1]}),l=Math.ceil(k.length/d),m=0;e.forEach(function(b,d){var e=b[0].trace;f.hasMarkers(e)&&
0<e.marker.maxdisplayed&&c>d&&m++});var p=Math.round(m*l/3+Math.floor(m/3)*l/7.1);b.forEach(function(b){delete b.vis});k.forEach(function(b,c){0===Math.round((c+p)%l)&&(b.vis=!0)})}})};f.arraysToCalcdata=function(b){var e=b[0].trace,f=e.marker;if(c.Lib.mergeArray(e.text,b,"tx"),c.Lib.mergeArray(e.textposition,b,"tp"),e.textfont&&(c.Lib.mergeArray(e.textfont.size,b,"ts"),c.Lib.mergeArray(e.textfont.color,b,"tc"),c.Lib.mergeArray(e.textfont.family,b,"tf")),f&&f.line)e=f.line,c.Lib.mergeArray(f.opacity,
b,"mo"),c.Lib.mergeArray(f.symbol,b,"mx"),c.Lib.mergeArray(f.color,b,"mc"),c.Lib.mergeArray(e.color,b,"mlc"),c.Lib.mergeArray(e.width,b,"mlw")};f.plot=function(b,e,g){function h(b){return b.filter(function(b){return b.vis})}f.selectMarkers(b,e,g);var m=e.x(),u=e.y();b=e.plot.select(".scatterlayer").selectAll("g.trace.scatter").data(g);b.enter().append("g").attr("class","trace scatter").style("stroke-miterlimit",2);var r,v,k,q="";b.each(function(b){var d=b[0].trace,e=d.line;if(!0===d.visible&&(f.arraysToCalcdata(b),
f.hasLines(d)||"none"!==d.fill)){var g,h,p,t,x=l.select(this),D="",H="";r="tozero"===d.fill.substr(0,6)||"to"===d.fill.substr(0,2)&&!q?x.append("path").classed("js-fill",!0):null;k&&(v=k.datum(b));k=x.append("path").classed("js-fill",!0);-1!==["hv","vh","hvh","vhv"].indexOf(e.shape)?(h=c.Drawing.steps(e.shape),p=c.Drawing.steps(e.shape.split("").reverse().join(""))):h=p="spline"===e.shape?function(b){return c.Drawing.smoothopen(b,e.smoothing)}:function(b){return"M"+b.join("L")};t=function(b){return"L"+
p(b.reverse()).substr(1)};b=f.linePoints(b,{xaxis:m,yaxis:u,connectGaps:d.connectgaps,baseTolerance:Math.max(e.width||1,3)/4,linear:"linear"===e.shape});if(b.length){var K=b[0][0];g=b[b.length-1];for(var O=g[g.length-1],L=0;L<b.length;L++){var P=b[L];g=h(P);D+=D?"L"+g.substr(1):g;H=t(P)+H;f.hasLines(d)&&1<P.length&&x.append("path").classed("js-line",!0).attr("d",g)}r?K&&O&&("y"===d.fill.charAt(d.fill.length-1)?K[1]=O[1]=u.c2p(0,!0):K[0]=O[0]=m.c2p(0,!0),r.attr("d",D+"L"+O+"L"+K+"Z")):"tonext"===d.fill.substr(0,
6)&&D&&q&&v.attr("d",D+q+"Z");q=H}}});b.selectAll("path:not([d])").remove();b.append("g").attr("class","points").each(function(b){b=b[0].trace;var d=l.select(this),e=f.hasMarkers(b),g=f.hasText(b);!e&&!g||!0!==b.visible?d.remove():(e&&d.selectAll("path.point").data(b.marker.maxdisplayed?h:c.Lib.identity).enter().append("path").classed("point",!0).call(c.Drawing.translatePoints,m,u),g&&d.selectAll("g").data(b.marker.maxdisplayed?h:c.Lib.identity).enter().append("g").append("text").call(c.Drawing.translatePoints,
m,u))})};f.linePoints=function(b,e){function f(c){var e=O.c2p(b[c].x);c=L.c2p(b[c].y);return e===R||c===R?!1:[e,c]}function g(b){var c=b[0]/O._length;b=b[1]/L._length;return(1+10*Math.max(0,-c,c-1,-b,b-1))*M}function h(b,c){var d=b[0]-c[0],e=b[1]-c[1];return Math.sqrt(d*d+e*e)}var l,m,v,k,q,z,E,A,C,B,G,F,I,D,H,K,O=e.xaxis,L=e.yaxis,P=e.connectGaps,M=e.baseTolerance,Q=e.linear,T=[],R=c.Axes.BADNUM,S=Array(b.length),X=0;for(l=0;l<b.length;l++)if(m=f(l)){X=0;S[X++]=m;for(l++;l<b.length;l++){if(k=f(l),
!k){if(P)continue;break}if(Q){if(E=h(k,m),!(E<.2*g(k))){C=[(k[0]-m[0])/E,(k[1]-m[1])/E];q=m;G=E;F=D=H=0;A=!1;v=k;for(l++;l<b.length;l++){if(z=f(l),!z){if(P)continue;break}if(B=[z[0]-m[0],z[1]-m[1]],K=B[0]*C[1]-B[1]*C[0],D=Math.min(D,K),H=Math.max(H,K),H-D>g(z))break;v=z;I=B[0]*C[0]+B[1]*C[1];I>G?(G=I,k=z,A=!1):F>I&&(F=I,q=z,A=!0)}if(A?(S[X++]=k,v!==q&&(S[X++]=q)):(q!==m&&(S[X++]=q),v!==k&&(S[X++]=k)),S[X++]=v,l>=b.length||!z)break;m=S[X++]=z}}else S[X++]=k}T.push(S.slice(0,X))}return T};f.style=function(b){b=
l.select(b).selectAll("g.trace.scatter");b.style("opacity",function(b){return b[0].trace.opacity});b.selectAll("g.points").each(function(b){l.select(this).selectAll("path.point").call(c.Drawing.pointStyle,b.trace||b[0].trace);l.select(this).selectAll("text").call(c.Drawing.textPointStyle,b.trace||b[0].trace)});b.selectAll("g.trace path.js-line").call(c.Drawing.lineGroupStyle);b.selectAll("g.trace path.js-fill").call(c.Drawing.fillGroupStyle)};f.getTraceColor=function(b,e){var g,h;if("lines"===b.mode)return g=
b.line.color,g&&c.Color.opacity(g)?g:b.fillcolor;if("none"===b.mode)return b.fill?b.fillcolor:"";var l=e.mcc||(b.marker||{}).color,m=e.mlcc||((b.marker||{}).line||{}).color;return h=l&&c.Color.opacity(l)?l:m&&c.Color.opacity(m)&&(e.mlw||((b.marker||{}).line||{}).width)?m:"",h?.3>c.Color.opacity(h)?c.Color.addOpacity(h,.3):h:(g=(b.line||{}).color,g&&c.Color.opacity(g)&&f.hasLines(b)&&b.line.width?g:b.fillcolor)};f.hoverPoints=function(b,e,g,h){var l=b.cd,m=l[0].trace,r=b.xa,v=b.ya;h=c.Fx.getDistanceFunction(h,
function(b){var c=Math.max(3,b.mrc||0);return Math.max(Math.abs(r.c2p(b.x)-r.c2p(e))-c,1-3/c)},function(b){var c=Math.max(3,b.mrc||0);return Math.max(Math.abs(v.c2p(b.y)-v.c2p(g))-c,1-3/c)},function(b){var c=Math.max(3,b.mrc||0),d=Math.abs(r.c2p(b.x)-r.c2p(e));b=Math.abs(v.c2p(b.y)-v.c2p(g));return Math.max(Math.sqrt(d*d+b*b)-c,1-3/c)});if(c.Fx.getClosest(l,h,b),!1!==b.index){l=l[b.index];h=r.c2p(l.x,!0);var k=v.c2p(l.y,!0),q=l.mrc||1;return b.color=f.getTraceColor(m,l),b.x0=h-q,b.x1=h+q,b.xLabelVal=
l.x,b.y0=k-q,b.y1=k+q,b.yLabelVal=l.y,l.tx?b.text=l.tx:m.text&&(b.text=m.text),c.ErrorBars.hoverInfo(l,m,b),[b]}}},{"../../plotly":348,"./attributes":455,"./colorbar":456,"./xy_defaults":458,d3:53,"fast-isnumeric":58}],458:[function(b,m,g){m.exports=function(b,c,g){var e;b=g("x");var f=g("y");if(b)f?(e=Math.min(b.length,f.length),e<b.length&&(c.x=b.slice(0,e)),e<f.length&&(c.y=f.slice(0,e))):(e=b.length,g("y0"),g("dy"));else{if(!f)return 0;e=c.y.length;g("x0");g("dx")}return e}},{}],459:[function(b,
m,g){function h(b){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}g=b("../scatter/attributes");var c=b("../../constants/gl_markers.json");b=b("../../lib/extend").extendFlat;var l=g.line,e=g.marker,f=e.line;m.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},text:b({},g.text,{}),mode:b({},g.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},
surfacecolor:{valType:"color"},projection:{x:h("x"),y:h("y"),z:h("z")},line:{color:l.color,width:l.width,dash:l.dash},marker:{color:e.color,symbol:{valType:"enumerated",values:Object.keys(c),dflt:"circle",arrayOk:!0},size:b({},e.size,{dflt:8}),sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,opacity:b({},e.opacity,{arrayOk:!1}),colorscale:e.colorscale,cauto:e.cauto,cmax:e.cmax,cmin:e.cmin,autocolorscale:e.autocolorscale,reversescale:e.reversescale,showscale:e.showscale,line:{color:f.color,
width:b({},f.width,{arrayOk:!1}),colorscale:f.colorscale,cauto:f.cauto,cmax:f.cmax,cmin:f.cmin,autocolorscale:f.autocolorscale,reversescale:f.reversescale}},textposition:b({},g.textposition,{dflt:"top center"}),textfont:g.textfont,_nestedModules:{error_x:"ErrorBars",error_y:"ErrorBars",error_z:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../constants/gl_markers.json":321,"../../lib/extend":328,"../scatter/attributes":455}],460:[function(b,m,g){function h(b,e,f){if(!e||!e.visible)return null;e=
c(e);for(var g=Array(b.length),d=0;d<b.length;d++){var h=e(+b[d],d);g[d]=[-h[0]*f,h[1]*f]}return g}var c=b("../../components/errorbars/compute_error");m.exports=function(b,c){var f=[h(b.x,b.error_x,c[0]),h(b.y,b.error_y,c[1]),h(b.z,b.error_z,c[2])],g;a:{for(g=0;g<f.length;g++)if(f[g]){g=f[g].length;break a}g=0}if(0===g)return null;for(var d=Array(g),m=0;g>m;m++){for(var t=[[0,0,0],[0,0,0]],x=0;3>x;x++)if(f[x])for(var w=0;2>w;w++)t[w][x]=f[x][m][w];d[m]=t}return d}},{"../../components/errorbars/compute_error":306}],
461:[function(b,m,g){function h(b,c){this.scene=b;this.uid=c;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode="";this.dataPoints=[];this.axesBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]];this.data=this.textLabels=null}function c(b,c){return c(4*b)}function l(b){return k[b]}function e(b,c,d,e,f){var g=null;if(Array.isArray(b))for(var g=[],h=0;c>h;h++)void 0===b[h]?g[h]=e:g[h]=d(b[h],f);else g=d(b,v.Lib.identity);return g}function f(b){if(Array.isArray(b)){var c=
b[0];return Array.isArray(c)&&(b=c),"rgb("+b.slice(0,3).map(function(b){return Math.round(255*b)})+")"}return null}var v=b("../../plotly"),d=b("gl-line3d"),p=b("gl-scatter3d"),t=b("gl-error3d"),x=b("gl-mesh3d"),w=b("delaunay-triangulate"),u=b("../../lib/str2rgbarray"),r=b("../../lib/gl_format_color"),y=b("../../constants/gl3d_dashes.json"),k=b("../../constants/gl_markers.json"),q=b("./calc_errors");b=h.prototype;b.handlePick=function(b){if(b.object&&(b.object===this.linePlot||b.object===this.delaunayMesh||
b.object===this.textMarkers||b.object===this.scatterPlot)){b.object.highlight&&b.object.highlight(null);this.scatterPlot&&(b.object=this.scatterPlot,this.scatterPlot.highlight(b.data));this.textLabels&&void 0!==this.textLabels[b.data.index]?b.textLabel=this.textLabels[b.data.index]:b.textLabel="";var c=b.data.index;return b.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c]],!0}};b.update=function(b){var g,h,k,m,G=this.scene.glplot.gl;g=y.solid;this.data=b;var F,I=this.scene,D,H,K,O,L,
P=[],M=I.fullSceneLayout,I=I.dataScale,Q=M.xaxis,T=M.yaxis,R=M.zaxis,S=b.marker,X=b.line,V=b.x||[],Y=b.y||[],W=b.z||[],M=V.length;for(D=0;M>D;D++)H=Q.d2l(V[D])*I[0],K=T.d2l(Y[D])*I[1],O=R.d2l(W[D])*I[2],P[D]=[H,K,O];if(Array.isArray(b.text))L=b.text;else if(void 0!==b.text)for(L=Array(M),D=0;M>D;D++)L[D]=b.text;if(F={position:P,mode:b.mode,text:L},"line"in b&&(F.lineColor=u(X.color),F.lineWidth=X.width,F.lineDashes=X.dash),"marker"in b)D=v.Scatter.getBubbleSizeFn(b),F.scatterColor=r(S,1,M),F.scatterSize=
e(S.size,M,c,20,D),F.scatterMarker=e(S.symbol,M,l,"\u25cf"),F.scatterLineWidth=S.line.width,F.scatterLineColor=r(S.line,1,M),F.scatterAngle=0;"textposition"in b&&(D=b.textposition,L=[0,0],D=Array.isArray(D)?[0,-1]:(0<=D.indexOf("bottom")&&(L[1]+=1),0<=D.indexOf("top")&&--L[1],0<=D.indexOf("left")&&--L[0],0<=D.indexOf("right")&&(L[0]+=1),L),F.textOffset=D,F.textColor=r(b.textfont,1,M),F.textSize=e(b.textfont.size,M,v.Lib.identity,12),F.textFont=b.textfont.family,F.textAngle=0);M=["x","y","z"];F.project=
[!1,!1,!1];F.projectScale=[1,1,1];F.projectOpacity=[1,1,1];for(D=0;3>D;++D)L=b.projection[M[D]],(F.project[D]=L.show)&&(F.projectOpacity[D]=L.opacity,F.projectScale[D]=L.scale);F.errorBounds=q(b,I);I=[b.error_x,b.error_y,b.error_z];M=[0,0,0];D=[[0,0,0],[0,0,0],[0,0,0]];L=[0,0,0];for(P=0;3>P;P++)(Q=I[P])&&!1!==Q.copy_zstyle&&(Q=I[2]),Q&&(M[P]=Q.width/2,D[P]=u(Q.color),L=Q.thickness);F=(F.errorColor=D,F.errorLineWidth=L,F.errorCapSize=M,F.delaunayAxis=b.surfaceaxis,F.delaunayColor=u(b.surfacecolor),
F);"mode"in F&&(this.mode=F.mode);"lineDashes"in F&&F.lineDashes in y&&(g=y[F.lineDashes]);this.color=f(F.scatterColor)||f(F.lineColor);this.dataPoints=F.position;g={gl:G,position:F.position,color:F.lineColor,lineWidth:F.lineWidth||1,dashes:g[0],dashScale:g[1],opacity:b.opacity};-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(g):(this.linePlot=d(g),this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=
null);g=b.opacity;if(b.marker&&b.marker.opacity&&(g*=b.marker.opacity),h={gl:G,position:F.position,color:F.scatterColor,size:F.scatterSize,glyph:F.scatterMarker,opacity:g,orthographic:!0,lineWidth:F.scatterLineWidth,lineColor:F.scatterLineColor,project:F.project,projectScale:F.projectScale,projectOpacity:F.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(h):(this.scatterPlot=p(h),this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&
(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),m={gl:G,position:F.position,glyph:F.text,color:F.textColor,size:F.textSize,angle:F.textAngle,alignment:F.textOffset,font:F.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:b.opacity},this.textLabels=F.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(m):(this.textMarkers=p(m),this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),
this.textMarkers.dispose(),this.textMarkers=null),k={gl:G,position:F.position,color:F.errorColor,error:F.errorBounds,lineWidth:F.errorLineWidth,capSize:F.errorCapSize,opacity:b.opacity},this.errorBars?F.errorBounds?this.errorBars.update(k):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):F.errorBounds&&(this.errorBars=t(k),this.scene.glplot.add(this.errorBars)),0<=F.delaunayAxis){b=F.position;h=F.delaunayColor;k=F.delaunayAxis;g=(k+1)%3;F=(k+2)%3;I=[];m=[];for(k=
0;k<b.length;++k)M=b[k],!isNaN(M[g])&&isFinite(M[g])&&!isNaN(M[F])&&isFinite(M[F])&&(I.push([M[g],M[F]]),m.push(k));g=w(I);for(k=0;k<g.length;++k)for(F=g[k],I=0;I<F.length;++I)F[I]=m[F[I]];b={positions:b,cells:g,meshColor:h};this.delaunayMesh?this.delaunayMesh.update(b):(b.gl=G,this.delaunayMesh=x(b),this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};b.dispose=function(){this.linePlot&&
(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.textMarkers),this.delaunayMesh.dispose())};m.exports=function(b,c){var d=new h(b,c.uid);return d.update(c),d}},{"../../constants/gl3d_dashes.json":320,
"../../constants/gl_markers.json":321,"../../lib/gl_format_color":330,"../../lib/str2rgbarray":341,"../../plotly":348,"./calc_errors":460,"delaunay-triangulate":54,"gl-error3d":62,"gl-line3d":68,"gl-mesh3d":91,"gl-scatter3d":134}],462:[function(b,m,g){function h(b,c,g){b=0;var d=g("x"),h=g("y");g=g("z");return d&&h&&g&&(b=Math.min(d.length,h.length,g.length),b<d.length&&(c.x=d.slice(0,b)),b<h.length&&(c.y=h.slice(0,b)),b<g.length&&(c.z=g.slice(0,b))),b}var c=b("../../plotly"),l=b("./");m.exports=
function(b,f,g,d){function m(d,g){return c.Lib.coerce(b,f,l.attributes,d,g)}var t=c.Scatter;if(!h(b,f,m))return void(f.visible=!1);m("text");m("mode");t.hasLines(f)&&t.lineDefaults(b,f,g,m);t.hasMarkers(f)&&t.markerDefaults(b,f,g,d,m);t.hasText(f)&&t.textDefaults(b,f,d,m);d=(f.line||{}).color;t=(f.marker||{}).color;0<=m("surfaceaxis")&&m("surfacecolor",d||t);d=["x","y","z"];for(t=0;3>t;++t){var x="projection."+d[t];m(x+".show")&&(m(x+".opacity"),m(x+".scale"))}c.ErrorBars.supplyDefaults(b,f,g,{axis:"z"});
c.ErrorBars.supplyDefaults(b,f,g,{axis:"y",inherit:"z"});c.ErrorBars.supplyDefaults(b,f,g,{axis:"x",inherit:"z"})}},{"../../plotly":348,"./":463}],463:[function(b,m,g){var h=b("../../plotly");m=m.exports={};h.Plots.register(m,"scatter3d",["gl3d","symbols","markerColorscale","showLegend"],{});m.attributes=b("./attributes");m.markerSymbols=b("../../constants/gl_markers.json");m.supplyDefaults=b("./defaults");m.colorbar=h.Scatter.colorbar;m.calc=function(b,g){var e=[{x:!1,y:!1,trace:g,t:{}}];return h.Scatter.arraysToCalcdata(e),
h.Scatter.calcMarkerColorscales(g),e}},{"../../constants/gl_markers.json":321,"../../plotly":348,"./attributes":459,"./defaults":462}],464:[function(b,m,g){g=b("../scatter/attributes");var h=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var c=g.marker,l=g.line,e=c.line;m.exports={lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:b({},g.mode,{dflt:"markers"}),
text:b({},g.text,{}),line:{color:l.color,width:l.width,dash:l.dash},marker:{symbol:c.symbol,opacity:c.opacity,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,color:c.color,colorscale:c.colorscale,cauto:c.cauto,cmax:c.cmax,cmin:c.cmin,autocolorscale:c.autocolorscale,reversescale:c.reversescale,showscale:c.showscale,line:{color:e.color,width:e.width,colorscale:e.colorscale,cauto:e.cauto,cmax:e.cmax,cmin:e.cmin,autocolorscale:e.autocolorscale,reversescale:e.reversescale}},textfont:g.textfont,
textposition:g.textposition,hoverinfo:b({},h.hoverinfo,{flags:["lon","lat","location","text","name"]}),_nestedModules:{"marker.colorbar":"Colorbar"}}},{"../../lib/extend":328,"../../plots/attributes":349,"../scatter/attributes":455}],465:[function(b,m,g){function h(b,c,g){var d,h;b=0;var l=g("locations");return l?(g("locationmode"),l.length):(d=g("lon")||[],h=g("lat")||[],b=Math.min(d.length,h.length),b<d.length&&(c.lon=d.slice(0,b)),b<h.length&&(c.lat=h.slice(0,b)),b)}var c=b("../../plotly"),l=b("./");
m.exports=function(b,f,g,d){function m(d,g){return c.Lib.coerce(b,f,l.attributes,d,g)}var t=c.Scatter;return h(b,f,m)?(m("text"),m("mode"),t.hasLines(f)&&t.lineDefaults(b,f,g,m),t.hasMarkers(f)&&t.markerDefaults(b,f,g,d,m),t.hasText(f)&&t.textDefaults(b,f,d,m),void m("hoverinfo",1===d._dataLength?"lon+lat+location+text":void 0)):void(f.visible=!1)}},{"../../plotly":348,"./":466}],466:[function(b,m,g){var h=b("../../plotly");m=m.exports={};h.Plots.register(m,"scattergeo",["geo","symbols","markerColorscale",
"showLegend"],{});m.attributes=b("./attributes");m.supplyDefaults=b("./defaults");m.colorbar=h.Scatter.colorbar;m.calc=function(b,g){h.Scatter.calcMarkerColorscales(g)}},{"../../plotly":348,"./attributes":464,"./defaults":465}],467:[function(b,m,g){function h(b,c,d){function e(b,f){p(b,c,f,d)}var f=b.marker;if(e(b.text,"tx"),e(b.textposition,"tp"),b.textfont&&(e(b.textfont.size,"ts"),e(b.textfont.color,"tc"),e(b.textfont.family,"tf")),f&&f.line)b=f.line,e(f.opacity,"mo"),e(f.symbol,"mx"),e(f.color,
"mc"),e(f.size,"ms"),e(b.color,"mlc"),e(b.width,"mlw")}function c(b){for(var c=b.lon.length,d=Array(c),e=0;c>e;e++)d[e]=[b.lon[e],b.lat[e]];return{type:"LineString",coordinates:d,trace:b}}function l(b,c){function d(c){var f=b.mockAxis;return e.Axes.tickText(f,f.c2l(c),"hover").text+"\u00b0"}var f=c.hoverinfo;if("none"===f)return function(b){delete b.textLabel};var f="all"===f?e.ScatterGeo.attributes.hoverinfo.flags:f.split("+"),g=-1!==f.indexOf("location")&&Array.isArray(c.locations),h=-1!==f.indexOf("lon"),
l=-1!==f.indexOf("lat"),m=-1!==f.indexOf("text");return function(b){var e=[];g?e.push(b.location):h&&l?e.push("("+d(b.lon)+", "+d(b.lat)+")"):h?e.push("lon: "+d(b.lon)):l&&e.push("lat: "+d(b.lat));m&&e.push(b.tx||c.text);b.textLabel=e.join("<br>")}}var e=b("../../plotly"),f=b("d3"),v=b("../../lib/topojson_utils").getTopojsonFeatures,d=b("../../lib/geo_location_utils").locationToFeature,p=b("../../lib/array_to_calc_item"),t=m.exports={};t.calcGeoJSON=function(b,c){var e,f,g,k,l,m,p=[],t=Array.isArray(b.locations);
t?(l=b.locations,e=l.length,f=v(b,c),g=function(b,c){var e=d(b.locationmode,l[c],f);return void 0!==e?e.properties.ct:void 0}):(e=b.lon.length,g=function(b,c){return[b.lon[c],b.lat[c]]});for(var C=0;e>C;C++)(k=g(b,C))&&(m={lon:k[0],lat:k[1],location:t?b.locations[C]:null},h(b,m,C),p.push(m));return 0<p.length&&(p[0].trace=b),p};t.plot=function(b,d){var g=b.framework.select("g.scattergeolayer"),h=e.Scatter,m=b.topojson;g.selectAll("*").remove();g=g.selectAll("g.trace.scatter").data(d);g.enter().append("g").attr("class",
"trace scattergeo");g.each(function(b){h.hasLines(b)&&!0===b.visible&&f.select(this).append("path").datum(c(b)).attr("class","js-line")});g.append("g").attr("class","points").each(function(c){function d(f){if(b.showHover){var g=b.projection([f.lon,f.lat]);w(f);e.Fx.loneHover({x:g[0],y:g[1],name:F?c.name:void 0,text:f.textLabel,color:f.mc||(c.marker||{}).color},{container:b.hoverContainer.node()})}}var g=f.select(this),p=h.hasMarkers(c),u=h.hasText(c);if(!p&&!u||!0!==c.visible)return void g.remove();
var v=t.calcGeoJSON(c,m),w=l(b,c),G=c.hoverinfo,F="all"===G||-1!==G.indexOf("name");p&&g.selectAll("path.point").data(v).enter().append("path").attr("class","point").on("mouseover",d).on("mouseout",function(){e.Fx.loneUnhover(b.hoverContainer)}).on("mousedown",function(){e.Fx.loneUnhover(b.hoverContainer)}).on("mouseup",d);u&&g.selectAll("g").data(v).enter().append("g").append("text")});t.style(b)};t.style=function(b){b=b.framework.selectAll("g.trace.scattergeo");b.style("opacity",function(b){return b.opacity});
b.selectAll("g.points").each(function(b){f.select(this).selectAll("path.point").call(e.Drawing.pointStyle,b);f.select(this).selectAll("text").call(e.Drawing.textPointStyle,b)});b.selectAll("path.js-line").style("fill","none").each(function(b){b=b.trace.line||{};f.select(this).call(e.Color.stroke,b.color).call(e.Drawing.dashLine,b.dash||"",b.width||0)})}},{"../../lib/array_to_calc_item":324,"../../lib/geo_location_utils":329,"../../lib/topojson_utils":343,"../../plotly":348,d3:53}],468:[function(b,
m,g){g=b("../scatter/attributes");var h=b("../../constants/gl2d_dashes.json"),c=b("../../constants/gl_markers.json");b=b("../../lib/extend").extendFlat;var l=g.line,e=g.marker,f=e.line;m.exports={x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,text:b({},g.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:l.color,width:l.width,dash:{valType:"enumerated",values:Object.keys(h),dflt:"solid"}},marker:{color:e.color,symbol:{valType:"enumerated",values:Object.keys(c),dflt:"circle",
arrayOk:!0},size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,opacity:e.opacity,colorscale:e.colorscale,cauto:e.cauto,cmax:e.cmax,cmin:e.cmin,autocolorscale:e.autocolorscale,reversescale:e.reversescale,showscale:e.showscale,line:{color:f.color,width:f.width,colorscale:f.colorscale,cauto:f.cauto,cmax:f.cmax,cmin:f.cmin,autocolorscale:f.autocolorscale,reversescale:f.reversescale}},fill:b({},g.fill,{values:["none","tozeroy","tozerox"]}),fillcolor:g.fillcolor,_nestedModules:{error_x:"ErrorBars",
error_y:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../constants/gl2d_dashes.json":319,"../../constants/gl_markers.json":321,"../../lib/extend":328,"../scatter/attributes":455}],469:[function(b,m,g){function h(b,c){this.scene=b;this.uid=c;this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=[];this.bounds=[0,0,0,0];this.hasLines=!1;this.lineOptions={positions:new Float32Array,color:[0,0,0,1],width:1,fill:[!1,!1,!1,!1],fillColor:[[0,
0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],dashes:[1]};this.line=x(b.glplot,this.lineOptions);this.line._trace=this;this.hasErrorX=!1;this.errorXOptions={positions:new Float32Array,errors:new Float32Array,lineWidth:1,capSize:0,color:[0,0,0,1]};this.errorX=w(b.glplot,this.errorXOptions);this.errorX._trace=this;this.hasErrorY=!1;this.errorYOptions={positions:new Float32Array,errors:new Float32Array,lineWidth:1,capSize:0,color:[0,0,0,1]};this.errorY=w(b.glplot,this.errorYOptions);this.errorY._trace=this;
this.hasMarkers=!1;this.scatterOptions={positions:new Float32Array,sizes:[],colors:[],glyphs:[],borderWidths:[],borderColors:[],size:12,color:[0,0,0,1],borderSize:1,borderColor:[0,0,0,1]};this.scatter=p(b.glplot,this.scatterOptions);this.scatter._trace=this;this.fancyScatter=t(b.glplot,this.scatterOptions);this.fancyScatter._trace=this}function c(b,c,d){return Array.isArray(c)||(c=[c]),l(b,c,d)}function l(b,c,d){for(var e=Array(d),f=c[0],g=0;d>g;++g)e[g]=b(g>=c.length?f:c[g]);return e}function e(b,
c,e,g){b=y(b,c,g);return b=Array.isArray(b[0])?b:l(d.Lib.identity,[b],g),f(b,E(e,g),g)}function f(b,c,d){for(var e=Array(4*d),f=0;d>f;++f){for(var g=0;3>g;++g)e[4*f+g]=b[f][g];e[4*f+3]=b[f][g]*c[f]}return e}function v(b,c){if(void 0===Float32Array.slice){for(var d=new Float32Array(c),e=0;c>e;e++)d[e]=b[e];return d}return b.slice(0,c)}var d=b("../../plotly"),p=b("gl-scatter2d"),t=b("gl-scatter2d-fancy"),x=b("gl-line2d"),w=b("gl-error2d"),u=b("fast-isnumeric"),r=b("../../lib/str2rgbarray"),y=b("../../lib/gl_format_color"),
k=b("../../constants/gl_markers.json"),q=b("../../constants/gl2d_dashes.json"),z=["xaxis","yaxis"];b=h.prototype;b.handlePick=function(b){var c=this.idToIndex[b.pointId];return{trace:this,dataCoord:b.dataCoord,traceCoord:[this.xData[c],this.yData[c]],textLabel:Array.isArray(this.textLabels)?this.textLabels[c]:this.textLabels,color:Array.isArray(this.color)?this.color[c]:this.color,name:this.name,hoverinfo:this.hoverinfo}};b.isFancy=function(b){if("linear"!==this.scene.xaxis.type||"linear"!==this.scene.yaxis.type||
!b.x||!b.y)return!0;b=b.marker||{};if(Array.isArray(b.symbol)||"circle"!==b.symbol||Array.isArray(b.size)||Array.isArray(b.line.width)||Array.isArray(b.opacity)||Array.isArray(b.color))return!0;b=Array.isArray(b.line.color);return Array.isArray(b)?!0:this.hasErrorX?!0:this.hasErrorY?!0:!1};var E=c.bind(null,function(b){return+b}),A=c.bind(null,r),C=c.bind(null,function(b){return k[b]||"\u25cf"});b.update=function(b){!0!==b.visible?(this.hasLines=!1,this.hasErrorX=!1,this.hasErrorY=!1,this.hasMarkers=
!1):(this.hasLines=d.Scatter.hasLines(b),this.hasErrorX=!0===b.error_x.visible,this.hasErrorY=!0===b.error_y.visible,this.hasMarkers=d.Scatter.hasMarkers(b));this.textLabels=b.text;this.name=b.name;this.hoverinfo=b.hoverinfo;this.bounds=[1/0,1/0,-(1/0),-(1/0)];this.isFancy(b)?this.updateFancy(b):this.updateFast(b);this.color=d.Scatter.getTraceColor(b,{})};b.updateFast=function(b){for(var c,d,e=this.xData=b.x,f=this.yData=b.y,g=e.length,h=Array(g),k=new Float32Array(2*g),l=this.bounds,m=0,p=0,q=0;g>
q;++q)c=e[q],d=f[q],u(c)&&u(d)&&(h[m++]=q,k[p++]=c,k[p++]=d,l[0]=Math.min(l[0],c),l[1]=Math.min(l[1],d),l[2]=Math.max(l[2],c),l[3]=Math.max(l[3],d));k=v(k,p);this.idToIndex=h;this.updateLines(b,k);this.updateError("X",b);this.updateError("Y",b);var t;this.hasMarkers?(this.scatterOptions.positions=k,c=r(b.marker.color),d=r(b.marker.line.color),e=b.opacity*b.marker.opacity,c[3]*=e,this.scatterOptions.color=c,d[3]*=e,this.scatterOptions.borderColor=d,t=b.marker.size,this.scatterOptions.size=t,this.scatterOptions.borderSize=
b.marker.line.width):(this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[]);this.scatter.update(this.scatterOptions);this.scatterOptions.positions=new Float32Array;this.scatterOptions.glyphs=[];this.fancyScatter.update(this.scatterOptions);this.expandAxesFast(l,t)};b.updateFancy=function(b){var f,g,h,k,l,m,p,q,r=this.scene,t=r.xaxis,u=r.yaxis,w=this.bounds,x=this.xData=t.makeCalcdata(b,"x"),y=this.yData=u.makeCalcdata(b,"y"),z=d.ErrorBars.calcFromTrace(b,r.fullLayout);g=x.length;
var r=Array(g),A=new Float32Array(2*g),Y=new Float32Array(4*g),W=new Float32Array(4*g),Z=0,U=0,ea=0,ga=0,ia="log"===t.type?function(b){return t.d2l(b)}:function(b){return b},ha="log"===u.type?function(b){return u.d2l(b)}:function(b){return b};for(f=0;g>f;++f)h=ia(x[f]),k=ha(y[f]),isNaN(h)||isNaN(k)||(r[Z++]=f,A[U++]=h,A[U++]=k,l=Y[ea++]=h-z[f].xs||0,m=Y[ea++]=z[f].xh-h||0,Y[ea++]=0,Y[ea++]=0,W[ga++]=0,W[ga++]=0,p=W[ga++]=k-z[f].ys||0,q=W[ga++]=z[f].yh-k||0,w[0]=Math.min(w[0],h-l),w[1]=Math.min(w[1],
k-p),w[2]=Math.max(w[2],h+m),w[3]=Math.max(w[3],k+q));A=v(A,U);this.idToIndex=r;this.updateLines(b,A);this.updateError("X",b,A,Y);this.updateError("Y",b,A,W);var na;if(this.hasMarkers)for(this.scatterOptions.positions=A,this.scatterOptions.sizes=Array(Z),this.scatterOptions.glyphs=Array(Z),this.scatterOptions.borderWidths=Array(Z),this.scatterOptions.colors=Array(4*Z),this.scatterOptions.borderColors=Array(4*Z),na=d.Scatter.getBubbleSizeFn(b),f=b.marker,p=f.opacity,q=b.opacity,b=e(f,p,q,g),l=C(f.symbol,
g),m=E(f.line.width,g),p=e(f.line,p,q,g),na=c(na,f.size,g),f=0;Z>f;++f)for(q=r[f],this.scatterOptions.sizes[f]=4*na[q],this.scatterOptions.glyphs[f]=l[q],this.scatterOptions.borderWidths[f]=.5*m[q],g=0;4>g;++g)this.scatterOptions.colors[4*f+g]=b[4*q+g],this.scatterOptions.borderColors[4*f+g]=p[4*q+g];else this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[];this.fancyScatter.update(this.scatterOptions);this.scatterOptions.positions=new Float32Array;this.scatterOptions.glyphs=
[];this.scatter.update(this.scatterOptions);this.expandAxesFancy(x,y,na)};b.updateLines=function(b,c){if(this.hasLines){this.lineOptions.positions=c;var d=r(b.line.color);this.hasMarkers&&(d[3]*=b.marker.opacity);for(var e=Math.round(.5*this.lineOptions.width),f=(q[b.line.dash]||[1]).slice(),g=0;g<f.length;++g)f[g]*=e;switch(b.fill){case "tozeroy":this.lineOptions.fill=[!1,!0,!1,!1];break;case "tozerox":this.lineOptions.fill=[!0,!1,!1,!1];break;default:this.lineOptions.fill=[!1,!1,!1,!1]}e=r(b.fillcolor);
this.lineOptions.color=d;this.lineOptions.width=2*b.line.width;this.lineOptions.dashes=f;this.lineOptions.fillColor=[e,e,e,e]}else this.lineOptions.positions=new Float32Array;this.line.update(this.lineOptions)};b.updateError=function(b,c,d,e){var g=this["error"+b],h=c["error_"+b.toLowerCase()],k=this["error"+b+"Options"];"x"===b.toLowerCase()&&h.copy_ystyle&&(h=c.error_y);this["hasError"+b]?(k.positions=d,k.errors=e,k.capSize=h.width,k.lineWidth=h.thickness/2,k.color=f(A(h.color,1),E(1,1),1)):k.positions=
new Float32Array;g.update(k)};b.expandAxesFast=function(b,c){for(var d,e,f=c||10,g=0;2>g;g++)d=this.scene[z[g]],(e=d._min)||(e=[]),e.push({val:b[g],pad:f}),(d=d._max)||(d=[]),d.push({val:b[g+2],pad:f})};b.expandAxesFancy=function(b,c,e){var f=this.scene;e={padded:!0,ppad:e};d.Axes.expand(f.xaxis,b,e);d.Axes.expand(f.yaxis,c,e)};b.dispose=function(){this.line.dispose();this.errorX.dispose();this.errorY.dispose();this.scatter.dispose();this.fancyScatter.dispose()};m.exports=function(b,c){var d=new h(b,
c.uid);return d.update(c),d}},{"../../constants/gl2d_dashes.json":319,"../../constants/gl_markers.json":321,"../../lib/gl_format_color":330,"../../lib/str2rgbarray":341,"../../plotly":348,"fast-isnumeric":58,"gl-error2d":60,"gl-line2d":66,"gl-scatter2d":131,"gl-scatter2d-fancy":126}],470:[function(b,m,g){var h=b("../../lib"),c=b("../scatter"),l=b("../scatter/xy_defaults"),e=b("../../components/errorbars/defaults"),f=b("./attributes");m.exports=function(b,d,g,m){function x(c,e){return h.coerce(b,d,
f,c,e)}var w=l(b,d,x);return w?(x("text"),x("mode",w<c.PTS_LINESONLY?"lines+markers":"lines"),c.hasLines(d)&&c.lineDefaults(b,d,g,x),c.hasMarkers(d)&&c.markerDefaults(b,d,g,m,x),x("fill"),"none"!==d.fill&&c.fillColorDefaults(b,d,g,x),e(b,d,g,{axis:"y"}),void e(b,d,g,{axis:"x",inherit:"y"})):void(d.visible=!1)}},{"../../components/errorbars/defaults":307,"../../lib":332,"../scatter":457,"../scatter/xy_defaults":458,"./attributes":468}],471:[function(b,m,g){g=b("../../plotly");m=m.exports={};g.Plots.register(m,
"scattergl",["gl2d","symbols","errorBarsOK","markerColorscale","showLegend"],{});m.attributes=b("./attributes");m.supplyDefaults=b("./defaults");m.colorbar=g.Scatter.colorbar;m.calc=g.Scatter3D.calc},{"../../plotly":348,"./attributes":468,"./defaults":470}],472:[function(b,m,g){function h(b){return{valType:"boolean",dflt:!1}}function c(b){return{show:{valType:"boolean",dflt:!1},project:{x:h("x"),y:h("y"),z:h("z")},color:{valType:"color",dflt:"#000"},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",
min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!1},highlightColor:{valType:"color",dflt:"#000"},highlightWidth:{valType:"number",min:1,max:16,dflt:2}}}g=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;m.exports={z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"data_array"},zauto:g.zauto,zmin:g.zmin,zmax:g.zmax,colorscale:g.colorscale,autocolorscale:b({},g.autocolorscale,{dflt:!1}),reversescale:g.reversescale,showscale:g.showscale,
contours:{x:c("x"),y:c("y"),z:c("z")},hidesurface:{valType:"boolean",dflt:!1},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":290,"../../lib/extend":328}],473:[function(b,m,
g){var h=b("../../components/colorscale/calc");m.exports=function(b,g){h(g,g.z,"","z")}},{"../../components/colorscale/calc":291}],474:[function(b,m,g){function h(b,c,d){this.scene=b;this.uid=d;this.surface=c;this.data=null;this.showContour=[!1,!1,!1];this.dataScale=1}function c(b,c){return void 0===c&&(c=1),b.map(function(b){var d=b[0];b=t(b[1]).toRgb();return{index:d,rgb:[b.r,b.g,b.b,c]}})}function l(b){var c=Math.max(b[0].shape[0],b[0].shape[1]);if(w>c){for(var c=w/c,d=[0|Math.floor(b[0].shape[0]*
c+1),0|Math.floor(b[0].shape[1]*c+1)],e=d[0]*d[1],g=0;3>g;++g){var h;h=b[g];var l=h.shape,m=[l[0]+2,l[1]+2],t=f(new Float32Array(m[0]*m[1]),m);h=(p.assign(t.lo(1,1).hi(l[0],l[1]),h),p.assign(t.lo(1).hi(l[0],1),h.hi(l[0],1)),p.assign(t.lo(1,m[1]-1).hi(l[0],1),h.lo(0,l[1]-1).hi(l[0],1)),p.assign(t.lo(0,1).hi(1,l[1]),h.hi(1)),p.assign(t.lo(m[0]-1,1).hi(1,l[1]),h.lo(l[0]-1)),t.set(0,0,h.get(0,0)),t.set(0,m[1]-1,h.get(0,l[1]-1)),t.set(m[0]-1,0,h.get(l[0]-1,0)),t.set(m[0]-1,m[1]-1,h.get(l[0]-1,l[1]-1)),
t);l=f(new Float32Array(e),d);v(l,h,[c,0,0,0,c,0,0,0,1]);b[g]=l}return c}return 1}var e=b("gl-surface3d"),f=b("ndarray"),v=b("ndarray-homography"),d=b("ndarray-fill"),p=b("ndarray-ops"),t=b("tinycolor2"),x=b("../../lib/str2rgbarray"),w=128;b=h.prototype;b.handlePick=function(b){if(b.object===this.surface){var c=[Math.min(0|Math.round(b.data.index[0]/this.dataScale-1),this.data.z[0].length-1),Math.min(0|Math.round(b.data.index[1]/this.dataScale-1),this.data.z.length-1)],d=[0,0,0];Array.isArray(this.data.x[0])?
d[0]=this.data.x[c[1]][c[0]]:d[0]=this.data.x[c[0]];Array.isArray(this.data.y[0])?d[1]=this.data.y[c[1]][c[0]]:d[1]=this.data.y[c[1]];d[2]=this.data.z[c[1]][c[0]];b.traceCoordinate=d;var e=this.scene.fullSceneLayout;b.dataCoordinate=[e.xaxis.d2l(d[0])*this.scene.dataScale[0],e.yaxis.d2l(d[1])*this.scene.dataScale[1],e.zaxis.d2l(d[2])*this.scene.dataScale[2]];d=this.data.text;return d&&d[c[1]]&&void 0!==d[c[1]][c[0]]?b.textLabel=d[c[1]][c[0]]:b.textLabel="",b.data.dataCoordinate=b.dataCoordinate.slice(),
this.surface.highlight(b.data),this.scene.glplot.spikes.position=b.dataCoordinate,!0}};b.setContourLevels=function(){for(var b=[[],[],[]],c=!1,d=0;3>d;++d)this.showContour[d]&&(c=!0,b[d]=this.scene.contourLevels[d]);c&&this.surface.update({levels:b})};b.update=function(b){var e,g=this.scene,h=g.fullSceneLayout,m=this.surface,p=b.opacity;e=c(b.colorscale,p);var t=b.z,v=b.x,w=b.y,B=h.xaxis,G=h.yaxis,F=h.zaxis,I=g.dataScale,h=t[0].length,D=t.length,h=[f(new Float32Array(h*D),[h,D]),f(new Float32Array(h*
D),[h,D]),f(new Float32Array(h*D),[h,D])],D=h[0],H=h[1],g=g.contourLevels;this.data=b;d(h[2],function(b,c){return F.d2l(t[c][b])*I[2]});Array.isArray(v[0])?d(D,function(b,c){return B.d2l(v[c][b])*I[0]}):d(D,function(b){return B.d2l(v[b])*I[0]});Array.isArray(w[0])?d(H,function(b,c){return G.d2l(w[c][b])*I[1]}):d(H,function(b,c){return G.d2l(w[c])*I[1]});this.dataScale=l(h);D={colormap:e,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!b.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,
!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:1};"opacity"in b&&1>b.opacity&&(D.opacity=.25*b.opacity);var H=[!0,!0,!0],K=[!0,!0,!0],O=["x","y","z"];for(e=0;3>e;++e){var L=b.contours[O[e]];H[e]=L.highlight;K[e]=L.show;D.showContour[e]=L.show||L.highlight;D.showContour[e]&&(D.contourProject[e]=[L.project.x,L.project.y,L.project.z],L.show?(this.showContour[e]=!0,
D.levels[e]=g[e],m.highlightColor[e]=D.contourColor[e]=x(L.color),L.usecolormap?m.highlightTint[e]=D.contourTint[e]=0:m.highlightTint[e]=D.contourTint[e]=1,D.contourWidth[e]=L.width):this.showContour[e]=!1,L.highlight&&(D.dynamicColor[e]=x(L.highlightColor),D.dynamicWidth[e]=L.highlightWidth))}D.coords=h;m.update(D);m.highlightEnable=H;m.contourEnable=K;m.visible=b.visible;m.snapToData=!0;"lighting"in b&&(m.ambientLight=b.lighting.ambient,m.diffuseLight=b.lighting.diffuse,m.specularLight=b.lighting.specular,
m.roughness=b.lighting.roughness,m.fresnel=b.lighting.fresnel);p&&1>p&&(m.supportsTransparency=!0)};b.dispose=function(){this.glplot.remove(this.surface);this.surface.dispose()};m.exports=function(b,c){var d=e({gl:b.glplot.gl}),f=new h(b,d,c.uid);return f.update(c),b.glplot.add(d),f}},{"../../lib/str2rgbarray":341,"gl-surface3d":161,ndarray:189,"ndarray-fill":178,"ndarray-homography":183,"ndarray-ops":184,tinycolor2:213}],475:[function(b,m,g){var h=b("../../lib"),c=b("../../components/colorscale/defaults"),
l=b("./attributes");m.exports=function(b,f,g,d){function m(c,d){return h.coerce(b,f,l,c,d)}var t;g=m("z");if(!g)return void(f.visible=!1);t=g[0].length;var x=g.length;if(m("x"),m("y"),!Array.isArray(f.x))for(f.x=[],g=0;t>g;++g)f.x[g]=g;if(m("text"),!Array.isArray(f.y))for(f.y=[],g=0;x>g;++g)f.y[g]=g;m("lighting.ambient");m("lighting.diffuse");m("lighting.specular");m("lighting.roughness");m("lighting.fresnel");m("hidesurface");m("opacity");m("colorscale");x=["x","y","z"];for(g=0;3>g;++g){var w="contours."+
x[g],u=m(w+".show"),r=m(w+".highlight");if(u||r)for(t=0;3>t;++t)m(w+".project."+x[t]);u&&(m(w+".color"),m(w+".width"),m(w+".usecolormap"));r&&(m(w+".highlightColor"),m(w+".highlightWidth"))}c(b,f,d,m,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":293,"../../lib":332,"./attributes":472}],476:[function(b,m,g){g=b("../../plotly");m=m.exports={};g.Plots.register(m,"surface",["gl3d","noOpacity"],{});m.attributes=b("./attributes");m.supplyDefaults=b("./defaults");m.colorbar=b("../heatmap/colorbar");
m.calc=b("./calc")},{"../../plotly":348,"../heatmap/colorbar":423,"./attributes":472,"./calc":473,"./defaults":475}]},{},[323])(323)});
!function(J,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):J.moment=b()}(this,function(){function J(){return ed.apply(null,arguments)}function b(b){return"[object Array]"===Object.prototype.toString.call(b)}function m(b){return b instanceof Date||"[object Date]"===Object.prototype.toString.call(b)}function g(b,c){var d,e=[];for(d=0;d<b.length;++d)e.push(c(b[d],d));return e}function h(b,c){return Object.prototype.hasOwnProperty.call(b,
c)}function c(b,c){for(var d in c)h(c,d)&&(b[d]=c[d]);return h(c,"toString")&&(b.toString=c.toString),h(c,"valueOf")&&(b.valueOf=c.valueOf),b}function l(b,c,d,e){return Da(b,c,d,e,!0).utc()}function e(b){return null==b._pf&&(b._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),b._pf}function f(b){if(null==b._isValid){var c=e(b);b._isValid=!(isNaN(b._d.getTime())||!(0>c.overflow)||c.empty||c.invalidMonth||
c.invalidWeekday||c.nullInput||c.invalidFormat||c.userInvalidated);b._strict&&(b._isValid=b._isValid&&0===c.charsLeftOver&&0===c.unusedTokens.length&&void 0===c.bigHour)}return b._isValid}function v(b){var d=l(NaN);return null!=b?c(e(d),b):e(d).userInvalidated=!0,d}function d(b,c){var d,f,g;if("undefined"!=typeof c._isAMomentObject&&(b._isAMomentObject=c._isAMomentObject),"undefined"!=typeof c._i&&(b._i=c._i),"undefined"!=typeof c._f&&(b._f=c._f),"undefined"!=typeof c._l&&(b._l=c._l),"undefined"!=
typeof c._strict&&(b._strict=c._strict),"undefined"!=typeof c._tzm&&(b._tzm=c._tzm),"undefined"!=typeof c._isUTC&&(b._isUTC=c._isUTC),"undefined"!=typeof c._offset&&(b._offset=c._offset),"undefined"!=typeof c._pf&&(b._pf=e(c)),"undefined"!=typeof c._locale&&(b._locale=c._locale),0<Ub.length)for(d in Ub)f=Ub[d],g=c[f],"undefined"!=typeof g&&(b[f]=g);return b}function p(b){d(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);!1===Vb&&(Vb=!0,J.updateOffset(this),Vb=!1)}function t(b){return b instanceof
p||null!=b&&null!=b._isAMomentObject}function x(b){return 0>b?Math.ceil(b):Math.floor(b)}function w(b){b=+b;var c=0;return 0!==b&&isFinite(b)&&(c=x(b)),c}function u(b,c,d){var e,f=Math.min(b.length,c.length),g=Math.abs(b.length-c.length),h=0;for(e=0;f>e;e++)(d&&b[e]!==c[e]||!d&&w(b[e])!==w(c[e]))&&h++;return h+g}function r(){}function y(b){return b?b.toLowerCase().replace("_","-"):b}function k(b){var c=null;if(!Mb[b]&&"undefined"!=typeof module&&module&&module.exports)try{c=Ua._abbr,require("./locale/"+
b),q(c)}catch(d){}return Mb[b]}function q(b,c){var d;return b&&(d="undefined"==typeof c?E(b):z(b,c),d&&(Ua=d)),Ua._abbr}function z(b,c){return null!==c?(c.abbr=b,Mb[b]=Mb[b]||new r,Mb[b].set(c),q(b),Mb[b]):(delete Mb[b],null)}function E(c){var d;if(c&&c._locale&&c._locale._abbr&&(c=c._locale._abbr),!c)return Ua;if(!b(c)){if(d=k(c))return d;c=[c]}a:{for(var e,f,g,h=0;h<c.length;){g=y(c[h]).split("-");d=g.length;for(e=(e=y(c[h+1]))?e.split("-"):null;0<d;){if(f=k(g.slice(0,d).join("-"))){c=f;break a}if(e&&
e.length>=d&&u(g,e,!0)>=d-1)break;d--}h++}c=null}return c}function A(b,c){var d=b.toLowerCase();ec[d]=ec[d+"s"]=ec[c]=b}function C(b){return"string"==typeof b?ec[b]||ec[b.toLowerCase()]:void 0}function B(b){var c,d,e={};for(d in b)h(b,d)&&(c=C(d),c&&(e[c]=b[d]));return e}function G(b,c){return function(d){return null!=d?(this._d["set"+(this._isUTC?"UTC":"")+b](d),J.updateOffset(this,c),this):F(this,b)}}function F(b,c){return b._d["get"+(b._isUTC?"UTC":"")+c]()}function I(b,c){var d;if("object"==typeof b)for(d in b)this.set(d,
b[d]);else if(b=C(b),"function"==typeof this[b])return this[b](c);return this}function D(b,c,d){var e=""+Math.abs(b);return(0<=b?d?"+":"":"-")+Math.pow(10,Math.max(0,c-e.length)).toString().substr(1)+e}function H(b,c,d,e){var f=e;"string"==typeof e&&(f=function(){return this[e]()});b&&(Wb[b]=f);c&&(Wb[c[0]]=function(){return D(f.apply(this,arguments),c[1],c[2])});d&&(Wb[d]=function(){return this.localeData().ordinal(f.apply(this,arguments),b)})}function K(b){return b.match(/\[[\s\S]/)?b.replace(/^\[|\]$/g,
""):b.replace(/\\/g,"")}function O(b){var c,d,e=b.match(hd);c=0;for(d=e.length;d>c;c++)Wb[e[c]]?e[c]=Wb[e[c]]:e[c]=K(e[c]);return function(f){var g="";for(c=0;d>c;c++)g+=e[c]instanceof Function?e[c].call(f,b):e[c];return g}}function L(b,c){return b.isValid()?(c=P(c,b.localeData()),Ic[c]=Ic[c]||O(c),Ic[c](b)):b.localeData().invalidDate()}function P(b,c){function d(b){return c.longDateFormat(b)||b}var e=5;for(sc.lastIndex=0;0<=e&&sc.test(b);)b=b.replace(sc,d),sc.lastIndex=0,--e;return b}function M(b,
c,d){gc[b]="function"==typeof c&&"[object Function]"===Object.prototype.toString.call(c)?c:function(b){return b&&d?d:c}}function Q(b,c){return h(gc,b)?gc[b](c._strict,c._locale):new RegExp(T(b))}function T(b){return b.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(b,c,d,e,f){return c||d||e||f}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function R(b,c){var d,e=c;"string"==typeof b&&(b=[b]);"number"==typeof c&&(e=function(b,d){d[c]=w(b)});for(d=0;d<b.length;d++)uc[b[d]]=e}function S(b,
c){R(b,function(b,d,e,f){e._w=e._w||{};c(b,e._w,e,f)})}function X(b,c){return(new Date(Date.UTC(b,c+1,0))).getUTCDate()}function V(b,c){var d;return"string"==typeof c&&(c=b.localeData().monthsParse(c),"number"!=typeof c)?b:(d=Math.min(b.date(),X(b.year(),c)),b._d["set"+(b._isUTC?"UTC":"")+"Month"](c,d),b)}function Y(b){return null!=b?(V(this,b),J.updateOffset(this,!0),this):F(this,"Month")}function W(b){var c,d=b._a;return d&&-2===e(b).overflow&&(c=0>d[$a]||11<d[$a]?$a:1>d[db]||d[db]>X(d[pb],d[$a])?
db:0>d[Qa]||24<d[Qa]||24===d[Qa]&&(0!==d[xb]||0!==d[qb]||0!==d[rb])?Qa:0>d[xb]||59<d[xb]?xb:0>d[qb]||59<d[qb]?qb:0>d[rb]||999<d[rb]?rb:-1,e(b)._overflowDayOfYear&&(pb>c||c>db)&&(c=db),e(b).overflow=c),b}function Z(b){!1===J.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function U(b,d){var e=!0;return c(function(){return e&&(Z(b+"\n"+Error().stack),e=!1),d.apply(this,arguments)},d)}function ea(b){var c,d,f=b._i,g=vc.exec(f);if(g){e(b).iso=
!0;c=0;for(d=jc.length;d>c;c++)if(jc[c][1].exec(f)){b._f=jc[c][0];break}c=0;for(d=Nb.length;d>c;c++)if(Nb[c][1].exec(f)){b._f+=(g[6]||" ")+Nb[c][0];break}f.match(fc)&&(b._f+="Z");fa(b)}else b._isValid=!1}function ga(b){var c=id.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ea(b),void(!1===b._isValid&&(delete b._isValid,J.createFromInputFallback(b))))}function ia(b,c,d,e,f,g,h){c=new Date(b,c,d,e,f,g,h);return 1970>b&&c.setFullYear(b),c}function ha(b){var c=new Date(Date.UTC.apply(null,arguments));
return 1970>b&&c.setUTCFullYear(b),c}function na(b){return 0===b%4&&0!==b%100||0===b%400}function sa(b,c,d){var e;c=d-c;d-=b.day();return d>c&&(d-=7),c-7>d&&(d+=7),e=ca(b).add(d,"d"),{week:Math.ceil(e.dayOfYear()/7),year:e.year()}}function ra(b,c,d){return null!=b?b:null!=c?c:d}function ya(b){var c,d,f,g=[];if(!b._d){d=new Date;d=b._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()];if(b._w&&null==b._a[db]&&null==b._a[$a]){var h,k,l,m,p,q;h=b._w;
null!=h.GG||null!=h.W||null!=h.E?(p=1,q=4,k=ra(h.GG,b._a[pb],sa(ca(),1,4).year),l=ra(h.W,1),m=ra(h.E,1)):(p=b._locale._week.dow,q=b._locale._week.doy,k=ra(h.gg,b._a[pb],sa(ca(),p,q).year),l=ra(h.w,1),null!=h.d?(m=h.d,p>m&&++l):m=null!=h.e?h.e+p:p);var r;h=6+p-q;q=ha(k,0,1+h).getUTCDay();p=(p>q&&(q+=7),m=null!=m?1*m:p,r=1+h+7*(l-1)-q+m,{year:0<r?k:k-1,dayOfYear:0<r?r:(na(k-1)?366:365)+r});b._a[pb]=p.year;b._dayOfYear=p.dayOfYear}b._dayOfYear&&(f=ra(b._a[pb],d[pb]),b._dayOfYear>(na(f)?366:365)&&(e(b)._overflowDayOfYear=
!0),c=ha(f,0,b._dayOfYear),b._a[$a]=c.getUTCMonth(),b._a[db]=c.getUTCDate());for(c=0;3>c&&null==b._a[c];++c)b._a[c]=g[c]=d[c];for(;7>c;c++)b._a[c]=g[c]=null==b._a[c]?2===c?1:0:b._a[c];24===b._a[Qa]&&0===b._a[xb]&&0===b._a[qb]&&0===b._a[rb]&&(b._nextDay=!0,b._a[Qa]=0);b._d=(b._useUTC?ha:ia).apply(null,g);null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[Qa]=24)}}function fa(b){if(b._f===J.ISO_8601)return void ea(b);b._a=[];e(b).empty=!0;var c,d,f,g,k,l=""+b._i,m=l.length,
p=0;f=P(b._f,b._locale).match(hd)||[];for(c=0;c<f.length;c++)if(g=f[c],(d=(l.match(Q(g,b))||[])[0])&&(k=l.substr(0,l.indexOf(d)),0<k.length&&e(b).unusedInput.push(k),l=l.slice(l.indexOf(d)+d.length),p+=d.length),Wb[g]){d?e(b).empty=!1:e(b).unusedTokens.push(g);var q=b;null!=d&&h(uc,g)&&uc[g](d,q._a,q,g)}else b._strict&&!d&&e(b).unusedTokens.push(g);e(b).charsLeftOver=m-p;0<l.length&&e(b).unusedInput.push(l);!0===e(b).bigHour&&12>=b._a[Qa]&&0<b._a[Qa]&&(e(b).bigHour=void 0);c=b._a;f=Qa;l=b._locale;
k=b._a[Qa];var m=b._meridiem,r,l=null==m?k:null!=l.meridiemHour?l.meridiemHour(k,m):null!=l.isPM?(r=l.isPM(m),r&&12>k&&(k+=12),r||12!==k||(k=0),k):k;c[f]=l;ya(b);W(b)}function ta(b){if(!b._d){var c=B(b._i);b._a=[c.year,c.month,c.day||c.date,c.hour,c.minute,c.second,c.millisecond];ya(b)}}function ka(g){var h=g._i,k=g._f;g._locale=g._locale||E(g._l);if(null===h||void 0===k&&""===h)g=v({nullInput:!0});else if("string"==typeof h&&(g._i=h=g._locale.preparse(h)),t(h))g=new p(W(h));else if(b(k)){var l,q,
r;if(0===g._f.length)e(g).invalidFormat=!0,g._d=new Date(NaN);else{for(h=0;h<g._f.length;h++)k=0,l=d({},g),null!=g._useUTC&&(l._useUTC=g._useUTC),l._f=g._f[h],fa(l),f(l)&&(k+=e(l).charsLeftOver,k+=10*e(l).unusedTokens.length,e(l).score=k,(null==r||r>k)&&(r=k,q=l));c(g,q||l)}}else k?fa(g):m(h)?g._d=h:Sa(g);return g}function Sa(c){var d=c._i;void 0===d?c._d=new Date:m(d)?c._d=new Date(+d):"string"==typeof d?ga(c):b(d)?(c._a=g(d.slice(0),function(b){return parseInt(b,10)}),ya(c)):"object"==typeof d?
ta(c):"number"==typeof d?c._d=new Date(d):J.createFromInputFallback(c)}function Da(b,c,d,e,f){var g={};"boolean"==typeof d&&(e=d,d=void 0);g._isAMomentObject=!0;g._useUTC=g._isUTC=f;g._l=d;g._i=b;g._f=c;g._strict=e;b=new p(W(ka(g)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function ca(b,c,d,e){return Da(b,c,d,e,!1)}function nb(c,d){var e,f;if(1===d.length&&b(d[0])&&(d=d[0]),!d.length)return ca();e=d[0];for(f=1;f<d.length;++f)d[f].isValid()&&!d[f][c](e)||(e=d[f]);return e}function Aa(b){b=
B(b);var c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0;this._milliseconds=+(b.millisecond||0)+1E3*(b.second||0)+6E4*(b.minute||0)+36E5*(b.hour||0);this._days=+g+7*f;this._months=+e+3*d+12*c;this._data={};this._locale=E();this._bubble()}function ja(b){return b instanceof Aa}function oa(b,c){H(b,0,0,function(){var b=this.utcOffset(),d="+";return 0>b&&(b=-b,d="-"),d+D(~~(b/60),2)+c+D(~~b%60,2)})}function Ya(b){b=(b||"").match(fc)||[];b=((b[b.length-1]||[])+"").match($b)||["-",0,0];var c=
+(60*b[1])+w(b[2]);return"+"===b[0]?c:-c}function Ma(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(t(b)||m(b)?+b:+ca(b))-+d,d._d.setTime(+d._d+e),J.updateOffset(d,!1),d):ca(b).local()}function ua(b){return 15*-Math.round(b._d.getTimezoneOffset()/15)}function Oa(){return this._isUTC&&0===this._offset}function Fa(b,c){var d,e,f,g=b;f=null;ja(b)?g={ms:b._milliseconds,d:b._days,M:b._months}:"number"==typeof b?(g={},c?g[c]=b:g.milliseconds=b):(f=kd.exec(b))?(d="-"===f[1]?-1:1,g={y:0,d:w(f[db])*d,h:w(f[Qa])*
d,m:w(f[xb])*d,s:w(f[qb])*d,ms:w(f[rb])*d}):(f=ld.exec(b))?(d="-"===f[1]?-1:1,g={y:za(f[2],d),M:za(f[3],d),d:za(f[4],d),h:za(f[5],d),m:za(f[6],d),s:za(f[7],d),w:za(f[8],d)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(f=ca(g.from),g=ca(g.to),f=(g=Ma(g,f),f.isBefore(g)?d=Ta(f,g):(d=Ta(g,f),d.milliseconds=-d.milliseconds,d.months=-d.months),d),g={},g.ms=f.milliseconds,g.M=f.months);return e=new Aa(g),ja(b)&&h(b,"_locale")&&(e._locale=b._locale),e}function za(b,c){var d=b&&parseFloat(b.replace(",",
"."));return(isNaN(d)?0:d)*c}function Ta(b,c){var d={milliseconds:0,months:0};return d.months=c.month()-b.month()+12*(c.year()-b.year()),b.clone().add(d.months,"M").isAfter(c)&&--d.months,d.milliseconds=+c-+b.clone().add(d.months,"M"),d}function eb(b,c){return function(d,e){var f,g;null===e||isNaN(+e)||(ic[c]||(Z("moment()."+c+"(period, number) is deprecated. Please use moment()."+c+"(number, period)."),ic[c]=!0),g=d,d=e,e=g);return d="string"==typeof d?+d:d,f=Fa(d,e),va(this,f,b),this}}function va(b,
c,d,e){var f=c._milliseconds,g=c._days;c=c._months;e=null==e?!0:e;f&&b._d.setTime(+b._d+f*d);g&&(f=F(b,"Date")+g*d,b._d["set"+(b._isUTC?"UTC":"")+"Date"](f));c&&V(b,F(b,"Month")+c*d);e&&J.updateOffset(b,g||c)}function Ca(){var b=this.clone().utc();return 0<b.year()&&9999>=b.year()?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():L(b,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):L(b,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function Ea(b){var c;return void 0===b?this._locale._abbr:(c=E(b),null!=
c&&(this._locale=c),this)}function Na(){return this._locale}function Ha(b,c){H(0,[b,b.length],0,c)}function qa(b,c,d){return sa(ca([b,11,31+c-d]),c,d).week}function Ia(b,c){H(b,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),c)})}function fb(b,c){return c._meridiemParse}function vb(b,c){c[rb]=w(1E3*("0."+b))}function Pa(b){return b}function ab(b,c,d,e){var f=E();c=l().set(e,c);return f[d](c,b)}function ob(b,c,d,e,f){if("number"==typeof b&&(c=b,b=void 0),b=b||"",null!=
c)return ab(b,c,d,f);var g=[];for(c=0;e>c;c++)g[c]=ab(b,c,d,f);return g}function hb(b,c,d,e){c=Fa(c,d);return b._milliseconds+=e*c._milliseconds,b._days+=e*c._days,b._months+=e*c._months,b._bubble()}function Va(b){return 0>b?Math.floor(b):Math.ceil(b)}function ib(b){return function(){return this.as(b)}}function Wa(b){return function(){return this._data[b]}}function wb(b,c,d,e,f){return f.relativeTime(c||1,!!d,b,e)}function Lb(){var b,c,d,e=yc(this._milliseconds)/1E3,f=yc(this._days),g=yc(this._months);
b=x(e/60);c=x(b/60);e%=60;b%=60;d=x(g/12);var g=g%12,h=this.asSeconds();return h?(0>h?"-":"")+"P"+(d?d+"Y":"")+(g?g+"M":"")+(f?f+"D":"")+(c||b||e?"T":"")+(c?c+"H":"")+(b?b+"M":"")+(e?e+"S":""):"P0D"}var ed,Ua,Ub=J.momentProperties=[],Vb=!1,Mb={},ec={},hd=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,sc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ic={},Wb={},gd=/\d/,cb=/\d\d/,fd=
/\d{3}/,pc=/\d{4}/,rc=/[+-]?\d{6}/,Ja=/\d\d?/,qc=/\d{1,3}/,Hc=/\d{1,4}/,tc=/[+-]?\d{1,6}/,ke=/\d+/,Xb=/[+-]?\d+/,fc=/Z|[+-]\d\d:?\d\d/gi,Db=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,gc={},uc={},pb=0,$a=1,db=2,Qa=3,xb=4,qb=5,rb=6;H("M",["MM",2],"Mo",function(){return this.month()+1});H("MMM",0,0,function(b){return this.localeData().monthsShort(this,b)});H("MMMM",0,0,function(b){return this.localeData().months(this,b)});A("month",
"M");M("M",Ja);M("MM",Ja,cb);M("MMM",Db);M("MMMM",Db);R(["M","MM"],function(b,c){c[$a]=w(b)-1});R(["MMM","MMMM"],function(b,c,d,f){f=d._locale.monthsParse(b,f,d._strict);null!=f?c[$a]=f:e(d).invalidMonth=b});var ic={};J.suppressDeprecationWarnings=!1;var vc=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],
["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Nb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],id=/^\/?Date\((\-?\d+)/i;J.createFromInputFallback=U("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(b){b._d=new Date(b._i+(b._useUTC?" UTC":""))});H(0,["YY",2],0,
function(){return this.year()%100});H(0,["YYYY",4],0,"year");H(0,["YYYYY",5],0,"year");H(0,["YYYYYY",6,!0],0,"year");A("year","y");M("Y",Xb);M("YY",Ja,cb);M("YYYY",Hc,pc);M("YYYYY",tc,rc);M("YYYYYY",tc,rc);R(["YYYYY","YYYYYY"],pb);R("YYYY",function(b,c){c[pb]=2===b.length?J.parseTwoDigitYear(b):w(b)});R("YY",function(b,c){c[pb]=J.parseTwoDigitYear(b)});J.parseTwoDigitYear=function(b){return w(b)+(68<w(b)?1900:2E3)};var Kc=G("FullYear",!1);H("w",["ww",2],"wo","week");H("W",["WW",2],"Wo","isoWeek");
A("week","w");A("isoWeek","W");M("w",Ja);M("ww",Ja,cb);M("W",Ja);M("WW",Ja,cb);S(["w","ww","W","WW"],function(b,c,d,e){c[e.substr(0,1)]=w(b)});H("DDD",["DDDD",3],"DDDo","dayOfYear");A("dayOfYear","DDD");M("DDD",qc);M("DDDD",fd);R(["DDD","DDDD"],function(b,c,d){d._dayOfYear=w(b)});J.ISO_8601=function(){};var le=U("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var b=ca.apply(null,arguments);return this>b?this:b}),jd=U("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",
function(){var b=ca.apply(null,arguments);return b>this?this:b});oa("Z",":");oa("ZZ","");M("Z",fc);M("ZZ",fc);R(["Z","ZZ"],function(b,c,d){d._useUTC=!0;d._tzm=Ya(b)});var $b=/([\+\-]|\d\d)/gi;J.updateOffset=function(){};var kd=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ld=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Fa.fn=Aa.prototype;var xc=eb(1,"add"),md=eb(-1,"subtract");J.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";
var nd=U("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(b){return void 0===b?this.localeData():this.locale(b)});H(0,["gg",2],0,function(){return this.weekYear()%100});H(0,["GG",2],0,function(){return this.isoWeekYear()%100});Ha("gggg","weekYear");Ha("ggggg","weekYear");Ha("GGGG","isoWeekYear");Ha("GGGGG","isoWeekYear");A("weekYear","gg");A("isoWeekYear","GG");M("G",Xb);M("g",Xb);M("GG",Ja,cb);
M("gg",Ja,cb);M("GGGG",Hc,pc);M("gggg",Hc,pc);M("GGGGG",tc,rc);M("ggggg",tc,rc);S(["gggg","ggggg","GGGG","GGGGG"],function(b,c,d,e){c[e.substr(0,2)]=w(b)});S(["gg","GG"],function(b,c,d,e){c[e]=J.parseTwoDigitYear(b)});H("Q",0,0,"quarter");A("quarter","Q");M("Q",gd);R("Q",function(b,c){c[$a]=3*(w(b)-1)});H("D",["DD",2],"Do","date");A("date","D");M("D",Ja);M("DD",Ja,cb);M("Do",function(b,c){return b?c._ordinalParse:c._ordinalParseLenient});R(["D","DD"],db);R("Do",function(b,c){c[db]=w(b.match(Ja)[0],
10)});var Lc=G("Date",!0);H("d",0,"do","day");H("dd",0,0,function(b){return this.localeData().weekdaysMin(this,b)});H("ddd",0,0,function(b){return this.localeData().weekdaysShort(this,b)});H("dddd",0,0,function(b){return this.localeData().weekdays(this,b)});H("e",0,0,"weekday");H("E",0,0,"isoWeekday");A("day","d");A("weekday","e");A("isoWeekday","E");M("d",Ja);M("e",Ja);M("E",Ja);M("dd",Db);M("ddd",Db);M("dddd",Db);S(["dd","ddd","dddd"],function(b,c,d){var f=d._locale.weekdaysParse(b);null!=f?c.d=
f:e(d).invalidWeekday=b});S(["d","e","E"],function(b,c,d,e){c[e]=w(b)});H("H",["HH",2],0,"hour");H("h",["hh",2],0,function(){return this.hours()%12||12});Ia("a",!0);Ia("A",!1);A("hour","h");M("a",fb);M("A",fb);M("H",Ja);M("h",Ja);M("HH",Ja,cb);M("hh",Ja,cb);R(["H","HH"],Qa);R(["a","A"],function(b,c,d){d._isPm=d._locale.isPM(b);d._meridiem=b});R(["h","hh"],function(b,c,d){c[Qa]=w(b);e(d).bigHour=!0});var me=G("Hours",!0);H("m",["mm",2],0,"minute");A("minute","m");M("m",Ja);M("mm",Ja,cb);R(["m","mm"],
xb);var ne=G("Minutes",!1);H("s",["ss",2],0,"second");A("second","s");M("s",Ja);M("ss",Ja,cb);R(["s","ss"],qb);var od=G("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)});H(0,["SS",2],0,function(){return~~(this.millisecond()/10)});H(0,["SSS",3],0,"millisecond");H(0,["SSSS",4],0,function(){return 10*this.millisecond()});H(0,["SSSSS",5],0,function(){return 100*this.millisecond()});H(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});H(0,["SSSSSSS",7],0,function(){return 1E4*
this.millisecond()});H(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});H(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});A("millisecond","ms");M("S",qc,gd);M("SS",qc,cb);M("SSS",qc,fd);var lb;for(lb="SSSS";9>=lb.length;lb+="S")M(lb,ke);for(lb="S";9>=lb.length;lb+="S")R(lb,vb);var Mc=G("Milliseconds",!1);H("z",0,0,"zoneAbbr");H("zz",0,0,"zoneName");var ba=p.prototype;ba.add=xc;ba.calendar=function(b,c){var d=b||ca(),e=Ma(d,this).startOf("day"),e=this.diff(e,"days",!0),
e=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(c&&c[e]||this.localeData().calendar(e,this,ca(d)))};ba.clone=function(){return new p(this)};ba.diff=function(b,c,d){var e;b=Ma(b,this);var f=6E4*(b.utcOffset()-this.utcOffset());c=C(c);if("year"===c||"month"===c||"quarter"===c){var g,f=12*(b.year()-this.year())+(b.month()-this.month()),h=this.clone().add(f,"months");b=(0>b-h?(e=this.clone().add(f-1,"months"),g=(b-h)/(h-e)):(e=this.clone().add(f+
1,"months"),g=(b-h)/(e-h)),-(f+g));"quarter"===c?b/=3:"year"===c&&(b/=12)}else e=this-b,b="second"===c?e/1E3:"minute"===c?e/6E4:"hour"===c?e/36E5:"day"===c?(e-f)/864E5:"week"===c?(e-f)/6048E5:e;return d?b:x(b)};ba.endOf=function(b){return b=C(b),void 0===b||"millisecond"===b?this:this.startOf(b).add(1,"isoWeek"===b?"week":b).subtract(1,"ms")};ba.format=function(b){b=L(this,b||J.defaultFormat);return this.localeData().postformat(b)};ba.from=function(b,c){return this.isValid()?Fa({to:this,from:b}).locale(this.locale()).humanize(!c):
this.localeData().invalidDate()};ba.fromNow=function(b){return this.from(ca(),b)};ba.to=function(b,c){return this.isValid()?Fa({from:this,to:b}).locale(this.locale()).humanize(!c):this.localeData().invalidDate()};ba.toNow=function(b){return this.to(ca(),b)};ba.get=I;ba.invalidAt=function(){return e(this).overflow};ba.isAfter=function(b,c){var d;return c=C("undefined"!=typeof c?c:"millisecond"),"millisecond"===c?(b=t(b)?b:ca(b),+this>+b):(d=t(b)?+b:+ca(b),d<+this.clone().startOf(c))};ba.isBefore=function(b,
c){var d;return c=C("undefined"!=typeof c?c:"millisecond"),"millisecond"===c?(b=t(b)?b:ca(b),+b>+this):(d=t(b)?+b:+ca(b),+this.clone().endOf(c)<d)};ba.isBetween=function(b,c,d){return this.isAfter(b,d)&&this.isBefore(c,d)};ba.isSame=function(b,c){var d;return c=C(c||"millisecond"),"millisecond"===c?(b=t(b)?b:ca(b),+this===+b):(d=+ca(b),+this.clone().startOf(c)<=d&&d<=+this.clone().endOf(c))};ba.isValid=function(){return f(this)};ba.lang=nd;ba.locale=Ea;ba.localeData=Na;ba.max=jd;ba.min=le;ba.parsingFlags=
function(){return c({},e(this))};ba.set=I;ba.startOf=function(b){switch(b=C(b)){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return"week"===b&&this.weekday(0),"isoWeek"===b&&this.isoWeekday(1),"quarter"===b&&this.month(3*Math.floor(this.month()/3)),this};ba.subtract=md;ba.toArray=function(){return[this.year(),this.month(),this.date(),
this.hour(),this.minute(),this.second(),this.millisecond()]};ba.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};ba.toDate=function(){return this._offset?new Date(+this):this._d};ba.toISOString=Ca;ba.toJSON=Ca;ba.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};ba.unix=function(){return Math.floor(+this/1E3)};ba.valueOf=
function(){return+this._d-6E4*(this._offset||0)};ba.year=Kc;ba.isLeapYear=function(){return na(this.year())};ba.weekYear=function(b){var c=sa(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==b?c:this.add(b-c,"y")};ba.isoWeekYear=function(b){var c=sa(this,1,4).year;return null==b?c:this.add(b-c,"y")};ba.quarter=ba.quarters=function(b){return null==b?Math.ceil((this.month()+1)/3):this.month(3*(b-1)+this.month()%3)};ba.month=Y;ba.daysInMonth=function(){return X(this.year(),
this.month())};ba.week=ba.weeks=function(b){var c=this.localeData().week(this);return null==b?c:this.add(7*(b-c),"d")};ba.isoWeek=ba.isoWeeks=function(b){var c=sa(this,1,4).week;return null==b?c:this.add(7*(b-c),"d")};ba.weeksInYear=function(){var b=this.localeData()._week;return qa(this.year(),b.dow,b.doy)};ba.isoWeeksInYear=function(){return qa(this.year(),1,4)};ba.date=Lc;ba.day=ba.days=function(b){var c=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=b)var d=b,e=this.localeData(),c=
(b="string"!=typeof d?d:isNaN(d)?(d=e.weekdaysParse(d),"number"==typeof d?d:null):parseInt(d,10),this.add(b-c,"d"));return c};ba.weekday=function(b){var c=(this.day()+7-this.localeData()._week.dow)%7;return null==b?c:this.add(b-c,"d")};ba.isoWeekday=function(b){return null==b?this.day()||7:this.day(this.day()%7?b:b-7)};ba.dayOfYear=function(b){var c=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==b?c:this.add(b-c,"d")};ba.hour=ba.hours=me;ba.minute=ba.minutes=
ne;ba.second=ba.seconds=od;ba.millisecond=ba.milliseconds=Mc;ba.utcOffset=function(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ya(b)),16>Math.abs(b)&&(b*=60),!this._isUTC&&c&&(d=ua(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?va(this,Fa(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,J.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:ua(this)};ba.utc=function(b){return this.utcOffset(0,
b)};ba.local=function(b){return this._isUTC&&(this.utcOffset(0,b),this._isUTC=!1,b&&this.subtract(ua(this),"m")),this};ba.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ya(this._i)),this};ba.hasAlignedHourOffset=function(b){return b=b?ca(b).utcOffset():0,0===(this.utcOffset()-b)%60};ba.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};ba.isDSTShifted=function(){if("undefined"!=
typeof this._isDSTShifted)return this._isDSTShifted;var b={};if(d(b,this),b=ka(b),b._a){var c=b._isUTC?l(b._a):ca(b._a);this._isDSTShifted=this.isValid()&&0<u(b._a,c.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted};ba.isLocal=function(){return!this._isUTC};ba.isUtcOffset=function(){return this._isUTC};ba.isUtc=Oa;ba.isUTC=Oa;ba.zoneAbbr=function(){return this._isUTC?"UTC":""};ba.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};ba.dates=U("dates accessor is deprecated. Use date instead.",
Lc);ba.months=U("months accessor is deprecated. Use month instead",Y);ba.years=U("years accessor is deprecated. Use year instead",Kc);ba.zone=U("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(b,c){return null!=b?("string"!=typeof b&&(b=-b),this.utcOffset(b,c),this):-this.utcOffset()});var wa=r.prototype;wa._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",
sameElse:"L"};wa.calendar=function(b,c,d){b=this._calendar[b];return"function"==typeof b?b.call(c,d):b};wa._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};wa.longDateFormat=function(b){var c=this._longDateFormat[b],d=this._longDateFormat[b.toUpperCase()];return c||!d?c:(this._longDateFormat[b]=d.replace(/MMMM|MM|DD|dddd/g,function(b){return b.slice(1)}),this._longDateFormat[b])};wa._invalidDate="Invalid date";
wa.invalidDate=function(){return this._invalidDate};wa._ordinal="%d";wa.ordinal=function(b){return this._ordinal.replace("%d",b)};wa._ordinalParse=/\d{1,2}/;wa.preparse=Pa;wa.postformat=Pa;wa._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};wa.relativeTime=function(b,c,d,e){var f=this._relativeTime[d];return"function"==typeof f?f(b,c,d,e):f.replace(/%d/i,
b)};wa.pastFuture=function(b,c){var d=this._relativeTime[0<b?"future":"past"];return"function"==typeof d?d(c):d.replace(/%s/i,c)};wa.set=function(b){var c,d;for(d in b)c=b[d],"function"==typeof c?this[d]=c:this["_"+d]=c;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)};wa.months=function(b){return this._months[b.month()]};wa._months="January February March April May June July August September October November December".split(" ");wa.monthsShort=function(b){return this._monthsShort[b.month()]};
wa._monthsShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");wa.monthsParse=function(b,c,d){var e,f,g;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(e=0;12>e;e++)if((f=l([2E3,e]),d&&!this._longMonthsParse[e]&&(this._longMonthsParse[e]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[e]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),d||this._monthsParse[e]||(g="^"+this.months(f,"")+"|^"+
this.monthsShort(f,""),this._monthsParse[e]=new RegExp(g.replace(".",""),"i")),d&&"MMMM"===c&&this._longMonthsParse[e].test(b))||d&&"MMM"===c&&this._shortMonthsParse[e].test(b)||!d&&this._monthsParse[e].test(b))return e};wa.week=function(b){return sa(b,this._week.dow,this._week.doy).week};wa._week={dow:0,doy:6};wa.firstDayOfYear=function(){return this._week.doy};wa.firstDayOfWeek=function(){return this._week.dow};wa.weekdays=function(b){return this._weekdays[b.day()]};wa._weekdays="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");
wa.weekdaysMin=function(b){return this._weekdaysMin[b.day()]};wa._weekdaysMin="Su Mo Tu We Th Fr Sa".split(" ");wa.weekdaysShort=function(b){return this._weekdaysShort[b.day()]};wa._weekdaysShort="Sun Mon Tue Wed Thu Fri Sat".split(" ");wa.weekdaysParse=function(b){var c,d,e;this._weekdaysParse=this._weekdaysParse||[];for(c=0;7>c;c++)if(this._weekdaysParse[c]||(d=ca([2E3,1]).day(c),e="^"+this.weekdays(d,"")+"|^"+this.weekdaysShort(d,"")+"|^"+this.weekdaysMin(d,""),this._weekdaysParse[c]=new RegExp(e.replace(".",
""),"i")),this._weekdaysParse[c].test(b))return c};wa.isPM=function(b){return"p"===(b+"").toLowerCase().charAt(0)};wa._meridiemParse=/[ap]\.?m?\.?/i;wa.meridiem=function(b,c,d){return 11<b?d?"pm":"PM":d?"am":"AM"};q("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(b){var c=b%10,c=1===w(b%100/10)?"th":1===c?"st":2===c?"nd":3===c?"rd":"th";return b+c}});J.lang=U("moment.lang is deprecated. Use moment.locale instead.",q);J.langData=U("moment.langData is deprecated. Use moment.localeData instead.",
E);var zb=Math.abs,rd=ib("ms"),Qb=ib("s"),sd=ib("m"),td=ib("h"),pe=ib("d"),qe=ib("w"),ud=ib("M"),re=ib("y"),xd=Wa("milliseconds"),vd=Wa("seconds"),Gb=Wa("minutes"),Nc=Wa("hours"),wd=Wa("days"),kc=Wa("months"),yd=Wa("years"),Hb=Math.round,Bb={s:45,m:45,h:22,d:26,M:11},yc=Math.abs,Ba=Aa.prototype;Ba.abs=function(){var b=this._data;return this._milliseconds=zb(this._milliseconds),this._days=zb(this._days),this._months=zb(this._months),b.milliseconds=zb(b.milliseconds),b.seconds=zb(b.seconds),b.minutes=
zb(b.minutes),b.hours=zb(b.hours),b.months=zb(b.months),b.years=zb(b.years),this};Ba.add=function(b,c){return hb(this,b,c,1)};Ba.subtract=function(b,c){return hb(this,b,c,-1)};Ba.as=function(b){var c,d,e=this._milliseconds;if(b=C(b),"month"===b||"year"===b)return c=this._days+e/864E5,d=this._months+4800*c/146097,"month"===b?d:d/12;switch(c=this._days+Math.round(146097*this._months/4800),b){case "week":return c/7+e/6048E5;case "day":return c+e/864E5;case "hour":return 24*c+e/36E5;case "minute":return 1440*
c+e/6E4;case "second":return 86400*c+e/1E3;case "millisecond":return Math.floor(864E5*c)+e;default:throw Error("Unknown unit "+b);}};Ba.asMilliseconds=rd;Ba.asSeconds=Qb;Ba.asMinutes=sd;Ba.asHours=td;Ba.asDays=pe;Ba.asWeeks=qe;Ba.asMonths=ud;Ba.asYears=re;Ba.valueOf=function(){return this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*w(this._months/12)};Ba._bubble=function(){var b,c,d,e,f,g=this._milliseconds,h=this._days,k=this._months,l=this._data;return 0<=g&&0<=h&&0<=k||0>=g&&
0>=h&&0>=k||(g+=864E5*Va(146097*k/4800+h),h=0,k=0),l.milliseconds=g%1E3,b=x(g/1E3),l.seconds=b%60,c=x(b/60),l.minutes=c%60,d=x(c/60),l.hours=d%24,h+=x(d/24),f=x(4800*h/146097),k+=f,h-=Va(146097*f/4800),e=x(k/12),k%=12,l.days=h,l.months=k,l.years=e,this};Ba.get=function(b){return b=C(b),this[b+"s"]()};Ba.milliseconds=xd;Ba.seconds=vd;Ba.minutes=Gb;Ba.hours=Nc;Ba.days=wd;Ba.weeks=function(){return x(this.days()/7)};Ba.months=kc;Ba.years=yd;Ba.humanize=function(b){var c=this.localeData(),d;d=!b;var e=
Fa(this).abs(),f=Hb(e.as("s")),g=Hb(e.as("m")),h=Hb(e.as("h")),k=Hb(e.as("d")),l=Hb(e.as("M")),e=Hb(e.as("y")),f=f<Bb.s&&["s",f]||1===g&&["m"]||g<Bb.m&&["mm",g]||1===h&&["h"]||h<Bb.h&&["hh",h]||1===k&&["d"]||k<Bb.d&&["dd",k]||1===l&&["M"]||l<Bb.M&&["MM",l]||1===e&&["y"]||["yy",e];d=(f[2]=d,f[3]=0<+this,f[4]=c,wb.apply(null,f));return b&&(d=c.pastFuture(+this,d)),c.postformat(d)};Ba.toISOString=Lb;Ba.toString=Lb;Ba.toJSON=Lb;Ba.locale=Ea;Ba.localeData=Na;Ba.toIsoString=U("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
Lb);Ba.lang=nd;H("X",0,0,"unix");H("x",0,0,"valueOf");M("x",Xb);M("X",/[+-]?\d+(\.\d{1,3})?/);R("X",function(b,c,d){d._d=new Date(1E3*parseFloat(b,10))});R("x",function(b,c,d){d._d=new Date(w(b))});J.version="2.10.6";ed=ca;J.fn=ba;J.min=function(){var b=[].slice.call(arguments,0);return nb("isBefore",b)};J.max=function(){var b=[].slice.call(arguments,0);return nb("isAfter",b)};J.utc=l;J.unix=function(b){return ca(1E3*b)};J.months=function(b,c){return ob(b,c,"months",12,"month")};J.isDate=m;J.locale=
q;J.invalid=v;J.duration=Fa;J.isMoment=t;J.weekdays=function(b,c){return ob(b,c,"weekdays",7,"day")};J.parseZone=function(){return ca.apply(null,arguments).parseZone()};J.localeData=E;J.isDuration=ja;J.monthsShort=function(b,c){return ob(b,c,"monthsShort",12,"month")};J.weekdaysMin=function(b,c){return ob(b,c,"weekdaysMin",7,"day")};J.defineLocale=z;J.weekdaysShort=function(b,c){return ob(b,c,"weekdaysShort",7,"day")};J.normalizeUnits=C;J.relativeTimeThreshold=function(b,c){return void 0===Bb[b]?
!1:void 0===c?Bb[b]:(Bb[b]=c,!0)};return J});
(function(){function J(b){"string"!==typeof b&&(b=String(b));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(b))throw new TypeError("Invalid character in header field name");return b.toLowerCase()}function b(b){"string"!==typeof b&&(b=String(b));return b}function m(b){this.map={};b instanceof m?b.forEach(function(b,c){this.append(c,b)},this):b&&Object.getOwnPropertyNames(b).forEach(function(c){this.append(c,b[c])},this)}function g(b){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=
!0}function h(b){return new Promise(function(c,d){b.onload=function(){c(b.result)};b.onerror=function(){d(b.error)}})}function c(b){var c=new FileReader;c.readAsArrayBuffer(b);return h(c)}function l(){this.bodyUsed=!1;this.v=function(b){this.i=b;if("string"===typeof b)this.j=b;else if(t.blob&&Blob.prototype.isPrototypeOf(b))this.h=b;else if(t.formData&&FormData.prototype.isPrototypeOf(b))this.u=b;else if(!b)this.j="";else if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(b))throw Error("unsupported BodyInit type");
};t.blob?(this.blob=function(){var b=g(this);if(b)return b;if(this.h)return Promise.resolve(this.h);if(this.u)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this.j]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var b=g(this);if(b)return b;if(this.h){var b=this.h,c=new FileReader;c.readAsText(b);return h(c)}if(this.u)throw Error("could not read FormData body as text");return Promise.resolve(this.j)}):this.text=function(){var b=
g(this);return b?b:Promise.resolve(this.j)};t.formData&&(this.formData=function(){return this.text().then(f)});this.json=function(){return this.text().then(JSON.parse)};return this}function e(b,c){c=c||{};var d=c.body;if(e.prototype.isPrototypeOf(b)){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url;this.credentials=b.credentials;c.headers||(this.headers=new m(b.headers));this.method=b.method;this.mode=b.mode;d||(d=b.i,b.bodyUsed=!0)}else this.url=b;this.credentials=c.credentials||
this.credentials||"omit";if(c.headers||!this.headers)this.headers=new m(c.headers);var f=c.method||this.method||"GET",g=f.toUpperCase();this.method=-1<x.indexOf(g)?g:f;this.mode=c.mode||this.mode||null;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&d)throw new TypeError("Body not allowed for GET or HEAD requests");this.v(d)}function f(b){var c=new FormData;b.trim().split("&").forEach(function(b){if(b){var d=b.split("=");b=d.shift().replace(/\+/g," ");d=d.join("=").replace(/\+/g,
" ");c.append(decodeURIComponent(b),decodeURIComponent(d))}});return c}function v(b){var c=new m;b.getAllResponseHeaders().trim().split("\n").forEach(function(b){b=b.trim().split(":");var d=b.shift().trim();c.append(d,b.join(":").trim())});return c}function d(b,c){c||(c={});this.v(b);this.type="default";this.status=c.status;this.ok=200<=this.status&&300>this.status;this.statusText=c.statusText;this.headers=c.headers instanceof m?c.headers:new m(c.headers);this.url=c.url||""}if(!self.fetch){m.prototype.append=
function(c,d){c=J(c);d=b(d);var e=this.map[c];e||(e=[],this.map[c]=e);e.push(d)};m.prototype["delete"]=function(b){delete this.map[J(b)]};m.prototype.get=function(b){return(b=this.map[J(b)])?b[0]:null};m.prototype.getAll=function(b){return this.map[J(b)]||[]};m.prototype.has=function(b){return this.map.hasOwnProperty(J(b))};m.prototype.set=function(c,d){this.map[J(c)]=[b(d)]};m.prototype.forEach=function(b,c){Object.getOwnPropertyNames(this.map).forEach(function(d){this.map[d].forEach(function(e){b.call(c,
e,d,this)},this)},this)};var p;if(p="FileReader"in self&&"Blob"in self)try{p=!0}catch(u){p=!1}var t={blob:p,formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self},x="DELETE GET HEAD OPTIONS POST PUT".split(" ");e.prototype.clone=function(){return new e(this)};l.call(e.prototype);l.call(d.prototype);d.prototype.clone=function(){return new d(this.i,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})};d.error=function(){var b=new d(null,{status:0,statusText:""});
b.type="error";return b};var w=[301,302,303,307,308];d.redirect=function(b,c){if(-1===w.indexOf(c))throw new RangeError("Invalid status code");return new d(null,{status:c,headers:{location:b}})};self.Headers=m;self.Request=e;self.Response=d;self.fetch=function(b,c){return new Promise(function(f,g){var h;h=e.prototype.isPrototypeOf(b)&&!c?b:new e(b,c);var l=new XMLHttpRequest;l.onload=function(){var b=1223===l.status?204:l.status;if(100>b||599<b)g(new TypeError("Network request failed"));else{var c=
l.statusText,e=v(l),h;h="responseURL"in l?l.$:/^X-Request-URL:/m.test(l.getAllResponseHeaders())?l.getResponseHeader("X-Request-URL"):void 0;f(new d("response"in l?l.response:l.responseText,{status:b,statusText:c,headers:e,url:h}))}};l.onerror=function(){g(new TypeError("Network request failed"))};l.open(h.method,h.url,!0);"include"===h.credentials&&(l.withCredentials=!0);"responseType"in l&&t.blob&&(l.responseType="blob");h.headers.forEach(function(b,c){l.setRequestHeader(c,b)});l.send("undefined"===
typeof h.i?null:h.i)})};self.fetch.Z=!0}})();var space=(new CanvasSpace("jumbo")).display(),form=new Form(space),pts=[],lines=[],counter=0,minPts=75,mono=new Image;mono.src="/images/tbmonogram.svg";var xloc=space.size.x/2-125,yloc=space.size.y/2-125,xsize=250,ysize=250,iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;iOS&&(xsize*=10,ysize*=10);
function populationControl(){200<pts.length&&pts.shift();0===counter++%20&&pts.length>=minPts&&pts.shift();if(pts.length<minPts)for(var J=pts.length;J<minPts;J++)pts.push(new Vector(space.size.x*Math.random(),space.size.y*Math.random()))}function connect(){lines=[];pts.forEach(function(J){pts.forEach(function(b){100>J.distance(b)&&lines.push((new Pair(J)).to(b))})})}
space.add({animate:function(J,b,m){form.stroke("rgba(0,0,0,.5)",.5);form.lines(lines);form.stroke(!1);form.fill("#c8c8c8");form.points(pts,1,!0);connect();populationControl();form.cc.drawImage(mono,xloc,yloc,xsize,ysize)},onMouseAction:function(J,b,m,g){"move"==J&&Util.chance(.07)&&pts.push(new Vector(b,m))}});space.bindMouse();space.play();
var width=document.getElementById("stepschart").offsetWidth,height=40/70*width,layout={xaxis:{tickangle:-60},width:width,height:height,margin:{r:0,t:0,b:100}},headers={method:"get",headers:{Accept:"application/json","Content-Type":"application/json"}},tester;
fetch("https://traeblain.apispark.net/v1/fitbit/?%24size=31&%24sort=date%20DESC",headers).then(function(J){return J.json()}).then(function(J){for(var b=[{x:[],y:[],type:"scatter",mode:"lines+markers",marker:{symbol:"circle",color:"#66cccc",size:8,line:{width:1,color:"#499393"}}}],m=[{x:[],y:[],type:"scatter",mode:"lines+markers",marker:{symbol:"circle",color:"#66cccc",size:8,line:{width:1,color:"#499393"}}}],g=[{x:[],y:[],type:"scatter",mode:"lines+markers",marker:{symbol:"circle",color:"#66cccc",
size:8,line:{width:1,color:"#499393"}}}],h=0,c=0,l=0,e=0,f="",f=J.length-1;0<=f;f--)b[0].x.push(moment(J[f].date,"MM/DD/YYYY").format("MMM Do")),m[0].x.push(moment(J[f].date,"MM/DD/YYYY").format("MMM Do")),g[0].x.push(moment(J[f].date,"MM/DD/YYYY").format("MMM Do")),b[0].y.push(J[f].steps),m[0].y.push(J[f].floors),g[0].y.push(J[f].calories),7>f&&(h+=J[f].steps,c+=J[f].floors,l=l+J[f].light_active+J[f].active+J[f].very_active,e+=J[f].sedentary);Plotly.newPlot("stepschart",b,layout,{displaylogo:!1});
Plotly.newPlot("floorchart",m,layout,{displaylogo:!1});Plotly.newPlot("caloriechart",g,layout,{displaylogo:!1});document.getElementById("fitsteps").innerHTML=h+" ("+Math.round(.0494968655*h)/100+" miles)";document.getElementById("fitfloors").innerHTML=c+" ("+10*c+" ft)";b=Math.round(l/(e+l)*1E3)/10;document.getElementById("fitpercent").innerHTML=b+"%";J=Math.round((J[0].light_active+J[0].active+J[0].very_active)/(J[0].sedentary+(J[0].light_active+J[0].active+J[0].very_active))*1E3)/10;f=21>=J?"Lazy":
32>=J?"Sedentary":43>=J?"Moving":"Can't Stop!";document.getElementById("fitlevel").innerHTML=f})["catch"](function(J){document.getElementById("fitlevel").innerHTML="Error Fetching Data...";console.log("parsing failed",J)});
fetch("https://traeblain.apispark.net/v1/dash/?%24size=100",headers).then(function(J){return J.json()}).then(function(J){J.sort(function(b,c){return moment(c.started,"MMMM D, YYYY at hh:mmA")-moment(b.started,"MMMM D, YYYY at hh:mmA")});for(var b=[{x:[],y:[],type:"scatter",mode:"lines+markers",marker:{symbol:"pentagon",color:"#596aaf",size:8,line:{width:1,color:"#005082"}}}],m=[{x:[],y:[],type:"scatter",mode:"markers",marker:{symbol:"pentagon",color:"#596aaf",size:8,line:{width:1,color:"#005082"}}}],
g=[{x:[],y:[],type:"scatter",mode:"markers",marker:{symbol:"pentagon",color:"#596aaf",size:8,line:{width:1,color:"#005082"}}}],h=0,c=0,l=0,e=0,f=J.length-1;0<=f;f--){var v=moment(J[f].started,"MMMM D, YYYY at hh:mmA");b[0].x.push(v.format("MMM Do h:mma"));m[0].x.push(v.format("MMM Do a"));g[0].x.push(v.format("MMM Do a"));b[0].y.push(J[f].score);m[0].y.push(parseFloat(J[f].distance.substr(0,J[f].distance.length-3)));g[0].y.push(parseFloat(J[f].avg_mph.substr(0,J[f].avg_mph.length-4)));7>f&&(h+=parseFloat(J[f].distance.substr(0,
J[f].distance.length-3)),c+=parseFloat(J[f].avg_mpg.substr(0,J[f].avg_mpg.length-4))+5,l+=parseFloat(J[f].distance.substr(0,J[f].distance.length-3))/(parseFloat(J[f].avg_mpg.substr(0,J[f].avg_mpg.length-4))+5),e+=J[f].score)}c/=7;e/=7;Plotly.newPlot("drivescorechart",b,layout,{displaylogo:!1});Plotly.newPlot("drivedistchart",m,layout,{displaylogo:!1});Plotly.newPlot("mphchart",g,layout,{displaylogo:!1});document.getElementById("dashscore").innerHTML=Math.round(e);document.getElementById("dashdistance").innerHTML=
Math.round(100*h)/100+" miles";document.getElementById("dashmpg").innerHTML=Math.round(100*c)/100+" mpg";document.getElementById("dashfuel").innerHTML=Math.round(1E3*l)/1E3+" gallons"})["catch"](function(J){document.getElementById("dashscore").innerHTML="Error Fetching Data...";console.log("parsing failed",J)});
fetch("https://traeblain.apispark.net/v1/statuses/?%24sort=Link%20DESC&%24size=10",headers).then(function(J){return J.json()}).then(function(J){J=J[0];document.getElementById("twitter-status").innerHTML='<blockquote class="embedly-card" data-card-controls="0" data-card-key="bdfeaf9e6c274fb9a648b7a58a607e12"><h4><a href="'+J.Link+'">Trae Blain on Twitter</a></h4><p>'+J.Tweet+"</p></blockquote>"})["catch"](function(J){document.getElementById("twitter-status").innerHTML="Error getting Tweet...";console.log("parsing failed",
J)});
fetch("https://traeblain.apispark.net/v1/reads/?%24size=80",headers).then(function(J){return J.json()}).then(function(J){J.sort(function(b,c){return moment(c.started,"MMMM D, YYYY at hh:mmA")-moment(b.started,"MMMM D, YYYY at hh:mmA")});var b=J[J.length-1];tester=J[J.length-1];J=J.length;var m=Math.round(J/42*100),g=J-Math.floor(moment().dayOfYear()/365.25*42);document.getElementById("readcount").innerHTML=J;document.getElementById("readtotal").innerHTML=42;document.getElementById("readingprogress").firstChild.innerHTML=m+
"%";document.getElementById("readingprogress").firstChild.setAttribute("style","width: "+m+"%;");document.getElementById("bookprogress").innerHTML=Math.abs(g);0===g?document.getElementById("bookprogress").parentNode.innerHTML="Reading right on schedule.":0<g?document.getElementById("booksahead").innerHTML="ahead of":document.getElementById("booksahead").innerHTML="behind";g=/(^<a.+?)<br[/]>/g;J=g.exec(b.Image_Link)[1];g=/.+author:\s(.+)</g;m=g.exec(b.Image_Link)[1];g=/.+review:\s<.+?>(.+)</gm;g=g.exec(b.Image_Link)[1];
document.getElementById("lastread").innerHTML=J+"<h5>"+b.Title+" by "+m+"</h5><p>"+g+'</p><p><a href="'+b.Link+'">See my review here &raquo;</a></p>'})["catch"](function(J){document.getElementById("lastread").innerHTML="Data collection failed...";console.log("parsing failed",J)});
fetch("https://traeblain.apispark.net/v1/topartists/",headers).then(function(J){return J.json()}).then(function(J){for(var b="",m=0;m<=J.length-1;m++)b=0==m?'<div{0} style="background-image: url({1})"><span class="artistbottom"><p><a target="_blank" href="http://www.last.fm/music/{5}">{3}</a></p><p><em>{4} plays</em></p></span></div>'.replace("{0}",' class="first"').replace("{1}",J[m].ImageLink).replace("{3}",J[m].Artist).replace("{4}",J[m].Plays).replace("{5}",J[m].Artist.replace(" ","+"))+'<div class="artistwrap">':
b+'<div{0} style="background-image: url({1})"><span class="artistbottom"><p><a target="_blank" href="http://www.last.fm/music/{5}">{3}</a></p><p><em>{4} plays</em></p></span></div>'.replace("{0}","").replace("{1}",J[m].ImageLink).replace("{3}",J[m].Artist).replace("{4}",J[m].Plays).replace("{5}",J[m].Artist.replace(" ","+"));document.getElementById("music").innerHTML='<div class="musicwrap">'+b+"</div></div>"})["catch"](function(J){document.getElementById("music").innerHTML="Failed to gather music data...";
console.log("parsing failed",J)});function selectAll(J){J.select()};
